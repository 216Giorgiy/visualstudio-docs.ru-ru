---
title: Создание среды разработки Node.js с контейнерами с помощью Kubernetes в облаке — шаг 4 — отладка контейнера в Kubernetes | Документы Майкрософт
author: ghogen
ms.author: ghogen
ms.date: 02/20/2018
ms.topic: tutorial
ms.prod: visual-studio-dev15
ms.technology: vs-azure
description: Быстрая разработка Kubernetes с контейнерами и микрослужбами в Azure
keywords: Docker, Kubernetes, Azure, AKS, служба контейнеров Azure, контейнеры
manager: douge
ms.openlocfilehash: 2d1ec5fe0436b394083a247faa4519505aa21ceb
ms.sourcegitcommit: e13e61ddea6032a8282abe16131d9e136a927984
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
ms.locfileid: "31888549"
---
# <a name="get-started-on-connected-environment-with-nodejs"></a>Начало работы в подключенной среде с Node.js

Предыдущий шаг: [создание контейнера Node.js в Kubernetes](get-started-nodejs-03.md)

[!INCLUDE[](includes/debug-intro.md)]

[!INCLUDE[](includes/init-debug-assets-vscode.md)]


## <a name="select-the-vsce-debug-configuration"></a>Выбор конфигурации отладки VSCE
1. Чтобы открыть представление отладки, щелкните значок отладки в **строке активности** в боковой части VS Code.
1. Выберите **Запустить программу (VSCE)** в качестве активной конфигурации отладки.

![](media/debug-configuration-nodejs.png)

> [!Note]
> Если вы не видите команды подключенной среды в палитре команд, убедитесь, что [установили расширения VS Code для подключенной среды](get-started-nodejs-01.md#get-kubernetes-debugging-for-vs-code).

## <a name="debug-the-container-in-kubernetes"></a>Отладка контейнера в Kubernetes
Нажмите **F5** для отладки кода в Kubernetes.

Это аналогично выполнению команды `up`. Код синхронизируется со средой разработки при запуске отладки, и выполняется сборка и развертывание контейнера в Kubernetes. На этот раз, разумеется, отладчик прикреплен к удаленному контейнеру.

[!INCLUDE[](includes/tip-vscode-status-bar-url.md)]

Установите точку останова в файле кода на стороне сервера, например в `app.get('/api'...` в `server.js`. Обновите страницу браузера или нажмите кнопку "Повторить", и вы достигнете точки останова и сможете осуществить пошаговое выполнение кода.

У вас будет полный доступ к сведениям об отладке, как если бы код выполнялся локально, например стек вызовов, локальные переменные, сведения об исключениях и т. д.

## <a name="edit-code-and-refresh-the-debug-session"></a>Изменение кода и обновление сеанса отладки
Измените код при активном отладчике. Например, еще раз измените приветственное сообщение:

```javascript
app.get('/api', function (req, res) {
    res.send('**** Hello from webfrontend running in Azure! ****');
});
```

Сохраните файл и на **панели действий отладки** нажмите кнопку **Обновить**. 

![](media/debug-action-refresh-nodejs.png)

Вместо повторной сборки и развертывания нового образа контейнера при каждой правке, что часто занимает немало времени, подключенная среда перезапустит процесс Node.js между сеансами отладки, чтобы ускорить цикл правки и отладки.

Обновите веб-приложение в браузере или нажмите кнопку *Повторить*. Вы увидите ваше сообщение в пользовательском интерфейсе.


## <a name="use-nodemon-to-develop-even-faster"></a>Использование NodeMon для ускоренной разработки
*Nodemon* — это популярный инструмент, который используют разработчики Node.js для быстрой разработки. Вместо перезапуска процесса Node вручную при каждой правке кода на стороне сервера разработчики часто настраивают в своем проекте Node *nodemon* для отслеживания правок файла и автоматического перезапуска процесса сервера. При таком сценарии разработчик просто обновляет свой браузер после внесения изменений в код.

В подключенной среде вы можете использовать те же рабочие процессы разработки, которые вы используете при локальной разработке. Чтобы проиллюстрировать этот принцип, в примере проекта `webfrontend` используется *nodemon* (он настроен как зависимость разработки в `package.json`).

Попробуйте выполнить следующие действия:
1. Остановите отладчик VS Code.
1. Щелкните значок отладки в **строке активности** в боковой части VS Code. 
1. Выберите **Присоединить (VSCE)** в качестве активной конфигурации отладки.
1. Нажмите F5.

В этой конфигурации контейнер настроен на запуск *nodemon*. При внесении изменений в код сервера *nodemon* автоматически перезапускает процесс Node, как при локальной разработке. 
1. Снова измените приветственное сообщение в `server.js` и сохраните файл.
1. Обновите браузер или нажмите кнопку *Повторить*, чтобы увидеть изменения.

**Теперь у вас есть метод для быстрой итерации кода и отладки непосредственно в Kubernetes.** Далее вы узнаете, как создать и вызвать второй контейнер.

> [!div class="nextstepaction"]
> [Вызов службы, запущенной в отдельном контейнере](get-started-nodejs-05.md)

