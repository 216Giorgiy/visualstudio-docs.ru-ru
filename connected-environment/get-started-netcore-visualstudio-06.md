---
title: Создание среды разработки .NET Core с контейнерами с помощью Kubernetes в облаке с Visual Studio — шаг 6 — сведения о коллективной разработке | Документы Майкрософт
author: johnsta
ms.author: johnsta
ms.date: 02/20/2018
ms.topic: get-started-article
ms.technology: vsce-kubernetes
description: Быстрая разработка Kubernetes с контейнерами и микрослужбами в Azure
keywords: Docker, Kubernetes, Azure, AKS, служба контейнеров Azure, контейнеры
manager: ghogen
ms.openlocfilehash: fb05df7782c23c6caa973e0c1ad3e9433e8b2470
ms.sourcegitcommit: 900ed1e299cd5bba56249cef8f5cf3981b10cb1c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2018
---
# <a name="get-started-on-connected-environment-with-net-core-and-visual-studio"></a>Начало работы в подключенной среде с .NET Core и Visual Studio

Предыдущий шаг: [вызов другого контейнера](get-started-netcore-visualstudio-05.md)

## <a name="learn-about-team-development"></a>Сведения о коллективной разработке

До этого моменты мы выполняли код приложения так, будто работаем над приложением в одиночку. В этом разделе мы узнаем, как подключенная среда упрощает коллективную разработку.
* Возможность работать в одной среде разработки для команды разработчиков.
* Поддержка изолированной итерации кода каждым разработчиком без риска помешать другим.
* Сквозное тестирование кода до фиксации без создания макетов или имитации зависимостей.

## <a name="challenges-with-developing-microservices"></a>Трудности разработки микрослужб
В данный момент наш пример приложения выглядит очень просто. Однако в реальной ситуации все усложняется при добавлении других служб и расширении команды разработчиков.

Представьте себе, что работаете над службой, которая взаимодействует с десятками других служб.

1. Будет невозможно запускать все эти службы локально во время разработки. У компьютера, который вы используете для разработки, может не хватать ресурсов для выполнения всего приложения. Или, возможно, в приложении есть конечные точки, к которым не должно быть открытого доступа (например, приложение отвечает на веб-перехватчик из приложения SaaS).
1. Вы можете попытаться запускать только те службы, от которых зависите, но в этом случае вам нужно знать всю систему зависимостей (например, зависимости зависимостей). И не так-то просто узнать, как собрать и запустить зависимости, над которыми вы не работали.
1. Некоторые разработчики находят выход, используя имитацию или макетирование многих зависимостей служб. Иногда это помогает, но управление этими макетами вскоре может потребовать чрезмерных усилий. Кроме того, ваша среда разработки будет значительно отличаться от рабочей среды, а в разработку начнут вкрадываться ошибки.
1. В результате любое сквозное тестирование будет затруднено. Интеграционное тестирование можно выполнять только после фиксации, а значит, вы заметите проблемы уже на более позднем этапе разработки.

    ![](media/microservices-challenges.png)

## <a name="work-in-a-shared-development-environment"></a>Работа в общей среде разработки
В подключенной среде можно настраивать *общую* среду разработки в Azure. Каждый разработчик может сосредоточиться на своей части приложения и последовательно разрабатывать *код до фиксации* в среде, которая уже содержит все остальные службы и облачные ресурсы, от которых зависят их сценарии. Зависимости всегда находятся в актуальном состоянии, и разработчики работают в среде, отражающей рабочую.

## <a name="work-in-your-own-space"></a>Работа в своем пространстве
При разработке кода для службы и до записи после изменения код часто находится не в лучшем состоянии. Вы по-прежнему последовательно выстраиваете его, тестируете и экспериментируете с решениями. Подключенная среда обеспечивает отдельное **пространство**, позволяющее работать изолированно, без риска помешать другим членам команды.

Выполните следующие действия, чтобы обе службы `webfrontend` и `mywebapi` выполнялись в среде разработки  **и в `mainline` пространстве**.
1. Закройте все сеансы F5 и отладки для обеих служб, но не закрывайте проекты в окнах Visual Studio.
2. Переключитесь в окно Visual Studio с проектом `mywebapi` и нажмите Ctrl+F5, чтобы запустить службу без присоединенного отладчика
3. Переключитесь в окно Visual Studio с проектом `webfrontend` и нажмите Ctrl+F5, чтобы также запустить его.

> [!Note]
Иногда необходимо обновить браузер после изначального отображения веб-страницы по нажатию клавиш Ctrl+F5.

Любой пользователь, который перейдет по общедоступному URL-адресу к веб-приложению, вызовет написанный нами путь кода, который запустится в обеих службах в пространстве по умолчанию `mainline`. Теперь предположим, что мы хотим продолжить разработку `mywebapi`. Как это сделать и не помешать другим разработчикам, использующим эту среду разработки? Для этого мы настраиваем собственное пространство.

### <a name="create-a-new-space"></a>Создание нового пространства
В Visual Studio можно создавать дополнительные пространства, которые будут использоваться при нажатии F5 или Ctrl+F5 для службы. Вы можете назвать пространство как угодно и использовать в любых целях (например, `sprint4` или `demo`).

Для создания нового пространства выполните следующие действия.
1. Переключитесь в окно Visual Studio с проектом `mywebapi`.
2. В **обозревателе решений** щелкните проект правой кнопкой мыши и выберите пункт **Свойства**.
3. Выберите вкладку **Отладка** слева, чтобы открыть параметры подключенной среды.
4. Здесь можно изменять или создавать подключенные среды и пространства, которые будут использоваться при нажатии F5 или Ctrl+F5. *Убедитесь, что выбрали созданную ранее подключенную среду*.
5. В раскрывающемся списке **Пространство** выберите **< Создать новое пространство…>**.

    ![](images/Settings.png)

6. В диалоговом окне **Добавить пространство** введите имя пространства и нажмите **ОК**. Я назвал новое пространство своим именем (scott), чтобы мои коллеги знали, в каком пространстве я работаю.

    ![](images/AddSpace.png)

7. Теперь на странице свойств проекта вы видите свою среду разработки и новое пространство.

    ![](images/Settings2.png)

### <a name="update-code-for-mywebapi"></a>Обновите код для *mywebapi*

1. В проекте `mywebapi` измените в коде метод `string Get(int id)` в файле `ValuesController.cs` следующим образом:
 
    ```csharp
    [HttpGet("{id}")]
    public string Get(int id)
    {
        return "mywebapi now says something new";
    }
    ```

2. Задайте точку останова в обновленном блоке кода (возможно, она уже задана).
3. Нажмите F5, чтобы запустить службу `mywebapi`. Служба запустится в вашей среде разработки с помощью выбранного пространства, в моем случае это `scott`.

На этой диаграмме показано, как работают разные пространства. Синие линии изображают запрос через пространство `mainline`. Это путь по умолчанию, если к URL-адресу не добавлено пространство. Зеленые линии изображают запрос через пространство `scott`.

![](media/Space-Routing.png)

Эта встроенная возможность подключенной среды позволяет выполнить сквозное тестирование в общей среде, при этом каждому разработчику не приходится воссоздавать полный стек служб в своем пространстве. Следует помнить, что для данного маршрута необходимо переадресовать заголовки распространения в коде приложения, как показано в предыдущем шаге этого руководства.

## <a name="test-code-running-in-the-scott-space"></a>Тестирование кода в пространстве `scott`
Для тестирования нашей новой версии `mywebapi` вместе с `webfrontend` откройте в браузере URL-адрес точки общего доступа для `webfrontend` (например, https://webfrontend-teamenv.vsce.io)) и перейдите на страницу About. Вы увидите исходное сообщение "Привет от webfrontend и Привет от mywebapi".

Теперь добавьте элемент "scott-" к URL-адресу (это будет выглядеть примерно так: https://scott-webfrontend-teamenv.vsce.io) и обновите браузер. Точка останова, заданная в вашем проекте `mywebapi`, должна сработать. Нажмите F5, чтобы продолжить, и в браузере должно появиться новое сообщение: "Привет от webfrontend, а mywebapi теперь говорит что-то новое". Это связано с тем, что путь к обновленному коду в `mywebapi` выполняется в пространстве `scott`.

> [!div class="nextstepaction"]
> [Сводка](get-started-netcore-visualstudio-07.md)