---
title: Введение в функции Azure
description: Использование функций Azure в Visual Studio для Mac.
author: asb3993
ms.author: amburns
ms.date: 05/06/2018
ms.topic: article
ms.technology: vs-ide-install
ms.assetid: 25CD47A4-5B32-4734-8EF3-E24A02AABF29
ms.openlocfilehash: 5d787efbd09ad7f2d4a1f5f72b8f1493d8c6c587
ms.sourcegitcommit: 33c954fbc8e05f7ba54bfa2c0d1bc1f9bbc68876
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2018
---
# <a name="introduction-to-azure-functions"></a>Введение в функции Azure

Функции Azure позволяют создавать и запускать управляемые событиями фрагменты кода (функции) в облаке без необходимости явной подготовки и управления инфраструктурой. Дополнительные сведения о функциях Azure см. в [документации по функциям Azure](https://docs.microsoft.com/azure/azure-functions/).

## <a name="requirements"></a>Требования

Средства функций Azure включены в **Visual Studio для Mac 7.5**.

Для создания и развертывания функций необходимо также наличие подписки на Azure, которая доступна бесплатно по адресу [https://azure.com/free](https://azure.com/free).

## <a name="creating-your-first-azure-functions-project"></a>Создание первого проекта с функциями Azure

1. В Visual Studio для Mac выберите **Файл > Новое решение…** 
2. В диалоговом окне нового проекта выберите шаблон "Функции Azure" в разделе **Облако > Общие** и нажмите кнопку **Далее**:

    ![Диалоговое окно нового проекта с параметром "Функции Azure"](media/azure-functions-image1.png)

3. Введите **Имя проекта** и нажмите кнопку **Создать**.

Visual Studio для Mac создаст проект .NET Standard, содержащий функцию по умолчанию HttpTrigger. Он также включает ссылки NuGet на различные пакеты **AzureWebJobs**, а также на пакет **Newtonsoft.Json**.

![Окно редактора Visual Studio для Mac с только что созданной из шаблона функцией Azure](media/azure-functions-newproj.png)

Новый проект содержит следующие файлы:

* **HttpTrigger.cs** — этот класс содержит шаблонный код функции, активируемой по HTTP. Он содержит атрибут **FunctionName** с именем функции и атрибут триггера **HttpTrigger**, указывающий на то, что функция вызывается HTTP-запросом. Дополнительные сведения о методе функции см. в статье [Справочник разработчика C# по функциям Azure](https://docs.microsoft.com/azure/azure-functions/functions-dotnet-class-library).
* **host.json** — этот файл описывает параметры глобальной конфигурации для узла функции. Пример файла и сведения о доступных параметрах для этого файла см. в статье [Справочник по файлу host.json для функций Azure](https://docs.microsoft.com/azure/azure-functions/functions-host-json).
* **local.settings.json** — этот файл содержит все параметры для локального выполнения функций. Эти параметры используются в основных средствах функций Azure. Дополнительные сведения см. в разделе [Файл с локальными параметрами](https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local#local-settings-file) статьи об основных инструментах функций Azure.

После создания нового проекта функций Azure в Visual Studio для Mac мы можем протестировать созданную по умолчанию функцию, активируемую по HTTP, с локального компьютера.

<!--
## Create an Azure storage account

[Describe why this step is necessary and what it does]

1. Log on to your account at [https://portal.azure.com](https://portal.azure.com).
2. Under the **Favorites** section, located on the left of the screen, select **Storage Accounts**:
    ![]()
3. Select **Add** to create a new storage account:
    ![]()
4. Enter a globally unique name for the **Name** and reuse it for the **Resource group**. You can keep all the other items as their default.
    ![]()
5. Click **Create**. It might take a few minutes to create the storage account. You'll get a notification once it has been successfully created.
6. Select the **Go to resource** button from the notification:
    ![]()
-->

## <a name="testing-the-function-locally"></a>Тестирование функции локально

Поддержка функций Azure в Visual Studio для Mac позволяет тестировать и выполнять отладку функции на локальном компьютере разработчика.

1. Чтобы проверить работу локально, нажмите кнопку **запуска** в Visual Studio для Mac:

    ![Кнопка запуска отладки в Visual Studio для Mac](media/azure-functions-run.png)

1. После запуска проекта начнется локальная отладка функции Azure и откроется новое окно терминала, как показано на следующем рисунке: 

    ![вывод функции в окне терминала](media/azure-functions-terminal.png) 

    Скопируйте URL-адрес из выходных данных.

3. Вставьте URL-адрес для HTTP-запроса в адресной строке браузера. Добавьте строку запроса `?name=<yourname>` в конец URL-адреса и выполните запрос. Ниже показан ответ в браузере на локальный запрос GET, возвращенный функцией:

    ![http-запрос в браузере](media/azure-functions-httpreq.png)

## <a name="creating-a-new-function"></a>Создание новой функции

Шаблоны функций позволяют быстро создавать новые функции с помощью наиболее распространенных триггеров и шаблонов. При создании нового проекта функций Azure в него автоматически включается функция HttpTrigger. Чтобы создать другой тип функции, выполните следующие действия:

1. Удалите файл **HttpTrigger.cs**, щелкнув по нему и выбрав **Удалить**. В следующем предупреждении выберите **Удалить**, чтобы удалить файл из проекта:

    ![диалоговое окно удаления файла из проекта](media/azure-functions-remove.png)

2. Чтобы добавить новую функцию, щелкните правой кнопкой мыши по имени проекта и выберите **Добавить > Добавить функцию...**:

    ![пункт контекстного меню для добавления новой функции](media/azure-functions-addnew.png)

3. В диалоговом окне **Новая функция Azure** выберите необходимую функцию:

    ![диалоговое окно создания функции azure](media/azure-functions-newfunction.png)

    Список шаблонов функций Azure приведен в следующем разделе.

## <a name="available-function-templates"></a>Доступные шаблоны функций

- **HTTP** — запускает выполнение кода с помощью HTTP-запроса. Существует явные шаблоны для следующих триггеров HTTP:
    - Http GET CRUD
    - Http POST CRUD
    - Триггер HTTP с параметрами
    - Триггер HTTP
- **Таймер** — выполняет очистку или другие пакетные задачи по предопределенному расписанию. Этот шаблон имеет два поля: имя и расписание, которое представляет собой выражение CRON из шести полей. Дополнительные сведения см. в [статье о работе с таймерами в функциях Azure](https://docs.microsoft.com/azure/azure-functions/functions-create-scheduled-function)
- **Триггер GitHub** — реагирует на события, происходящие в репозиториях GitHub. Дополнительные сведения см. в [статье о работе с GitHub в функциях Azure](https://docs.microsoft.com/azure/azure-functions/functions-create-github-webhook-triggered-function)
    - Комментатор GitHub — функция, которая будет запускаться и добавлять комментарий при получении веб-перехватчика GitHub для проблемы или запроса на вытягивание.
    - Веб-перехватчик GitHub — функция, которая будет запускаться при получении веб-перехватчика GitHub
- **Триггер BLOB** — обрабатывает BLOB-объекты хранилища Azure при их добавлении к контейнеру. Помимо имени функции в этом шаблоне также необходимо указать путь и параметры подключения. В параметре "Путь" указывается путь в учетной записи хранения, который будет отслеживаться триггером. В качестве учетной записи подключения указывается имя параметра приложения, содержащего строку подключения вашей учетной записи хранения. Дополнительные сведения см. в [статье о работе с хранилищами BLOB-объектов в функциях Azure](https://docs.microsoft.com/azure/azure-functions/functions-create-storage-blob-triggered-function).
- **Триггер очереди** — функция, которая будет отвечать на сообщения, помещаемые в очередь хранилища Azure. Помимо имени функции в шаблоне необходимо указать **Путь** (имя очереди, из которого будут считываться сообщения) и учетную запись хранения в параметре **Подключение** (имя параметра приложения, содержащего строку подключения вашей учетной записи хранения). Дополнительные сведения см. в [статье о работе с очередями хранилищ в функциях Azure](https://docs.microsoft.com/azure/azure-functions/functions-create-storage-queue-triggered-function).
- **Универсальный веб-перехватчик** — это простая функция, которая будет выполняться каждый раз при получении запроса от любых служб, поддерживающих веб-перехватчики. Дополнительные сведения см. в [статье о работе с универсальными веб-перехватчиками в функциях Azure](https://docs.microsoft.com/azure/azure-functions/functions-create-generic-webhook-triggered-function)
- **Изменение размеров изображения** — функция, которая создает изображения измененного размера при каждом добавлении BLOB-объекта в контейнер. В шаблоне необходимо указать путь и строку подключения для триггера, вывод для маленьких изображений и вывод для изображений среднего размера.
- **Токен SAS** — функция, которая создает токен SAS для указанного контейнера и имени BLOB-объекта службы хранилища Azure. Помимо имени функции в этом шаблоне также необходимо указать путь и параметры подключения. В параметре "Путь" указывается путь в учетной записи хранения, который будет отслеживаться триггером. В качестве учетной записи подключения указывается имя параметра приложения, содержащего строку подключения вашей учетной записи хранения. Также необходимо задать **права доступа**. Уровень авторизации определяет, требует ли функция ключ API, и какой ключ необходимо использовать. Функция использует ключ функции, администратор использует главный ключ. Дополнительные сведения см. в примере [Функции Azure C# для создания токенов SAS](https://azure.microsoft.com/resources/samples/functions-dotnet-sas-token/).
- **Оркестрация устойчивых функций** — устойчивые функции позволяют писать функции с отслеживанием состояния в средах без сервера. Расширение управляет состоянием, создает контрольные точки и перезагружается. Дополнительные сведения см. в руководстве по [устойчивым функциям](https://docs.microsoft.com/azure/azure-functions/durable-functions-overview)