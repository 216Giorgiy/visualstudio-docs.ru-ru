---
title: "Итераторы и генераторы (JavaScript) | Документы Майкрософт"
ms.custom: 
ms.date: 01/18/2017
ms.prod: windows-client-threshold
ms.reviewer: 
ms.suite: 
ms.technology:
- devlang-javascript
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- JavaScript
- TypeScript
- DHTML
ms.assetid: 68ef5b2f-0349-492b-b557-73ff2a2f90cf
caps.latest.revision: 14
author: mikejo5000
ms.author: mikejo
manager: ghogen
ms.translationtype: HT
ms.sourcegitcommit: 9713f09b7379b14b9362e3853a910948935c501e
ms.openlocfilehash: 85c27969609a38b87b15c727e9c8aef89ee77032
ms.contentlocale: ru-ru
ms.lasthandoff: 08/11/2017

---
# <a name="iterators-and-generators-javascript"></a>Итераторы и генераторы (JavaScript)
Итератор — это объект, который используется для обхода объекта контейнера, такого как список. В JavaScript объект итератора не является отличающимся встроенным объектом, а представляет собой объект, реализующий метод `next` для доступа к следующему элементу в объекте контейнера.  
  
 В [!INCLUDE[jsv12text](../../javascript/includes/jsv12text-md.md)] можно создавать собственные пользовательские итераторы. Однако обычно гораздо проще использовать генераторы, которые существенно упрощают создание итераторов. Генераторы представляют собой тип функции, которая является основой для итераторов. Сведения о создании пользовательского итератора с помощью функции генератора см. в разделе [Генераторы](#Generators).  
  
> [!CAUTION]
>  Генераторы поддерживаются в [!INCLUDE[jsv12textExp](../../javascript/includes/jsv12textexp-md.md)].  
  
## <a name="iterators"></a>Итераторы  
 Реализация итератора JavaScript включает два или три объекта, которые соответствуют конкретным интерфейсам:  
  
-   интерфейс Iterable;  
  
-   интерфейс Iterator;  
  
-   интерфейс IteratorResult.  
  
 С помощью этих интерфейсов можно создавать пользовательские итераторы. Это позволяет проходить по итерируемому объекту с помощью выражения `for…of`.  
  
### <a name="iterable-interface"></a>Интерфейс Iterable  
 Интерфейс Iterable является обязательным интерфейсом для итерируемого объекта (объекта, для которого можно получить итератор). Например, `C` в `for (let e of C)` должен реализовывать интерфейс Iterable.  
  
 Итерируемый объект должен предоставлять метод Symbol.iterator, который возвращает итератор.  
  
```JavaScript  
obj[Symbol.iterator] = function() { return iterObj; }  
```  
  
 Это свойство должно быть функцией, которая не принимает аргументы и возвращает объект (`iterObject`), соответствующий интерфейсу `Iterator`.  
  
 Итерируемыми являются многие встроенные типы, включая массивы. Цикл `for…of` использует итерируемый объект. (Однако не все встроенные итерируемые объекты являются итераторами. Например, объект массива сам не является итератором, но является итерируемым, тогда как ArrayIterator также является итерируемым.)  
  
### <a name="iterator-interface"></a>Интерфейс Iterator  
 Объект, возвращаемый методом Symbol.iterator, должен реализовывать метод `next`. Метод `next` имеет следующий синтаксис.  
  
```JavaScript  
iterObj.next() = function() { return iterResultObj; };  
```  
  
 Метод `next` является функцией, которая возвращает значение. Функция возвращает объект (`iterResultObj`), соответствующий интерфейсу `IteratorResult`. Если предыдущий вызов метода `next` итератора вернул объект `IteratorResult`, свойство `done` которого имеет значение true, итерация завершается и метод `next` не вызывается повторно.  
  
 Итераторы также могут включать метод `return`, гарантирующий надлежащее удаление итератора при окончании использования сценария с ним.  
  
### <a name="iteratorresult-interface"></a>Интерфейс IteratorResult  
 Интерфейс IteratorResult является обязательным интерфейсом для получения результата метода `next` в итераторе. Объект, возвращаемый `next`, должен предоставлять свойства `done` и `value`.  
  
```JavaScript  
var iterResultObj = { done: true|false, value: value }  
```  
  
 Свойство `done` возвращает состояние вызова метода `next` итератора — true или false. Если достигнут конец итератора, `done` возвращает значение true. Если конец не достигнут, `done` возвращает false и значение будет доступно. Если свойство `done` (его собственное или наследуемое) не существует, в качестве значения результата `done` принимается false.  
  
 Если `done` имеет значение false, свойство `value` возвращает текущее значение элемента итерации. Если `done` имеет значение true, это будет возвращаемым значением итератора в случае, если указано возвращаемое значение. Если у итератора отсутствует возвращаемое значение, `value` не определяется. В этом случае свойство `value` может отсутствовать в соответствующем объекте, если оно не наследует явное свойство значения.  
  
<a name="Generators"></a>   
## <a name="generators"></a>Генераторы  
 Чтобы быстро создать и использовать пользовательские итераторы, создайте функцию генератора с помощью синтаксиса функции * и одного или нескольких выражений `yield`. Функция генератора возвращает итератор (то есть генератор) для выполнения тела функции. Функция выполняется к следующему выражению `yield` или `return`.  
  
 Вызовите метод `next` итератора для возвращения следующего значения из функции генератора.  
  
 В следующем примере показан генератор, который возвращает итератор для объекта строки.  
  
```JavaScript  
function* stringIter() {  
    var str = "bobsyouruncle";  
    var idx = 0;  
    while(idx < str.length)  
        yield str[idx++];  
}  
  
var si = stringIter();  
  
console.log(si.next().value);  
console.log(si.next().value);  
console.log(si.next().value);  
  
// Output:  
// b  
// o  
// b  
  
```  
  
 В генераторе выражение операнда yield завершает вызов `next` и возвращает объект `IteratorResult` с двумя свойствами `done` (`done=false`) и `value` (`value=operand`). `operand` является необязательным, и, если будет отсутствовать, его значение останется неопределенным.  
  
 В генераторе выражение `return` завершает генератор, возвращая `IteratorResult` с `done=true` вместе с результатом необязательного операнда для свойства значения.  
  
 Можно также использовать выражение `yield*` вместо `yield` для делегирования другому генератору или другому итерируемому объекту, например массиву или строке.  
  
 Если в предыдущий пример добавить следующий код, `yield*` делегируется генератору `stringIter`.  
  
```JavaScript  
function* strIter() {  
    yield "jo";  
    yield* stringIter();  
}  
  
var si2 = strIter();  
  
console.log(si2.next().value);  
console.log(si2.next().value);  
console.log(si2.next().value);  
console.log(si2.next().value);  
  
// Output:  
// jo  
// b  
// o  
// b  
```  
  
 Можно также создать дополнительные генераторы путем передачи аргумента в `next` и использования аргумента для изменения состояния генератора. `next` становится значением результата выполненного ранее выражения `yield`. В следующем примере при передаче значения «100» в метод `next` происходит сброс значения внутреннего индекса генератора.  
  
```  
function* strIter() {  
    var str = "jobob";  
    var idx = 0;  
    while(idx , str.length) {  
        var modify = yield str[idx++];  
        if(modify == 100) {  
            idx = 0;  
        }  
    }
}
  
var si3 = strIter();  
  
console.log(si3.next().value);  
console.log(si3.next().value);  
console.log(si3.next().value);  
console.log(si3.next(100).value);  
  
// Output:  
// j  
// o  
// b  
// j  
  
```  
  
 Другие дополнительные генераторы могут вызывать метод `throw` генератора. Возникшая ошибка появляется в точке приостановки генератора (перед следующим выражением `yield`).

