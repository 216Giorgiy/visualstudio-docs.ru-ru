---
title: "Практическое руководство: Добавление маркеров стандартный текст | Microsoft Docs"
ms.custom: ""
ms.date: "12/15/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-sdk"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "редакторы [Visual Studio SDK] прежних версий - маркеры стандартный текст"
ms.assetid: a39fca69-0014-474c-933f-51f0e9b9617e
caps.latest.revision: 10
caps.handback.revision: 10
ms.author: "gregvanl"
manager: "ghogen"
---
# Практическое руководство: Добавление маркеров стандартный текст
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Используйте следующую процедуру для создания одного из типов маркеров по умолчанию текст, предоставленных с [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] редактор.  
  
### Создание метка текста  
  
1.  В зависимости от того, используется ли одно или плоскую систему координат, вызовите <xref:Microsoft.VisualStudio.TextManager.Interop.IVsTextStream.CreateStreamMarker%2A> метод или  <xref:Microsoft.VisualStudio.TextManager.Interop.IVsTextLines.CreateLineMarker%2A> метод, чтобы создать новую метку текста.  
  
     В этом методе определите тип маркера, диапазон текста, чтобы создать заново, и метка <xref:Microsoft.VisualStudio.TextManager.Interop.IVsTextMarkerClient> интерфейс.  Затем этот метод возвращает указатель на созданную метке текста.  Типы маркеров берутся из <xref:Microsoft.VisualStudio.TextManager.Interop.MARKERTYPE> перечисление.  Определение <xref:Microsoft.VisualStudio.TextManager.Interop.IVsTextMarkerClient> интерфейс если необходимо быть после событий метки.  
  
    > [!NOTE]
    >  Создайте текстовой метки в основном потоке пользовательского интерфейса.  Редактор core полагается на содержимом текстового буфера для создания текстового маркера и текстовый буфер не safe потока.  
  
## Добавление пользовательской команды  
 Реализация `IVsTextMarkerClient` интерфейс и предоставление указатель его из меток расширяют поведение метки несколькими способами.  Во\-первых, это позволяет предоставить рекомендации для меток и выполнения команды.  Это также позволяет получать уведомления о событиях для отдельных меток и создание пользовательского контекстного меню с меткой.  Следующая процедура используется для добавления пользовательской команды в контекстное меню маркера.  
  
#### Добавление пользовательской команды в контекстное меню  
  
1.  Прежде чем контекстное меню отображается, среда вызывает <xref:Microsoft.VisualStudio.TextManager.Interop.IVsTextMarkerClient.GetMarkerCommandInfo%2A> метод и передает собой указатель на повлиянной метки текст и номер элемента в контекстном меню.  
  
     Например, команды точка останова\-специфического в контекстном меню: **Удалить точку останова** via  **Создать точку останова**как показано в следующей съемкой экрана.  
  
     ![Маркер контекстного меню](../extensibility/media/vsmarkercontextmenu.png "vsMarkercontextmenu")  
  
2.  Передайте назад текст, определяющий имя пользовательской команды.  Например, **Удалить точку останова** может быть пользовательской команды если среда не обеспечила ее.  Также передается обратно, поддерживается ли команда доступна и включать или включеный\-выключеный переключателя.  Среда использует эти сведения для отображения пользовательской команды в контекстном меню в правильном образом.  
  
3.  Для выполнения команды, среда вызывает <xref:Microsoft.VisualStudio.TextManager.Interop.IVsTextMarkerClient.ExecMarkerCommand%2A> метод передачи собой указатель на метке текст и номер группы, выбранной из контекстного меню.  
  
     Используйте эти сведения из этого вызова, чтобы выполнить какие\-либо действия текстовой метки пользовательская команда указывает.  
  
## См. также  
 [С помощью текстовых маркеров с API прежних версий](../extensibility/using-text-markers-with-the-legacy-api.md)   
 [Практическое руководство: реализации маркеры ошибки](../extensibility/how-to-implement-error-markers.md)   
 [Практическое руководство: Создание пользовательского текста маркеры](../extensibility/how-to-create-custom-text-markers.md)   
 [Практическое руководство: использование текстовых меток](../extensibility/how-to-use-text-markers.md)