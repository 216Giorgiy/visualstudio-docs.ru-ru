---
title: "Вспомогательные пакеты SDK для отладки | Microsoft Docs"
ms.custom: ""
ms.date: "12/14/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-sdk"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "dbgmetric.lib"
  - "реестр, пакет SDK для отладки"
  - "Отладка SDK, разделы реестра"
  - "dbgmetric.h"
  - "метрики [пакет SDK для отладки]"
ms.assetid: 80a52e93-4a04-4ab2-8adc-a7847c2dc20b
caps.latest.revision: 28
caps.handback.revision: 28
ms.author: "gregvanl"
manager: "ghogen"
---
# Вспомогательные пакеты SDK для отладки
[!INCLUDE[vs2017banner](../../../code-quality/includes/vs2017banner.md)]

Эти функции и объявления глобального вспомогательный объект функции для реализации обработчиков отладки, вычислители выражений и поставщики символов в C\+\+.  
  
> [!NOTE]
>  Какие\-либо управляемые версии этих функций и объявления в настоящее время.  
  
## Общие сведения  
 Для обработчиков отладки, вычислители выражений и поставщики символа, который будет использовать Visual Studio, их необходимо зарегистрировать.  Это можно сделать, установив подразделы реестра и записи, в противном случае как "метрики параметров". Следующие глобальные функции разработаны для упрощения процесса обновить эти показатели.  См. раздел " в расположении реестра для распознавания структуру каждого подраздела реестра, который обновляется этими функциями.  
  
## Общие метрические функции  
 Эти общие функции отладки отладчиков, используемые by.  Специализированные функции для средства оценки выражений и поставщиков символов детализированы далее.  
  
### Метод GetMetric  
 Извлекает значение метрики из реестра.  
  
```cpp#  
HRESULT GetMetric(  
   LPCWSTR pszMachine,  
   LPCWSTR pszType,  
   REFGUID guidSection,  
   LPCWSTR pszMetric,  
   DWORD * pdwValue,  
   LPCWSTR pszAltRoot  
);  
```  
  
|Параметр|Описание|  
|--------------|--------------|  
|pszMachine|\[in\] имя удаленного компьютера, возможно, для которого будет записан \(регистр`NULL` означает локальный компьютер\).|  
|pszType|\[in\] одно из метрических типов.|  
|guidSection|\[in\] идентификатор GUID определенного обработчика фильтра, исключения и т д  Это определяет подраздел в разделе метрическим типом для конкретного элемента.|  
|pszMetric|\[in\] представляет собой показатель, который требуется получить.  Это соответствует определенному имени значения.|  
|pdwValue|\[in\] место хранения значений от метрики.  Несколько флейворов GetMetric, которые могут возвратить значение типа DWORD \(как в этом примере\), BSTR, GUID или массив GUID.|  
|pszAltRoot|\[in\] другой корневой элемент реестра для использования.  Значение `NULL` использовать значения по умолчанию.|  
  
### Метод SetMetric  
 Устанавливает заданное значение метрики в реестре.  
  
```cpp#  
HRESULT SetMetric(  
         LPCWSTR pszType,  
         REFGUID guidSection,  
         LPCWSTR pszMetric,  
   const DWORD   dwValue,  
         bool    fUserSpecific,  
         LPCWSTR pszAltRoot  
);  
```  
  
|Параметр|Описание|  
|--------------|--------------|  
|pszType|\[in\] одно из метрических типов.|  
|guidSection|\[in\] идентификатор GUID определенного обработчика фильтра, исключения и т д  Это определяет подраздел в разделе метрическим типом для конкретного элемента.|  
|pszMetric|\[in\] представляет собой показатель, который требуется получить.  Это соответствует определенному имени значения.|  
|dwValue|\[in\] место хранения значений в метрике.  Несколько флейворов SetMetric, которые могут храниться DWORD \(в данном примере\), BSTR, GUID или массив GUID.|  
|fUserSpecific|\[in\] значение TRUE, если показатель пользователь\-специфический и, если она должна к кусту записи пользователя вместо куста локального компьютера.|  
|pszAltRoot|\[in\] другой корневой элемент реестра для использования.  Значение `NULL` использовать значения по умолчанию.|  
  
### Метод RemoveMetric  
 Удаляет указанную показатель из реестра.  
  
```cpp#  
HRESULT RemoveMetric(  
   LPCWSTR pszType,  
   REFGUID guidSection,  
   LPCWSTR pszMetric,  
   LPCWSTR pszAltRoot  
);  
```  
  
|Параметр|Описание|  
|--------------|--------------|  
|pszType|\[in\] одно из метрических типов.|  
|guidSection|\[in\] идентификатор GUID определенного обработчика фильтра, исключения и т д  Это определяет подраздел в разделе метрическим типом для конкретного элемента.|  
|pszMetric|\[in\] представляет собой показатель, который необходимо удалить.  Это соответствует определенному имени значения.|  
|pszAltRoot|\[in\] другой корневой элемент реестра для использования.  Значение `NULL` использовать значения по умолчанию.|  
  
### Метод EnumMetricSections  
 Перечисляет различные разделы метрические в реестре.  
  
```cpp#  
HRESULT EnumMetricSections(  
   LPCWSTR pszMachine,  
   LPCWSTR pszType,  
   GUID *  rgguidSections,  
   DWORD * pdwSize,  
   LPCWSTR pszAltRoot  
);  
```  
  
|Параметр|Описание|  
|--------------|--------------|  
|pszMachine|\[in\] имя удаленного компьютера, возможно, для которого будет записан \(регистр`NULL` означает локальный компьютер\).|  
|pszType|\[in\] одно из метрических типов.|  
|rgguidSections|\[in, out\] массив предварительно GUID, который требуется заполнить.|  
|pdwSize|\[in\] максимальное количество GUID, которые могут храниться в `rgguidSections` массив.|  
|pszAltRoot|\[in\] другой корневой элемент реестра для использования.  Значение `NULL` использовать значения по умолчанию.|  
  
## Функции средства оценки выражений  
  
|Функция|Описание|  
|-------------|--------------|  
|GetEEMetric|Извлекает значение метрики из реестра.|  
|SetEEMetric|Устанавливает заданное значение метрики в реестре.|  
|RemoveEEMetric|Удаляет указанную показатель из реестра.|  
|GetEEMetricFile|Получает имя файла из указанной метрики и загружает его, возвращая содержимое файла в виде строки.|  
  
## Функции исключения  
  
|Функция|Описание|  
|-------------|--------------|  
|GetExceptionMetric|Извлекает значение метрики из реестра.|  
|SetExceptionMetric|Устанавливает заданное значение метрики в реестре.|  
|RemoveExceptionMetric|Удаляет указанную показатель из реестра.|  
|RemoveAllExceptionMetrics|Удаляет все показатели исключения из реестра.|  
  
## Функции поставщика символов  
  
|Функция|Описание|  
|-------------|--------------|  
|GetSPMetric|Извлекает значение метрики из реестра.|  
|SetSPMetric|Устанавливает заданное значение метрики в реестре.|  
|RemoveSPMetric|Удаляет указанную показатель из реестра.|  
  
## Функции перечисления  
  
|Функция|Описание|  
|-------------|--------------|  
|EnumMetricSections|Перечисляет все показатели для указанного метрического типа.|  
|EnumDebugEngine|Перечисляет зарегистрированные обработчики отладки.|  
|EnumEEs|Перечисляет зарегистрированные вычислителя выражений.|  
|EnumExceptionMetrics|Перечисляет все показатели исключения.|  
  
## Метрические определения  
 Эти определения может использоваться для стандартных метрических имен.  Имена соответствующих различным разделам реестра и имена значений и все определенные как широкие символьных строк: например, `extern LPCWSTR metrictypeEngine`.  
  
|Стандартные типы метрические|Описание: Базовый ключ для….|  
|----------------------------------|----------------------------------|  
|metrictypeEngine|Все показатели обработчика отладки.|  
|metrictypePortSupplier|Все показатели поставщика порта.|  
|metrictypeException|Все показатели исключения.|  
|metricttypeEEExtension|Все расширения вычислителя выражений.|  
  
|Свойства обработчика отладки|Описание|  
|----------------------------------|--------------|  
|metricAddressBP|Значение ненулевое значение, чтобы показать поддержку для точки останова адреса.|  
|metricAlwaysLoadLocal|Значение ненулевое значение, чтобы всегда загрузить обработчик отладки локально.|  
|metricLoadInDebuggeeSession|НЕ ИСПОЛЬЗУЕТСЯ|  
|metricLoadedByDebuggee|Значение ненулевое значение для указания того, что отладчик всегда будет загружен с отлаживаемой программы или.|  
|metricAttach|Значение ненулевое значение, чтобы показать поддержку для вложения к существующим программы.|  
|metricCallStackBP|Значение ненулевое значение, чтобы показать поддержку для точки останова стека вызова.|  
|metricConditionalBP|Значение ненулевое значение, чтобы показать поддержку для параметра условные точки останова.|  
|metricDataBP|Значение ненулевое значение, чтобы показать поддержку для параметра точек останова на изменения в данных.|  
|metricDisassembly|Значение ненулевое значение, чтобы показать поддержку для фабрики листинга дизассемблированный код.|  
|metricDumpWriting|Значение ненулевое значение, чтобы показать поддержку для записи дампа памяти \(сбрасывать на устройство вывода\).|  
|metricENC|Значение ненулевое значение, чтобы показать поддержку для правки и продолжить работу. **Note:**  Пользовательский обработчик отладки должна никогда не присваивается это либо должна всегда устанавливать ее значение равным 0.|  
|metricExceptions|Значение ненулевое значение, чтобы показать поддержку для исключений.|  
|metricFunctionBP|Значение ненулевое значение, чтобы показать поддержку для именованных точек останова \(точки останова, которые нарушают при вызове определенное имя функции\).|  
|metricHitCountBP|Значение ненулевое значение, чтобы показать поддержку для параметра "точки останова" точечная попадания \(точки останова, которые активированы только после того, как была указанное число раз, выполненной строкой\).|  
|metricJITDebug|Значение ненулевое значение, чтобы показать поддержку JIT\-отладка \(отладчик запускается при возникновении исключения в выполняемом процессе\).|  
|metricMemory|НЕ ИСПОЛЬЗУЕТСЯ|  
|metricPortSupplier|Установите это для CLSID поставщика порта, если оно реализовано.|  
|metricRegisters|НЕ ИСПОЛЬЗУЕТСЯ|  
|metricSetNextStatement|Значение ненулевое значение, чтобы показать поддержку задав следующую выписку \(которая пропустить выполнение промежуточных выписок\).|  
|metricSuspendThread|Значение ненулевое значение, чтобы показать поддержку приостановить выполнение потока.|  
|metricWarnIfNoSymbols|Значение ненулевое значение, чтобы показать, что пользователь должен быть уведомление при отсутствии символов.|  
|metricProgramProvider|Установите это для CLSID поставщика программы.|  
|metricAlwaysLoadProgramProviderLocal|Установите это значение в ненулевое значение, чтобы показать, что поставщик программы, всегда должен быть загружен локально.|  
|metricEngineCanWatchProcess|Установите это значение в ненулевое значение для указания того, что отладчик следит для событий процесса вместо поставщика программы.|  
|metricRemoteDebugging|Установите это значение в ненулевое значение, чтобы показать поддержку для удаленной отладки.|  
|metricEncUseNativeBuilder|Установите это значение в ненулевое значение, чтобы показать, что правка и продолжить использовать encbuild.dll диспетчер обработчика отладки для построения для правки и продолжить работу. **Note:**  Пользовательский обработчик отладки должна никогда не присваивается это либо должна всегда устанавливать ее значение равным 0.|  
|metricLoadUnderWOW64|Установите это значение в ненулевое значение для указания того, что отладчик должен быть загружен в процессе отладки отлаживаемого кода в WOW процесс обновления 64 \(sp2\); в противном случае отладчик будет загружен в процессе Visual Studio, работающего под WOW64\).|  
|metricLoadProgramProviderUnderWOW64|Установите это значение в ненулевое значение, чтобы показать, что поставщик программы должен быть загружен в процессе отладки отлаживаемый процесс под WOW 64 \(sp2\); в противном случае он будет загружен в процессе Visual Studio.|  
|metricStopOnExceptionCrossingManagedBoundary|Установите это значение в ненулевое значение указывает, что процесс должен остановиться если необработанное исключение через границы управляемого или неуправляемого кода.|  
|metricAutoSelectPriority|Установите это для приоритет для автоматического выделения обработчика отладки \(более высокие значения равны более высокий приоритет\).|  
|metricAutoSelectIncompatibleList|Раздел реестра, содержащий записи которых определите GUID для обработчиков отладки, игнорируемые в выделении.  Эти записи номер \(0, 1, 2 и т д\) с идентификатором GUID, выраженное в виде строки.|  
|metricIncompatibleList|Раздел реестра, содержащий записи которых определите GUID для обработчиков отладки, которые несовместимы с этим обработчик отладки.|  
|metricDisableJITOptimization|Установите это значение в ненулевое значение, чтобы показать, что JIT оптимизации \(для управляемого кода\), должны блокироваться во время отладки.|  
  
|Свойства средства оценки выражений|Описание|  
|----------------------------------------|--------------|  
|metricEngine|Это позволяет сохранять число обработчиков отладки, которые поддерживают определенное средством оценки выражений.|  
|metricPreloadModules|Установите это значение в ненулевое значение, чтобы показать, что модули должны быть поджаты, когда средство оценки выражений запускается в отношении программы.|  
|metricThisObjectName|Установите это значение объектному заголовку.|  
  
|Расширения вычислителя выражений свойств|Описание|  
|----------------------------------------------|--------------|  
|metricExtensionDll|Имя dll, поддерживающий это расширение.|  
|metricExtensionRegistersSupported|Список поддерживаемых регистров.|  
|metricExtensionRegistersEntryPoint|Точка входа для доступа к регистры.|  
|metricExtensionTypesSupported|Список поддерживаемых типов.|  
|metricExtensionTypesEntryPoint|Точка входа для доступа к типам.|  
  
|Свойства поставщика порта|Описание|  
|-------------------------------|--------------|  
|metricPortPickerCLSID|CLSID выбора порта \(диалогового окна пользователь может использоваться для выделения портов и добавление портов для отладки\).|  
|metricDisallowUserEnteredPorts|Ненулевое значение, если пользователь\-введенные порты не может быть добавлен к поставщику порта \(это делает диалоговое окно порт\-подборщика по существу только для чтения\).|  
|metricPidBase|Базовая идентификатор процесса, используемая поставщиком порта при выборе процесса.|  
  
|Стандартные типы хранилища пакета обновления|Описание|  
|--------------------------------------------------|--------------|  
|storetypeFile|Символы хранятся в отдельном файле.|  
|storetypeMetadata|Символы сохраняются как метаданные в сборке.|  
  
|Прочие свойства|Описание|  
|---------------------|--------------|  
|metricShowNonUserCode|Установите это значение в ненулевое значение, чтобы показать код nonuser.|  
|metricJustMyCodeStepping|Установите это значение в ненулевое значение для указания того, что выход может произойти только в коде пользователя.|  
|metricCLSID|Недопустимый идентификатор CLSID для метрического объекта указанного типа.|  
|metricName|Дружественное имя объекта определенного типа метрического.|  
|metricLanguage|Имя языка.|  
  
## Расположение в реестре  
 Метрики считываются и записываются в реестр в `VisualStudio` подраздел.  
  
> [!NOTE]
>  Чаще всего метрики записи с ключом HKEY\_LOCAL\_MACHINE.  Однако иногда HKEY\_CURRENT\_USER будет ключом назначения.  Dbgmetric.lib обрабатывает оба ключа.  При получении метрику, он ищет HKEY\_CURRENT\_USER во\-первых, затем HKEY\_LOCAL\_MACHINE.  Если он устанавливает метрику, параметр определяет, какой верхнего уровня ключ, который требуется использовать.  
  
 *\[раздел реестра\]*\\  
  
 `Software`\\  
  
 `Microsoft`\\  
  
 `VisualStudio`\\  
  
 *\[корень версии\]*\\  
  
 *\[метрический корень\]*\\  
  
 *\[тип\] метрический*\\  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
|Заполнитель|Описание|  
|-----------------|--------------|  
|*\[раздел реестра\]*|`HKEY_CURRENT_USER` или `HKEY_LOCAL_MACHINE`.|  
|*\[корень версии\]*|Версия Visual Studio \(например, `7.0`"  `7.1`или  `8.0`\).  Однако можно также изменить с помощью этого корня**\/rootsuffix** переключиться в  **devenv.exe**.  Для VSIP этот модификатор обычно Exp, поэтому корневой каталог версии будет, например 8.0Exp.|  
|*\[метрический корень\]*|Это значение `AD7Metrics` OR  `AD7Metrics(Debug)`в зависимости от того, используется ли отладочная версия dbgmetric.lib. **Note:**  Используется ли dbgmetric.lib это соглашение об именовании должно быть придержано если имеются различия, отладки и версии выпуска, которые необходимо отразить в реестре.|  
|*\[тип\] метрический*|Тип метрики, которые требуется записать. `Engine`"  `ExpressionEvaluator`"  `SymbolProvider`и т д  Все эти заданы как в dbgmetric.h как , где  указанное имя типа.|  
|*\[метрика\]*|Имя записи, присвоенным значением задать метрику.  Фактическая организации, в зависимости от метрики метрический тип.|  
|*Метрики значение \[\]*|Значение, присвоенное метрике.  Тип значения должен иметь \(string, номер и т д\) зависит от того, представляет собой показатель.|  
  
> [!NOTE]
>  Все хранятся в формате GUID `{GUID}`.  Например, `{123D150B-FA18-461C-B218-45B3E4589F9B}`.  
  
### Обработчики отладка  
 Далее организация метрик обработчиков отладки в реестре.  `Engine` имя метрики для типа обработчика отладки и соответствует  *\[тип\] метрический* в вышеприведенном поддереве реестра.  
  
 `Engine`\\  
  
 *\[guid обработчика\]*\\  
  
 `CLSID` \=  *\[guid класса\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 `PortSupplier`\\  
  
 `0` \=  *\[guid поставщика порта\]*  
  
 `1` \=  *\[guid поставщика порта\]*  
  
|Заполнитель|Описание|  
|-----------------|--------------|  
|*\[guid обработчика\]*|Идентификатор GUID модуля отладки.|  
|*\[guid класса\]*|Идентификатор GUID класса, который реализует этот обработчик отладки.|  
|*\[guid поставщика порта\]*|Идентификатор GUID поставщика порта, если таковые имеются.  Многие обработчики используют отладки поставщика порта по умолчанию и, следовательно, не определяют их собственного поставщика.  В этом случае подраздел `PortSupplier` становится недоступным.|  
  
### Поставщики порта  
 Далее организация показателей поставщика порта в реестре.  `PortSupplier` метрики имя типа поставщика порта и соответствует  *\[тип\] метрический*.  
  
 `PortSupplier`\\  
  
 *\[guid поставщика порта\]*\\  
  
 `CLSID` \=  *\[guid класса\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
|Заполнитель|Описание|  
|-----------------|--------------|  
|*\[guid поставщика порта\]*|Идентификатор GUID поставщика порта|  
|*\[guid класса\]*|Идентификатор GUID класса, который реализует поставщика порта|  
  
### Поставщики символов  
 Далее организация метрик символов в реестре поставщика.  `SymbolProvider` метрики имя типа поставщика символов и соответствует  *\[тип\] метрический*.  
  
 `SymbolProvider`\\  
  
 *\[guid поставщика символов\]*\\  
  
 `file`\\  
  
 `CLSID` \=  *\[guid класса\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 `metadata`\\  
  
 `CLSID` \=  *\[guid класса\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
|Заполнитель|Описание|  
|-----------------|--------------|  
|*\[guid поставщика символов\]*|Идентификатор GUID поставщика символов|  
|*\[guid класса\]*|Идентификатор GUID класса, который реализует этот поставщик символов|  
  
### Средства оценки выражений  
 Далее организация метрик вычислителя выражений в реестре.  `ExpressionEvaluator` имя метрики для типа вычислителя выражений и соответствует  *\[тип\] метрический*.  
  
> [!NOTE]
>  Тип метрический `ExpressionEvaluator` не указывает в dbgmetric.h, как ожидалось все метрические изменения для средства оценки выражений пойдут с помощью функции соответствующего средства оценки выражений метрические \(макет  `ExpressionEvaluator` подраздел несколько осложнен, поэтому подробности скрыты в dbgmetric.lib\).  
  
 `ExpressionEvaluator`\\  
  
 *\[идентификатор guid языка\]*\\  
  
 *\[guid поставщика\]*\\  
  
 `CLSID` \=  *\[guid класса\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 `Engine`\\  
  
 `0` \=  *\[отладка guid обработчика\]*  
  
 `1` \=  *\[отладка guid обработчика\]*  
  
|Заполнитель|Описание|  
|-----------------|--------------|  
|*\[идентификатор guid языка\]*|Идентификатор GUID языка|  
|*\[guid поставщика\]*|Идентификатор GUID поставщика|  
|*\[guid класса\]*|Идентификатор GUID класса, реализующий данное средство оценки выражений|  
|*\[отладка guid обработчика\]*|Идентификатор GUID модуля отладки, это средство оценки выражений работает с|  
  
### Расширения вычислителя выражений  
 Далее организация метрик расширения вычислителя выражений в реестре.  `EEExtensions` имя метрики для типа расширения вычислителя выражений и соответствует  *\[тип\] метрический*.  
  
 `EEExtensions`\\  
  
 *\[guid расширения\]*\\  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
|Заполнитель|Описание|  
|-----------------|--------------|  
|*\[guid расширения\]*|Идентификатор GUID модуля средства оценки выражений|  
  
### Исключения  
 Далее организация метрик исключений в реестре.  `Exception` имя метрики для типа исключений и соответствует  *\[тип\] метрический*.  
  
 `Exception`\\  
  
 *\[отладка guid обработчика\]*\\  
  
 *\[типы исключений\]*\\  
  
 *\[исключение\]*\\  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 *\[исключение\]*\\  
  
 *\[метрика\] \= \[значение метрики\]*  
  
 *\[метрика\] \= \[значение метрики\]*  
  
|Заполнитель|Описание|  
|-----------------|--------------|  
|*\[отладка guid обработчика\]*|Идентификатор GUID модуля отладки, поддерживающий исключения.|  
|*\[типы исключений\]*|Общее имя подраздела, задав класс исключений, которые могут быть обработаны.  Стандартные имена **C\+\+ Exceptions**"  **Win32 Exceptions**"  **Common Language Runtime Exceptions**и  **Native Run\-Time Checks**.  Эти имена также используются для указания определенный класс исключений пользователю.|  
|*\[исключение\]*|Имя исключения: например, **\_com\_error** OR  **Control\-Break**.  Эти имена также используются для указания указанное исключение для пользователя.|  
  
## Требования  
 Эти файлы расположены в [!INCLUDE[vs_dev10_ext](../../../extensibility/debugger/reference/includes/vs_dev10_ext_md.md)] Каталог установки SDK \(по умолчанию  *\[диск\]*Пакет SDK \\ program files \\ Microsoft Visual Studio 2010 \\\).  
  
 Заголовок: включает \\ dbgmetric.h  
  
 Библиотеки: lib \\ ad2de.lib, lib \\ dbgmetric.lib  
  
## См. также  
 [Справочник по интерфейсам API](../../../extensibility/debugger/reference/api-reference-visual-studio-debugging.md)