---
title: Вспомогательные функции пакета SDK для отладки | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- vs-ide-sdk
ms.topic: conceptual
helpviewer_keywords:
- dbgmetric.lib
- registry, Debugging SDK
- Debugging SDK, registry locations
- dbgmetric.h
- metrics [Debugging SDK]
ms.assetid: 80a52e93-4a04-4ab2-8adc-a7847c2dc20b
author: gregvanl
ms.author: gregvanl
manager: douge
ms.workload:
- vssdk
ms.openlocfilehash: e80344b8cec1bc013e044be39638879b049c8d0a
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
ms.locfileid: "31135926"
---
# <a name="sdk-helpers-for-debugging"></a>Вспомогательные функции пакета SDK для отладки
Эти функции и объявления являются глобальные вспомогательные функции для реализации отладчики, вычислители выражений и поставщики символ в C++.  
  
> [!NOTE]
>  В настоящее время нет управляемых версий этих функций и объявления.  
  
## <a name="overview"></a>Обзор  
 Чтобы отладчики, вычислители выражений и поставщики символ для использования в Visual Studio должны быть зарегистрированы. Это можно сделать, настроив разделы и подразделы реестра, также известный как «параметр метрики». Следующие глобальные функции предназначены для упрощения процесса обновления этих показателей. В разделе для расположений реестра, чтобы определить макет раздел реестра, обновляется этими функциями.  
  
## <a name="general-metric-functions"></a>Общие функции метрики  
 Это общие функции, используемые отладчики. Специализированные функции для вычислители выражений и поставщики символов будут описаны далее.  
  
### <a name="getmetric-method"></a>Метод GetMetric  
 Извлекает значение метрики из реестра.  
  
```cpp  
HRESULT GetMetric(  
   LPCWSTR pszMachine,  
   LPCWSTR pszType,  
   REFGUID guidSection,  
   LPCWSTR pszMetric,  
   DWORD * pdwValue,  
   LPCWSTR pszAltRoot  
);  
```  
  
|Параметр|Описание|  
|---------------|-----------------|  
|pszMachine|[in] Имя возможно удаленного компьютера, будут записаны которого регистра (`NULL` означает локального компьютера).|  
|pszType|[in] Один из типов метрики.|  
|guidSection|[in] Идентификатор GUID отдельной программы, оценки, исключение, и т. д. Этот параметр указывает подраздел в разделе тип показателя для отдельного элемента.|  
|pszMetric|[in] Метрика, получить невозможно. Это соответствует имени конкретного значения.|  
|pdwValue|[in] Место хранения значения от метрики. Существует несколько видов GetMetric, которая может вернуть DWORD (как в этом примере), BSTR, идентификатор GUID или массив идентификаторов GUID.|  
|pszAltRoot|[in] Корнем альтернативный реестра. Значение `NULL` по умолчанию.|  
  
### <a name="setmetric-method"></a>Метод SetMetric  
 Задает указанное значение метрики в реестре.  
  
```cpp  
HRESULT SetMetric(  
         LPCWSTR pszType,  
         REFGUID guidSection,  
         LPCWSTR pszMetric,  
   const DWORD   dwValue,  
         bool    fUserSpecific,  
         LPCWSTR pszAltRoot  
);  
```  
  
|Параметр|Описание|  
|---------------|-----------------|  
|pszType|[in] Один из типов метрики.|  
|guidSection|[in] Идентификатор GUID отдельной программы, оценки, исключение, и т. д. Этот параметр указывает подраздел в разделе тип показателя для отдельного элемента.|  
|pszMetric|[in] Метрика, получить невозможно. Это соответствует имени конкретного значения.|  
|dwValue|[in] Место хранения значения метрики. Существует несколько видов SetMetric, который может хранить DWORD (в данном примере), BSTR, идентификатор GUID или массив идентификаторов GUID.|  
|fUserSpecific|[in] Значение TRUE, если метрика конкретного пользователя и должен быть записан куст пользователя вместо hive локального компьютера.|  
|pszAltRoot|[in] Корнем альтернативный реестра. Значение `NULL` по умолчанию.|  
  
### <a name="removemetric-method"></a>Метод RemoveMetric  
 Удаляет указанный метрику из реестра.  
  
```cpp  
HRESULT RemoveMetric(  
   LPCWSTR pszType,  
   REFGUID guidSection,  
   LPCWSTR pszMetric,  
   LPCWSTR pszAltRoot  
);  
```  
  
|Параметр|Описание|  
|---------------|-----------------|  
|pszType|[in] Один из типов метрики.|  
|guidSection|[in] Идентификатор GUID отдельной программы, оценки, исключение, и т. д. Этот параметр указывает подраздел в разделе тип показателя для отдельного элемента.|  
|pszMetric|[in] Метрика, должны быть удалены. Это соответствует имени конкретного значения.|  
|pszAltRoot|[in] Корнем альтернативный реестра. Значение `NULL` по умолчанию.|  
  
### <a name="enummetricsections-method"></a>Метод EnumMetricSections  
 Перечисляет различные метрики разделы в реестре.  
  
```cpp  
HRESULT EnumMetricSections(  
   LPCWSTR pszMachine,  
   LPCWSTR pszType,  
   GUID *  rgguidSections,  
   DWORD * pdwSize,  
   LPCWSTR pszAltRoot  
);  
```  
  
|Параметр|Описание|  
|---------------|-----------------|  
|pszMachine|[in] Имя возможно удаленного компьютера, будут записаны которого регистра (`NULL` означает локального компьютера).|  
|pszType|[in] Один из типов метрики.|  
|rgguidSections|[in, out] Предварительно выделенной массив идентификаторов GUID, чтобы быть заполнено.|  
|pdwSize|[in] Максимальное количество идентификаторов GUID, которые могут храниться в `rgguidSections` массива.|  
|pszAltRoot|[in] Корнем альтернативный реестра. Значение `NULL` по умолчанию.|  
  
## <a name="expression-evaluator-functions"></a>Функции вычислителя выражений  
  
|Функция|Описание|  
|--------------|-----------------|  
|GetEEMetric|Извлекает значение метрики из реестра.|  
|SetEEMetric|Задает указанное значение метрики в реестре.|  
|RemoveEEMetric|Удаляет указанный метрику из реестра.|  
|GetEEMetricFile|Возвращает имя файла из указанной метрики и загружает их, возвращая содержимое файла как строка.|  
  
## <a name="exception-functions"></a>Исключения функции  
  
|Функция|Описание|  
|--------------|-----------------|  
|GetExceptionMetric|Извлекает значение метрики из реестра.|  
|SetExceptionMetric|Задает указанное значение метрики в реестре.|  
|RemoveExceptionMetric|Удаляет указанный метрику из реестра.|  
|RemoveAllExceptionMetrics|Удаляет все метрики для исключения из реестра.|  
  
## <a name="symbol-provider-functions"></a>Функции поставщика символ  
  
|Функция|Описание|  
|--------------|-----------------|  
|GetSPMetric|Извлекает значение метрики из реестра.|  
|SetSPMetric|Задает указанное значение метрики в реестре.|  
|RemoveSPMetric|Удаляет указанный метрику из реестра.|  
  
## <a name="enumeration-functions"></a>Функции перечисления  
  
|Функция|Описание|  
|--------------|-----------------|  
|EnumMetricSections|Перечисляет все метрики для указанного типа метрики.|  
|EnumDebugEngine|Перечисляет модули зарегистрированных отладки.|  
|EnumEEs|Перечисляет вычислители выражений зарегистрированного.|  
|EnumExceptionMetrics|Перечисляет все показатели исключение.|  
  
## <a name="metric-definitions"></a>Определения показателей  
 Эти определения можно использовать для стандартных имен метрик. Имена соответствуют разные разделы реестра и имена параметров и определены как строки расширенных символов: например, `extern LPCWSTR metrictypeEngine`.  
  
|Предопределенные типы метрики|Описание: Базовый ключ для...|  
|-----------------------------|---------------------------------------|  
|metrictypeEngine|Все отладочные engine метрики.|  
|metrictypePortSupplier|Все показатели поставщика порта.|  
|metrictypeException|Все показатели исключение.|  
|metricttypeEEExtension|Все расширения, средство оценки выражений.|  
  
|Отладка свойств модуля|Описание|  
|-----------------------------|-----------------|  
|metricAddressBP|Значение ненулевое значение, чтобы указать поддержку для точки останова по адресу.|  
|metricAlwaysLoadLocal|Значение ненулевое значение, чтобы всегда загрузить модуль отладки локально.|  
|metricLoadInDebuggeeSession|НЕ ИСПОЛЬЗУЕТСЯ|  
|metricLoadedByDebuggee|Значение от нуля, указывая, отладчик всегда быть загружена, или с отлаживаемой программы.|  
|metricAttach|Значение ненулевое значение, чтобы указать поддержку для вложения в существующие программы.|  
|metricCallStackBP|Значение ненулевое значение, чтобы указать поддержку для точки останова в стеке вызова.|  
|metricConditionalBP|Значение ненулевое значение, чтобы указать поддержку для параметра условных точек останова.|  
|metricDataBP|Значение ненулевое значение, чтобы указать поддержку для настройки точек останова на изменения в данных.|  
|metricDisassembly|Задайте ненулевое значение для указания поддержки для производства листинг Дизассемблированный код.|  
|metricDumpWriting|Значение ненулевое значение, чтобы указать поддержку для дампа записи (записи в дамп памяти на устройстве вывода).|  
|metricENC|Задайте ненулевое значение для указания поддержки, изменить и продолжить. **Примечание:** модулем отладки не следует устанавливать это или следует всегда присвойте ей значение 0.|  
|metricExceptions|Значение ненулевое значение, чтобы указать поддержку для исключения.|  
|metricFunctionBP|Значение ненулевое значение, чтобы указать поддержку для именованных точки останова (точки останова, останавливать, если вызывается функция определенным именем).|  
|metricHitCountBP|Значение ненулевое значение, чтобы указать поддержку для параметра «попадания в точку» точки останова (точки останова, которые активируются только после попадании определенное число раз).|  
|metricJITDebug|Задайте ненулевое значение для указания поддержка отладки just-in-time (запуске отладчика для выполняющегося процесса при возникновении исключения).|  
|metricMemory|НЕ ИСПОЛЬЗУЕТСЯ|  
|metricPortSupplier|Установите это для CLSID поставщика порта, если она реализована.|  
|metricRegisters|НЕ ИСПОЛЬЗУЕТСЯ|  
|metricSetNextStatement|Значение ненулевое значение, чтобы указать поддержку для установка следующего оператора (которая пропускает выполнение инструкций промежуточного).|  
|metricSuspendThread|Значение ненулевое значение, чтобы указать поддержку для приостановки выполнения потока.|  
|metricWarnIfNoSymbols|Значение ненулевое значение, чтобы указать, следует уведомить пользователя, если символов нет.|  
|metricProgramProvider|Укажите идентификатор CLSID поставщика программы.|  
|metricAlwaysLoadProgramProviderLocal|Задайте ненулевое значение для указания, что программы поставщика должны всегда быть загружены локально.|  
|metricEngineCanWatchProcess|Задайте ненулевое значение, чтобы указать, что отладчик будет наблюдать за обрабатывать события вместо поставщика программы.|  
|metricRemoteDebugging|Задайте ненулевое значение, чтобы указать поддержку для удаленной отладки.|  
|metricEncUseNativeBuilder|Задайте ненулевое значение для указания, что изменить и продолжить Manager следует использовать encbuild.dll модуль отладки для создания изменить и продолжить. **Примечание:** модулем отладки не следует устанавливать это или следует всегда присвойте ей значение 0.|  
|metricLoadUnderWOW64|Задайте ненулевое значение, чтобы указать модуль отладки, которые должны загружаться в отлаживаемый процесс в режиме WOW, при отладке 64-разрядном процессе; в противном случае модуль отладки будут загружены в процесс Visual Studio (который выполняется в эмуляторе WOW64).|  
|metricLoadProgramProviderUnderWOW64|Задайте ненулевое значение для указания, что программы поставщика должны быть загружены в отлаживаемой программе, при отладке 64-разрядный процесс в режиме WOW; в противном случае они будут загружены в процесс Visual Studio.|  
|metricStopOnExceptionCrossingManagedBoundary|Задайте ненулевое значение, чтобы указать, что процесс должна прекратиться, если необработанное исключение через границы управляемого и неуправляемого кода.|  
|metricAutoSelectPriority|Задайте приоритет для автоматического выбора модуль отладки (выше значения равно более высокий приоритет).|  
|metricAutoSelectIncompatibleList|Раздел реестра, содержащий записи, укажите идентификаторы GUID для отладчики пропускаются в автоматический выбор. Эти записи целый ряд (0, 1, 2 и т. д.) с идентификатором GUID, выраженное в виде строки.|  
|metricIncompatibleList|Раздел реестра, содержащий элементы, указывающие идентификаторы GUID для отладчики, которые несовместимы с этим обработчиком отладки.|  
|metricDisableJITOptimization|Задайте ненулевое значение, чтобы указать, что во время отладки следует отключить оптимизацию just-in-time (для управляемого кода).|  
  
|Свойства вычислителя выражения|Описание|  
|-------------------------------------|-----------------|  
|metricEngine|Содержит количество отладчики, которые поддерживают средство оценки указанного выражения.|  
|metricPreloadModules|Задайте ненулевое значение, чтобы указать, предварительно модулей загружается при запуске вычислитель выражений для программы.|  
|metricThisObjectName|Задайте имя объекта «this».|  
  
|Свойства расширения вычислителя выражений|Описание|  
|-----------------------------------------------|-----------------|  
|metricExtensionDll|Имя библиотеки DLL, которая поддерживает это расширение.|  
|metricExtensionRegistersSupported|Список поддерживаемых регистров.|  
|metricExtensionRegistersEntryPoint|Точка входа для доступа к регистров.|  
|metricExtensionTypesSupported|Список поддерживаемых типов.|  
|metricExtensionTypesEntryPoint|Точка входа для доступа к типам.|  
  
|Свойства поставщика порта|Описание|  
|------------------------------|-----------------|  
|metricPortPickerCLSID|Код CLSID средство выбора порта (диалоговое окно пользователя можно использовать для выбора портов и добавления порты, используемые для отладки).|  
|metricDisallowUserEnteredPorts|Ненулевое значение, если пользователь ввел порты не может быть добавлен поставщика порта (это делает диалоговое окно выбора порта, по существу только для чтения).|  
|metricPidBase|Идентификатор базового процесса, используемый поставщика порта при выделении идентификаторов процессов.|  
  
|SP предопределенные типы хранилища|Описание|  
|-------------------------------|-----------------|  
|storetypeFile|Символы хранятся в отдельном файле.|  
|storetypeMetadata|Символы сохраняются как метаданные в сборке.|  
  
|Прочие свойства|Описание|  
|------------------------------|-----------------|  
|metricShowNonUserCode|Задайте ненулевое значение, чтобы показать являющемся кода.|  
|metricJustMyCodeStepping|Задайте ненулевое значение, чтобы указать, что пошаговое выполнение могут возникать только в коде пользователя.|  
|metricCLSID|Идентификатор CLSID для объекта определенного типа метрики.|  
|metricName|Понятное имя для объекта определенного типа метрики.|  
|metricLanguage|Имя языка.|  
  
## <a name="registry-locations"></a>Разделы реестра  
 Метрики считываются и записываются в реестр, а именно в `VisualStudio` подраздела.  
  
> [!NOTE]
>  В большинстве случаев, показатели будут записаны в разделе HKEY_LOCAL_MACHINE. Тем не менее иногда HKEY_CURRENT_USER будет целевой ключ. Dbgmetric.LIB обрабатывает как ключи. При получении метрики, он ищет HKEY_CURRENT_USER первым, а затем HKEY_LOCAL_MACHINE. Задавая его метрикой, параметр указывает, какой раздел верхнего уровня для использования.  
  
 *[раздел реестра]*\  
  
 `Software`\  
  
 `Microsoft`\  
  
 `VisualStudio`\  
  
 *[версия корневой]*\  
  
 *[метрики корневой]*\  
  
 *[тип показателя]*\  
  
 *[метрика] = [значение метрики]*  
  
 *[метрика] = [значение метрики]*  
  
 *[метрика] = [значение метрики]*  
  
|Заполнитель|Описание|  
|-----------------|-----------------|  
|*[раздел реестра]*|`HKEY_CURRENT_USER` или `HKEY_LOCAL_MACHINE`.|  
|*[версия корневой]*|Версии Visual Studio (например, `7.0`, `7.1`, или `8.0`). Тем не менее, этого корня можно изменять с помощью **/rootsuffix** переключитесь **devenv.exe**. Для VSIP, этот модификатор обычно является **Exp**, поэтому корневой версии будет, например, 8.0Exp.|  
|*[метрики корневой]*|Это может быть вызвано `AD7Metrics` или `AD7Metrics(Debug)`в зависимости от того, используется ли отладочная версия dbgmetric.lib. **Примечание:** ли dbgmetric.lib используется, это соглашение об именовании следует соблюдать при наличии различий между отладочной и окончательной версии, должно быть отражено в реестре.|  
|*[тип показателя]*|Тип метрики для записи: `Engine`, `ExpressionEvaluator`, `SymbolProvider`и т. д. Все они определяются как dbgmetric.h как `metricTypeXXXX`, где `XXXX` имя определенного типа.|  
|*[метрика]*|Имя записи для быть присвоено значение, чтобы задать метрику. Фактический организации метрик зависит от типа метрики.|  
|*[значение метрики]*|Значение, присваиваемое метрику. Тип значения должен быть (string, number, т. д.) зависит от метрику.|  
  
> [!NOTE]
>  Все идентификаторы GUID, хранятся в формате `{GUID}`. Например, `{123D150B-FA18-461C-B218-45B3E4589F9B}`.  
  
### <a name="debug-engines"></a>Отладка ядра  
 Ниже приведен организации метрик обработчиков отладки в реестре. `Engine` Имя типа метрики для модуля отладки и соответствует *[тип показателя]* в дереве реестра выше.  
  
 `Engine`\  
  
 *[идентификатор guid engine]*\  
  
 `CLSID` = *[класс guid]*  
  
 *[метрика] = [значение метрики]*  
  
 *[метрика] = [значение метрики]*  
  
 *[метрика] = [значение метрики]*  
  
 `PortSupplier`\  
  
 `0` = *[идентификатор guid поставщика порта]*  
  
 `1` = *[идентификатор guid поставщика порта]*  
  
|Заполнитель|Описание|  
|-----------------|-----------------|  
|*[идентификатор guid engine]*|Идентификатор GUID модуля отладки.|  
|*[класс guid]*|Идентификатор GUID класса, реализующего этот модуль отладки.|  
|*[идентификатор guid поставщика порта]*|Идентификатор GUID поставщика порта, если таковые имеются. Многие модули отладки используйте поставщика порта по умолчанию и не указывайте собственных поставщиков. В этом случае подраздела `PortSupplier` будет отсутствовать.|  
  
### <a name="port-suppliers"></a>Поставщикам портов  
 Ниже приведен организации метрик поставщика порта в реестре. `PortSupplier` Имя типа метрик для поставщика порта и соответствует *[тип показателя]*.  
  
 `PortSupplier`\  
  
 *[идентификатор guid поставщика порта]*\  
  
 `CLSID` = *[класс guid]*  
  
 *[метрика] = [значение метрики]*  
  
 *[метрика] = [значение метрики]*  
  
|Заполнитель|Описание|  
|-----------------|-----------------|  
|*[идентификатор guid поставщика порта]*|Идентификатор GUID поставщика порта|  
|*[класс guid]*|Идентификатор GUID для класса, реализующего этот порт поставщика|  
  
### <a name="symbol-providers"></a>Поставщики символ  
 Ниже приведен организации метрик supplier символа в реестре. `SymbolProvider` Имя типа метрик для поставщика символов и соответствует *[тип показателя]*.  
  
 `SymbolProvider`\  
  
 *[идентификатор guid поставщика символов]*\  
  
 `file`\  
  
 `CLSID` = *[класс guid]*  
  
 *[метрика] = [значение метрики]*  
  
 *[метрика] = [значение метрики]*  
  
 `metadata`\  
  
 `CLSID` = *[класс guid]*  
  
 *[метрика] = [значение метрики]*  
  
 *[метрика] = [значение метрики]*  
  
|Заполнитель|Описание|  
|-----------------|-----------------|  
|*[идентификатор guid поставщика символов]*|Идентификатор GUID поставщика символ|  
|*[класс guid]*|Идентификатор GUID для класса, реализующего этот поставщик символ|  
  
### <a name="expression-evaluators"></a>Вычислители выражений  
 Ниже приведен организации метрик оценки выражения в реестре. `ExpressionEvaluator` Имя типа метрик для оценки выражений и соответствует *[тип показателя]*.  
  
> [!NOTE]
>  Тип метрики для `ExpressionEvaluator` не определен в dbgmetric.h, как предполагается, что все изменения метрики для вычислители выражений проходит через функции метрики оценки соответствующее выражение (макет `ExpressionEvaluator` подраздел доступен немного сложным, поэтому подробности скрыты внутри dbgmetric.lib).  
  
 `ExpressionEvaluator`\  
  
 *[язык guid]*\  
  
 *[идентификатор guid поставщика]*\  
  
 `CLSID` = *[класс guid]*  
  
 *[метрика] = [значение метрики]*  
  
 *[метрика] = [значение метрики]*  
  
 `Engine`\  
  
 `0` = *[идентификатор guid ядра отладки]*  
  
 `1` = *[идентификатор guid ядра отладки]*  
  
|Заполнитель|Описание|  
|-----------------|-----------------|  
|*[язык guid]*|Идентификатор GUID языка|  
|*[идентификатор guid поставщика]*|Идентификатор GUID поставщика|  
|*[класс guid]*|Идентификатор GUID для класса, реализующего этот вычислитель выражений|  
|*[идентификатор guid ядра отладки]*|Идентификатор GUID модуля отладки, работу этого средство оценки выражений|  
  
### <a name="expression-evaluator-extensions"></a>Расширения вычислителя выражений  
 Ниже приведен организации метрик расширения вычислителя выражений в реестре. `EEExtensions` Имя метрики типа выражения расширений оценки и соответствует *[тип показателя]*.  
  
 `EEExtensions`\  
  
 *[расширение guid]*\  
  
 *[метрика] = [значение метрики]*  
  
 *[метрика] = [значение метрики]*  
  
|Заполнитель|Описание|  
|-----------------|-----------------|  
|*[расширение guid]*|Идентификатор GUID для расширения вычислителя выражений|  
  
### <a name="exceptions"></a>Исключения  
 Ниже приведен организации метрик исключения в реестре. `Exception` Имя метрики типа для исключения и соответствует *[тип показателя]*.  
  
 `Exception`\  
  
 *[идентификатор guid ядра отладки]*\  
  
 *[типы исключений]*\  
  
 *[исключение]*\  
  
 *[метрика] = [значение метрики]*  
  
 *[метрика] = [значение метрики]*  
  
 *[исключение]*\  
  
 *[метрика] = [значение метрики]*  
  
 *[метрика] = [значение метрики]*  
  
|Заполнитель|Описание|  
|-----------------|-----------------|  
|*[идентификатор guid ядра отладки]*|Идентификатор GUID модуля отладки, который поддерживает исключения.|  
|*[типы исключений]*|Общие заголовок для подраздела определяет класс исключений, которые могут быть обработаны. Стандартные имена **исключения C++**, **исключения Win32**, **исключения среды CLR**, и **проверки времени выполнения машинного**. Эти имена также используются для идентификации определенного класса исключения для пользователя.|  
|*[исключение]*|Имя для исключения: например, **_com_error** или **секционный**. Эти имена также используются для идентификации конкретного исключения для пользователя.|  
  
## <a name="requirements"></a>Требования  
 Эти файлы расположены в [!INCLUDE[vs_dev10_ext](../../../extensibility/debugger/reference/includes/vs_dev10_ext_md.md)] каталог установки пакета SDK (по умолчанию *[диск]* \Program Files\Microsoft SDK для Visual Studio 2010\\).  
  
 Заголовок: includes\dbgmetric.h  
  
 Библиотека: libs\ad2de.lib, libs\dbgmetric.lib  
  
## <a name="see-also"></a>См. также  
 [Справочник по интерфейсам API](../../../extensibility/debugger/reference/api-reference-visual-studio-debugging.md)