---
title: "Элемент меню | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-sdk"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "Элементы схемы VSCT XML, меню"
  - "Элемент меню (VSCT XML-схемы)"
ms.assetid: ce0560f3-b4c9-4ab2-a99c-d4e10f37b9e0
caps.latest.revision: 16
ms.author: "gregvanl"
manager: "ghogen"
caps.handback.revision: 16
---
# Элемент меню
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Определяет один элемент меню. Это шесть видов меню: контекстное меню, MenuController, MenuControllerLatched, инструментов и ToolWindowToolbar.  
  
## Синтаксис  
  
```  
<Menu guid=”guidMyCommandSet” id=”MyCommand” priority=”0x100” type=”button”>  
  <Parent>... </Parent>  
  <CommandFlag>... </CommandFlag>  
  <Strings>... </Strings>  
</Menu>  
```  
  
## Атрибуты и элементы  
 В следующих разделах описаны атрибуты, дочерние и родительские элементы.  
  
### Атрибуты  
  
|Атрибут|Описание|  
|-------------|--------------|  
|Идентификатор GUID|Обязательный. Идентификатор GUID идентификатор GUID и идентификатор команды.|  
|id|Обязательный. Идентификатор идентификатор GUID и идентификатор команды.|  
|priority|Необязательный. Числовое значение, указывающее относительное положение меню в группе меню.|  
|ToolbarPriorityInBand|Необязательный. Числовое значение, указывающее относительное положение панели инструментов в полосе, если окно закреплено.|  
|type|Необязательный. Значение перечисления, указывающее тип элемента.<br /><br /> Если не указан, значение по умолчанию — меню.<br /><br /> Контекст<br /> Контекстное меню, которое отображается, когда пользователь щелкает правой кнопкой мыши окно. Контекстное меню имеет следующие характеристики:<br /><br /> -   Не используйте поля родительской и приоритета, когда меню должно отображаться как контекстное меню.<br />-   Можно использовать подменю, а также контекстное меню. В этом случае учитываются поля идентификатора группы и приоритета.<br />-   Не всегда доступен.<br /><br /> Контекстное меню отображается только в том случае, когда выполняются следующие условия:<br /><br /> -   Отображается окно, на котором он размещен.<br />-   Обработчик мыши в VSPackage обнаруживает правой кнопкой мыши в окне, а затем вызывает метод, который обрабатывает команды.<br />-   В контекстном меню, отображаемых при вызове <xref:Microsoft.VisualStudio.Shell.Interop.IOleComponentUIManager.ShowContextMenu%2A> метода \(рекомендуемый подход\) или <xref:Microsoft.VisualStudio.Shell.Interop.IVsUIShell.ShowContextMenu%2A> метод.<br /><br /> Меню<br /> Содержит раскрывающееся меню. Раскрывающееся меню имеет следующие характеристики:<br /><br /> -   Учитывает родительский элемент в его определение.<br />-   Необходимо иметь родительскую группу или CommandPlacement в группу.<br />-   Может быть подменю в меню любого другого типа.<br />-   Отображается автоматически при отображении его родительском меню.<br />-   Не требует реализации любого кода VSPackage, чтобы сделать его отображения.<br /><br /> MenuController<br /> Предоставляет разворачивающуюся кнопку раскрывающегося меню, которое обычно используется в панели инструментов. Меню MenuController имеет следующие характеристики:<br /><br /> -   Должны содержаться в другом меню через родительский или CommandPlacement.<br />-   Учитывает родительский элемент в его определение.<br />-   Могут иметь любые виды меню в качестве родительского.<br />-   Автоматически становятся доступными при отображении его родительском меню.<br />-   Не требует программную поддержку для отображения меню.<br /><br /> Команда меню Разворачивающаяся кнопка отображается на кнопке меню. Отображается команда имеет одно из следующих характеристик:<br /><br /> -   Это последняя команда, которая используется, если команда по\-прежнему отображается и включено.<br />-   Это первая отображается команда.<br /><br /> MenuControllerLatched<br /> Предоставляет Разворачивающаяся кнопка раскрывающееся меню, для которого можно указать команду выбранным по умолчанию помечая команды как заблокирована.<br /><br /> Защелки команда выполняет, помеченный в меню выбранного, как обычно, отображая флажок. Команды могут отмечаться как заблокирована, если у него есть OLECMDF\_LATCHED флаг его в реализацию `QueryStatus` метод <xref:Microsoft.VisualStudio.OLE.Interop.IOleCommandTarget> интерфейса. Меню MenuControllerLatched имеет следующие характеристики:<br /><br /> -   Должны содержаться в другом меню через родительскую группу или CommandPlacement.<br />-   Учитывает родительский элемент в его определение.<br />-   Могут иметь любые виды меню в качестве родительского.<br />-   Становятся доступными при отображении его родительском меню.<br />-   Не требует программную поддержку для отображения меню.<br /><br /> Команда меню Разворачивающаяся кнопка отображается на кнопке меню. Отображается команда имеет одно из следующих характеристик:<br /><br /> -   Это первая команда отображается, будет заблокирована.<br />-   Это первая отображается команда.<br /><br /> Toolbar<br /> Предоставляет панель инструментов. Панель инструментов имеет следующие характеристики:<br /><br /> -   Игнорирует родительский элемент в его определение.<br />-   Невозможно подменю любой из групп, даже с помощью CommandPlacement.<br />-   Всегда можно просмотреть, выбрав **панели инструментов** на **представление** меню.<br />-   Можно отобразить с помощью [VisibilityItem](0932f551-972d-4194-84bb-426e3e4375e4Vis).<br />-   Требует кода для его создания. Пример создания панели инструментов в разделе [Добавление панели инструментов](../extensibility/adding-a-toolbar.md).<br /><br /> ToolWindowToolbar<br /> Предоставляет панель инструментов, которая присоединяется к определенному окну инструментов, как панель инструментов, присоединенная к среде разработки.<br /><br /> -   Игнорирует родительский элемент в его определение.<br />-   Невозможно подменю любой из групп, даже с помощью CommandPlacement.<br />-   Отображается только в том случае, если отображается окно инструментов, на котором размещена панель инструментов и VSPackage явно добавляет панели инструментов окна средства. Обычно это делается, когда окно инструментов создается путем получения свойства узла панели инструментов \(представленные как <xref:Microsoft.VisualStudio.Shell.Interop.IVsToolWindowToolbarHost> интерфейса\) из кадра окна инструментов, а затем вызвав <xref:Microsoft.VisualStudio.Shell.Interop.IVsToolWindowToolbarHost.AddToolbar%2A> метод.|  
|Условие|Необязательный. См. раздел [Условные атрибуты](../extensibility/vsct-xml-schema-conditional-attributes.md).|  
  
### Дочерние элементы  
  
|Элемент|Описание|  
|-------------|--------------|  
|Родительский|Необязательный. Родительский элемент данного элемента меню.|  
|CommandFlag|Обязательный. См. раздел [Элемент Command флаг](../extensibility/command-flag-element.md). Ниже приведены допустимые значения CommandFlag меню.<br /><br /> -   **AlwaysCreate**<br />-   **DefaultDocked**<br />-   **DefaultInvisible** \-этот флаг не влияет на отображение панели инструментов.<br />-   **DontCache**<br />-   **DynamicVisibility** \-этот флаг не влияет на отображение панели инструментов.<br />-   **IconAndText**<br />-   **NoCustomize**<br />-   **NotInTBList**<br />-   **NoToolbarClose**<br />-   **TextChanges**<br />-   **TextIsAnchorCommand**|  
|Строки|Обязательный. См. раздел [Элемент строки](../extensibility/strings-element.md). Дочерние `ButtonText` должен быть определен элемент.|  
|Комментарий|Необязательный комментарий.|  
  
### Родительские элементы  
  
|Элемент|Описание|  
|-------------|--------------|  
|[Элемент меню](../extensibility/menus-element.md)|Определяет все меню, которые реализует VSPackage.|  
  
## Пример  
  
```  
<Menu guid="cmdGuidWidgetCommands" id="menuIDEditWidget" priority="0x0002" type="Menu"> <Parent guid="cmdSetGuidWidgetCommands" id="groupIDFileEdit"> <CommandFlag>AlwaysCreate</CommandFlag> <Strings> <ButtonText>Edit Widget</ButtonText> </Strings> </Parent> </Menu>  
```  
  
## См. также  
 [Таблицы команд Visual Studio \(. Файлы Vsct\)](../extensibility/internals/visual-studio-command-table-dot-vsct-files.md)