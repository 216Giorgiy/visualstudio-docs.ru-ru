---
title: "Создание элементов управления WPF | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-sdk"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "элемент управления панели элементов"
  - "панель элементов"
  - "wpf"
ms.assetid: 9cc34db9-b0d1-4951-a02f-7537fbbb51ad
caps.latest.revision: 16
ms.author: "gregvanl"
manager: "ghogen"
caps.handback.revision: 16
---
# Создание элементов управления WPF
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Шаблон элемента управления панели элементов WPF \(Windows Presentation Framework\) позволяет создавать элементы управления WPF, автоматически добавляются в **элементов** при установке расширения. В этом разделе показано, как использовать шаблон для создания **элементов** элемента управления, который можно передавать другим пользователям.  
  
 Начиная с Visual Studio 2015, не установить пакет SDK для Visual Studio из центра загрузки. Она будет включена в качестве дополнительного компонента в установку Visual Studio. VS SDK также можно установить позже. Для получения дополнительной информации см. [Установка Visual Studio SDK](../extensibility/installing-the-visual-studio-sdk.md).  
  
## Создание элементов управления WPF  
  
#### Создайте расширение с помощью элементов управления WPF  
  
1.  Создайте проект VSIX с именем `MyToolboxControl`. Можно найти шаблон проекта VSIX в **Новый проект** диалоговом окне под **Visual C\# и расширяемость**.  
  
2.  При открытии проекта, добавить **элементов управления WPF** шаблон элемента с именем `MyToolboxControl`. В **обозревателе решений**, щелкните правой кнопкой мыши узел проекта и выберите **Добавить или создать элемент**. В **Добавление нового элемента** диалоговое окно, последовательно выберите пункты **Visual C\# и расширяемость** и выберите **элементов управления WPF**. В **имя** в нижней части окна, измените имя файла команд для `MyToolboxControl.cs`.  
  
     Теперь решение содержит пользовательский элемент управления `ProvideToolboxControlAttribute`<xref:Microsoft.VisualStudio.Shell.RegistrationAttribute> добавляющий элемент управления **элементов**, и **Microsoft.VisualStudio.ToolboxControl** запись ресурса в манифест VSIX для развертывания.  
  
#### Создание элемента управления пользовательского интерфейса  
  
1.  Откройте MyToolboxControl.xaml в конструкторе.  
  
     В конструкторе показан элемент управления <xref:System.Windows.Controls.Grid>, содержащий элемент управления <xref:System.Windows.Controls.Button>.  
  
2.  Расположите макет сетки. При выборе <xref:System.Windows.Controls.Grid> управления синей панелей отображаются на верхней и левой границ сетки. Щелкая столбцы можно добавить строки и столбцы в сетку.  
  
3.  Добавление дочерних элементов сетки. Можно разместить дочерний элемент управления, перетащив его из **элементов** в раздел сетки или путем установки его `Grid.Row` и `Grid.Column` атрибутов в XAML. В следующем примере добавляется два меток в верхней строке сетки и кнопку на второй строке.  
  
    ```xaml  
    <Grid>  
        <Label Grid.Row="0" Grid.Column="0" Name="label1" />  
        <Label Grid.Row="0" Grid.Column="1" Name="label2" />  
        <Button Name="button1" Click="button1_Click" Grid.Row="1" Grid.ColumnSpan="2" />  
    </Grid>  
    ```  
  
## Переименование элемента управления  
 По умолчанию элемент управления отображается в **элементов** как **MyToolboxControl** в группу с именем **MyToolboxControl.MyToolboxControl**. Можно изменить эти имена в файле MyToolboxControl.xaml.cs.  
  
1.  Откройте MyToolboxControl.xaml.cs в представлении кода.  
  
2.  Найдите класс MyToolboxControl и переименуйте его в TestControl. \(Самый быстрый способ сделать это является Переименуйте класс, выберите **Переименование** из контекстного меню и выполните действия. \(Дополнительные сведения о **Переименование** см. в разделе [Переименовать рефакторинг \(C\#\)](../csharp-ide/rename-refactoring-csharp.md).\)  
  
3.  Последовательно выберите пункты `ProvideToolboxControl` атрибут и измените значение первого параметра **тест**. Это имя группы, которая будет содержать элемент управления в **элементов**.  
  
     Итоговый код должен выглядеть следующим образом:  
  
    ```c#  
    [ProvideToolboxControl("Test", true)]  
    public partial class TestControl : UserControl  
    {  
        public TestControl()  
        {  
            InitializeComponent();  
        }  
    }  
    ```  
  
## Сборка, тестирование и развертывание  
 При отладке проекта, следует найти элемент управления, установленные в **элементов** экспериментального экземпляра Visual Studio.  
  
#### Сборка и тестирование элемента управления  
  
1.  Перестройте проект и запустить отладку.  
  
2.  В новом экземпляре Visual Studio создайте проект приложения WPF. Убедитесь, что открыт конструктор XAML.  
  
3.  Найдите свой элемент управления в **панели элементов** и перетащите его в рабочую область конструирования.  
  
4.  Начните отладку приложения WPF.  
  
5.  Убедитесь, что отображается элемент управления.  
  
#### Развертывание элемента управления  
  
1.  После построения проекта тестирования, можно найти в папке \\bin\\debug\\ проекта VSIX\-файл.  
  
2.  Его можно установить на локальном компьютере, дважды щелкните VSIX\-файл и выполнив процедуру установки. Чтобы удалить элемент управления, перейдите в **средства\-расширения и обновления** для расширения элемента управления, а затем нажмите кнопку **Удаление**.  
  
3.  Отправьте VSIX\-файл в сеть или на веб\-сайт.  
  
     При отправке файла [коллекции Visual Studio](http://go.microsoft.com/fwlink/?LinkID=123847) веб\-сайта, можно использовать другие пользователи **средства\-расширения и обновления** в Visual Studio для поиска элемента управления в Интернете и установить его.