---
title: "В редакторе | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-sdk"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "редакторы [Visual Studio SDK] новый - архитектура"
ms.assetid: 822cbb8d-7ab4-40ee-bd12-44016ebcce81
caps.latest.revision: 31
caps.handback.revision: 31
ms.author: "gregvanl"
manager: "ghogen"
---
# В редакторе
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Редактор состоит из нескольких разных подсистем, которые предназначены для предотвращения редактор текста отдельные модели представления текста и пользовательского интерфейса.  
  
 В этих разделах описываются различные аспекты редактора:  
  
-   [Обзор подсистемы](../extensibility/inside-the-editor.md#overview)  
  
-   [Модель текста](../extensibility/inside-the-editor.md#textmodel)  
  
-   [Текстовое представление](../extensibility/inside-the-editor.md#textview)  
  
 В следующих разделах описывается возможности редактора:  
  
-   [Теги и классификаторов](../extensibility/inside-the-editor.md#tagsandclassifiers)  
  
-   [Украшения](../extensibility/inside-the-editor.md#adornments)  
  
-   [Проекция](../extensibility/inside-the-editor.md#projection)  
  
-   [Структура](../extensibility/inside-the-editor.md#outlining)  
  
-   [Привязок мыши](../extensibility/inside-the-editor.md#mousebindings)  
  
-   [Редактор операций](../extensibility/inside-the-editor.md#editoroperations)  
  
-   [IntelliSense](../extensibility/inside-the-editor.md#intellisense)  
  
##  <a name="overview"></a> Обзор подсистемы  
  
### Подсистема модели текста  
 Подсистема модели текст отвечает для представления текста и включение его обработки. Подсистема модели текст содержит <xref:Microsoft.VisualStudio.Text.ITextBuffer> интерфейс, который описывает последовательность символов, которые должны отображаться в редакторе. Этот текст можно изменить, отслеживаются и обрабатываться различными способами. Текстовой модели также предоставляет типы для следующих аспектов:  
  
-   Служба, которая связывает текст с файлами и управляет чтения и записи их в файловой системе.  
  
-   Разностный служба, которая находит минимальных различий между двумя последовательностями объектов.  
  
-   Система для описания текста в буфере, с точки зрения подмножества текста в других буферов.  
  
 Подсистема модели текст не концепций пользовательского интерфейса \(UI\). Например не несет ответственности за форматирование текста или текста, и она не имеет сведений о визуального оформления, которые могут быть связаны с текстом.  
  
 Открытые типы текста подсистемы модели содержатся в Microsoft.VisualStudio.Text.Data.dll и Microsoft.VisualStudio.CoreUtilitiy.dll, которые зависят только от библиотеки базовых классов .NET Framework и Managed Extensibility Framework \(MEF\).  
  
### Текстовое представление подсистемы  
 Текстовое представление отвечает для форматирования и отображения текста. Типы в этой подсистеме разделяются на два уровня, в зависимости от того, является ли типы полагаться на Windows Presentation Foundation \(WPF\). Наиболее важные типы являются <xref:Microsoft.VisualStudio.Text.Editor.ITextView> и <xref:Microsoft.VisualStudio.Text.Editor.IWpfTextView>, какой элемент управления набор текстовых строк, которые должны отображаться, и также курсор, выделение и средства для Декорирование текст с помощью элементов пользовательского интерфейса WPF. Эта подсистема предоставляет также область отображения поля вокруг текста. Эти поля могут быть расширены и могут содержать различные виды содержимого и визуальных эффектов. Примерами полей являются строки чисел отображает и полосами прокрутки.  
  
 Открытые типы подсистемы представления текста содержатся в Microsoft.VisualStudio.Text.UI.dll и Microsoft.VisualStudio.Text.UI.Wpf.dll. Первая сборка содержит элементы, зависящие от платформы, а второй содержит элементы, характерные для WPF.  
  
### Подсистема классификации  
 Подсистема классификации отвечает за определение свойства шрифта для текста. Классификатор разбивает текст на различные классы, например, «ключевое слово» или «комментарий». Сопоставление форматов классификации связывающая эти классы свойства шрифта, например, «синий Consolas 10 пт». Эта информация используется для представления текста при его форматирует и отображает текст. Теги, который описан более подробно далее в этом разделе включает данные должны быть сопоставлены диапазоны текста.  
  
 Открытые типы классификации подсистемы, содержатся в Microsoft.VisualStudio.Text.Logic.dll и их взаимодействие с визуальными аспектами классификации, содержащиеся в Microsoft.VisualStudio.Text.UI.Wpf.dll.  
  
### Подсистема операций  
 Подсистема операций определяет поведение редактора. Он предоставляет реализацию для команд редактора Visual Studio и система отмены.  
  
## Подробное рассмотрение модели текст текстового представления.  
  
###  <a name="textmodel"></a> Модель текста  
 Подсистема модели текст состоит из различных группировок типы текста. К ним относятся текстовый буфер, моментальные снимки текста и фрагментов текста.  
  
#### Буферы текста и текстовых снимков  
 <xref:Microsoft.VisualStudio.Text.ITextBuffer> Интерфейс представляет последовательность символов Юникода, которые закодированы с помощью UTF\-16, что кодировка используется `String` тип в .NET Framework. Текстовый буфер может быть сохранен как документ файловой системы, но это не является обязательным.  
  
 <xref:Microsoft.VisualStudio.Text.ITextBufferFactoryService> Используется для создания пустой текстовый буфер или текстовый буфер, который инициализируется из строки или из <xref:System.IO.TextReader>. Текстовый буфер может быть сохранен в файловой системе как <xref:Microsoft.VisualStudio.Text.ITextDocument>.  
  
 Текстовый буфер можно изменить любым потоком, пока поток получает право на владение текстовый буфер путем вызова <xref:Microsoft.VisualStudio.Text.ITextBuffer.TakeThreadOwnership%2A>. После этого только этот поток можно внести изменения.  
  
 Текстовый буфер можно выполнить много версий во время существования. Новая версия создается каждый раз, когда изменяется размер буфера и неизменяемый <xref:Microsoft.VisualStudio.Text.ITextSnapshot> представляет содержимое буфера этой версии. Поскольку текст моментальные снимки являются неизменяемыми, может достигать снимок текста в любом потоке, без ограничений, даже если текстовый буфер, который он представляет продолжает изменяться.  
  
#### Моментальные снимки текста и текстовых строк моментальных снимков  
 Можно просмотреть содержимое моментального снимка текст как последовательность знаков или как последовательность строк. Символы и строки, и начинается с нуля. Пустой текстовый снимок содержит нулевые символы и одну пустую строку. Строка отделена с любую допустимую последовательность символов Юникода разрыв строки или начало или конец буфера. Символы разрыва строки, явно представлены в моментальном снимке текста и разрывы строк в текстовом снимке не должны совпадать.  
  
> [!NOTE]
>  Дополнительные сведения о символы разрыва строки в редакторе Visual Studio см. в разделе [Кодировки и разрывы строк](../ide/encodings-and-line-breaks.md).  
  
 Текстовой строки представляется <xref:Microsoft.VisualStudio.Text.ITextSnapshotLine> объекта, который может быть получен из снимка текста для номер конкретной строки или с определенной позиции.  
  
#### SnapshotPoints, SnapshotSpans и NormalizedSnapshotSpanCollections  
 Объект <xref:Microsoft.VisualStudio.Text.SnapshotPoint> представляет положение символа в моментальный снимок. Позиция гарантированно будет находиться между 0 и длину моментального снимка. Объект <xref:Microsoft.VisualStudio.Text.SnapshotSpan> представляет фрагмент текста в моментальный снимок. Гарантируется, что его конечное положение лежать между 0 и длину моментального снимка.<xref:Microsoft.VisualStudio.Text.NormalizedSnapshotSpanCollection> Состоит из набора <xref:Microsoft.VisualStudio.Text.SnapshotSpan> объектов из одного моментального снимка.  
  
#### Диапазоны и NormalizedSpanCollections  
 Объект <xref:Microsoft.VisualStudio.Text.Span> представляет интервал, который может применяться к диапазону текста в текстовом снимке. Моментальный снимок позиций отсчитываются от нуля, поэтому диапазонов можно запустить в любой позиции, включая ноль.`End` Диапазона равно сумме его `Start` свойство и его `Length` свойство. Объект `Span` не включает символ, которая индексируется по `End` свойство. Например, с начала диапазона \= 5 и длина \= 3 имеет окончания \= 8, и содержит знаки в позициях, 5, 6 и 7. Нотация для данного диапазона — 5..8\).  
  
 Два диапазона пересекающимися, если они содержат все общие позиции, включая конечной позиции. Таким образом, пересечение \[3, 5\) и \[2, 7\) — \[3, 5\) и пересечение \[3, 5\) и \[5, 7\) — \[5, 5\). \(Обратите внимание, что \[5, 5\) является пустой диапазон.\)  
  
 Два диапазоны перекрываются, если они содержат общие позиции, за исключением конечной позиции. Пустой диапазон не перекрывается другими диапазонами и перекрытия двух диапазонов не является пустым.  
  
 A <xref:Microsoft.VisualStudio.Text.NormalizedSpanCollection> приведен список диапазонов в порядке свойств Start диапазонов. В списке объединяются перекрывающиеся или смежных диапазонов. Например, если набор диапазонов \[5..9\), \[0..1\), \[3..6\), и \[9..10\), — нормализованный список диапазонов \[0..1\), \[3..10\).  
  
#### ITextEdit, TextVersion и уведомления об изменении текста  
 Можно изменить содержимое текстового буфера с помощью <xref:Microsoft.VisualStudio.Text.ITextEdit> объекта. Создание такого объекта \(с помощью одного из `CreateEdit()` методы <xref:Microsoft.VisualStudio.Text.ITextBuffer>\) запускает транзакцию текст, состоящий из правки текста. Каждый редактирования является заменой некоторые диапазон текста в буфере строкой. Координаты и содержимого каждого изменения заданы относительно моментальный снимок буфера при запуске транзакции.<xref:Microsoft.VisualStudio.Text.ITextEdit> Объект корректирует координаты изменения, которые зависят от других изменений в одной транзакции.  
  
 Например рассмотрим текстовый буфер, который содержит эту строку.  
  
```  
abcdefghij  
```  
  
 Применить транзакции, содержащей два изменения, одно изменение, заменяет диапазон в \[2..4\) с помощью символов `X` и второй правки, которая заменяет диапазон в \[6..9\) с помощью символов `Y`. Этот буфер будет получен результат:  
  
```  
abXefYj  
```  
  
 Координаты для второй изменения были рассчитаны по отношению к содержимое буфера в начале транзакции, до применения первое изменение.  
  
 Изменения в буфер вступают в силу при <xref:Microsoft.VisualStudio.Text.ITextEdit> объект фиксируется путем вызова его `Apply()` метод. В случае отсутствия хотя бы один непустой Правка, новый <xref:Microsoft.VisualStudio.Text.ITextVersion> создается новый <xref:Microsoft.VisualStudio.Text.ITextSnapshot> создается и один `Changed` события. Каждая версия текст имеет другой снимок текста. Снимок текста представляет полное состояние текстового буфера после транзакции изменения, но версия текста описание только изменений из одного снимка в следующий. В целом моментальные снимки текст должен использоваться один раз и затем удаляется, а текст версии должны оставаться активным в течение некоторого времени.  
  
 Текстовая версия содержит <xref:Microsoft.VisualStudio.Text.INormalizedTextChangeCollection>. Эта коллекция содержит описание изменений, при применении моментального снимка, создаст последующих моментального снимка. Каждый <xref:Microsoft.VisualStudio.Text.ITextChange> в коллекции содержит положение символа изменения, строку замены и строку замены. Строку замены пуст основные вставки и замещающая строка — пустой для основных удаления. Нормализованная коллекция всегда является `null` самой последней версии текстового буфера.  
  
 Только один <xref:Microsoft.VisualStudio.Text.ITextEdit> для текстового буфера в любое время можно создать объект и все правки текста, которые должны выполняться в потоке, которому принадлежит текстового буфера \(если Затребован владения\). Редактирование текста можно прервать путем вызова его `Cancel` метода или его `Dispose` метод.  
  
 <xref:Microsoft.VisualStudio.Text.ITextBuffer> также предоставляет `Insert()`, `Delete()`, и `Replace()` найти методы, которые похожи на <xref:Microsoft.VisualStudio.Text.ITextEdit> интерфейса. Вызывает эти действует так же, как создание <xref:Microsoft.VisualStudio.Text.ITextEdit> объекта, подобно звонка, а затем применить изменения.  
  
#### Точки отслеживания и отслеживания диапазонов  
 <xref:Microsoft.VisualStudio.Text.ITrackingPoint> Представляет положение символа в текстовом буфере. Если буфер будет изменена в результате которого вызывает позиции символа для сдвига, точка отслеживания сдвигает с ним. Например если точка отслеживания определяет положение 10 в буфер, а в начало буфера вставляются пять символов, точка отслеживания затем определяет положение 15. Если вставка происходит точно позиции, обозначенное с помощью точки отслеживания, его поведение определяется его <xref:Microsoft.VisualStudio.Text.PointTrackingMode>, который может быть `Positive` или `Negative`. При положительном режим отслеживания точки отслеживания ссылается на тот же знак, который теперь является в конце курсора; Если режим отслеживания является отрицательным, точка отслеживания ссылается на первый символ, вставленной в исходную позицию. Если символ в позиции, который соответствует точке отслеживания удаляется, точка отслеживания сдвигается на первый символ, который следует за удаленной диапазона. Например если точка отслеживания ссылается на символ в позиции 5, а удаляются знаки в позициях 3 по 6, точки отслеживания соответствует символу в положении 3.  
  
 <xref:Microsoft.VisualStudio.Text.ITrackingSpan> Представляет диапазон символов, а не только на одну позицию. Его поведение определяется его <xref:Microsoft.VisualStudio.Text.SpanTrackingMode>. Если используется режим отслеживания диапазонов <xref:Microsoft.VisualStudio.Text.SpanTrackingMode>, отслеживающий диапазон роста для включения текста, вставленного в границах; Если режим отслеживания диапазонов <xref:Microsoft.VisualStudio.Text.SpanTrackingMode>, отслеживающего диапазона не могут содержать текст, вставленный на границах. Тем не менее если используется режим отслеживания диапазонов <xref:Microsoft.VisualStudio.Text.SpanTrackingMode>, вставка помещает текущую позицию в начало и, если режим отслеживания диапазонов <xref:Microsoft.VisualStudio.Text.SpanTrackingMode>, вставка помещает текущая позиция в конце.  
  
 Положение точки отслеживания или диапазон отслеживающего диапазона можно получить для любой моментальный снимок текстового буфера, к которому они принадлежат. Точки отслеживания и отслеживания диапазонов можно безопасно ссылаться из любого потока.  
  
#### Типы содержимого  
 Типы содержимого\-это механизм для определения различных типов содержимого. Тип содержимого может быть типом файла, например «text», «код» или «двоичный», или тип технологии, такие как «xml», «vb» или «c\#». Например слово «using» является зарезервированным словом в C\# и Visual Basic, но не в других языках программирования. Таким образом определение ключевого слова будет ограничен типами содержимого «c\#» и «vb».  
  
 Типы содержимого используются в качестве фильтра для оформления и другие элементы редактора. Многие возможности редактора и точек расширения определяются по типу содержимого; например выделение цветом текста отличается для обычные текстовые файлы, XML\-файлы и файлы исходного кода Visual Basic. Буферы текст обычно назначаются тип содержимого при их создании, и можно изменить тип содержимого текстового буфера.  
  
 Типы содержимого может несколько наследовать от других типов содержимого.<xref:Microsoft.VisualStudio.Utilities.ContentTypeDefinition> Позволяет указать несколько базовых типов как родительские элементы для данного типа содержимого.  
  
 Разработчики могут определять собственные типы содержимого и зарегистрируйте их с помощью <xref:Microsoft.VisualStudio.Utilities.IContentTypeRegistryService>. Многие функции редактора можно определить по отношению к определенному типу содержимого с помощью <xref:Microsoft.VisualStudio.Utilities.ContentTypeAttribute>. Например редактор поля, элементы оформления и обработчики мыши можно определить, чтобы они применялись только к редакторам, отображающих содержимым определенного типа.  
  
###  <a name="textview"></a> Текстовое представление  
 Представление часть шаблона модели представлений контроллер \(MVC\) определяет представления текста, форматирование представления, графические элементы, такие как полосы прокрутки и курсор. Все элементы представления редактора Visual Studio основаны на WPF.  
  
#### Текст представления  
 <xref:Microsoft.VisualStudio.Text.Editor.ITextView> Интерфейс представляет собой независимый от платформы представления текста. Он используется главным образом для отображения текстовых документов в окне, но он может также использоваться для других целей, например, во всплывающей подсказке.  
  
 Текстовое представление ссылается на различные виды текстовых буферах.<xref:Microsoft.VisualStudio.Text.Editor.ITextView.TextViewModel%2A> Свойство ссылается на <xref:Microsoft.VisualStudio.Text.Editor.ITextViewModel> объект, указывающий на эти три разных текстовых буферах: буфер данных, который представляет верхнего уровня данных буфера в буфере, в какие изменение происходит, а visual буфер, который представляет буфер, который отображается в представлении текста.  
  
 Текст форматируется зависимости классификаторы, вложенные в базовом текстовом буфере и графическими элементами с помощью поставщиков обрамления, присоединенные к самому представлению текста.  
  
#### Система координат представления текста  
 Система координат текстовое представление указывает позиций в представлении текста. В этой системе координат x значение 0.0 соответствует к левому краю текста при отображении и y значение 0.0 соответствует верхнему краю текста. x Координации увеличивается слева направо и y координации увеличивается сверху вниз.  
  
 Просмотра \(часть текста в текстовом окне\) не может быть таким же образом горизонтальной прокрутки как может прокручиваться по вертикали. Область просмотра может прокручиваться по горизонтали, изменив его левая координата, чтобы он перемещался по отношению к поверхности рисования. Однако область просмотра может прокручиваться по вертикали достаточно изменить отображаемый текст, который вызывает <xref:Microsoft.VisualStudio.Text.Editor.ITextView.LayoutChanged> для порождения события.  
  
 Логических пикселах соответствуют расстояния в системе координат. При появлении поверхность для отрисовки текста без преобразования изменения масштаба единицы в системе координат отрисовки текста соответствует одному пикселю на экране.  
  
#### Поля  
 <xref:Microsoft.VisualStudio.Text.Editor.ITextViewMargin> Интерфейс представляет поле и позволяет управлять видимостью поля и его размер. Существует четыре предопределенных полей, которые называются «Начало», «Слева», «Вправо» и «Снизу» и присоединяются к верхней, нижней, левой или правой границы представления. Эти поля являются контейнерами, в которых могут размещаться другими полями. Интерфейс определяет методы, возвращающие размер поля и отображением полей. Поля являются визуальные элементы, содержащие дополнительные сведения о представлении текста, к которой присоединен. Например номер строки поле отображает номера строк для представления текста. Поле глифов отображает элементы пользовательского интерфейса.  
  
 <xref:Microsoft.VisualStudio.Text.Editor.IWpfTextViewMarginProvider> Интерфейса отвечает за создание и размещение полей. Поля могут быть упорядочены относительно других полей. Поля с более высоким приоритетом находятся ближе к текстовому представлению. Например если существуют два левого полей, полю A и B поля и поля B имеет низкий приоритет, чем значение поля, поле B отображается слева от поля A.  
  
#### Основное приложение представления текста  
 <xref:Microsoft.VisualStudio.Text.Editor.IWpfTextViewHost> Интерфейс содержит представление текста и любой примыкающими оформление, сопровождающих представления, например, полосы прокрутки. Основное приложение представления текста также содержит поля, подключенных к границе представления.  
  
#### Форматированный текст  
 Текст, который отображается в виде текста, состоящие из <xref:Microsoft.VisualStudio.Text.Formatting.ITextViewLine> объектов. Каждая строка представления текста соответствует одна строка текста в текстовое представление. Длинные строки в буфере основной текст может быть либо частично скрыт \(если не включен перенос слов\) или разбиты на несколько строк для представления текста.<xref:Microsoft.VisualStudio.Text.Formatting.ITextViewLine> Интерфейс содержит методы и свойства для сопоставления координаты и символов, а также для крайних элементов, которые могут быть связаны со строкой.  
  
 <xref:Microsoft.VisualStudio.Text.Formatting.ITextViewLine> объекты создаются с помощью <xref:Microsoft.VisualStudio.Text.Formatting.IFormattedLineSource> интерфейса. Если вас интересуют только текст, отображаемый в текущий момент в представлении, можно игнорировать источника форматирования. Если вы заинтересованы в формате текста, не отображаются в представлении \(например, для поддержки вырезания форматированного текста и вставки\), можно использовать <xref:Microsoft.VisualStudio.Text.Formatting.IFormattedLineSource> для форматирования текста в текстовом буфере.  
  
 Текстовое представление форматирует один <xref:Microsoft.VisualStudio.Text.ITextSnapshotLine> одновременно.  
  
## Возможности редактора  
 Функции редактора разработаны таким образом, чтобы определение компонента отдельно от его реализации. Редактор включает следующие возможности.  
  
-   Теги и классификаторов  
  
-   Украшения  
  
-   Проекция  
  
-   Структура  
  
-   Мыши и ключом привязки  
  
-   Операции и примитивы  
  
-   IntelliSense  
  
###  <a name="tagsandclassifiers"></a> Теги и классификаторов  
 Теги представляют собой маркеры, которые связаны с диапазона текста. Они могут быть представлены различными способами, например, с помощью выделения цветом текста, подчеркивание, графики или всплывающие окна. Классификаторы — один из видов тег.  
  
 Другие виды теги являются <xref:Microsoft.VisualStudio.Text.Tagging.TextMarkerTag> для выделения текста, <xref:Microsoft.VisualStudio.Text.Tagging.OutliningRegionTag> для структуры, и <xref:Microsoft.VisualStudio.Text.Tagging.ErrorTag> для ошибок компиляции.  
  
#### Классификация типов  
 <xref:Microsoft.VisualStudio.Text.Classification.IClassificationType> Интерфейс представляет класс эквивалентности, является абстрактным категорией текста. Классификация типов может несколько наследовать от других типов классификации. Например классификаций языков программирования может включать «ключевое слово», «комментарий» и «идентификатор», которые наследуют от «код». Естественный язык классификации типов могут включать «существительное», «команда» и «выражения», которые наследуют от «естественного языка».  
  
#### Классификация  
 Классификация является экземпляром определенного типа классификации, обычно через диапазон текста. A <xref:Microsoft.VisualStudio.Text.Classification.ClassificationSpan> используется для представления классификацию. Диапазон классификации может рассматриваться как метку, которая охватывает определенного фрагмента текста и сообщает системе, этот диапазон текста от определенного типа классификации.  
  
#### Классификаторы  
 <xref:Microsoft.VisualStudio.Text.Classification.IClassifier> — Это механизм, который разбивает текст на несколько классов. Классификаторы должен быть определен для определенных типов содержимого и для определенных текстовых буферах. Клиентам необходимо реализовать <xref:Microsoft.VisualStudio.Text.Classification.IClassifier> участвовать в классификации текста.  
  
#### Агрегаторы классификатора  
 Агрегатор классификатор — это механизм, которая объединяет все классификаторы для одного текстового буфера в один набор классов. Например классификатор C\# и английского языка классификатора создать классификации на примечание в файле C\#. Рассмотрим этот комментарий.  
  
```  
// This method produces a classifier  
```  
  
 Классификатор C\# может пометить весь диапазон как комментарий и английского языка классификатора может классифицировать «создает» как «действие» и «метод» как «существительное». Агрегатор создает набор неперекрывающихся классификации и тип набора основан на все публикации.  
  
 Агрегатор классификатора также — это классификатор, так как он разбивает текст на несколько классов. Агрегатор классификатора также гарантирует, что существует не перекрывающихся классификации и классификации сортируются. Отдельные классификаторов может вернуть любой набор классов, в любом порядке и перекрывающихся каким\-либо образом.  
  
#### Форматирование классификации и цвета текста  
 Форматирование текста приведен пример функции, которая основана на классификации текста. Используется уровень представления текста для определения отображения текста в приложении. Область форматирования текста зависит от WPF, но логическое определение классификаций не.  
  
 Формат классификации — это набор свойств для типа категория форматирования. Эти форматы наследуют от формата родительского типа классификации.  
  
 <xref:Microsoft.VisualStudio.Text.Classification.IClassificationFormatMap> Схема из типа классификации в набор свойств форматирования текста. Реализация формата схемы в редакторе обрабатывает все экспорты форматов классификации.  
  
###  <a name="adornments"></a> Украшения  
 Элементы оформления, графические эффекты, которые не связаны непосредственно с шрифт и цвет символов в текстовое представление. Например Подчеркивание красной волнистой линией, которое используется для пометки некомпилируемый код во многих языках программирования является embedded обрамления и подсказки отображаются всплывающие элементы оформления. Элементы оформления являются производными от <xref:System.Windows.UIElement> и реализовать <xref:Microsoft.VisualStudio.Text.Tagging.ITag>. Два специальных типа обрамления тег <xref:Microsoft.VisualStudio.Text.Tagging.SpaceNegotiatingAdornmentTag>, для оформления, занимающих одинаковое пространство как текст в представлении, и <xref:Microsoft.VisualStudio.Text.Tagging.ErrorTag>, для подчеркивание волнистой линией.  
  
 Внедренные элементы оформления, графики, которая является частью представления форматированного текста. Они упорядочены в различных слоях Z\-порядка. Существует три встроенных слои, следующим образом: текст, курсор и выделение. Однако разработчики могут определять дополнительные слои и поместить их в порядке относительно друг друга. Три вида внедренные элементы оформления, оформлений текста относительно \(которые перемещения при перемещении текста, а также удаляется при удалении текста\), представление относительно оформлений \(которые имеют с нетекстовых части представления\) и управляются владельцем оформлений \(разработчик должен управлять их размещения\).  
  
 Всплывающие элементы оформления — это изображения, появляются в небольшом окне над представлением текста, например, подсказок.  
  
###  <a name="projection"></a> Проекция  
 Проекции — это метод для создания разных видов текстовый буфер, который не хранят текст, но вместо объединяет текст из других текстовых буферов. Например буфер проекции может использоваться для объединения текста из двух буферов и представит результаты, если это только одного буфера или скрыть части текста в один буфер. Буфер проекции может выступать в качестве исходного буфера другой буфер проекции. Набор буферов, связанных с помощью проекции можно создать для изменения порядка текста различными способами. \(Такой набор называется также *графу буферов*.\) Функция структурирования текста Visual Studio реализуется с помощью буфера проекции для скрытия свернутого текста и редактор Visual Studio для страниц ASP.NET использует проекцию для поддержки внедренных языков, например Visual Basic и C\#.  
  
 <xref:Microsoft.VisualStudio.Text.Projection.IProjectionBuffer> Создается с помощью <xref:Microsoft.VisualStudio.Text.Projection.IProjectionBufferFactoryService>. Буфер проекции, представленного упорядоченная последовательность <xref:Microsoft.VisualStudio.Text.ITrackingSpan> объектов, которые называются *исходных диапазонов*. Содержимое этих периодов представляются в виде последовательности символов. Буферы текста, из которых рисуются исходных диапазонов называются *источника буферы*. Клиентам буфера проекции, имейте в виду, что оно отличается от обычного текстового буфера не требуется.  
  
 Буфер проекции прослушивает события изменения текста на исходные буферы. Если текст в источнике охватывает изменения, буфера проекции сопоставляется собственный координаты координаты измененный текст и создает события соответствующие изменения текста. Например рассмотрим исходные буферы A и B с таким содержимым:  
  
```  
A: ABCDE  
B: vwxyz  
```  
  
 Если буфер проекции P, сформированным из двух фрагментов текста, имеющую все буфера и другие, все буфера B, P имеет следующее содержимое:  
  
```  
P: ABCDEvwxyz  
```  
  
 Если подстрока `xy` удаляется из буфера B, а затем буфер P формирует событие, которое указывает, что были удалены знаки в позициях, 7 и 8.  
  
 Буфер проекции можно также изменить непосредственно. Он распространяет изменения в соответствующий источник буферы. Например если строка вставляется в буфер P позиции 6 \(исходной позиции символ «v»\), вставки распространяется буфер B в позиции 1.  
  
 Существуют ограничения на исходных диапазонов, которые участвуют в буфере проекции. Исходных диапазонов не могут перекрываться; расположение в буфере проекции не удается сопоставить более одного расположения в буфере любой источник и расположение в исходном буфере невозможно сопоставить с более чем одного места в буфере проекции. Circularities не допускаются в отношении исходного буфера.  
  
 События возникают, когда набор исходных буферов при изменении буфера проекции и набор исходных диапазонов изменения.  
  
 Буфер элизии — это специальный буфера проекции. В основном используется для структурирования и операций, которые можно разворачивать и сворачивать блоки текста. Буфер элизии основана на единственного исходного буфера и диапазонов в буфере элизии должны быть упорядочены таким же, как они были упорядочены в исходный буфер.  
  
##### График буфера  
 <xref:Microsoft.VisualStudio.Text.Projection.IBufferGraph> Интерфейс включает сопоставление между граф буферов проекции. Все буферы текста и буферов проекции собираются в ориентированного ациклического графа, подобно дерево абстрактного синтаксиса, который создается с помощью языкового компилятора. Граф определяется верхнего буфера, который может быть любой текстовый буфер. Графе буферов можно сопоставить с точки в верхнем буфере на момент исходного буфера или из диапазона в буфере верхний набор диапазонов в исходный буфер. Аналогично он сопоставления или span из исходного буфера в позицию верхнего буфера. Графы буфера создаются с помощью <xref:Microsoft.VisualStudio.Text.Projection.IBufferGraphFactoryService>.  
  
##### События и буферов проекции  
 При изменении буфера проекции изменения отправляются из буфера проекции буферы, зависящие от нее. После изменения все буферы буфера изменение событий, начиная с самой глубокой буфера.  
  
###  <a name="outlining"></a> Структура  
 Структурирование является возможность разворачивать и сворачивать различные блоки текста в текстовое представление. Структурирование определяется как тип объекта <xref:Microsoft.VisualStudio.Text.Tagging.ITag>, в так же, как определенные элементы оформления. A <xref:Microsoft.VisualStudio.Text.Tagging.OutliningRegionTag> — тег, определяющий область текста, можно разворачивать и сворачивать. Чтобы использовать структуру, необходимо импортировать <xref:Microsoft.VisualStudio.Text.Outlining.IOutliningManagerService> для получения <xref:Microsoft.VisualStudio.Text.Outlining.IOutliningManager>. Диспетчер структуры перечисляет сворачивается и разворачивается различных блоков, которые представлены в виде <xref:Microsoft.VisualStudio.Text.Outlining.ICollapsible> объектов и создает соответствующие события.  
  
###  <a name="mousebindings"></a> Привязок мыши  
 Привязок мыши связать различные команды движения мыши. Привязок мыши определяются с помощью <xref:Microsoft.VisualStudio.Text.Editor.IMouseProcessorProvider>, и привязок клавиш определяются с помощью <xref:Microsoft.VisualStudio.Text.Editor.IKeyProcessorProvider>.<xref:Microsoft.VisualStudio.Text.Editor.IWpfTextViewHost> Автоматически создает все привязки и связывает их с события мыши в представлении.  
  
 <xref:Microsoft.VisualStudio.Text.Editor.IMouseProcessor> Интерфейс содержит обработчики событий предварительной обработки и последующей обработки для разных событий мыши. Для обработки одного из событий, можно переопределить некоторые методы в <xref:Microsoft.VisualStudio.Text.Editor.MouseProcessorBase>.  
  
###  <a name="editoroperations"></a> Редактор операций  
 Редактор операции можно использовать для автоматизации взаимодействия с редактор для написания сценариев и других целей. Можно импортировать <xref:Microsoft.VisualStudio.Text.Operations.IEditorOperationsFactoryService> операций доступа к данной <xref:Microsoft.VisualStudio.Text.Editor.ITextView>. Затем эти объекты можно использовать для изменения выбора прокрутки и переместить курсор в различные части представления.  
  
###  <a name="intellisense"></a> IntelliSense  
 Технология IntelliSense поддерживает завершение операторов, справка сигнатуры \(также известный как параметр info\), кратких сведений и лампочки.  
  
 Завершение операторов предоставляет всплывающие списки потенциальных завершений для имен методов, XML\-элементов и другие элементы программирования или разметки. В общем случае жест пользователя вызывает завершение сеанса. Сеанс отображает список завершений, потенциальных и пользователя можно выбрать один или закрыть список.<xref:Microsoft.VisualStudio.Language.Intellisense.ICompletionBroker> Отвечает за создание и запуск <xref:Microsoft.VisualStudio.Language.Intellisense.ICompletionSession>.<xref:Microsoft.VisualStudio.Language.Intellisense.ICompletionSource> Вычисляет <xref:Microsoft.VisualStudio.Language.Intellisense.CompletionSet> элементов завершения сеанса.  
  
## См. также  
 [Служба языка и точек расширения редактора](../extensibility/language-service-and-editor-extension-points.md)   
 [Редактор Imports](../extensibility/editor-imports.md)