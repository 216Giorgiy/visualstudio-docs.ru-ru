---
title: "В редакторе | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: vs-ide-sdk
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: editors [Visual Studio SDK], new - architecture
ms.assetid: 822cbb8d-7ab4-40ee-bd12-44016ebcce81
caps.latest.revision: "31"
author: gregvanl
ms.author: gregvanl
manager: ghogen
ms.workload: vssdk
ms.openlocfilehash: 585da54c691bda21a363dfe1308c6ed229a024ca
ms.sourcegitcommit: 32f1a690fc445f9586d53698fc82c7debd784eeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="inside-the-editor"></a>В редакторе
Редактор состоит из нескольких разных подсистем, которые предназначены для сохранения редакторе отдельные модели текста из текстового представления и пользовательский интерфейс.  
  
 В этих разделах описываются различные аспекты редактора:  
  
-   [Обзор подсистемы](../extensibility/inside-the-editor.md#overview)  
  
-   [Модель текста](../extensibility/inside-the-editor.md#textmodel)  
  
-   [Текстовое представление](../extensibility/inside-the-editor.md#textview)  
  
 В этих разделах описаны возможности редактора:  
  
-   [Теги и классификаторы](../extensibility/inside-the-editor.md#tagsandclassifiers)  
  
-   [Украшения](../extensibility/inside-the-editor.md#adornments)  
  
-   [Проекция](../extensibility/inside-the-editor.md#projection)  
  
-   [Структура](../extensibility/inside-the-editor.md#outlining)  
  
-   [Привязок мыши](../extensibility/inside-the-editor.md#mousebindings)  
  
-   [Редактор операций](../extensibility/inside-the-editor.md#editoroperations)  
  
-   [IntelliSense](../extensibility/inside-the-editor.md#intellisense)  
  
##  <a name="overview"></a>Обзор подсистемы  
  
### <a name="text-model-subsystem"></a>Подсистема модели текста  
 Подсистема модели текста отвечает для представления текста и включение его обработки. Подсистема модели текст содержит <xref:Microsoft.VisualStudio.Text.ITextBuffer> интерфейс, который описывает последовательность символов, которые должны отображаться в редакторе. Этот текст можно изменить, отслеживаются и обрабатываться различными способами. Текстовой модели также предоставляет типы для следующих аспектов:  
  
-   Служба, которая связывает текст с файлами, а также управляет чтения и записи их в файловой системе.  
  
-   Разностный служба, которая находит минимальное различия между двумя последовательностями объектов.  
  
-   Система для описания текст в буфере, с точки зрения подмножества текста в другие буферы.  
  
 Подсистема модели текста предоставляется концепций пользовательского интерфейса (UI). Например не отвечает за форматирование текста или текста, и он не имеет сведений о визуального оформления, которые могут быть связаны с текстом.  
  
 Открытые типы текста подсистемы модели содержатся в Microsoft.VisualStudio.Text.Data.dll и Microsoft.VisualStudio.CoreUtilitiy.dll, которые зависят от только библиотеки базовых классов .NET Framework и Managed Extensibility Framework (MEF).  
  
### <a name="text-view-subsystem"></a>Текстовое представление подсистемы  
 Для форматирования и отображения текста отвечает подсистеме представления текста. Типы в этой подсистемы делятся на два уровня, в зависимости от того, является ли типы полагаться на Windows Presentation Foundation (WPF). Наиболее важные типы <xref:Microsoft.VisualStudio.Text.Editor.ITextView> и <xref:Microsoft.VisualStudio.Text.Editor.IWpfTextView>, какой элемент управления, набор текстовых строк, которые должны отображаться и также курсор, выбор и средства для Декорирование текст с помощью элементов пользовательского интерфейса WPF. Область отображения поля вокруг текста также предоставляет этой подсистемы. Эти поля можно расширить и может содержать различные виды содержимого и визуальных эффектов. Примерами полей являются строки чисел отображает и полосами прокрутки.  
  
 Открытые типы подсистемы текстовое представление содержатся в Microsoft.VisualStudio.Text.UI.dll и Microsoft.VisualStudio.Text.UI.Wpf.dll. Первая сборка содержит элементы независимая от платформы, и второй с элементами, характерные для WPF.  
  
### <a name="classification-subsystem"></a>Подсистема классификации  
 Подсистема классификации отвечает за определение свойства шрифта для текста. Классификатор разбивает текст на различные классы, например, «ключевое слово» или «комментарий». Сопоставление форматов классификации связывающая эти классы свойства шрифта, например, «синий Consolas в качестве используемого 10 пт». Эта информация используется в представлении текста при форматирует и отображает текст. Добавление тегов, который описан более подробно далее в этом разделе, позволяет данных необходимо сопоставить с диапазоны текста.  
  
 Открытые типы классификации подсистемы, содержатся в Microsoft.VisualStudio.Text.Logic.dll и их взаимодействия с визуальных аспектов классификации, которые содержатся в Microsoft.VisualStudio.Text.UI.Wpf.dll.  
  
### <a name="operations-subsystem"></a>Подсистема операций  
 Подсистема операций определяет поведение редактора. Предоставляет реализацию для команд редактора Visual Studio и системе отмены.  
  
## <a name="a-closer-look-at-the-text-model-and-the-text-view"></a>Более подробно рассмотрим текстовой модели и представлением текста  
  
###  <a name="textmodel"></a>Модель текста  
 Подсистема модели текст включает разные типы текста группы. К ним относятся буфер текста, снимков текста и фрагментов текста.  
  
#### <a name="text-buffers-and-text-snapshots"></a>Буферы текст и текст моментальные снимки  
 <xref:Microsoft.VisualStudio.Text.ITextBuffer> Интерфейс представляет последовательность символов Юникода, которые закодированы с помощью UTF-16, что кодировка используется `String` тип в .NET Framework. Буфер текста может быть сохранен как документ системных файлов, но это не является обязательным.  
  
 <xref:Microsoft.VisualStudio.Text.ITextBufferFactoryService> Используется для создания пустой текстовый буфер или текстовый буфер, который инициализируется из строки или из <xref:System.IO.TextReader>. Буфер текста может быть сохранен в файловой системе как <xref:Microsoft.VisualStudio.Text.ITextDocument>.  
  
 Буфер текста можно изменить с помощью любой поток, пока поток принимает право на владение текстового буфера путем вызова <xref:Microsoft.VisualStudio.Text.ITextBuffer.TakeThreadOwnership%2A>. После этого только потока можно выполнить изменения.  
  
 Буфер текста можно выполнить много версий во время существования. Доступна новая версия создается каждый раз, чтобы изменить размер буфера и неизменяемый <xref:Microsoft.VisualStudio.Text.ITextSnapshot> представляет содержимое буфера этой версии. Поскольку моментальные снимки текста являются неизменяемыми, можно открыть снимок текста в любом потоке, без ограничений, даже если текстовый буфер, который он представляет продолжает изменяться.  
  
#### <a name="text-snapshots-and-text-snapshot-lines"></a>Моментальные снимки текста и строк текста моментальных снимков  
 Можно просмотреть содержимое моментального снимка текст как последовательность знаков или последовательности строк. Символы и строки, оба индексированы, начиная с нуля. Моментальный снимок пустой текст содержит нулевые символы и одну пустую строку. Строка отделена с любую допустимую последовательность символов разрыва строки Юникода или с начала или конца буфера. Символы разрыва строки явно представлены в моментальном снимке текста, а разрывы в текст моментального снимка, могут быть одинаковыми.  
  
> [!NOTE]
>  Дополнительные сведения о символы разрыва строки в редакторе Visual Studio см. в разделе [кодировки и разрывы строк](../ide/encodings-and-line-breaks.md).  
  
 Строки текста, представленного <xref:Microsoft.VisualStudio.Text.ITextSnapshotLine> объект, который можно получить из моментального снимка текста для номер конкретной строки или с определенной позиции.  
  
#### <a name="snapshotpoints-snapshotspans-and-normalizedsnapshotspancollections"></a>SnapshotPoints, SnapshotSpans и NormalizedSnapshotSpanCollections  
 Объект <xref:Microsoft.VisualStudio.Text.SnapshotPoint> представляет позицию символа в моментальном снимке. Позиция обязательно находиться между 0 и длину моментального снимка. Объект <xref:Microsoft.VisualStudio.Text.SnapshotSpan> представляет фрагмент текста в моментальном снимке. Гарантируется, что его конечной позиции находиться между 0 и длину моментального снимка. <xref:Microsoft.VisualStudio.Text.NormalizedSnapshotSpanCollection> Состоит из набора <xref:Microsoft.VisualStudio.Text.SnapshotSpan> объекты из одного моментального снимка.  
  
#### <a name="spans-and-normalizedspancollections"></a>Диапазоны и NormalizedSpanCollections  
 Объект <xref:Microsoft.VisualStudio.Text.Span> представляет временной интервал, применимый к диапазону текста в моментальном снимке текста. Моментальный снимок позиций отсчитываются от нуля, поэтому диапазонов можно запустить в любой позиции, включая ноль. `End` Свойства фрагмента равно сумме его `Start` свойство и его `Length` свойство. Объект `Span` не включает символ, которая индексируется по `End` свойство. Например, фрагмент с начала — 5, длина = 3 имеет окончания = 8, и содержит знаки в позициях, 5, 6 и 7. Нотация для этой области — 5..8).  
  
 Два диапазона пересекающимися, если они содержат все общие позиции, включая конечной позиции. Таким образом, пересечение [3, 5) и [2, 7) — [3, 5) и пересечение [3, 5) и [5, 7) — [5, 5). (Обратите внимание, что [5, 5) является пустой интервал.)  
  
 Два диапазоны перекрываются, если они содержат общие позиции, за исключением конечной позиции. Пустой интервал никогда не перекрывается другими диапазонами и перекрытия двух диапазонов никогда не является пустым.  
  
 Объект <xref:Microsoft.VisualStudio.Text.NormalizedSpanCollection> приведен список диапазонов порядке свойства начала диапазонов. В списке объединяются перекрывающиеся или смежных диапазонов. Например, если набор диапазонов [5..9), [0..1), [3..6), и [9..10), — нормализованный список диапазонов [0..1), [3..10).  
  
#### <a name="itextedit-textversion-and-text-change-notifications"></a>ITextEdit, TextVersion и уведомления об изменении текста  
 Содержимое текстового буфера может быть изменен с помощью <xref:Microsoft.VisualStudio.Text.ITextEdit> объекта. Создание такого объекта (с помощью одного из `CreateEdit()` методы <xref:Microsoft.VisualStudio.Text.ITextBuffer>) запускает транзакцию текст, состоящий из изменений текста. Каждый редактирования является замена некоторые диапазон текста в буфере строкой. Координаты и содержимого каждого изменения заданы относительно моментального снимка буфера при запуске транзакции. <xref:Microsoft.VisualStudio.Text.ITextEdit> Объект корректирует координаты изменения, которые зависят от других изменений в одной транзакции.  
  
 Например рассмотрим текстовый буфер, который содержит эту строку.  
  
```  
abcdefghij  
```  
  
 Применить транзакции, которая содержит два изменения, одно изменение, заменяющий диапазон в [2..4) с помощью символа `X` и второй редактирования, который заменяет диапазон в [6..9) с помощью символа `Y`. Результатом является этот буфер:  
  
```  
abXefYj  
```  
  
 Вычисленные координаты для второй изменения относительно содержимое буфера в начале транзакции, до применения первое изменение.  
  
 Изменения в буфер вступили в силу при <xref:Microsoft.VisualStudio.Text.ITextEdit> объект фиксируется путем вызова его `Apply()` метод. Если нет хотя бы один непустой Правка, новый <xref:Microsoft.VisualStudio.Text.ITextVersion> создается новый <xref:Microsoft.VisualStudio.Text.ITextSnapshot> создается и один `Changed` события. Каждая версия текст имеет другой снимок текста. Снимок текста представляет полное состояние буфера текста после транзакция редактирования, но версии текстовое описание только изменений из одного снимка к следующему. В целом моментальные снимки текст должен использоваться один раз и затем удаляется, пока версии текста должен существовать некоторое время.  
  
 Текстовая версия содержит <xref:Microsoft.VisualStudio.Text.INormalizedTextChangeCollection>. Эта коллекция содержит описание изменений, при применении к снимку сформирует последующих моментального снимка. Каждый <xref:Microsoft.VisualStudio.Text.ITextChange> в коллекции содержится позицию символа изменения в строку замены и строку замены. Строку замены пуст основные вставки, и строка замены является пустым для основных удаления. Нормализованная коллекция всегда является `null` самой последней версии текстового буфера.  
  
 Только один <xref:Microsoft.VisualStudio.Text.ITextEdit> для буфера текста в любое время можно создать объект и все изменения текста необходимо выполнять в потоке, которому принадлежит буфер текста (если Затребован владения). Редактирование текста можно прервать путем вызова его `Cancel` метод или его `Dispose` метод.  
  
 <xref:Microsoft.VisualStudio.Text.ITextBuffer>также предоставляет `Insert()`, `Delete()`, и `Replace()` найти методы, которые опираются на <xref:Microsoft.VisualStudio.Text.ITextEdit> интерфейса. Вызов этих действует так же, как создание <xref:Microsoft.VisualStudio.Text.ITextEdit> объекта, аналогичные вызовом, а затем применяет изменения.  
  
#### <a name="tracking-points-and-tracking-spans"></a>Отслеживание точек и отслеживания диапазонов  
 <xref:Microsoft.VisualStudio.Text.ITrackingPoint> Представляет положение символа в буфер текста. Если буфер изменяется в результате которого вызывает позиции символа, который необходимо сдвинуть, точка отслеживания смещается соответствующим образом его. Например если точка отслеживания определяет положение 10 в буфер и вставляются пять символов в начале буфера, точка отслеживания затем определяет положение 15. Если вставка происходит точно позиции, обозначенное с помощью точки отслеживания, его поведение определяется его <xref:Microsoft.VisualStudio.Text.PointTrackingMode>, который может быть либо `Positive` или `Negative`. Если режим отслеживания является положительным, точка отслеживания ссылается на один и тот же символ, который теперь по окончании вставки. Если режим отслеживания является отрицательным, точка отслеживания относится к первым символом inserted исходной позиции. Если символ позиции, представленного точки отслеживания удаляется, точка отслеживания сдвигается на первый символ, который следует за удаленного диапазона. Например если точка отслеживания ссылается на указанный символ в позиции 5, а удаляются знаки в позициях 3 – 6, точка отслеживания ссылается символ в позиции 3.  
  
 <xref:Microsoft.VisualStudio.Text.ITrackingSpan> Представляет диапазон символов, а не только на одну позицию. Его поведение определяется его <xref:Microsoft.VisualStudio.Text.SpanTrackingMode>. Если используется режим отслеживания диапазонов <xref:Microsoft.VisualStudio.Text.SpanTrackingMode>, отслеживающий диапазон роста для включения текста, вставленного в границах; Если задан режим отслеживания диапазонов <xref:Microsoft.VisualStudio.Text.SpanTrackingMode>, отслеживающий диапазон не включают текста, вставленного в границах. Тем не менее если используется режим отслеживания диапазонов <xref:Microsoft.VisualStudio.Text.SpanTrackingMode>, вставка помещает текущую позицию в начало и если режим отслеживания диапазонов <xref:Microsoft.VisualStudio.Text.SpanTrackingMode>, вставка помещает текущая позиция в конце.  
  
 Можно получить положение точки отслеживания или диапазон области отслеживания для любого моментального снимка буфера текста, к которому они принадлежат. Отслеживание точек и отслеживания диапазонов можно безопасно ссылаться из любого потока.  
  
#### <a name="content-types"></a>Типы содержимого  
 Типы содержимого представляют собой механизм для определения различных видов содержимого. Тип содержимого может быть тип файла, например «text», «код» или «binary» или тип технологии, такие как «xml», «vb» или «c#». Например слово «using» является зарезервированным словом в C# и Visual Basic, но не в других языках программирования. Таким образом определение это ключевое слово будет ограничена типы содержимого «c#» и «vb».  
  
 Типы содержимого используются в качестве фильтра для оформления и других элементов в редакторе. Многие функции редактора и точек расширения определяются по типу содержимого; Например цвета текста отличается для простых текстовых файлов, XML-файлы и файлы исходного кода Visual Basic. Буферы текста обычно назначаются типа содержимого, при их создании, и можно изменить тип содержимого текстового буфера.  
  
 Типы содержимого могут несколько наследовать от других типов содержимого. <xref:Microsoft.VisualStudio.Utilities.ContentTypeDefinition> Позволяет указать несколько базовых типов как родительские для данного типа содержимого.  
  
 Разработчики могут определять свои собственные типы содержимого и зарегистрируйте их с помощью <xref:Microsoft.VisualStudio.Utilities.IContentTypeRegistryService>. Многие возможности редактора можно определить по отношению к определенному типу содержимого с помощью <xref:Microsoft.VisualStudio.Utilities.ContentTypeAttribute>. Например редактор поля, элементы оформления и обработчики мыши можно определить, чтобы они применялись только к редакторы, отображающие содержимым определенного типа.  
  
###  <a name="textview"></a>Текстовое представление  
 Часть шаблона модели view controller (MVC) представления определяет представления текста, форматирование представления, графические элементы, такие как полосы прокрутки и курсор. Все элементы представления редактора Visual Studio основаны на WPF.  
  
#### <a name="text-views"></a>Текст представления  
 <xref:Microsoft.VisualStudio.Text.Editor.ITextView> Интерфейс представляет собой независимый от платформы представления текста. Он используется главным образом для отображения текстовых документов в окне, но он может также использоваться для других целей, например, во всплывающей подсказке.  
  
 Текстовое представление ссылается на различные виды текстовыми буферами. <xref:Microsoft.VisualStudio.Text.Editor.ITextView.TextViewModel%2A> Свойство ссылается на <xref:Microsoft.VisualStudio.Text.Editor.ITextViewModel> объект, указывающий на эти три разных текстовых буферов: буфер данных, который представляет верхнего уровня данных буфера в буфере, в какие изменение происходит, а visual буфер, который представляет буфер, который является отображается в представлении текста.  
  
 Текст форматируется в зависимости от классификаторы, подключенные к соответствующему буферу текста и графическими элементами с помощью поставщиков оформления, подключенные к самому представлению текста.  
  
#### <a name="the-text-view-coordinate-system"></a>Системы координат представления текста  
 Системы координат представления текста указывает местоположение в представлении текста. В этой системе координат x значение 0,0 соответствует к левому краю текста, а значение y 0,0 по верхнему краю отображаемого текста. Координата x увеличивается слева направо, и координаты y увеличивается сверху вниз.  
  
 Окно просмотра (часть текста в текстовом окне) не может осуществляться горизонтальная прокрутка так же, как может прокручиваться по вертикали. Область просмотра может прокручиваться по горизонтали, изменив его левой координаты, чтобы он перемещает по отношению к поверхности рисования. Тем не менее, область просмотра может прокручиваться по вертикали путем изменения отображаемого текста, что приведет к тому <xref:Microsoft.VisualStudio.Text.Editor.ITextView.LayoutChanged> вызова события.  
  
 Расстояние в системе координат соответствуют логических пикселях. При отображении поверхность для отрисовки текста без масштабирования преобразования одной единицы в системе координат отрисовки текста соответствует один пиксель на экране.  
  
#### <a name="margins"></a>Поля  
 <xref:Microsoft.VisualStudio.Text.Editor.ITextViewMargin> Интерфейс представляет поле и позволяет управлять отображением поля и его размер. Существует четыре предопределенных полей, которые называются «Top», «Слева», «Справа» и «Вниз» и присоединяются к верхней, нижней, левой или правой границы представления. Эти поля являются контейнерами, в которых могут размещаться другими полями. Интерфейс определяет методы, которые возвращают размер поля и видимость поля. Поля являются визуальные элементы, которые содержат дополнительные сведения о представлении текста, к которому они привязаны. Например номер строки поле отображает номера строк для представления текста. Поле глифов отображает элементы пользовательского интерфейса.  
  
 <xref:Microsoft.VisualStudio.Text.Editor.IWpfTextViewMarginProvider> Интерфейса отвечает за создание и размещение полей. Поля могут быть упорядочены по отношению к другими полями. Поля с более высоким приоритетом ближе расположены, для представления текста. Например если существует два левого полей, полю A и B поля и поля B имеет более низкий приоритет, чем полю A, поле B отображается слева от поля A.  
  
#### <a name="the-text-view-host"></a>Основное приложение представления текста  
 <xref:Microsoft.VisualStudio.Text.Editor.IWpfTextViewHost> Интерфейс содержит представления текста и все смежные оформление, сопровождающих представления, например, полосы прокрутки. Основное приложение представления текста также содержит поля, подключенные к границы представления.  
  
#### <a name="formatted-text"></a>Форматированный текст  
 Текст, который отображается в виде текста, состоит из <xref:Microsoft.VisualStudio.Text.Formatting.ITextViewLine> объектов. Каждая строка представления текста соответствует одна строка текста в представлении текста. Длинные строки в буфере основной текст может быть либо частично скрывается (если не включена перенос слов) или разбить на несколько строк для представления текста. <xref:Microsoft.VisualStudio.Text.Formatting.ITextViewLine> Интерфейс содержит методы и свойства для сопоставления координаты и символов, а также для оформления, которые могут быть связаны со строкой.  
  
 <xref:Microsoft.VisualStudio.Text.Formatting.ITextViewLine>объекты создаются с помощью <xref:Microsoft.VisualStudio.Text.Formatting.IFormattedLineSource> интерфейса. Если вас интересуют только текст, который в настоящее время отображается в представлении, можно игнорировать источника форматирования. Если вы заинтересованы в формате текста, не отображаются в представлении (например, для поддержки вырезания форматированного текста и вставки), можно использовать <xref:Microsoft.VisualStudio.Text.Formatting.IFormattedLineSource> для форматирования текста в буфер текста.  
  
 Текстовое представление форматирует один <xref:Microsoft.VisualStudio.Text.ITextSnapshotLine> одновременно.  
  
## <a name="editor-features"></a>Функции редактора  
 Возможности редактора разработаны таким образом, чтобы определение функции отдельно от его реализации. Редактор включает следующие возможности.  
  
-   Теги и классификаторы  
  
-   Украшения  
  
-   Проекция  
  
-   структуризация  
  
-   С помощью мыши и ключом привязки  
  
-   Операции и примитивы  
  
-   IntelliSense  
  
###  <a name="tagsandclassifiers"></a>Теги и классификаторы  
 Теги — это маркеры, которые связаны с диапазона текста. Они могут быть представлены различными способами, например, с помощью выделения цветом текста, подчеркивание, графики или всплывающие окна. Классификаторы — один из видов тег.  
  
 Другие виды тегов, <xref:Microsoft.VisualStudio.Text.Tagging.TextMarkerTag> для выделения текста, <xref:Microsoft.VisualStudio.Text.Tagging.OutliningRegionTag> для структуры, и <xref:Microsoft.VisualStudio.Text.Tagging.ErrorTag> для ошибок компиляции.  
  
#### <a name="classification-types"></a>Классификация типов  
 <xref:Microsoft.VisualStudio.Text.Classification.IClassificationType> Интерфейс представляет класс эквивалентности, является абстрактным категорией текста. Классификация типов может несколько наследовать от других типов классификации. Например классификаций языков программирования могут включать «ключевое слово», «комментарий» и «идентификатор», которые наследуют от «code». Естественный язык классификационных типов может включать «существительное», «команды» и «прилагательное», которые наследуют от «естественного языка».  
  
#### <a name="classifications"></a>Классификация  
 Классификация является экземпляром определенного типа классификации, обычно через фрагмент текста. Объект <xref:Microsoft.VisualStudio.Text.Classification.ClassificationSpan> используется для представления классификацию. Диапазон классификации может рассматриваться как метку, которая охватывает определенный фрагмент текста и сообщает системе, этот фрагмент текста, определенного типа классификации.  
  
#### <a name="classifiers"></a>Классификаторы  
 <xref:Microsoft.VisualStudio.Text.Classification.IClassifier> — Это механизм, который разбивает текст на несколько классификаций. Классификаторы должно быть определено для типов содержимого и экземпляр для буферов определенного текста. Клиенты должны реализовать <xref:Microsoft.VisualStudio.Text.Classification.IClassifier> участвовать в классификации текста.  
  
#### <a name="classifier-aggregators"></a>Классификатор агрегаторы  
 Агрегатор классификатор — это механизм, объединяет все классификаторы для одного текстового буфера в один набор классификации. Например классификатор C# и английского языка классификатор создать классификации на примечание в файле C#. Рассмотрим этот комментарий.  
  
```  
// This method produces a classifier  
```  
  
 Классификатор C# может пометить весь диапазон как комментарий и классификатор английского языка может распределить «создает» как «действие» и «method», «существительное». Средство инвентаризации программного обеспечения создается набор неперекрывающиеся классификации и тип набора основан на все публикации.  
  
 Агрегатор классификатора также — это классификатор, так как он разбивает текст на несколько классификаций. Классификатор инвентаризации программного обеспечения также гарантирует, что имеются перекрывающиеся классификации не и классификации сортируются. Отдельные классификаторов может вернуть любой набор классов, в любом порядке и перекрывающихся каким-либо образом.  
  
#### <a name="classification-formatting-and-text-coloring"></a>Форматирование классификации и цвета текста  
 Форматирование текста является примером функцию, которая основана на классификации текста. Используется уровень представления текста для определения отображения текста в приложении. Область форматирования текста зависит от WPF, но определение логической классификации не.  
  
 Формат классификации — это набор свойств для типа категория форматирования. Эти форматы наследуют от формата родительского типа классификации.  
  
 <xref:Microsoft.VisualStudio.Text.Classification.IClassificationFormatMap> Схема из типа классификации набору свойства форматирования текста. Реализация карта формата в редакторе обрабатывает экспорты форматов классификации.  
  
###  <a name="adornments"></a>Украшения  
 Украшения, графические эффекты, которые не связаны непосредственно с шрифт и цвет символов в представление текста. Например Подчеркивание красной волнистой линией, используемый для пометки-компиляции кода, во многих языках программирования, крайний внедренные и подсказки отображаются всплывающие элементы оформления. Украшения являются производными от <xref:System.Windows.UIElement> и реализовать <xref:Microsoft.VisualStudio.Text.Tagging.ITag>. Существует два специальных типа оформления тег <xref:Microsoft.VisualStudio.Text.Tagging.SpaceNegotiatingAdornmentTag>, для оформления, занимающих одинаковое пространство как текст в представлении, и <xref:Microsoft.VisualStudio.Text.Tagging.ErrorTag>, для подчеркивание волнистой линией.  
  
 Внедренные элементы оформления, графики, которая является частью представления форматированный текст. Они организованы на разные слои Z-порядка. Существует три встроенные слои, как показано ниже: текст, курсор и выделение. Однако разработчики могут определять дополнительные слои и поместить их в порядке по отношению друг с другом. Три вида внедренные элементы оформления: оформлений текста относительно (которые перемещения при перемещении текст и являются удаляется при удалении текста), представление относительно оформлений (которые необходимо сделать с частями нетекстовых представления) и управляются владельцем оформлений ( Разработчик должен управлять их расположение).  
  
 Всплывающие оформлений — это изображения, появляются в небольшом окне над представлением текста, например, подсказок.  
  
###  <a name="projection"></a>Проекции  
 Проекция — это метод для создания разных видов текстовый буфер, который не хранят текст, но вместо объединяет текст из других текстовых буферов. Например можно использовать буфер проекции для объединения текста из двух буферов и представит результат, как будто это лишь один буфер или для скрытия части текста в один буфер. Буфер проекции может действовать как исходный буфер другой буфер проекции. Набор буферов, связанных с проекции могут быть созданы для изменения порядка текста различными способами. (Такой набор называется также *graph буфера*.) Функция отображения текста Visual Studio реализуется с помощью буфера проекции для скрытия свернутого текста, и редактор Visual Studio для страниц ASP.NET использует проекции для поддержки внедренного языках, таких как Visual Basic и C#.  
  
 <xref:Microsoft.VisualStudio.Text.Projection.IProjectionBuffer> Создается с помощью <xref:Microsoft.VisualStudio.Text.Projection.IProjectionBufferFactoryService>. Буфер проекции, представленного упорядоченная последовательность <xref:Microsoft.VisualStudio.Text.ITrackingSpan> объекты, называемые *исходных диапазонов*. Содержимое этих диапазонов представляются в виде последовательности символов. Буферы текста, из которых рисуются исходных диапазонов, называются *источника буферы*. Клиентам буфера проекции, имейте в виду, что она отличается от обычного текстового буфера не требуется.  
  
 Буфер проекции прослушивает события изменения текста на исходные буферы. Когда текст в источнике диапазон изменений, буфер проекции сопоставляется своему собственному координаты координаты измененный текст, соответствующие изменения текста события. Например рассмотрим исходные буферы A и B, которые состоят из следующих элементов:  
  
```  
A: ABCDE  
B: vwxyz  
```  
  
 Если буфер проекции P формируется на основе двух фрагментов текста, ту, которая имеет все буфера и другие, все буфера B, P имеет следующее содержание:  
  
```  
P: ABCDEvwxyz  
```  
  
 Если подстрока `xy` удаляется из буфера B, а затем буфер P формирует событие, которое указывает, что были удалены знаки в позициях, 7 и 8.  
  
 Также можно непосредственно редактировать буфера проекции. Он передает изменения, внесенные в соответствующие исходные буферы. Например если строка вставляется в буфер P в позиции 6 (исходной позиции символ «v»), курсор распространяется буфер "B" в позиции 1.  
  
 Существуют ограничения на исходных диапазонов, которые влияют на буфер проекции. Не могут перекрываться исходных диапазонов; расположение в буфере проекции нельзя сопоставить более одного расположения в буфере любой источник и расположение в исходном буфере не могут сопоставляться с более чем из одного места в буфере проекции. Circularities не допускаются в отношении исходного буфера.  
  
 События вызываются, когда набор исходных буферов для изменяет буфера проекции и источника содержащем изменения.  
  
 Буфер элизии — это специальный буфера проекции. В основном используется для структуры и для операций, которые можно разворачивать и сворачивать блоки текста. Буфер элизии основан на единственный исходный буфер и диапазоны в буфере элизии должны быть упорядочены же, как они упорядочиваются в исходном буфере.  
  
##### <a name="the-buffer-graph"></a>График буфера  
 <xref:Microsoft.VisualStudio.Text.Projection.IBufferGraph> Интерфейс предоставляет сопоставление между граф буферов проекции. Все буферы текста и буферов проекции собираются в направленного ациклического графа, подобно дерева абстрактного синтаксиса, который создается с помощью языкового компилятора. Граф определяется верхнего буфера, который может быть любой текстовый буфер. График буфера можно сопоставить с точки в буфере верхней точке в исходном буфере или из диапазона верхнего буфера, в набор диапазонов в исходном буфере. Аналогичным образом его можно сопоставить точку или span из исходного буфера до определенного момента верхнего буфера. Графы буфера создаются с помощью <xref:Microsoft.VisualStudio.Text.Projection.IBufferGraphFactoryService>.  
  
##### <a name="events-and-projection-buffers"></a>События и буферов проекции  
 При изменении буфера проекции изменения отправляются из буфера проекции буферы, зависящих от нее. После изменения все буферы буфера изменение событий, начиная с самой глубокой буфера.  
  
###  <a name="outlining"></a>Структурирование  
 Структурирование является возможность разворачивать и сворачивать различные блоки текста в текстовом представлении. Структурирование определен как тип объекта <xref:Microsoft.VisualStudio.Text.Tagging.ITag>, в так же, как определенные элементы оформления. Объект <xref:Microsoft.VisualStudio.Text.Tagging.OutliningRegionTag> — тег, определяющий область текста, который можно разворачивать и сворачивать. Чтобы использовать структуру, необходимо импортировать <xref:Microsoft.VisualStudio.Text.Outlining.IOutliningManagerService> для получения <xref:Microsoft.VisualStudio.Text.Outlining.IOutliningManager>. Диспетчер структуры перечисляет сворачивает и при развертывании различных блоков, которые представлены в виде <xref:Microsoft.VisualStudio.Text.Outlining.ICollapsible> объектов и создает события соответствующим образом.  
  
###  <a name="mousebindings"></a>Привязок мыши  
 Привязок мыши связать различные команды движения мыши. Привязок мыши определяются с помощью <xref:Microsoft.VisualStudio.Text.Editor.IMouseProcessorProvider>, и определенные сочетания клавиш с помощью <xref:Microsoft.VisualStudio.Text.Editor.IKeyProcessorProvider>. <xref:Microsoft.VisualStudio.Text.Editor.IWpfTextViewHost> Автоматически создает все привязки и связывает их с события мыши в представлении.  
  
 <xref:Microsoft.VisualStudio.Text.Editor.IMouseProcessor> Интерфейс содержит обработчики событий, предварительно процесса и последующей обработки для разных событий мыши. Для обработки одного из событий, можно переопределить некоторые методы в <xref:Microsoft.VisualStudio.Text.Editor.MouseProcessorBase>.  
  
###  <a name="editoroperations"></a>Редактор операций  
 Редактор операций можно использовать для автоматизации взаимодействия с редактор для создания скрипта или для других целей. Можно импортировать <xref:Microsoft.VisualStudio.Text.Operations.IEditorOperationsFactoryService> операций доступа к данной <xref:Microsoft.VisualStudio.Text.Editor.ITextView>. Затем эти объекты можно использовать для изменения выбранной области прокручивания представления текста и переместить курсор на разные части представления.  
  
###  <a name="intellisense"></a>IntelliSense  
 Поддерживается технология IntelliSense, завершение операторов, Справка по сигнатурам (также известные как сведения о параметрах), краткие сведения и лампочки.  
  
 Завершение операторов предоставляет всплывающие списки потенциальных завершений для имен методов, XML-элементы и другие элементы кода или разметки. В общем случае жест пользователя вызывает завершение сеанса. Сеанс отображает список потенциальных завершений, и пользователь может выбрать один или закрыть список. <xref:Microsoft.VisualStudio.Language.Intellisense.ICompletionBroker> Отвечает за создание и запуск <xref:Microsoft.VisualStudio.Language.Intellisense.ICompletionSession>. <xref:Microsoft.VisualStudio.Language.Intellisense.ICompletionSource> Вычисляет <xref:Microsoft.VisualStudio.Language.Intellisense.CompletionSet> элементов завершения для данного сеанса.  
  
## <a name="see-also"></a>См. также  
 [Служба языка и точек расширения редактора](../extensibility/language-service-and-editor-extension-points.md)   
 [Импорт в редакторе](../extensibility/editor-imports.md)