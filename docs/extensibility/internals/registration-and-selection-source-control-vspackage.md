---
title: "Регистрация и выбора (VSPackage управления источника) | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- vs-ide-sdk
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- registration, source control packages
- source control packages, registration
ms.assetid: 7d21fe48-489a-4f55-acb5-73da64c4e155
caps.latest.revision: 34
ms.author: gregvanl
manager: ghogen
translation.priority.mt:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
translationtype: Machine Translation
ms.sourcegitcommit: 5db97d19b1b823388a465bba15d057b30ff0b3ce
ms.openlocfilehash: 693955c38d4d53418a92357e54bfc7c2965bdc3e
ms.lasthandoff: 02/22/2017

---
# <a name="registration-and-selection-source-control-vspackage"></a>Регистрация и выбора (VSPackage управления источника)
Система управления версиями VSPackage должны быть зарегистрированы в предоставлении доступа к [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]. Если зарегистрировано более одного элемента управления источника VSPackage, пользователь может выбрать, какие VSPackage для загрузки в нужное время. В разделе [VSPackages](../../extensibility/internals/vspackages.md) подробности о VSPackages и их регистрации.  
  
## <a name="registering-a-source-control-package"></a>Регистрация пакет системы управления версиями  
 Зарегистрированы исходный пакет управления, чтобы [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] среды можно найти его и запросов для его поддерживаемых функций. Это в соответствии с отложенной загрузкой схемы, в котором создается экземпляр пакета только в том случае, когда его функции или команды являются обязательными или явным образом запрошены.  
  
 Пакеты VSPackage вывода данных в ключе реестра, относящиеся к версии, HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\\*X.Y*, где *X* номер основной версии и *Y* является дополнительный номер версии. Такой подход предоставляет возможность поддержки side-by-side установки нескольких версий [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)].  
  
 [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] Пользовательский интерфейс (UI) поддерживает выбор из нескольких установленных источника подключаемые модули управления (через адаптер пакет системы управления версиями) и системы управления версиями пакетов VSPackages. Может существовать только один подключаемый модуль системы управления активной исходной или VSPackage одновременно. Тем не менее как описано ниже, интегрированной среды разработки позволяет переключение подключаемых модулей системы управления версиями и пакетов VSPackages через решение основано замены пакета механизм автоматического. Существуют некоторые требования со стороны системы управления версиями VSPackage, чтобы включить этот механизм выбора.  
  
### <a name="registry-entries"></a>Записи реестра  
 Пакет системы управления версиями требуется три частного идентификатора GUID.  
  
-   Идентификатор GUID пакета: Это основной идентификатор GUID для пакета, который содержит реализацию элемента управления источника (в данном разделе называется ID_Package).  
  
-   Система управления версиями GUID: Это представляет собой идентификатор GUID для системы управления версиями VSPackage, используемые для регистрации в Visual Studio заглушки управления источника и используется в качестве контекст пользовательского интерфейса командной строки GUID. Служба управления источника GUID регистрируется в системе управления версиями GUID. В примере системы управления версиями GUID называется ID_SccProvider.  
  
-   Служба управления GUID источника: это частной службы GUID, используемых в Visual Studio (в этом разделе называется SID_SccPkgService). Кроме того пакет системы управления версиями необходимо определить другие идентификаторы GUID для VSPackages окон инструментов и т. д.  
  
 Следующие записи реестра необходимо произвести системой управления версиями VSPackage.  
  
|Имя раздела|Записи|  
|--------------|-------------|  
|`HKEY_LOCAL_MACHINE\   SOFTWARE\     Microsoft\       VisualStudio\         X.Y\           SourceControlProviders\`|(по умолчанию) = rg_sz: {ID_SccProvider}|  
|`HKEY_LOCAL_MACHINE\   SOFTWARE\     Microsoft\       VisualStudio\         X.Y\           SourceControlProviders\             {ID_SccProvider}\`|(по умолчанию) = rg_sz:\<понятное имя пакета настроек<br /><br /> Служба = rg_sz: {SID_SccPkgService}|  
|`HKEY_LOCAL_MACHINE\   SOFTWARE\     Microsoft\       VisualStudio\         X.Y\           SourceControlProviders\             {ID_SccProvider}\               Name\`|(по умолчанию) = rg_sz: #\<идентификатор ресурса для локализованного имени настроек<br /><br /> Пакет = rg_sz: {ID_Package}|  
|`HKEY_LOCAL_MACHINE\   SOFTWARE\     Microsoft\       VisualStudio\         X.Y\           SolutionPersistence\             <PackageName>\`<br /><br /> (Обратите внимание, что имя ключа `SourceCodeControl`, используется ли [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] и не доступен в списках \<PackageName настроек.)|(по умолчанию) = rg_sz: {ID_Package}|  
  
## <a name="selecting-a-source-control-package"></a>Выбрав пакет системы управления версиями  
 Несколько основе API подключаемого модуля управления источника подключаемые модули и системы управления версиями, VSPackages одновременно могут быть зарегистрированы. Процесс выбора подключаемого модуля системы управления версиями или VSPackage необходимо убедиться, что [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] загружает подключаемого модуля или VSPackage в соответствующее время и можно отложить загрузку ненужные компоненты, пока они не требуется. Кроме того [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] необходимо удалить элементы пользовательского интерфейса из других неактивные VSPackages, включая элементы меню, диалоговые окна и панели инструментов и отображает пользовательский Интерфейс для активного VSPackage.  
  
 [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]Загружает элемент управления источником VSPackage при выполнении любого из следующих операций:  
  
-   Открывается решение (если решение находится в системе управления версиями).  
  
     При открытии решения или проекта в системе управления версиями, IDE вызывает VSPackage, который был назначен для этого решения для загрузки системы управления версиями.  
  
-   Выполняются все команды меню элемента управления источником VSPackage.  
  
 Система управления версиями VSPackage следует загрузить все компоненты, которые необходимы только в том случае, если они действительно будут использовать (в противном случае называется отложенной загрузки).  
  
### <a name="automatic-solution-based-vspackage-swapping"></a>Замена автоматическое решение основано VSPackage  
 Можно вручную переключить системы управления версиями VSPackages через [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] **параметры** диалогового окна **системы управления версиями** категории. Замена автоматического пакета на основе решений означает, что пакет системы управления версиями, который был определен для конкретного решения автоматически активной при открытии решения. Каждый пакет системы управления версиями следует реализовать <xref:Microsoft.VisualStudio.Shell.Interop.IVsSccProvider.SetActive%2A>и <xref:Microsoft.VisualStudio.Shell.Interop.IVsSccProvider.SetInactive%2A>.</xref:Microsoft.VisualStudio.Shell.Interop.IVsSccProvider.SetInactive%2A> </xref:Microsoft.VisualStudio.Shell.Interop.IVsSccProvider.SetActive%2A> [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]Выполняет переключение между оба источника подключаемые модули управления (реализации API подключаемого модуля управления источника) и системы управления версиями пакетов VSPackages.  
  
 Пакет адаптера системы управления версиями используется для переключения в любом на основе API подключаемого модуля управления источника подключаемого модуля. Процесс перехода в промежуточный пакет адаптера системы управления версиями и определить, какие дополнительные модули управления версиями должно быть присвоено активным или неактивным является прозрачным для пользователя. Пакет адаптер активен, всегда при активном любой подключаемый модуль системы управления версиями. Переключение между двумя суммами подключаемые модули управления источника просто загрузки и выгрузки DLL подключаемого модуля. Переключение в систему управления версиями VSPackage, тем не менее, включает в себя взаимодействие с IDE для загрузки соответствующего VSPackage.  
  
 Система управления версиями VSPackage вызывается при открытии любого решения, и раздел реестра для VSPackage находится в файле решения. При открытии решения [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] находит значение реестра и загружает соответствующие системы управления версиями VSPackage. Все системы управления версиями VSPackages должен иметь записи реестра, описанных выше. Решение в системе управления версиями, помечается как, связанную с определенной системе управления версиями VSPackage. Система управления версиями, необходимо реализовать VSPackages <xref:Microsoft.VisualStudio.Shell.Interop.IVsSolutionPersistence>на возможность автоматического решения на базе VSPackage замены.</xref:Microsoft.VisualStudio.Shell.Interop.IVsSolutionPersistence>  
  
### <a name="visual-studio-ui-for-package-selection-and-switching"></a>Visual Studio пользовательский Интерфейс для выбора пакетов и переключение  
 [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]Предоставляет пользовательский Интерфейс для системы управления версиями VSPackage и выбор подключаемого модуля в **параметры** диалогового окна **системы управления версиями** категории. Он позволяет пользователю выбрать модуль управления версиями active или VSPackage. Раскрывающийся список содержит:  
  
-   Все установленные пакеты управления источника  
  
-   Все установленные подключаемые модули управления версиями  
  
-   «none» параметр, отключающее системы управления версиями  
  
 Отображается только пользовательский Интерфейс для выбора элемента управления активной исходной. Выбор VSPackage скрывает пользовательский Интерфейс для предыдущего VSPackage и показан пользовательский Интерфейс для создания нового. Активные VSPackage установлен на уровне пользователя. Если у пользователя есть несколько копий [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] открытых одновременно, каждый из них потенциально могут использовать разные active VSPackage. Если несколько пользователей вошли на одном компьютере, каждый пользователь может иметь отдельные экземпляры [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] открыть, каждый из которых имеет различные active VSPackage. Если несколько экземпляров [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] закрываются пользователем, VSPackage, которая была активна для последнее открытое решение становится системы управления версиями по умолчанию VSPackage, задаваемый active при перезапуске системы управления версиями.  
  
 В отличие от предыдущих версий [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)], перезапуска IDE больше не единственный способ переключиться системы управления версиями пакетов VSPackages. Выбор VSPackage выполняется автоматически. Переключение пакетов требуются права пользователя Windows (не администратора или опытного пользователя).  
  
## <a name="see-also"></a>См. также  
 <xref:Microsoft.VisualStudio.Shell.Interop.IVsSolutionPersistence></xref:Microsoft.VisualStudio.Shell.Interop.IVsSolutionPersistence>   
 [Функции](../../extensibility/internals/source-control-vspackage-features.md)   
 [Создание подключаемого модуля системы управления версиями](../../extensibility/internals/creating-a-source-control-plug-in.md)   
 [Пакеты VSPackage](../../extensibility/internals/vspackages.md)
