---
title: Регистрация и выбора (VSPackage управления источника) | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- vs-ide-sdk
ms.topic: conceptual
helpviewer_keywords:
- registration, source control packages
- source control packages, registration
ms.assetid: 7d21fe48-489a-4f55-acb5-73da64c4e155
author: gregvanl
ms.author: gregvanl
manager: douge
ms.workload:
- vssdk
ms.openlocfilehash: 1d7bcdb8f930430ac00335777e2c088ce52a34bb
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
ms.locfileid: "31133041"
---
# <a name="registration-and-selection-source-control-vspackage"></a>Регистрация и выбора (VSPackage управления источника)
Системы управления версиями, VSPackage должен быть зарегистрирован в предоставлении доступа к [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]. Если зарегистрировано более одного элемента управления источника пакета VSPackage, пользователь может выбрать, какие VSPackage для загрузки в нужное время. В разделе [пакетов VSPackage](../../extensibility/internals/vspackages.md) Дополнительные сведения о пакеты VSPackage и как их регистрации.  
  
## <a name="registering-a-source-control-package"></a>Регистрация пакета управления версиями  
 Зарегистрированы исходный пакет управления, чтобы [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] среды можно найти его и запросов, поддерживаемые функции. Это происходит в соответствии с отложенной загрузкой схему, в которой создается экземпляр пакета только в том случае, если его функции или команды требуются или запрашиваются явным образом.  
  
 Пакеты VSPackage вывода данных в ключе реестра, относящиеся к версии, HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\\*X.Y*, где *X* — основной номер версии и *Y* имеет дополнительный номер версии. Такой подход позволяет выполнять несколько версий могут устанавливаться side-by-side [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)].  
  
 [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] Пользовательского интерфейса (UI) поддерживает выбор из нескольких установленных источника подключаемые модули управления (с помощью пакет адаптера системы управления версиями) и системы управления версиями пакетов VSPackage. Может существовать только один подключаемый модуль системы управления активной исходной или VSPackage одновременно. Тем не менее как описано ниже, интегрированной среды разработки допускают переключение между подключаемые модули управления версиями и пакеты VSPackage, через автоматический решений на базе пакета замену механизм. Существуют некоторые требования со стороны системы управления версиями VSPackage, чтобы включить данный способ выделения.  
  
### <a name="registry-entries"></a>Записи реестра  
 Пакет системы управления версиями требуется три частного идентификатора GUID.  
  
-   Идентификатор GUID пакета: Это основной идентификатор GUID для пакета, который содержит реализацию элемента управления источника (называемые ID_Package в этом разделе).  
  
-   Системы управления версиями GUID: Это идентификатор GUID для элемента управления источником VSPackage, используемые для регистрации в Visual Studio заглушки управления источника и также используется в качестве контекст пользовательского интерфейса командной строки GUID. Служба управления источника GUID зарегистрирована в системе управления версиями GUID. В примере системы управления версиями GUID называется ID_SccProvider.  
  
-   Служба управления GUID источника: это служба закрытый GUID, используемый в Visual Studio (называемые SID_SccPkgService в этом разделе). Кроме того пакет системы управления версиями необходимо определить другие идентификаторы GUID для пакетов VSPackage, окна инструментов и т. д.  
  
 Следующие параметры реестра должны быть сделаны VSPackage системы управления версиями:  
  
|Имя раздела|Записи|  
|--------------|-------------|  
|`HKEY_LOCAL_MACHINE\   SOFTWARE\     Microsoft\       VisualStudio\         X.Y\           SourceControlProviders\`|(по умолчанию) = rg_sz: {ID_SccProvider}|  
|`HKEY_LOCAL_MACHINE\   SOFTWARE\     Microsoft\       VisualStudio\         X.Y\           SourceControlProviders\             {ID_SccProvider}\`|(по умолчанию) = rg_sz:\<понятное имя пакета ><br /><br /> Служба = rg_sz: {SID_SccPkgService}|  
|`HKEY_LOCAL_MACHINE\   SOFTWARE\     Microsoft\       VisualStudio\         X.Y\           SourceControlProviders\             {ID_SccProvider}\               Name\`|(по умолчанию) = rg_sz: #\<идентификатор ресурса для локализованного имени ><br /><br /> Пакет = rg_sz: {ID_Package}|  
|`HKEY_LOCAL_MACHINE\   SOFTWARE\     Microsoft\       VisualStudio\         X.Y\           SolutionPersistence\             <PackageName>\`<br /><br /> (Обратите внимание, что имя ключа `SourceCodeControl`, уже используется [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] и недоступно в списках \<имя пакета >.)|(по умолчанию) = rg_sz: {ID_Package}|  
  
## <a name="selecting-a-source-control-package"></a>При выборе пакета управления версиями  
 Несколько на основе API подключаемых модулей для управления источника подключаемых модулей и системы управления версиями, пакеты VSPackage могут быть зарегистрированы одновременно. Процесс выбора подключаемого модуля системы управления версиями или VSPackage должен гарантировать, что [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] загружает подключаемого модуля или VSPackage в соответствующее время и можно отложить загрузку ненужных компонентов, пока они не требуется. Кроме того [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] необходимо удалить всех элементов пользовательского интерфейса из других неактивные пакеты VSPackage, включая элементы меню, диалоговые окна и панели инструментов и отображает пользовательский Интерфейс для активных пакетов VSPackage.  
  
 [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] загружает пакет VSPackage системы управления версиями, при выполнении любого из следующих операций:  
  
-   Решение открывается (когда решение находится в системе управления версиями).  
  
     При открытии решения или проекта в системе управления версиями, интегрированной среды разработки вызывает VSPackage, который был назначен для этого решения для загрузки системы управления версиями.  
  
-   Команды меню элемента управления источника пакета VSPackage, выполняются.  
  
 Системы управления версиями, VSPackage должен загружать все компоненты, которые необходимы только в том случае, если они фактически будут использовать (в противном случае называется отложенной загрузки).  
  
### <a name="automatic-solution-based-vspackage-swapping"></a>Замена автоматического пакета VSPackage на основе решений  
 Можно вручную переключить системы управления версиями пакетов VSPackage через [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] **параметры** диалогового окна **системы управления версиями** категории. Смена автоматического пакет на основе решений, это означает, что пакет системы управления версиями, который был определен для конкретного решения автоматически задать активный, при открытии этого решения. Каждый пакет системы управления версиями следует реализовать <xref:Microsoft.VisualStudio.Shell.Interop.IVsSccProvider.SetActive%2A> и <xref:Microsoft.VisualStudio.Shell.Interop.IVsSccProvider.SetInactive%2A>. [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] Выполняет переключение между оба источника подключаемые модули управления (реализации API подключаемых модулей управления источника) и система управления версиями пакетов VSPackage.  
  
 Пакет адаптера системы управления версиями используется для переключения в любом на основе API подключаемых модулей для управления источника подключаемого модуля. Процесс перехода в промежуточный пакет адаптера системы управления версиями и определить, какие подключаемый модуль системы управления версиями должно быть присвоено активным или неактивным является прозрачным для пользователя. Пакет адаптера активен, всегда при активной любой подключаемый модуль системы управления версиями. Переключение между двумя суммами подключаемые модули управления источника просто Загрузка и выгрузка DLL подключаемого модуля. Переключение в систему управления версиями VSPackage, тем не менее, заключается в взаимодействия со средой IDE для загрузки соответствующего пакета VSPackage.  
  
 Элемент управления источником VSPackage вызывается при открытии любого решения, и раздел реестра для VSPackage находится в файле решения. При открытии решения [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] находит значение реестра и загружается элемент управления соответствующего исходного пакета VSPackage. Все системы управления версиями пакетов VSPackage должен иметь записи реестра, описанных выше. Решение, которое находится в системе управления версиями, помечается как связанный с элементом управления определенного источника пакета VSPackage. Система управления версиями, пакеты VSPackage должны реализовывать <xref:Microsoft.VisualStudio.Shell.Interop.IVsSolutionPersistence> на возможность автоматического решение основано VSPackage замены.  
  
### <a name="visual-studio-ui-for-package-selection-and-switching"></a>Visual Studio пользовательский Интерфейс для выбора пакета и переключение  
 [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] Предоставляет пользовательский Интерфейс для системы управления версиями пакета VSPackage и выбора другого подключаемого модуля в **параметры** диалогового окна **системы управления версиями** категории. Он позволяет пользователю выбрать подключаемый модуль системы управления версиями active или VSPackage. Включает раскрывающегося списка.  
  
-   Установлены все пакеты управления исходным кодом  
  
-   Установлены все подключаемые модули управления версиями  
  
-   «none» параметра, отключающее управления исходным кодом  
  
 Отображается только пользовательский Интерфейс для активной исходной Выбор элемента управления. Выбор VSPackage скрывает пользовательский Интерфейс для предыдущего пакета VSPackage и показан пользовательский Интерфейс для создания нового. Активные VSPackage выбирается на уровне пользователя. Если у пользователя есть несколько копий [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] открытых одновременно, каждый из них потенциально могут использовать разные active VSPackage. Если несколько пользователей вошли том же компьютере, каждый пользователь может иметь отдельные экземпляры [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] открыть, каждый из которых разные active VSPackage. Если несколько экземпляров [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] закрыты пользователем, система управления версиями VSPackage, которая была активна для последнего открытого решения становится VSPackage, задаваемый active при перезапуске системы управления версиями по умолчанию.  
  
 В отличие от предыдущих версий [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)], перезапуску IDE больше не является единственным способом для переключения системы управления версиями пакетов VSPackage. Выбор VSPackage выполняется автоматически. Переключение пакеты требуются права пользователя Windows (не администратора или опытного пользователя).  
  
## <a name="see-also"></a>См. также  
 <xref:Microsoft.VisualStudio.Shell.Interop.IVsSolutionPersistence>   
 [Функции](../../extensibility/internals/source-control-vspackage-features.md)   
 [Создание подключаемого модуля системы управления версиями](../../extensibility/internals/creating-a-source-control-plug-in.md)   
 [Пакеты VSPackage](../../extensibility/internals/vspackages.md)