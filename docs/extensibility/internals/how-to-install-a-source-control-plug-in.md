---
title: "Как: установить подключаемый модуль системы управления версиями | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: vs-ide-sdk
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- installation [Visual Studio SDK], source control plug-ins
- source control plug-ins, installing
ms.assetid: 9e2e01d9-7beb-42b2-99b2-86995578afda
caps.latest.revision: "32"
author: gregvanl
ms.author: gregvanl
manager: ghogen
ms.workload: vssdk
ms.openlocfilehash: dab9270b55f5980d36256db78db89b5e4ac186f0
ms.sourcegitcommit: 32f1a690fc445f9586d53698fc82c7debd784eeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="how-to-install-a-source-control-plug-in"></a>Как: установить подключаемый модуль системы управления версиями
Создание подключаемого модуля системы управления версиями состоит из трех этапов:  
  
1.  Создайте библиотеку DLL с помощью функций, определенных в справочном разделе API подключаемых модулей исходного элемента управления в этой документации.  
  
2.  Реализация функций определенных API подключаемых модулей для управления источника. Когда [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] вызовов, убедитесь, интерфейсов и диалоговые окна доступны из подключаемого модуля.  
  
3.  Зарегистрируйте библиотеку DLL, делая соответствующие записи в реестр.  
  
## <a name="integration-with-visual-studio"></a>Интеграция с Visual Studio  
 [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]поддерживает источника подключаемые модули управления, соответствующие API подключаемых модулей управления источника.  
  
### <a name="registering-the-source-control-plug-in"></a>Регистрация подключаемый модуль системы управления версиями  
 Прежде чем выполняющейся среды разработки (IDE) может вызвать в системе управления версиями, он сначала найти источник DLL подключаемого модуля, который экспортирует API-интерфейса управления.  
  
##### <a name="to-register-the-source-control-plug-in-dll"></a>Чтобы зарегистрировать DLL подключаемого модуля управления версиями  
  
1.  Добавьте две записи в разделе HKEY_LOCAL_MACHINE в подразделе программного обеспечения, указывающее имя подраздела вашей компании, следуют ваш раздел реестра, имя продукта. Шаблон — HKEY_LOCAL_MACHINE\SOFTWARE\\*[название организации]*\\*[имя продукта]*\\*[entry]* = значение. Две записи всегда вызываются SCCServerName и данный параметр. Каждый является обычной строкой.  
  
     Например если название компании Майкрософт и вашей системы управления версиями называется SourceSafe, то этот путь в реестре будет HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe. В этом подразделе первая запись SCCServerName, строковая доступное для чтения пользователю именования продукта. Вторая запись, данный параметр, это полный путь к источнику элемент управления в DLL подключаемого модуля, нужно подключить интегрированной среды разработки. Ниже представлен пример записи реестра.  
  
    |Пример записи реестра|Пример значения|  
    |---------------------------|------------------|  
    |HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe\SCCServerName|Microsoft Visual SourceSafe|  
    |HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe\SCCServerPath|c:\vss\win32\ssscc.dll|  
  
    > [!NOTE]
    >  Данный параметр — это полный путь к подключаемом модуле SourceSafe. Подключаемый модуль системы управления версиями будет использовать различные имена компании и продукте, но одной записи пути реестра.  
  
2.  Можно использовать следующие необязательные параметры реестра для изменения поведения подключаемый модуль системы управления версиями. Эти записи перейдите в подраздел же SccServerName и данный параметр.  
  
    -   Запись HideInVisualStudioregistry можно использовать, если требуется запретить источника управления plug в отображаются в списке Выбор подключаемых модулей [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]. Эта запись также влияет на автоматическое переключение на подключаемый модуль системы управления версиями. Один из возможных способов использования для этой записи является при указании заменяет подключаемый модуль системы управления версиями пакета системы управления версиями, но требуется упростить для пользователей для миграции с помощью системы управления версиями для пакета управления версиями. При установке пакета управления версиями, он устанавливает этот параметр реестра, который скрывает подключаемого модуля.  
  
         HideInVisualStudio является значением типа DWORD и имеет значение 1, чтобы скрыть подключаемый модуль или 0, чтобы показать подключаемого модуля. Если параметр не отображается, поведение по умолчанию — Показать подключаемого модуля.  
  
    -   Запись реестра DisableSccManager можно отключить или скрыть **запуска \<сервера системы управления версиями >** пункт меню, который обычно отображается в узле **файл**  ->   **Система управления версиями** подменю. При выборе этого меню параметр вызовы [SccRunScc](../../extensibility/sccrunscc-function.md) функции. Подключаемый модуль системы управления версиями могут не поддерживать внешней программы, и поэтому может потребоваться отключить или скрыть даже **запуска** пункт меню.  
  
         DisableSccManager имеет значение DWORD имеет значение 0, чтобы включить **запуска \<сервера системы управления версиями >** пункт меню, равным 1, чтобы отключить команду меню и значение 2, чтобы скрыть параметр меню. Если этот параметр реестра отсутствует, поведение по умолчанию — Показать пункт меню.  
  
    |Пример записи реестра|Пример значения|  
    |---------------------------|------------------|  
    |HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe\HideInVisualStudio|1|  
    |HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SourceSafe\DisableSccManager|1|  
  
3.  Добавьте подраздел SourceCodeControlProvider, в разделе HKEY_LOCAL_MACHINE в подразделе программного обеспечения.  
  
     В этом подразделе реестра ProviderRegKey присваивается строка, представляющая подраздела, помещаются в реестре на шаге 1. Шаблон — HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider\ProviderRegKey = программного обеспечения\\*[название организации]*\\*[имя продукта]*.  
  
     Ниже приведен пример содержимого для этого подраздела.  
  
    |Запись реестра|Пример значения|  
    |--------------------|------------------|  
    |HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider\ProviderRegKey|SOFTWARE\Microsoft\SourceSafe|  
  
    > [!NOTE]
    >  Подключаемый модуль системы управления версиями будет использовать те же подраздел и имена входа, но значение будет другим.  
  
4.  Создайте подраздел с именем InstalledSCCProviders в подразделе SourceCodeControlProvider, а затем поместите одну запись в этом подразделе.  
  
     Имя этой записи доступное для чтения пользователю имя поставщика (то же, как значение, указанное для операции SCCServerName), который значение, опять же, подраздел, созданной на шаге 1. Шаблон — HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider\InstalledSCCProviders\\*[отображаемое имя]* = программного обеспечения\\*[название организации]* \\ *[имя продукта]*.  
  
     Пример:  
  
    |Пример записи реестра|Пример значения|  
    |---------------------------|------------------|  
    |HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider\InstalledSCCProviders\Microsoft Visual SourceSafe|SOFTWARE\Microsoft\SourceSafe|  
  
    > [!NOTE]
    >  Может существовать несколько источника подключаемые модули управления зарегистрированные таким образом. Это как [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] находит всех модулей на основе API подключаемых модулей для управления источника.  
  
## <a name="how-an-ide-locates-the-dll"></a>Обнаружение библиотеки DLL с помощью интегрированной среды разработки  
 [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] Среде IDE существует два способа поиск источника управлять DLL подключаемого модуля:  
  
-   Найти подключаемый модуль системы управления версиями по умолчанию и подключиться к нему без вмешательства пользователя.  
  
-   Найти все зарегистрированные источник подключаемые модули управления, из которого пользователь выбирает один.  
  
 Для поиска библиотеки DLL в первый способ, среда разработки выполняет HKEY_LOCAL_MACHINE\Software\SourceCodeControlProvider подраздел для записи ProviderRegKey. Значение этого элемента указывает на другом подраздела. Интегрированная среда разработки выполняет поиск запись с именем данный параметр в этот второй подраздел в разделе HKEY_LOCAL_MACHINE. Значение этой записи интегрированной среды разработки указывает на библиотеку DLL.  
  
> [!NOTE]
>  IDE не загрузить DLL-библиотеки из относительные пути (например,.\NewProvider.DLL). Необходимо указать полный путь к библиотеке DLL (например, c:\Providers\NewProvider.DLL). Это повышает безопасность, интегрированной среды разработки, так как загрузка несанкционированного или олицетворенного DLL подключаемого модуля.  
  
 Для поиска библиотеки DLL в второй способ, среда разработки выполняет для всех операций в подразделе HKEY_LOCAL_MACHINE\Software\SourceCodeControlProvider\InstalledSCCProviders*.* Каждая запись имеет имя и значение. Интегрированная среда разработки отображает список этих имен пользователю*.* Когда пользователь выбирает имя, интегрированной среды разработки находит значение для выбранного имени, указывающий на соответствующий раздел реестра. Среда разработки выполняет запись с именем данный параметр в этом разделе, в разделе HKEY_LOCAL_MACHINE. Значение этой записи указывает интегрированной среды разработки на соответствующие библиотеки DLL.  
  
 Подключаемый модуль системы управления версиями необходимо поддерживать оба способа поиска библиотеки DLL и, следовательно, задайте ProviderRegKey, перезаписывая все предыдущие настройки. Что более важно его необходимо добавить сам список InstalledSccProviders, пользователь может иметь Выбор какие подключаемый модуль системы управления версиями.  
  
> [!NOTE]
>  Поскольку раздел HKEY_LOCAL_MACHINE, как по умолчанию модуль управления версиями на данном компьютере могут быть зарегистрированы только один источник подключаемый модуль системы управления (Однако [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] позволяет пользователям определить, какой модуль управления версиями они хотят использовать для конкретного решения). В процессе установки проверьте, если он уже установлен подключаемый модуль системы управления версиями; Если это так, попросите пользователя или не должна использоваться новой системы управления версиями, подключаемый модуль устанавливается по умолчанию. Во время отмены установки не удаляйте другие подразделы реестра, которые являются общими для всех источник подключаемые модули управления в HKEY_LOCAL_MACHINE\SOFTWARE\SourceCodeControlProvider; Удалите только определенной SCC подраздела.  
  
## <a name="how-the-ide-detects-version-1213-support"></a>Как интерфейс IDE распознает поддержки версии 1.2 или 1.3  
 Как does [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] проверки наличия функциональные возможности версии 1.2 и 1.3 подключаемый модуль поддерживает API подключаемых модулей для управления источника? Чтобы объявить дополнительных возможностей, подключаемый модуль системы управления версиями необходимо реализовать соответствующей функции.  
  
 Во-первых, [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] проверяет значение, возвращаемое вызовом [SccGetVersion](../../extensibility/sccgetversion-function.md). Его должен быть больше или равно 1.2.  
  
 Далее, [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] определяет, поддерживаются ли определенный новым возможностям с помощью проверки `lpSccCaps` аргумент в [SccInitialize](../../extensibility/sccinitialize-function.md).  
  
 Если оба эти условия выполнены, может вызываться новые функции, поддерживаемые в версии 1.2 и 1.3.  
  
## <a name="see-also"></a>См. также  
 [Начало работы](../../extensibility/internals/getting-started-with-source-control-plug-ins.md)