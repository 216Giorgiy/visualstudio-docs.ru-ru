---
title: "Разработка. Vsct-файлы | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-sdk"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "Создание VSCT файлов вручную"
ms.assetid: e9f715dc-12b7-439b-bdf3-f3dc75e62f1c
caps.latest.revision: 12
caps.handback.revision: 12
ms.author: "gregvanl"
manager: "ghogen"
---
# Разработка. Vsct-файлы
[!INCLUDE[vs2017banner](../../code-quality/includes/vs2017banner.md)]

В этом документе показано, как создавать файл .vsct для добавления элементов меню, панелей инструментов и других элементов пользовательского интерфейса \(UI\) в среде разработки Visual Studio \(IDE\). При добавлении пакета Visual Studio \(VSPackage\), не имеет файла .vsct элементы пользовательского интерфейса, выполните следующие действия.  
  
 Для новых проектов рекомендуется использовать шаблон пакета Visual Studio, так как она создает файл .vsct, в зависимости от выбора, уже имеет необходимые элементы для команды меню, окно инструментов или пользовательского редактора. Можно изменить этот файл .vsct для соответствия требованиям VSPackage. Дополнительные сведения об изменении файла .vsct примеры [Расширение меню и команд](../../extensibility/extending-menus-and-commands.md).  
  
## Создание файла  
 Создание файла .vsct этих этапов: Создание структуры для файлов и ресурсов, объявлять элементы пользовательского интерфейса, поместить элементы пользовательского интерфейса в Интегрированной среде разработки и добавьте любые специализированные варианты поведения.  
  
### Структура файла  
 Базовая структура файла .vsct — [CommandTable](../../extensibility/commandtable-element.md) корневой элемент, содержащий [команды](../../extensibility/commands-element.md) элемент и [символы](../../extensibility/symbols-element.md) элемента.  
  
##### Чтобы создать структуру файла  
  
1.  Добавление файла .vsct в проект, выполнив действия, описанные в [Практическое руководство: создание. Файл Vsct](../../extensibility/internals/how-to-create-a-dot-vsct-file.md).  
  
2.  Добавьте необходимые пространства имен для `CommandTable` элемента, как показано в следующем примере.  
  
    ```xml  
    <CommandTable xmlns="http://schemas.microsoft.com/VisualStudio/2005-10-18/CommandTable"   
    	xmlns:xs="http://www.w3.org/2001/XMLSchema">  
  
    ```  
  
3.  В `CommandTable` элемента, добавьте `Commands` для размещения всех пользовательских меню, панелей инструментов, команды групп и команд. Таким образом, можно загрузить свои элементы пользовательского интерфейса, `Commands` элемент должен иметь его `Package` атрибуту присвоено имя пакета.  
  
     После `Commands` элемента, добавьте `Symbols` для определения идентификаторов GUID для пакета и имена и идентификаторы команд для элементов пользовательского интерфейса.  
  
### Включая ресурсы для Visual Studio  
 Используйте [Extern](../../extensibility/extern-element.md) элемент доступ к файлам, определяющих команды Visual Studio и меню, которые необходимо поместить элементы пользовательского интерфейса в Интегрированной среде разработки. При использовании команды, определенные вне пакета, [UsedCommands](../../extensibility/usedcommands-element.md) элемент для информирования Visual Studio.  
  
##### Чтобы включить ресурсы для Visual Studio  
  
1.  В верхней части `CommandTable` элемента, добавьте одно `Extern` для каждого файла, внешние ссылки и задать `href` атрибут имени файла. Можно создать ссылку для доступа к ресурсам Visual Studio следующие файлы заголовков:  
  
    -   Stdidcmd.h, определяет идентификаторы для всех команд, предоставляемых Visual Studio.  
  
    -   Vsshlids.h, содержит идентификаторы команд для меню в Visual Studio.  
  
2.  Если пакет вызывает любые команды, которые определены в Visual Studio или другие пакеты, добавлять `UsedCommands` после элемента `Commands` элемент. Заполните этот элемент с [UsedCommand](../../extensibility/usedcommand-element.md) элемент для каждой команды, то есть вызове не является частью пакета. Задайте `guid` и `id` атрибуты `UsedCommand` элементы значения GUID и идентификатор команды для вызова. Дополнительные сведения о том, как найти команды GUID и идентификаторы Visual Studio см. в разделе [GUID и идентификаторы команд Visual Studio](../../extensibility/internals/guids-and-ids-of-visual-studio-commands.md). Для вызова команды из других пакетов, используйте GUID и идентификатор команды, как определено в файле .vsct для этих пакетов.  
  
### Объявление элементов пользовательского интерфейса  
 Все новые элементы пользовательского интерфейса в объявлении `Symbols` раздел файла .vsct.  
  
##### Для объявления элементов пользовательского интерфейса  
  
1.  В `Symbols` элемента, добавьте три [GuidSymbol](../../extensibility/guidsymbol-element.md) элементы. Каждый `GuidSymbol` элемент имеет `name` атрибут и `value` атрибута. Задайте `name` таким образом, чтобы он отражает назначение элемента.`value` Атрибут принимает идентификатор GUID. \(Для создания идентификатора GUID, на **средства** меню, щелкните **Создать GUID**, и выберите **Формат реестра**.\)  
  
     Первый `GuidSymbol` элемент представляет пакет и обычно не имеет дочерних элементов. Второй `GuidSymbol` элемент представляет набор команда и будет содержать все символы, определяющие меню, групп и команд. Третий `GuidSymbol` элемент представляет хранилище образа и содержит символы для всех значков для вашей команды. Если у вас нет команд, значки, можно опустить третий `GuidSymbol` элемента.  
  
2.  В `GuidSymbol` элемент, представляющий набор команд, добавьте один или несколько [IDSymbol](../../extensibility/idsymbol-element.md) элементы. Каждый из них представляют меню, панели инструментов, группы или команды, добавляемый к пользовательскому Интерфейсу.  
  
     Для каждого `IDSymbol` элемент, значение `name` имя будет использоваться для ссылки на соответствующее меню, группы или команды и задайте атрибут `value` элемента в шестнадцатеричное число, которое будет представлять его идентификатор команды. Никакие два `IDSymbol` элементы, которые имеют общий родительский элемент может иметь то же значение.  
  
3.  Если любой из элементов пользовательского интерфейса требуются значки, добавьте `IDSymbol` элемент для каждого значка, чтобы `GuidSymbol` элемент, представляющий хранилище образа.  
  
### Размещение элементов пользовательского интерфейса в Интегрированной среде разработки  
 [Меню](../../extensibility/menus-element.md) элемент, [группы](../../extensibility/groups-element.md) элемент, и [кнопки](../../extensibility/buttons-element.md) элемент содержит определения для всех меню, групп и команд, определенных в пакете. Поместите эти меню, групп и команд в Интегрированной среде разработки с помощью [родительского](../../extensibility/parent-element.md) элемент, который является частью определения элемента пользовательского интерфейса, или с помощью [CommandPlacement](../../extensibility/commandplacement-element.md) элемент, определенный в другом.  
  
 Каждый `Menu`, `Group`, и `Button` элемент имеет `guid` атрибут и `id` атрибута. Всегда устанавливать `guid` атрибута для сопоставления имени `GuidSymbol` элемент, представляющий команду значение, а значение `id` атрибут имени `IDSymbol` элемент, который представляет меню, группы или команды в `Symbols` разделе.  
  
##### Чтобы определить элементы пользовательского интерфейса  
  
1.  При определении новых меню, вложенные меню, контекстные меню или панели инструментов, добавить `Menus` элемента `Commands` элемент. Для всех меню, который должен быть создан, добавьте [меню](../../extensibility/menu-element.md) элемента `Menus` элемент.  
  
     Задайте `guid` и `id` атрибуты `Menu` элемент, а затем задайте `type` Вид меню требуется атрибут. Можно также установить `priority` установить относительное положение меню в родительской группе.  
  
    > [!NOTE]
    >  `priority` Атрибут неприменим к контекстные меню и панели инструментов.  
  
2.  Все команды в Интегрированной среде разработки Visual Studio должна быть размещена группы команд, которые являются непосредственными дочерними элементами элемента меню и панели инструментов. При добавлении новых меню и панели инструментов в Интегрированной среде разработки, их должен содержать новые группы команд. Также может добавить группы команд существующих меню и панелей инструментов, таким образом, можно визуально группировать вашей команды.  
  
     При добавлении новой группы команд, необходимо сначала создать `Groups` элемент и затем добавить в него [группы](../../extensibility/group-element.md) элемент для каждой группы команд.  
  
     Задайте `guid` и `id` атрибуты каждого `Group` элемент, а затем задайте `priority` установить относительное положение группы на его родительском меню. Для получения дополнительной информации см. [Создание многократно используемых групп кнопок](../../extensibility/creating-reusable-groups-of-buttons.md).  
  
3.  При добавлении новых команд интегрированной среды разработки, добавьте `Buttons` элемента `Commands` элемент. Для каждой команды, добавление [кнопку](../../extensibility/button-element.md) элемента `Buttons` элемент.  
  
    1.  Задайте `guid` и `id` атрибуты каждого `Button` элемент, а затем задайте `type` атрибут к виду нужную кнопку. Можно также установить `priority` установить относительное положение команды в родительской группе.  
  
        > [!NOTE]
        >  Используйте `type="button"` для стандартных команд меню и кнопок панелей инструментов.  
  
    2.  В `Button` элемента, добавьте [строки](../../extensibility/strings-element.md) элемент, содержащий [ButtonText](../../extensibility/buttontext-element.md) элемент и [CommandName](../../extensibility/commandname-element.md) элемента.`ButtonText` Элемент предоставляет текстовую метку для элемента меню или всплывающей подсказки для кнопки панели инструментов.`CommandName` Элемент предоставляет имя команды для использования в команде.  
  
    3.  Если команда будет отображаться значок, создайте [значок](../../extensibility/icon-element.md) элемент в `Button` и присвойте его `guid` и `id` атрибуты `Bitmap` элемент для значка.  
  
        > [!NOTE]
        >  Кнопки панели инструментов необходимо иметь значков.  
  
     Дополнительные сведения см. в разделе [команды MenuCommand и OleMenuCommand](../../misc/menucommands-vs-olemenucommands.md).  
  
4.  Если любой из команд требуют значки, добавьте [точечные рисунки](../../extensibility/bitmaps-element.md) элемента `Commands` элемент. Для каждого значка, добавьте [точечный рисунок](../../extensibility/bitmap-element.md) элемента `Bitmaps` элемент. Это — здесь указывается расположение ресурса растрового изображения. Для получения дополнительной информации см. [Добавление значков на команды меню](../../extensibility/adding-icons-to-menu-commands.md).  
  
 Можно положиться на структуре родительских связей для правильного размещения большинство меню, групп и команд. Для команды очень больших наборов или когда меню, группы или команды должны появляться в нескольких местах, рекомендуется указывать расположение команды.  
  
##### Полагаться на родительских связей для размещения элементов пользовательского интерфейса в Интегрированной среде разработки  
  
1.  Типичный родительских связей, создания `Parent` в каждом элементе `Menu`, `Group`, и `Command` элемент, который определен в пакете.  
  
     Целью `Parent` является элемент меню или группу, которая будет содержать меню, группы или команды.  
  
    1.  Задайте `guid` атрибут имени `GuidSymbol` элемент, который определяет набор команд. Если целевой элемент не является частью пакета, используйте идентификатор guid для этого набора команд, как определено в соответствующем файле .vsct.  
  
    2.  Задайте `id` атрибута для сопоставления `id` атрибут target меню или группы. Список меню и групп, предоставляемые Visual Studio см. в разделе [Идентификаторы GUID и идентификаторы меню Visual Studio](../../extensibility/internals/guids-and-ids-of-visual-studio-menus.md) или [GUID и идентификаторы панелей инструментов Visual Studio](../../extensibility/internals/guids-and-ids-of-visual-studio-toolbars.md).  
  
 При наличии большого числа элементов пользовательского интерфейса для размещения в Интегрированной среде разработки, или если у вас есть элементы, которые должны появляться в нескольких местах, определите их размещения в [CommandPlacements](../../extensibility/commandplacements-element.md) элемента, как показано ниже.  
  
##### Для использования команды размещения для размещения элементов пользовательского интерфейса в Интегрированной среде разработки  
  
1.  После `Commands` элемента, добавьте `CommandPlacements` элемента.  
  
2.  В `CommandPlacements` элемента, добавьте `CommandPlacement` элемент для каждого меню, группы или команды для размещения.  
  
     Каждый `CommandPlacement` элемент или `Parent` помещает элемент одного меню, группы или команды в одном месте интегрированной среды разработки. Элемент пользовательского интерфейса может иметь только один родительский элемент, но он может иметь несколько команд размещения. Для размещения элемента пользовательского интерфейса в нескольких местах, добавить `CommandPlacement` элемент для каждого расположения.  
  
3.  Задайте `guid` и `id` атрибуты каждого `CommandPlacement` элемент размещения меню или группе, так же, как и для `Parent` элемента. Можно также задать `priority` установить относительное положение элемента пользовательского интерфейса.  
  
 Можно смешивать размещения по родительских связей и команды размещения. Однако для команды очень больших наборов, рекомендуется использовать только команды размещения.  
  
### Добавление специальных поведений  
 Можно использовать [CommandFlag](../../extensibility/command-flag-element.md) для изменения поведения меню и команд, например, для изменения их внешнего вида и видимость элементов. Можно изменить с помощью команды отображается, когда [VisibilityConstraints](../../extensibility/visibilityconstraints-element.md), или добавить сочетания клавиш с помощью [привязки клавиш](../../extensibility/keybindings-element.md). Некоторые виды меню и команд уже специализированные встроенные поведения.  
  
##### Для добавления специальных поведений  
  
1.  Чтобы сделать видимым только в определенных контекстах пользовательского интерфейса, например, элемент пользовательского интерфейса при загрузке решения, используйте ограничения на видимость.  
  
    1.  После `Commands` элемента, добавьте `VisibilityConstraints` элемента.  
  
    2.  Для каждого элемента пользовательского интерфейса для ограничения, добавление [VisibilityItem](../../extensibility/visibilityitem-element.md) элемента.  
  
    3.  Для каждого `VisibilityItem` элемент, значение `guid` и `id` меню, группы, или команды и задайте атрибуты `context` атрибут контекста пользовательского интерфейса, необходимо, как определено в <xref:Microsoft.VisualStudio.Shell.Interop.UIContextGuids80> класса. Для получения дополнительной информации см. [Элемент VisibilityItem](../../extensibility/visibilityitem-element.md).  
  
2.  Чтобы задать видимость и доступность элемента пользовательского интерфейса в коде, используйте один или несколько флагов, следующие команды:  
  
    -   DefaultDisabled  
  
    -   DefaultInvisible  
  
    -   DynamicItemStart  
  
    -   DynamicVisibility  
  
    -   NoShowOnMenuController  
  
    -   NotInTBList  
  
     Дополнительные сведения см. в разделе [Элемент Command флаг](../../extensibility/command-flag-element.md).  
  
3.  Чтобы изменить как отображается элемент, или динамически изменить его внешний вид, используйте один или несколько флагов, следующие команды:  
  
    -   AlwaysCreate  
  
    -   CommandWellOnly  
  
    -   DefaultDocked  
  
    -   DontCache  
  
    -   DynamicItemStart  
  
    -   FixMenuController  
  
    -   IconAndText  
  
    -   PICT  
  
    -   StretchHorizontally  
  
    -   TextMenuUseButton  
  
    -   TextChanges  
  
    -   TextOnly  
  
     Дополнительные сведения см. в разделе [Элемент Command флаг](../../extensibility/command-flag-element.md).  
  
4.  Чтобы изменить реакции элемента при получении команды, используйте один или несколько флагов, следующие команды:  
  
    -   AllowParams  
  
    -   CaseSensitive  
  
    -   CommandWellOnly  
  
    -   Фильтрация ввода  
  
    -   NoAutoComplete  
  
    -   NoButtonCustomize  
  
    -   NoKeyCustomize  
  
    -   NoToolbarClose  
  
    -   PostExec  
  
    -   RouteToDocs  
  
    -   TextIsAnchorCommand  
  
     Для получения дополнительной информации см. [Элемент Command флаг](../../extensibility/command-flag-element.md).  
  
5.  Чтобы присоединить зависимой меню сочетания клавиш меню или элемента меню, добавьте символ амперсанда \("&"\) в `ButtonText` элемента меню или элемента меню. Следующий знак амперсанда active сочетание клавиш используется при открытии меню родительского окна.  
  
6.  Чтобы связать с командой меню независимых сочетания клавиш, используйте [привязки клавиш](../../extensibility/keybindings-element.md). Дополнительные сведения см. в разделе [Элемент соответствующие клавиши](../../extensibility/keybinding-element.md).  
  
7.  Локализация текста меню, используйте `LocCanonicalName` элемента. Для получения дополнительной информации см. [Элемент строки](../../extensibility/strings-element.md).  
  
 Некоторые меню и кнопок типы включают специальные варианты поведения. Ниже перечислены некоторые специальные меню и типы кнопок. Для других типов в разделе `types` атрибут описания в [Элемент меню](../../extensibility/menu-element.md), [Элемент Button](../../extensibility/button-element.md), и [Элемент поля со списком](../../extensibility/combo-element.md).  
  
 Поле со списком  
 Поле со списком является раскрывающегося списка, который может использоваться на панели инструментов. Чтобы добавить поля со списком пользовательского интерфейса, создайте [комбинировать](../../extensibility/combos-element.md) элемент в `Commands` элемент. Затем добавьте `Combos` элемент `Combo` элемент для каждого поля со списком для добавления.`Combo` элементы имеют те же атрибуты и дочерние элементы, как `Button` элементы и имеется `DefaultWidth` и `idCommandList` атрибуты.`DefaultWidth` Атрибут задает ширину в пикселях и `idCommandList` атрибут точки идентификатор команды, который используется для заполнения поля со списком. Дополнительные сведения см. в разделе `Combo` документации к элементу.  
  
 MenuController  
 Контроллер меню находится кнопка со стрелкой рядом с ним. Щелкнув стрелку открывает список. Добавление контроллера меню в пользовательский интерфейс, создание `Menu` и присвойте его `type` атрибут **MenuController** или **MenuControllerLatched**, в зависимости от требуемое поведение. Чтобы заполнить контроллера меню, установите его как родительский для `Group` элемента. Контроллер меню отображаются все дочерние группы в раскрывающемся списке.  
  
## См. также  
 [Расширение меню и команд](../../extensibility/extending-menus-and-commands.md)   
 [Таблицы команд Visual Studio \(. Файлы Vsct\)](../../extensibility/internals/visual-studio-command-table-dot-vsct-files.md)   
 [Справочник по схемам VSCT XML](../../extensibility/vsct-xml-schema-reference.md)