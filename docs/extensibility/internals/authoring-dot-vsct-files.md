---
title: Разработка. Файлы Vsct | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- vs-ide-sdk
ms.topic: conceptual
helpviewer_keywords:
- VSCT files, manual authoring
ms.assetid: e9f715dc-12b7-439b-bdf3-f3dc75e62f1c
author: gregvanl
ms.author: gregvanl
manager: douge
ms.workload:
- vssdk
ms.openlocfilehash: 65fc62d5685ca7c81b3ebb7f524db3cdbebe72c7
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
---
# <a name="authoring-vsct-files"></a>Разработка. Файлы Vsct
В этом документе показано, как создать vsct-файл для добавления элементов меню, панелей инструментов и других элементах пользовательского интерфейса (UI) в среде разработки Visual Studio (IDE). При добавлении элементов пользовательского интерфейса в Visual Studio пакет (VSPackage), не имеет vsct-файл, выполните следующие действия.  
  
 Для новых проектов рекомендуется использовать шаблон пакета Visual Studio, так как он создает vsct-файл, в зависимости от сделанного, имеющую необходимые элементы для команды меню, окна инструментов или специализированный редактор. Можно изменить этот vsct-файл для соответствия требованиям вашего VSPackage. Дополнительные сведения об изменении файла vsct примеры [расширение меню и команд](../../extensibility/extending-menus-and-commands.md).  
  
## <a name="authoring-the-file"></a>Создание файла  
 Создание файла vsct на этих этапах: созданию структуры для файлов и ресурсов, объявите элементы пользовательского интерфейса, поместите элементы пользовательского интерфейса в Интегрированной среде разработки и добавлять любые специализированные поведения.  
  
### <a name="file-structure"></a>Структура файла  
 Базовая структура vsct-файл является [CommandTable](../../extensibility/commandtable-element.md) корневой элемент, содержащий [команды](../../extensibility/commands-element.md) элемент и [символы](../../extensibility/symbols-element.md) элемента.  
  
##### <a name="to-create-the-file-structure"></a>Для создания структуры файлов  
  
1.  Добавьте vsct-файл в проект, выполнив следующие действия, описанные в [как: создать. Vsct-файле](../../extensibility/internals/how-to-create-a-dot-vsct-file.md).  
  
2.  Добавьте необходимые пространства имен для `CommandTable` элемента, как показано в следующем примере.  
  
    ```xml  
    <CommandTable xmlns="http://schemas.microsoft.com/VisualStudio/2005-10-18/CommandTable"   
        xmlns:xs="http://www.w3.org/2001/XMLSchema">  
  
    ```  
  
3.  В `CommandTable` элемента, добавьте `Commands` элемент, чтобы вместить все пользовательские меню, панелей инструментов, группы команд и команд. Таким образом, можно загрузить элементы пользовательского интерфейса, `Commands` элемент должен иметь его `Package` атрибуту присвоено имя пакета.  
  
     После `Commands` элемента, добавьте `Symbols` для определения GUID для пакета, а также имена и идентификаторы команд для элементов пользовательского интерфейса.  
  
### <a name="including-visual-studio-resources"></a>Включения ресурсов Visual Studio  
 Используйте [Extern](../../extensibility/extern-element.md) элемент для доступа к файлам, которые определяют команд Visual Studio и меню, которые требуется поместить элементы пользовательского интерфейса в Интегрированной среде разработки. Если необходимо использовать команды, определенные вне пакета, используйте [Используемыхкоманд](../../extensibility/usedcommands-element.md) элемент для информирования Visual Studio.  
  
##### <a name="to-include-visual-studio-resources"></a>Необходимость включения ресурсов Visual Studio  
  
1.  В верхней части `CommandTable` элемента, добавьте один `Extern` элемент для каждого внешнего файла ссылки и задать `href` атрибут к имени файла. Вы можете обратиться следующие файлы заголовков для доступа к ресурсам в Visual Studio.  
  
    -   Stdidcmd.h, определяет идентификаторы для всех команд, предоставляемых средой Visual Studio.  
  
    -   Vsshlids.h, содержит идентификаторы команд для меню Visual Studio.  
  
2.  Если пакет вызывает любые команды, которые определены в Visual Studio или другие пакеты, добавлять `UsedCommands` после элемента `Commands` элемент. Заполните этот элемент с [Используемойкоманды](../../extensibility/usedcommand-element.md) элемент для каждой команды, то есть вызове не является частью пакета. Задать `guid` и `id` атрибуты `UsedCommand` элементов, значения GUID и ID команды для вызова. Дополнительные сведения о том, как найти команды GUID и идентификаторы Visual Studio см. в разделе [идентификаторов GUID и идентификаторы для команд Visual Studio](../../extensibility/internals/guids-and-ids-of-visual-studio-commands.md). Для вызова команды из других пакетов, используйте идентификатор GUID и идентификатор команды, как определено в vsct-файле для этих пакетов.  
  
### <a name="declaring-ui-elements"></a>Объявление элементов пользовательского интерфейса  
 Все новые элементы пользовательского интерфейса в объявлении `Symbols` раздел vsct-файле.  
  
##### <a name="to-declare-ui-elements"></a>Для объявления элементов пользовательского интерфейса  
  
1.  В `Symbols` элемента, добавьте три [GuidSymbol](../../extensibility/guidsymbol-element.md) элементов. Каждый `GuidSymbol` элемент имеет `name` атрибута и `value` атрибута. Задать `name` атрибут, чтобы оно соответствовало предназначение элемента. `value` Атрибут принимает идентификатор GUID. (Для создания идентификатора GUID, что на **средства** меню, нажмите кнопку **создать GUID**и выберите **формате реестра**.)  
  
     Первый `GuidSymbol` элемент представляет пакет и обычно не имеет дочерних элементов. Второй `GuidSymbol` элемент представляет команда задать и будет содержать все символы, определяющие групп, команд и меню. Третий `GuidSymbol` элемент представляет хранилище образа и содержит символы для всех значков для команд. Если у вас нет команд, значки, можно опустить третий `GuidSymbol` элемента.  
  
2.  В `GuidSymbol` элемент, представляющий ваш набор команд, добавьте один или несколько [IDSymbol](../../extensibility/idsymbol-element.md) элементов. Каждый из них представляют меню, панели инструментов, группы или команды, добавляемые к пользовательскому Интерфейсу.  
  
     Для каждого `IDSymbol` , задайте `name` атрибут к имени будет использовать для ссылки на соответствующее меню, группы или команды, а затем задать `value` элемента в шестнадцатеричное число, представляющее его идентификатор команды. Никакие два `IDSymbol` элементы, которые имеют тот же родительский элемент может иметь то же значение.  
  
3.  Если любой из элементов пользовательского интерфейса требуются значки, добавьте `IDSymbol` элемент для каждого значка в `GuidSymbol` элемент, представляющий хранилище изображения.  
  
### <a name="putting-ui-elements-in-the-ide"></a>Размещение элементов пользовательского интерфейса в Интегрированной среде разработки  
 [Меню](../../extensibility/menus-element.md) элемент, [группы](../../extensibility/groups-element.md) элемент, и [кнопки](../../extensibility/buttons-element.md) элемент содержит определения для всех меню, групп и команд, определенных в пакете. Поместить эти меню, групп и команд в Интегрированной среде разработки с помощью [родительского](../../extensibility/parent-element.md) элемент, который является частью определения элемента пользовательского интерфейса или с помощью [CommandPlacement](../../extensibility/commandplacement-element.md) элемента, определенный в другом.  
  
 Каждый `Menu`, `Group`, и `Button` элемент имеет `guid` атрибута и `id` атрибута. Всегда значение `guid` атрибута для сопоставления имени `GuidSymbol` элемент, представляющий команду значение, а значение `id` для имени атрибута `IDSymbol` элемент, представляющий ваш меню, группы или команды в `Symbols`раздел.  
  
##### <a name="to-define-ui-elements"></a>Чтобы определить элементы пользовательского интерфейса  
  
1.  При определении нового меню, подменю, контекстные меню или панели инструментов, добавьте `Menus` элемента `Commands` элемент. Для каждого меню Создать, добавить [меню](../../extensibility/menu-element.md) элемента `Menus` элемент.  
  
     Задать `guid` и `id` атрибуты `Menu` элемент, а затем задайте `type` атрибут к виду меню требуется. Можно также установить `priority` установить относительное положение меню в родительской группе.  
  
    > [!NOTE]
    >  `priority` Атрибут не применяется к контекстные меню и панели инструментов.  
  
2.  Все команды в Интегрированной среде разработки Visual Studio должна быть размещена группы команд, которые являются непосредственными дочерними элементами меню и панели инструментов. При добавлении нового меню или панели инструментов в Интегрированной среде разработки, их должен содержать новые группы команд. Можно также добавлять группы команд для существующего меню и панелей инструментов, чтобы визуально можно сгруппировать вашей команды.  
  
     При добавлении новой группы команд, необходимо сначала создать `Groups` элемент и затем добавить в него [группы](../../extensibility/group-element.md) элемент для каждой группы команд.  
  
     Задать `guid` и `id` атрибуты каждого `Group` элемент, а затем задайте `priority` установить относительное положение в группу на его родительском меню. Дополнительные сведения см. в разделе [группы кнопок для повторного использования создание](../../extensibility/creating-reusable-groups-of-buttons.md).  
  
3.  При добавлении новых команд в интегрированную среду разработки, добавьте `Buttons` элемента `Commands` элемент. Для каждой команды, добавить [кнопку](../../extensibility/button-element.md) элемента `Buttons` элемент.  
  
    1.  Задать `guid` и `id` атрибуты каждого `Button` элемент, а затем задайте `type` атрибут к виду кнопку. Можно также установить `priority` установить относительное положение команды в родительской группе.  
  
        > [!NOTE]
        >  Используйте `type="button"` для стандартных команд меню и кнопок на панели инструментов.  
  
    2.  В `Button` элемента, добавьте [строки](../../extensibility/strings-element.md) элемент, содержащий [ButtonText](../../extensibility/buttontext-element.md) элемент и [CommandName](../../extensibility/commandname-element.md) элемента. `ButtonText` Элемент предоставляет текстовую метку для элемента меню или всплывающая подсказка для кнопки панели инструментов. `CommandName` Элемент предоставляет имя команды также использовать в команде.  
  
    3.  Если команда будет отображаться значок, создайте [значок](../../extensibility/icon-element.md) элемент в `Button` и присвойте его `guid` и `id` атрибуты `Bitmap` элемент для значка.  
  
        > [!NOTE]
        >  Кнопки панели инструментов должен иметь значков.  
  
     Дополнительные сведения см. в разделе [команды MenuCommand и. OleMenuCommands](../../extensibility/menucommands-vs-olemenucommands.md).  
  
4.  Если любой из команд потребовать значки, добавьте [растровые изображения](../../extensibility/bitmaps-element.md) элемента `Commands` элемент. Для каждого значка, добавьте [растрового изображения](../../extensibility/bitmap-element.md) элемента `Bitmaps` элемент. Это определяет, где задается расположение ресурса точечного рисунка. Дополнительные сведения см. в разделе [добавление значков команды меню](../../extensibility/adding-icons-to-menu-commands.md).  
  
 Можно положиться на структуре родительских связей, чтобы правильно разместить большинство меню, групп и команд. Для наборов данных очень большой команды или когда меню, группы или команды должны появляться в нескольких местах, рекомендуется указывать размещения команд.  
  
##### <a name="to-rely-on-parenting-to-place-ui-elements-in-the-ide"></a>Полагаться на родительских связей для размещения элементов пользовательского интерфейса в Интегрированной среде разработки  
  
1.  Типичные родительских связей, создания `Parent` в каждом элементе `Menu`, `Group`, и `Command` , определенному в пакете.  
  
     Целью `Parent` является элемент меню или группу, которая будет содержать меню, группы или команды.  
  
    1.  Задать `guid` для имени атрибута `GuidSymbol` элемент, который определяет набор команд. Если целевой элемент не является частью пакета, используйте идентификатор guid для этого набора команд, как определено в соответствующий vsct-файле.  
  
    2.  Задать `id` атрибута для сопоставления `id` атрибут меню целевого объекта или группы. Для получения списка меню и групп, предоставляемых Visual Studio [идентификаторов GUID и идентификаторы из меню в Visual Studio](../../extensibility/internals/guids-and-ids-of-visual-studio-menus.md) или [идентификаторы GUID и идентификаторы из Visual Studio панели инструментов](../../extensibility/internals/guids-and-ids-of-visual-studio-toolbars.md).  
  
 При наличии большого числа элементов пользовательского интерфейса для размещения в Интегрированной среде разработки, или если у вас есть элементы, которые должны отображаться в нескольких местах, определите их размещения в [CommandPlacements](../../extensibility/commandplacements-element.md) элемента, как показано в следующих шагах.  
  
##### <a name="to-use-command-placement-to-place-ui-elements-in-the-ide"></a>Для использования команд размещения для размещения элементов пользовательского интерфейса в Интегрированной среде разработки  
  
1.  После `Commands` элемента, добавьте `CommandPlacements` элемента.  
  
2.  В `CommandPlacements` элемента, добавьте `CommandPlacement` элемент для каждого меню, группу или команду, чтобы поместить.  
  
     Каждый `CommandPlacement` элемент или `Parent` элемент помещает одного меню, группы или команды в одном месте интегрированной среды разработки. Элемент пользовательского интерфейса может иметь только один родительский элемент, но он может иметь несколько размещений команд. Для размещения элемента пользовательского интерфейса в нескольких местах, добавить `CommandPlacement` элемент для каждого расположения.  
  
3.  Задать `guid` и `id` атрибуты каждого `CommandPlacement` элемент размещения меню или группу, так же, как и для `Parent` элемента. Можно также задать `priority` установить относительное положение элемента пользовательского интерфейса.  
  
 Можно комбинировать размещения по родительских связей и команды размещения. Однако для команды очень больших наборов, рекомендуется использовать только команды размещения.  
  
### <a name="adding-specialized-behaviors"></a>Добавление специальных поведений  
 Можно использовать [CommandFlag](../../extensibility/command-flag-element.md) элементов для изменения поведения меню и команд, например, чтобы изменить их внешний вид и видимость. Можно также изменять с помощью команды отображается, когда [VisibilityConstraints](../../extensibility/visibilityconstraints-element.md), или добавьте сочетания клавиш с помощью [привязки клавиш](../../extensibility/keybindings-element.md). Некоторые виды меню и команд уже специализированные встроенных поведений.  
  
##### <a name="to-add-specialized-behaviors"></a>Чтобы добавить специальные поведения  
  
1.  Чтобы сделать видимым только в определенных контекстах пользовательского интерфейса, например, элемент пользовательского интерфейса при загрузке решения, используйте ограничения на видимость.  
  
    1.  После `Commands` элемента, добавьте `VisibilityConstraints` элемента.  
  
    2.  Для каждого элемента пользовательского интерфейса для ограничения, добавление [VisibilityItem](../../extensibility/visibilityitem-element.md) элемента.  
  
    3.  Для каждого `VisibilityItem` , задайте `guid` и `id` атрибутов, в меню, группы или команды и установите `context` атрибут контекста пользовательского интерфейса, необходимо, как определено в <xref:Microsoft.VisualStudio.Shell.Interop.UIContextGuids80> класса. Дополнительные сведения см. в разделе [VisibilityItem элемент](../../extensibility/visibilityitem-element.md).  
  
2.  Чтобы задать видимости и доступности элемента пользовательского интерфейса в коде, используйте один или несколько из следующих флагов команды:  
  
    -   DefaultDisabled  
  
    -   DefaultInvisible  
  
    -   DynamicItemStart  
  
    -   DynamicVisibility  
  
    -   NoShowOnMenuController  
  
    -   NotInTBList  
  
     Дополнительные сведения см. в разделе [элемент Command флаг](../../extensibility/command-flag-element.md).  
  
3.  Чтобы изменить, как отображается элемент, или динамически изменить его внешний вид, используйте один или несколько из следующих флагов команды:  
  
    -   AlwaysCreate  
  
    -   CommandWellOnly  
  
    -   DefaultDocked  
  
    -   DontCache  
  
    -   DynamicItemStart  
  
    -   FixMenuController  
  
    -   IconAndText  
  
    -   PICT  
  
    -   StretchHorizontally  
  
    -   TextMenuUseButton  
  
    -   TextChanges  
  
    -   TextOnly  
  
     Дополнительные сведения см. в разделе [элемент Command флаг](../../extensibility/command-flag-element.md).  
  
4.  Чтобы изменить реакцию элемент при получении команды, используйте один или несколько из следующих флагов команды:  
  
    -   AllowParams  
  
    -   CaseSensitive  
  
    -   CommandWellOnly  
  
    -   Фильтрация ввода  
  
    -   NoAutoComplete  
  
    -   NoButtonCustomize  
  
    -   NoKeyCustomize  
  
    -   NoToolbarClose  
  
    -   PostExec  
  
    -   RouteToDocs  
  
    -   TextIsAnchorCommand  
  
     Дополнительные сведения см. в разделе [элемент Command флаг](../../extensibility/command-flag-element.md).  
  
5.  Чтобы присоединить зависящие от меню сочетания клавиш меню или элемент меню, добавьте символ амперсанда («&») в `ButtonText` элемент меню или пункта меню. Следующий знак амперсанда при активной сочетания клавиш меню родительского открыт.  
  
6.  Чтобы связать с командой меню независимых сочетания клавиш, используйте [привязки клавиш](../../extensibility/keybindings-element.md). Дополнительные сведения см. в разделе [соответствующие клавиши элемент](../../extensibility/keybinding-element.md).  
  
7.  Чтобы локализовать текст меню, используйте `LocCanonicalName` элемента. Дополнительные сведения см. в разделе [элемент строки](../../extensibility/strings-element.md).  
  
 Некоторые меню и кнопок типы включают специальные поведения. Ниже перечислены некоторые специализированные меню и типы кнопок. Для других типов, в разделе `types` атрибут описания в [элемент меню](../../extensibility/menu-element.md), [элемент Button](../../extensibility/button-element.md), и [элемент поля со списком](../../extensibility/combo-element.md).  
  
 Поле со списком  
 Поле со списком имеет раскрывающегося списка, который может использоваться на панели инструментов. Чтобы добавить поля со списком к пользовательскому Интерфейсу, создайте [комбинировать](../../extensibility/combos-element.md) элемент в `Commands` элемент. Затем добавьте `Combos` элемент `Combo` элемент для каждого поля со списком для добавления. `Combo` элементы имеют те же атрибуты и дочерние элементы, как `Button` элементы и также имеют `DefaultWidth` и `idCommandList` атрибуты. `DefaultWidth` Атрибут задает ширину в пикселях и `idCommandList` атрибут точки идентификатор команды, который используется для заполнения поля со списком. Дополнительные сведения см. в разделе `Combo` документации к элементу.  
  
 MenuController  
 Контроллер меню — кнопка со стрелкой рядом с ним. Щелкнув стрелку Открытие списка. Чтобы добавить контроллер меню в пользовательский интерфейс, создайте `Menu` и присвойте его `type` атрибут **MenuController** или **MenuControllerLatched**, в зависимости от нужное поведение. Чтобы заполнить контроллер меню, задать его в качестве родительского элемента `Group` элемент. Контроллер меню будет отображаться все ее дочерние группы в раскрывающемся списке.  
  
## <a name="see-also"></a>См. также  
 [Расширение меню и команд](../../extensibility/extending-menus-and-commands.md)   
 [Таблицы команд Visual Studio (. Файлы Vsct)](../../extensibility/internals/visual-studio-command-table-dot-vsct-files.md)   
 [Справочник по схемам XML VSCT](../../extensibility/vsct-xml-schema-reference.md)