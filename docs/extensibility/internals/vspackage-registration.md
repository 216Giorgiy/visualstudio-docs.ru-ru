---
title: "Регистрация VSPackage | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- vs-ide-sdk
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- registration, VSPackages
- VSPackages, registering
ms.assetid: ecd20da8-b04b-4141-a8f4-a2ef91dd597a
caps.latest.revision: 18
ms.author: gregvanl
manager: ghogen
translation.priority.mt:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
translationtype: Machine Translation
ms.sourcegitcommit: 5db97d19b1b823388a465bba15d057b30ff0b3ce
ms.openlocfilehash: bebd023d8cbecf97f75570bf57ed2cd4462ffe92
ms.lasthandoff: 02/22/2017

---
# <a name="vspackage-registration"></a>Регистрация VSPackage
Необходимо сообщить VSPackages [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] их установке и должна быть загружена. Это делается, записывая данные в реестре. Это типичный задания установщика.  
  
> [!NOTE]
>  Он является распространенной практикой во время разработки VSPackage использовать автоматическую регистрацию. Однако [!INCLUDE[vsipprvsip](../../extensibility/includes/vsipprvsip_md.md)] партнеров не поставляют свою продукцию с помощью самостоятельной регистрации в процессе установки.  
  
 Записи реестра в пакет установщика Windows обычно устанавливаются в таблице реестра. Можно также зарегистрировать расширения файлов в таблице реестра. Тем не менее установщик Windows предоставляет встроенную поддержку через программный идентификатор (ProgId), класс, расширения и команды таблицам. Дополнительные сведения см. в разделе [таблиц базы данных](http://msdn.microsoft.com/library/aa368259\(VS.85\).aspx).  
  
 Убедитесь, что записи реестра, связаны с компонентом, который подходит для выбранной стратегии side-by-side. Например записи реестра для общего файла должен быть связан с компонентом этот файл установщика Windows. Аналогичным образом записи реестра для конкретной версии файла должен быть связан с компонентом этого файла. В противном случае — установка или удаление VSPackage для одной версии [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] может привести к нарушению VSPackage в других версиях. Дополнительные сведения см. в разделе [поддержка нескольких версий Visual Studio](../../extensibility/supporting-multiple-versions-of-visual-studio.md)  
  
> [!NOTE]
>  Для управления регистрацией проще всего использовать те же данные в тех же файлах для разработчиков регистрации и регистрации во время установки. Например некоторые средства разработки установщика можно использовать файл в формате реестра во время построения. Если разработчики Ведение REG-файлы для ежедневной разработки и отладки, эти файлы могут быть включены в установщик автоматически. Нельзя совместно использовать автоматически регистрационные данные, необходимо убедитесь, что установщик копию данных регистрации текущего.  
  
## <a name="registering-unmanaged-vspackages"></a>Регистрация неуправляемый пакеты VSPackage  
 Неуправляемые VSPackages (в том числе созданных шаблоном пакета Visual Studio) использовать файлы .rgs стиле ATL для хранения сведений о регистрации. Формат файла .rgs относится к ATL и обычно не может быть использовано в качестве-— с помощью установки средства разработки. Сведения о регистрации для установщика VSPackage должен обслуживаться по отдельности. Например разработчики могут синхронизации файлов в формате реестра с .rgs изменения файла. REG-файлов может быть объединено с RegEdit для разработки или используемые установщиком.  
  
## <a name="registering-managed-vspackages"></a>Регистрация управляемых пакетов VSPackages  
 RegPkg чтения атрибутов регистрации из управляемых VSPackage и либо записывать сведения непосредственно в реестре или файлы формата .reg записи, которые могут быть использованы программой установки.  
  
> [!NOTE]
>  Средство RegPkg не распространяются и не может использоваться для регистрации VSPackage на компьютере пользователя.  
  
## <a name="why-vspackages-should-not-self-register-at-install-time"></a>Почему VSPackages не следует самостоятельно регистрировать во время установки  
 Ваш VSPackage установщиков не следует полагаться на автоматическую регистрацию. На первый взгляд сохранение значений реестра VSPackage только в VSPackage, сам может показаться хорошей идеей. Учитывая, что разработчики должны значения реестра, доступные для своих повседневных рабочих и тестирования, имеет смысл во избежание обслуживания отдельную копию данных реестра установщика. Установщик можно полагаться на сам пакет VSPackage для записи значений реестра.  
  
 Хоть и хорош в теории саморегистрации имеет несколько недостатков, сделать его непригодным для установки VSPackage:  
  
-   Правильно поддержки установки, удаления, откат установки и удаления отката необходимо создать четыре нестандартных действий для каждого управляемого VSPackage, которая самостоятельно регистрируется путем вызова RegPkg.  
  
-   Подход к поддержке side-by-side могут потребовать создания четырех настраиваемые действия, вызывающие RegSvr32 или RegPkg для каждой поддерживаемой версии [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)].  
  
-   Установка с самостоятельным зарегистрированных модулей не может безопасно откат, поскольку никоим образом не получали, если самостоятельно зарегистрирован ключи используются другой компонент или приложение.  
  
-   Иногда самостоятельно Зарегистрированные DLL ссылки на вспомогательные библиотеки DLL, которые не существуют или имеют неправильную версию. Напротив установщик Windows может зарегистрировать библиотеки DLL с помощью таблиц реестра не зависящий от текущего состояния системы.  
  
-   Кода саморегистрации может быть запрещен доступ к сетевым ресурсам, например библиотеки типов, если компонент указан как запуск из источника и перечисленных в таблице SelfReg. Это может привести к установке компонента к сбою при выполнении административной установки.  
  
## <a name="see-also"></a>См. также  
 [Установщик Windows](http://msdn.microsoft.com/library/cc185688\(VS.85\).aspx)   
 [Регистрация управляемых пакетов](http://msdn.microsoft.com/en-us/f69e0ea3-6a92-4639-8ca9-4c9c210e58a1)
