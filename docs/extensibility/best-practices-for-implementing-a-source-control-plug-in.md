---
title: "Рекомендации по реализации подключаемого модуля системы управления версиями | Microsoft Docs"
ms.custom: ""
ms.date: "12/15/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-sdk"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "Источник подключаемые модули управления, советы и рекомендации"
  - "Советы и рекомендации, подключаемые модули управления версиями"
  - "Система управления версиями [Visual Studio SDK] подключаемых модулей"
ms.assetid: 85e73b73-29dc-464f-8734-ed308742c435
caps.latest.revision: 17
caps.handback.revision: 17
ms.author: "gregvanl"
manager: "ghogen"
---
# Рекомендации по реализации подключаемого модуля системы управления версиями
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Следующие технические детали можно надежно внедрить подключаемый модуль системы управления версиями [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)].  
  
## Проблемы с управления памятью  
 В большинстве случаев интегрированную среду разработки \(IDE\), которая является вызывающим объектом, освобождает и выделяет память. Подключаемый модуль системы управления версиями возвращает строки и других элементов в буферы, выделенные вызывающим объектом. Исключения указаны в описания конкретных функций, где они возникают.  
  
## Массив имен файлов  
 Если передается массив файлов, не передается как непрерывный массив имен файлов. Передается как массив указателей на имена файлов. Например, в [SccGet](../extensibility/sccget-function.md), имена файлов, передаются по `lpFileNames` параметр, где `lpFileNames` является указателем на `char **`.`lpFileNames`\[0\] — это указатель на имя, `lpFileNames`\[1\] — это указатель на имя второго и т. д.  
  
## Большой модели  
 Все указатели — 32 бита, даже на 16\-разрядных операционных системах.  
  
## Полные пути  
 Где имена файлов или каталогов, указываются в виде аргументов, они должны быть полные пути или UNC\-пути, без конечную обратную косую черту. Он отвечает системы управления версиями, подключаемый модуль для преобразования их в относительные пути, если это требование для базовой системы управления версиями.  
  
## Укажите полный путь для зарегистрированной библиотеки DLL  
 Интегрированная среда разработки больше не загружает библиотеки DLL из относительные пути \(например,.\\NewProvider.dll\). \(Например, C:\\Providers\\NewProvider.dll\), необходимо указать полный путь к библиотеке DLL. Это требование повышает безопасность среды IDE, запрещая загрузку системы управления версиями олицетворяемых или несанкционированного библиотеки DLL.  
  
## Поиск существующего VSSCI подключаемого модуля при установке подключаемого модуля управления версиями  
 Пользователь, который планируется установить подключаемый модуль системы управления версиями возможно уже существующей системы управления версиями подключаемого модуля на компьютере. Программа установки \(программа установки\) для подключаемого модуля, создаваемые следует проверить наличие существующих значений для разделы. Эти ключи уже заданы, программе установки необходимо обратиться пользователь необходимость регистрации подключаемого модуля в качестве подключаемого модуля управления версиями по умолчанию и заменить уже установлен.  
  
## Коды ошибок результатов и отчетов  
 `SCC_OK` Возвращаемое код функции управления источника указывает, что операция завершилась успешно для всех файлов. Если операция завершается неудачей, он должен возвратить последний код ошибки.  
  
 Правило для создания отчетов — это, в случае ошибки в Интегрированной среде IDE отвечает за сообщить о нем. Если произошла ошибка в системе управления версиями, подключаемый модуль системы управления версиями отвечает за сообщить о нем. Для экземпляра «не в данный момент выбраны файлы» будет сообщаться в интегрированной среде разработки, в то время как «этот файл уже извлечен» будет выводиться подключаемого модуля.  
  
## Структура контекста  
 При вызове [SccInitialize](../extensibility/sccinitialize-function.md), вызывающий объект передает `ppvContext` параметр, являющийся неинициализированного дескриптора на значение void. Подключаемый модуль системы управления версиями можно пропустить этот параметр или его можно выделить структуры любого типа и поместить указатель в эту структуру в переданный указателя. Интегрированная среда разработки не поддерживает эту структуру, но передает указатель на структуру в каждый вызов в подключаемом модуле. Это обеспечивает ценных контекстных данных кэша для подключаемого модуля, его можно использовать для поддержания глобальное состояние информацию, которая сохраняется в вызовах функций без использования глобальных переменных. Подключаемый модуль отвечает за освобождение структуры при вызове [SccUninitialize](../extensibility/sccuninitialize-function.md).  
  
 Если подключаемый модуль наборы `SCC_CAP_REENTRANT` бит в [SccInitialize](../extensibility/sccinitialize-function.md) \(в частности, в `lpSccCaps` параметра\), несколько структур контекста используются для отслеживания всех проектов, которые открыты.  
  
## Битовые флаги и другие параметры команды  
 Для каждой команды такие как [SccGet](../extensibility/sccget-function.md), интегрированной среды разработки можно задать множество параметров, которые изменяют поведение команды.  
  
 Этот API поддерживает параметр определенные параметры в интегрированной среде разработки через `fOptions` параметр. Эти параметры описаны в [Битовые флаги, используемые команды](../extensibility/bitflags-used-by-specific-commands.md) вместе с команды, влияющие на них. В общем случае это параметры, для которых пользователь не появится.  
  
 Наиболее пользовательские параметры не определены таким образом, поскольку они зависят от широко подключаемых модулей системы управления версиями. Таким образом, является рекомендуемым механизмом **Дополнительно** кнопки. Например, в **получить** диалоговом среда интегрированной разработки отобразит только сведения, которые она понимает, но она также отображает **Дополнительно** кнопку, если подключаемый модуль содержит параметры для этой команды. Когда пользователь щелкает **Дополнительно** кнопку вызовы IDE [SccGetCommandOptions](../extensibility/sccgetcommandoptions-function.md) Включение системы управления версиями, подключаемый модуль запрашивать сведения, такие как битовые флаги или даты и времени. Подключаемый модуль возвращает эту информацию в структуру, которая передается обратно во время `SccGet` команды.  
  
## См. также  
 [Подключаемые модули управления версиями](../extensibility/source-control-plug-ins.md)   
 [Создание подключаемого модуля системы управления версиями](../extensibility/internals/creating-a-source-control-plug-in.md)