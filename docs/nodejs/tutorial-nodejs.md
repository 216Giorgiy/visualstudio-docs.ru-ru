---
title: Создание приложения Node.js и Express
description: В этом учебнике вы создадите приложение с помощью инструментов Node.js для Visual Studio.
ms.custom: ''
ms.date: 03/13/2018
ms.technology: vs-nodejs
ms.topic: tutorial
ms.devlang: javascript
author: mikejo5000
ms.author: mikejo
manager: douge
dev_langs:
- JavaScript
ms.workload:
- nodejs
ms.openlocfilehash: 259524aa8f4bb20097f5f5504c890ee7f4cc3b78
ms.sourcegitcommit: e13e61ddea6032a8282abe16131d9e136a927984
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
---
# <a name="tutorial-create-a-nodejs-and-express-app-in-visual-studio"></a>Учебник. Создание приложения Node.js и Express в Visual Studio
В этом учебнике по разработке с помощью Node.js и Express в Visual Studio вы создадите простое веб-приложение Node.js, добавите в него код, изучите некоторые возможности интегрированной среды разработки и запустите приложение. Установите Visual Studio бесплатно [здесь](http://www.visualstudio.com), если еще не сделали это.

В этом руководстве вы узнаете, как:
> [!div class="checklist"]
> * Создание проекта Node.js
> * Добавление кода
> * Использование IntelliSense
> * Запуск приложения
> * Попадание в точку останова

## <a name="prerequisites"></a>Предварительные требования

* У вас должна быть установлена среда Visual Studio и должна иметься рабочая нагрузка "Разработка Node.js".

    Установите Visual Studio бесплатно [здесь](http://www.visualstudio.com), если еще не сделали это.

    Если вам нужно установить рабочую нагрузку, но среда Visual Studio уже имеется, щелкните ссылку **Открыть установщик Visual Studio** в левой области диалогового окна **Новый проект**. Запускается Visual Studio Installer. Выберите рабочую нагрузку **Разработка Node.js**, а затем элемент **Изменить**.

* У вас должна быть установлена среда выполнения Node.js.

    Если она не установлена, установите версию LTS с веб-сайта [Node.js](https://nodejs.org/en/download/). Как правило, Visual Studio автоматически обнаруживает установленную среду выполнения Node.js. Если установленная среда выполнения не обнаружена, вы можете настроить проект так, чтобы он ссылался на установленную среду выполнения, на странице свойств (после создания проекта щелкните его узел правой кнопкой мыши и выберите пункт **Свойства**).

    Этот учебник был протестирован с Node.js 8.10.0.

## <a name="create-a-project"></a>Создание проекта
Сначала вы создадите проект веб-приложения Node.js.

1. Откройте Visual Studio 2017.

1. В верхней строке меню выберите **Файл** > **Создать** > **Проект...**.

1. В левой области диалогового окна **Новый проект** разверните узел **JavaScript** и выберите **Node.js**. В средней области выберите **Базовое приложение Azure Node.js Express 4** и нажмите кнопку **ОК**.

     Если шаблон проекта **Базовое приложение Azure Node.js Express 4** отсутствует, необходимо сначала установить рабочую нагрузку **Разработка Node.js**.

    Visual Studio создаст решение и откроет проект. Файл *app.js* проекта откроется в редакторе (в левой области).

    - Полужирным шрифтом выделен ваш проект, имя которого вы указали в окне **Новый проект**. В файловой системе этот проект представлен файлом *NJSPROJ* в папке проекта. Вы можете задать свойства и переменные среды, связанные с проектом, щелкнув его правой кнопкой мыши и выбрав пункт **Свойства**. Вы можете одновременно использовать и другие средства разработки, так как файл проекта не вносит изменения в источник проекта Node.js.

    - На верхнем уровне находится решение, имя которого по умолчанию совпадает с именем проекта. Решение, представленное на диске файлом *SLN*, является контейнером для одного или нескольких связанных проектов.

    - В узле npm представлены все установленные пакеты npm. Вы можете щелкнуть узел npm правой кнопкой мыши, чтобы найти и установить пакеты npm с помощью диалогового окна.

    - Файлы проекта, такие как *app.js*, отображаются в узле проекта. *app.js* — это запускаемый файл проекта.

1. Откройте узел **npm** и проверьте наличие необходимых пакетов npm.

    Если каких-либо пакетов не хватает (имеется значок с восклицательным знаком), можно щелкнуть правой кнопкой мыши узел **npm** и выбрать пункт **Установить недостающие пакеты npm**.

## <a name="add-some-code"></a>Добавление кода

1. В обозревателе решений (правая область) откройте папку представлений, а затем откройте файл *index.pug*.

1. Замените содержимое следующей разметкой:

    ```js
    extends layout

    block content
      h1= title
      p Welcome to #{title}
      script.
        var f1 = function() { document.getElementById('myImage').src='#{data.item1}' }
      script.
        var f2 = function() { document.getElementById('myImage').src='#{data.item2}' }
      script.
        var f3 = function() { document.getElementById('myImage').src='#{data.item3}' }

      button(onclick='f1()') One!
      button(onclick='f2()') Two!
      button(onclick='f3()') Three!
      p
      a: img(id='myImage' height='200' width='200' src='')
    ```

1. В папке маршрутов откройте файл *index.js*.

1. Добавьте следующий код перед вызовом `router.get`:

    ```js
    var getData = function () {
        var data = {
            'item1': 'http://public-domain-photos.com/free-stock-photos-1/flowers/cactus-76.jpg',
            'item2': 'http://public-domain-photos.com/free-stock-photos-1/flowers/cactus-77.jpg',
            'item3': 'http://public-domain-photos.com/free-stock-photos-1/flowers/cactus-78.jpg'
        }
        return data;
    }
    ````

1. Замените вызов функции `router.get` следующим кодом:

    ```js
    router.get('/', function (req, res) {
        res.render('index', { title: 'Express', "data" });
    });
    ```

    В строке кода, содержащей `res.render`, присутствует ошибка. Нужно устранить ее, прежде чем запускать приложение. Мы исправим ее в следующем разделе.

## <a name="use-intellisense"></a>Использование IntelliSense

1. В файле *index.js* перейдите к строке кода, содержащей `res.render`.

1. После строки `data` введите `: get`, и IntelliSense покажет функцию `getData`. Выберите `getData`.

    ![Использование IntelliSense](../nodejs/media/tutorial-nodejs-intellisense.png)

1. Удалите запятую (`,`) перед элементом `"data"`, и выражение будет выделено зеленым цветом (подсветка синтаксиса). Наведите указатель на подсветку синтаксиса.

    ![Просмотр синтаксической ошибки](../nodejs/media/tutorial-nodejs-syntax-checking.png)

    В последней строке этого сообщения указывается, что интерпретатор JavaScript ожидал запятую (`,`).

1. Перейдите на вкладку **Список ошибок**.

    Вы увидите предупреждение и описание, а также имя файла и номер строки.

    ![Просмотр списка ошибок](../nodejs/media/tutorial-nodejs-error-list.png)

1. Исправьте код, добавив запятую (`,`) перед элементом `"data"`.

## <a name="set-a-breakpoint"></a>Задание точки останова

1. В файле *index.js* щелкните в левом внешнем поле перед следующей строкой кода, чтобы установить точку останова:

    `res.render('index', { title: 'Express', "data": getData() });`

    Точки останова — это один из самых простых и важных компонентов надежной отладки. Точка останова указывает, где Visual Studio следует приостановить выполнение кода, чтобы вы могли проверить значения переменных или поведение памяти либо выполнение ветви кода.

    ![Задание точки останова](../nodejs/media/tutorial-nodejs-set-breakpoint.png)

## <a name="run-the-application"></a>Запуск приложения

1. На панели инструментов отладки выберите целевой объект отладки.

    ![Выбор целевого объекта отладки](../nodejs/media/tutorial-nodejs-deploy-target.png)

1. Чтобы запустить приложение, нажмите клавишу **F5** (**Отладка** > **Начать отладку**).

    Отладчик приостановит выполнение в заданной точке останова. Теперь можно изучить состояние приложения.

1. Наведите указатель на функцию `getData`, чтобы увидеть ее свойства в подсказке по данным.

    ![Проверка переменных](../nodejs/media/tutorial-nodejs-inspect-variables.png)

1. Чтобы продолжить, нажмите клавишу **F5** (**Отладка** > **Продолжить**).

    Приложение откроется в браузере.

    В окне браузера вы увидите заголовок "Express" и фразу "Welcome to Express" в первом абзаце.

1. Нажимайте кнопки, чтобы просмотреть различные изображения.

    ![Выполняемые в браузере приложения](../nodejs/media/tutorial-nodejs-running-in-browser.png)

1. Закройте веб-браузер.

## <a name="optional-publish-to-azure-app-service"></a>(Необязательно) Публикация в Службу приложений Azure

1. В обозревателе решений щелкните проект правой кнопкой мыши и выберите пункт **Опубликовать**.

   ![Публикация в службу приложений Azure](../nodejs/media/tutorial-nodejs-publish-to-azure.png)

1. Выберите цель **Служба приложений Microsoft Azure**.

    В диалоговом окне **Служба приложений** можно войти в учетную запись Azure и подключиться к существующим подпискам Azure.

1. Выполните дальнейшие инструкции, чтобы выбрать подписку, выбрать или создать группу ресурсов, выбрать или создать план службы приложений, а затем, когда будет предложено, выполните инструкции по публикации в Azure. Более подробные инструкции см. на странице [Публикация на веб-сайте Azure с помощью веб-развертывания](https://github.com/Microsoft/nodejstools/wiki/Publish-to-Azure-Website-using-Web-Deploy).

1. В окне **Вывод** показан ход выполнения развертывания в Azure.

    После успешного развертывания в браузере откроется приложение, выполняющееся в Службе приложений Azure. Нажмите кнопку, чтобы отобразить изображение.

   ![Приложение, работающее в Службе приложений Azure](../nodejs/media/tutorial-nodejs-running-in-azure.png)

Поздравляем с завершением этого учебника!

## <a name="next-steps"></a>Следующие шаги

В этом учебнике вы узнали, как создать и запустить приложение Node.js с помощью Express и прервать выполнение отладчика с помощью точки останова.

> [!div class="nextstepaction"]
> [Инструменты Node.js для Visual Studio](https://github.com/Microsoft/nodejstools)