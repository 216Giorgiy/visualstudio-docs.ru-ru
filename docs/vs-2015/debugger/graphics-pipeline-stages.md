---
title: Этапы графического конвейера | Документация Майкрософт
ms.custom: ''
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-ide-debug
ms.tgt_pltfrm: ''
ms.topic: article
f1_keywords:
- vs.graphics.pipeline
ms.assetid: 2bf5c12e-2a00-401c-8163-4e373d08ad3f
caps.latest.revision: 16
author: mikejo5000
ms.author: mikejo
manager: ghogen
ms.openlocfilehash: 1669a13b047236044e5f7c65c2d27e187096b62b
ms.sourcegitcommit: 9ceaf69568d61023868ced59108ae4dd46f720ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/12/2018
ms.locfileid: "49267466"
---
# <a name="graphics-pipeline-stages"></a>Этапы графического конвейера
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Окно "Этапы графического конвейера" помогает понять, как отдельный вызов Draw преобразуется каждым этапом графического конвейера Direct3D.  
  
 Окно этапов конвейера выглядит следующим образом:  
  
 ![3&#45;D объект проходит через этапы конвейера. ](../debugger/media/gfx-diag-demo-pipeline-stages-orientation.png "gfx_diag_demo_pipeline_stages_orientation")  
  
## <a name="understanding-the-graphics-pipeline-stages-window"></a>Основные сведения об окне "Этапы графического конвейера"  
 Окно этапов конвейера визуализирует результат каждого этапа графического конвейера отдельно для каждого вызова Draw. Как правило, результаты этапов в середине конвейера скрыты, что затрудняет выявление источника проблем отрисовки. Благодаря визуализации каждого этапа по отдельности окно этапов конвейера упрощает поиск места первого возникновения проблемы, например, можно легко определить, что этап шейдера вершин неожиданно заставляет объект отображаться вне экрана.  
  
 После определения этапа, на котором возникает проблема, можно использовать другие средства анализатора графики для анализа того, как данные были интерпретированы или преобразованы. Проблемы отрисовки, возникающие на этапах конвейера, часто связаны с неверными дескрипторами формата вершин, ошибками в программах шейдеров или неправильно настроенным состоянием.  
  
### <a name="links-to-related-graphics-objects"></a>Ссылки на связанные графические объекты  
 Иногда для того, чтобы определить, почему вызов Draw взаимодействует определенным образом с графическим конвейером, необходим дополнительный контекст. Чтобы облегчить поиск такого дополнительного контекста, окно "Этапы графического конвейера" ссылается на один или несколько объектов, которые предоставляют дополнительный контекст для операций, выполняемых в графическом конвейере.  
  
-   В Direct3D 12 этот объект обычно является список команд.  
  
-   В Direct3D 11 этот объект обычно является контекстом графического устройства.  
  
 Эти ссылки являются частью текущей сигнатуры события графики, расположенной в левом верхнем углу окна "Этапы графического конвейера". Откройте любую из этих ссылок для просмотра дополнительных сведений об объекте.  
  
### <a name="viewing-and-debugging-shader-code"></a>Просмотр и отладка кода шейдера  
 Можно выполнить анализ и отладку кода для вершин, поверхностей, доменов, геометрий и построителей текстуры с помощью элементов управления в нижней части соответствующих этапов в окне этапов конвейера.  
  
##### <a name="to-view-a-shaders-source-code"></a>Просмотр исходного кода шейдера  
  
-   В **этапы графического конвейера** окна, найдите этап шейдера, соответствующий тому шейдеру вы хотите проанализировать. Затем под изображением предварительного просмотра, перейдите по ссылке заголовка этапа шейдера — например, перейдите по ссылке **Vertex Shader obj: 30** Чтобы просмотреть исходный код шейдера вершин.  
  
    > [!TIP]
    >  Номер объекта **obj: 30**, идентифицирует этот шейдер во всем интерфейсе анализатора графики такого объекта таблицы или окне журнала пикселей.  
  
##### <a name="to-debug-a-shader"></a>Отладка шейдера  
  
-   В **этапы графического конвейера** окна, найдите этап шейдера, соответствующий тому шейдеру для отладки. Затем под изображением предварительного просмотра, выберите **начать отладку**. Эта точка входа в отладчик HLSL по умолчанию устанавливается на первый вызов шейдера для соответствующего этапа, то есть первый пиксель, вершина или примитив, обрабатываемые шейдером во время вызова Draw. Вызовам этого шейдера для определенного пикселя или определенной вершины можно получить с помощью **журнал пикселей графики**.  
  
### <a name="the-pipeline-stages"></a>Этапы конвейера  
 Окно этапов конвейера визуализирует те этапы конвейера, которые были активны во время вызова Draw. Каждый этап графического конвейера преобразует входные данные из предыдущего этапа и передает результат в следующий этап. Самый первый этап — сборщик входных данных — принимает индекс и данные вершин из приложения в качестве входных данных, а самый последний этап — средство слияния вывода — объединяет новые отрисованные пиксели с текущим содержимым буфера кадров или целевым объектом прорисовки в качестве выходных данных, чтобы создать окончательное изображение, которое выводится на экран.  
  
> [!NOTE]
>  Вычислительные шейдеры не поддерживаются в **этапы графического конвейера** окна.  
  
 **Сборщик входных данных**  
 Сборщик входных данных считывает данные индексов и вершин, заданные приложением, и выполняет их сборку для графического оборудования.  
  
 В окне этапов конвейера выходные данные сборщика входных данных визуализируются в виде каркасной модели. Чтобы лучше рассмотреть результат, выберите **сборщик входных данных** в **этапы графического конвейера** окно для просмотра собранных вершин в полностью трехмерном режиме с помощью редактора моделей.  
  
> [!NOTE]
>  Если `POSITION` семантической отсутствует в выводе сборщика входных данных, то ничего не отображается в **сборщик входных данных** рабочей области.  
  
 **Вершинный построитель текстуры**  
 На этапе шейдеров вершин вершины обычно обрабатываются путем выполнения таких операций, как преобразования, натягивание оболочки и освещение. Шейдеры вершин создают то же число вершин, которое они принимают в качестве входных данных.  
  
 В окне этапов конвейера выходные данные шейдеров вершин визуализируются в виде каркасного растрового изображения. Чтобы лучше рассмотреть результат, выберите **вершинный построитель текстуры** в **этапы графического конвейера** windows для просмотра обработанных вершин в редакторе изображений.  
  
> [!NOTE]
>  Если `POSITION` или `SV_POSITION` семантика не присутствуют в выводе вершинного построителя текстуры, а затем ничего не отображается в **вершинный построитель текстуры** рабочей области.  
  
 **Шейдер поверхности** (Direct3D 11 и Direct3D 12 только)  
 На этапе шейдеров поверхности обрабатываются контрольные точки, определяющие поверхность низкого порядка, например линию, треугольник или четырехугольник. В качестве выходных данных этот этап создает исправление геометрии более высокого порядка и константы исправления, которые передаются на этап тесселяции с фиксированными функциями.  
  
 Этап шейдеров поверхностей не визуализируется в окне этапов конвейера.  
  
 **Этап тесселяции** (Direct3D 11 и Direct3D 12 только)  
 Этап тесселяции представляет собой аппаратный модуль с фиксированными функциями (непрограммируемый), который выполняет предварительную обработку домена, представленного выходными данными шейдера поверхностей. В качестве выходных данных он создает шаблон выборки домена и набор примитивов меньшего размера — точки, линии, треугольники, соединяющие эти выборки.  
  
 Этап тесселяции не визуализируется в окне этапов конвейера.  
  
 **Шейдер доменов** (Direct3D 11 и Direct3D 12 только)  
 Этап шейдера доменов обрабатывает исправления геометрии более высокого порядка из шейдера поверхности вместе с факторами тесселяции из этапа тесселяции. Факторы тесселяции могут включать в себя как факторы входных данных тесселяции, так и факторы выходных данных. В качестве выходных данных этап вычисляет позицию вершины точки на выходном исправлении в соответствии с факторами тесселяции.  
  
 Этап шейдеров доменов не визуализируется в окне этапов конвейера.  
  
 **Шейдер геометрии**  
 Этап шейдеров геометрии обрабатывает целые примитивы — точки, линии или треугольники — вместе с дополнительными данными о вершинах для смежных примитивов. В отличие от шейдеров вершин шейдеры геометрии могут создавать больше или меньше примитивов, чем они приняли в качестве входных данных.  
  
 В окне этапов конвейера выходные данные шейдеров геометрии визуализируются в виде каркасного растрового изображения. Чтобы лучше рассмотреть результат, выберите **шейдер геометрии** в **этапы графического конвейера** окно для просмотра обработанных примитивов в редакторе изображений.  
  
 **Уровень вывода Stream**  
 Этап потокового вывода может перехватывать преобразованные примитивы до растеризации и записывать их в память; оттуда эти данные могут повторно направляться в качестве входных данных в более ранние этапы графического конвейера или считываться ЦП.  
  
 Этап потокового вывода не визуализируется в окне этапов конвейера.  
  
 **Этап растеризации**  
 Этап растеризации представляет собой аппаратный модуль с фиксированными функциями (непрограммируемый), который преобразует векторные примитивы — точки, линии, треугольники — в растровое изображение, выполняя построчное преобразование. Во время растеризации вершины преобразуются в однородное пространство обрезки и обрезаются. В выходных данных построители текстуры сопоставляются, а атрибуты отдельных вершин интерполируются по примитиву и подготавливаются для построителя текстуры.  
  
 Этап растеризации не визуализируется в окне этапов конвейера.  
  
 **Построитель текстуры**  
 Этап построителей текстуры обрабатывает растеризованные примитивы вместе с интерполированными данными вершин для создания значений, таких как цвет и глубина, для отдельных пикселей.  
  
 В окне этапов конвейера выходные данные построителей текстуры визуализируются в виде полноцветного растрового изображения. Чтобы лучше рассмотреть результат, выберите **текстуры** в **этапы графического конвейера** окно для просмотра обработанных примитивов в редакторе изображений.  
  
 **Средство слияния вывода**  
 Этап средства слияния вывода сочетает эффект новых отрисованных пикселей с содержимым их соответствующих буферов — цветом, глубиной и трафаретом — для создания новых значений в этих буферах.  
  
 В окне этапов конвейера выходные данные средства слияния вывода визуализируются в виде полноцветного растрового изображения. Чтобы лучше рассмотреть результаты, выберите **средство слияния вывода** в **этапы графического конвейера** окно для просмотра объединенного буфера кадров.  
  
### <a name="vertex-shader-preview"></a>Просмотр шейдеров вершин  
 При выборе этапа шейдеров вершин в **этапы графического конвейера** окне **входные буферы** появится панель. Здесь вы найдете сведения о списке вершин, предоставленном шейдером вершин после сборки на этапе сборщика входных данных.  
  
 ![Средство просмотра входного буфера вершин этапа шейдера](../debugger/media/gfx-diag-vertex-shader-inbuffers.png "gfx_diag_vertex_shader_inbuffers")  
  
 Чтобы просмотреть результат этапа шейдеров вершин, выберите эскиз этапа шейдеров вершин для просмотра полноразмерного растеризованного каркаса сетки после его преобразования шейдером вершин.  
  
 ![Просмотр результат этапа шейдеров вершин](../debugger/media/gfx-diag-vertex-shader-preview.png "gfx_diag_vertex_shader_preview")  
  
## <a name="see-also"></a>См. также  
 [Пошаговое руководство: Отсутствие объектов вследствие заливки вершин](../debugger/walkthrough-missing-objects-due-to-vertex-shading.md)   
 [Пошаговое руководство. Отладка ошибок отрисовки, возникающих из-за заливки](../debugger/walkthrough-debugging-rendering-errors-due-to-shading.md)



