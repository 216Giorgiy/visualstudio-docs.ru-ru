---
title: 'Практическое: реализовать маркеры ошибок | Документация Майкрософт'
ms.custom: ''
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-ide-sdk
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- editors [Visual Studio SDK], legacy - error markers
ms.assetid: e8e78514-5720-4fc2-aa43-00b6af482e38
caps.latest.revision: 13
ms.author: gregvanl
manager: ghogen
ms.openlocfilehash: f1ced074e3257bee41cb9ffcc33279e17b148bbf
ms.sourcegitcommit: 240c8b34e80952d00e90c52dcb1a077b9aff47f6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/23/2018
ms.locfileid: "49838287"
---
# <a name="how-to-implement-error-markers"></a>Практическое: реализовать маркеры ошибок
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Маркеры ошибок (или красными волнистыми линиями) являются наиболее сложных настроек текстового редактора для реализации. Однако преимущества, которые они предоставляют пользователям вашего VSPackage значительно перевешивают затраты на обеспечение. Маркеры ошибок может привести к некоторой пометить текст, который ваши средства синтаксического анализа языка считает, что неправильное волнистой или волнистой красной линией. Он помогает программистам визуально отображается неправильный код.  
  
 Используйте текстовые метки, чтобы реализовать красными волнистыми линиями. Как правило языковые службы добавьте красными волнистыми линиями в текстовый буфер как на этапе фона, либо во время простоя, либо в фоновом потоке.  
  
### <a name="to-implement-the-red-wavy-underline-feature"></a>Чтобы реализовать функцию красной волнистой линией  
  
1. Выделите текст, в котором следует разместить красной волнистой линией.  
  
2. Создайте маркер типа `MARKER_CODESENSE_ERROR`. Дополнительные сведения см. в разделе [как: Добавление стандартные маркеры текста](../extensibility/how-to-add-standard-text-markers.md).  
  
3. После этого передайте <xref:Microsoft.VisualStudio.TextManager.Interop.IVsTextMarkerClient> указатель на интерфейс.  
  
   Этот процесс также позволяет создать текст подсказки или специальные контекстного меню над заданной маркером. Дополнительные сведения см. в разделе [как: Добавление стандартные маркеры текста](../extensibility/how-to-add-standard-text-markers.md).  
  
   Следующие объекты необходимы, прежде чем можно будет отобразить маркеры ошибок.  
  
- Средство синтаксического анализа.  
  
- Поставщик задач (то есть реализация <xref:Microsoft.VisualStudio.Shell.Interop.IVsTaskProvider2>), поддерживает запись изменения в сведения о строке, чтобы определить строки повторного анализа.  
  
- Фильтр представления текста, который фиксирует курсор события изменения из представления, используя <xref:Microsoft.VisualStudio.TextManager.Interop.IVsTextViewEvents.OnChangeCaretLine%2A>) метод.  
  
  Средство синтаксического анализа, поставщик задач и фильтр предоставляют инфраструктуру, необходимую сделать возможным маркеры ошибок. Ниже представлен процесс для отображения маркеры ошибок.  
  
1.  В представлении, что и фильтруемый фильтр получает указатель на поставщик задач, связанных с данными этого представления.  
  
    > [!NOTE]
    >  Можно использовать один и тот же фильтр команды для подсказок метода, завершение операторов, маркеры ошибок и т. д.  
  
2.  Если фильтр получает событие, указывающее на то, что вы переместили на другую строку, задание создается на наличие ошибок.  
  
3.  Обработчик задач проверяет, если строка является "грязным". Если Да, он анализирует строку на наличие ошибок.  
  
4.  Если обнаружены ошибки, поставщика задач создает экземпляр элемента задачи. Этот экземпляр создает текстовой метки, в среде используется как маркер ошибок в представлении текста.  
  
## <a name="see-also"></a>См. также  
 [С помощью меток текста с помощью API прежних версий](../extensibility/using-text-markers-with-the-legacy-api.md)   
 [Практическое: Добавление стандартные текстовые метки](../extensibility/how-to-add-standard-text-markers.md)   
 [Практическое: Создание настраиваемых текстовых маркеров](../extensibility/how-to-create-custom-text-markers.md)   
 [Практическое руководство. Использование текстовых маркеров](../extensibility/how-to-use-text-markers.md)

