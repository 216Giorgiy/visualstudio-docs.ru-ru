---
title: Сохранение постоянного виртуального IP-адреса для облачной службы Azure | Документация Майкрософт
description: Узнайте, как убедиться, что виртуальный IP-адрес (VIP) облачной службы Azure не изменяется.
author: ghogen
manager: douge
assetId: 4a58e2c6-7a79-4051-8a2c-99182ff8b881
ms.prod: visual-studio-dev14
ms.technology: vs-azure
ms.custom: vs-azure
ms.workload: azure-vs
ms.topic: conceptual
ms.date: 03/21/2017
ms.author: ghogen
ms.openlocfilehash: e74cc5b9bbbfea92d2dea2c00ee5b0f98dc02f21
ms.sourcegitcommit: e481d0055c0724d20003509000fd5f72fe9d1340
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/05/2018
ms.locfileid: "51002897"
---
# <a name="retain-a-constant-virtual-ip-address-for-an-azure-cloud-service"></a>Сохранение постоянного виртуального IP-адреса для облачной службы Azure
При обновлении облачной службы, размещенной в Azure, может потребоваться убедиться, что виртуальный IP-адрес (VIP) службы не изменяется. Многие службы управления доменом используют системы доменных имен (DNS) для регистрации доменных имен. DNS работает только в том случае, если виртуальный IP-адрес остается неизменным. Можно использовать **мастера публикации** в инструментах Azure, чтобы убедиться, что виртуальный IP-адрес облачной службы не изменяется при его обновлении. Дополнительные сведения об использовании управления доменами DNS для облачных служб см. в разделе [Настройка имени личного домена для облачной службы Azure](/azure/cloud-services/cloud-services-custom-domain-name-portal).

## <a name="publish-a-cloud-service-without-changing-its-vip"></a>Публикация облачной службы без изменения ее виртуального IP-адреса
Виртуальный IP-адрес облачной службы выделяется при первом развертывании службы в Azure в конкретной среде, например в рабочей среде. Виртуальный IP-адрес изменяется только в том случае, если развертывание удаляется явно или неявно развертывания удаляется в процессе обновления развертывания. Чтобы сохранить виртуальный IP-адрес, нельзя удалять развертывания, и необходимо убедиться в том, что Visual Studio не удаляет развертывание автоматически. 

Можно указать параметры развертывания в **мастера публикации**, который поддерживает несколько вариантов развертывания. Можно указать новое развертывание или развертывание обновления, которое может быть добавочным или одновременным. Оба вида развертывания обновления сохраняют виртуальный IP-адрес. Определения типов развертывания, см. в разделе [мастер публикации приложений Azure](vs-azure-tools-publish-azure-application-wizard.md). Кроме того можно управлять, удаляется ли предыдущее развертывание облачной службы, если произошла ошибка. Если этот параметр не установлен правильно, VIP-адрес может неожиданно измениться.

## <a name="update-a-cloud-service-without-changing-its-vip"></a>Обновление облачной службы без изменения ее виртуального IP-адреса
1. Создайте или откройте проект облачной службы Azure в Visual Studio. 

2. В **обозревателе решений**, щелкните правой кнопкой мыши проект. В контекстном меню выберите **публикации**.

    ![Меню публикации](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/solution-explorer-publish-menu.png)

3. В **опубликовать приложение Azure** диалоговом окне выберите подписку Azure, к которому вы хотите развернуть. Войдите в случае необходимости и выберите **Далее**.

    ![Страница входа приложения Azure в публикации.](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-signin.png)

4. На **Общие параметры** убедитесь, имени облачной службы, для которой выполняется развертывание, **среды**, **конфигурации построения**и **Конфигурации службы** выбраны правильные.

    ![Публикация вкладка "Общие параметры приложения Azure"](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-common-settings.png)

5. На **Дополнительные параметры** вкладке, убедитесь, что **метка развертывания** и **учетной записи хранения** указаны правильно. Убедитесь, что **удалить развертывание при сбое** флажок снят и убедитесь, что **обновление развертывания** установлен флажок. Сняв **удалить развертывание при сбое** флажок, вы убедитесь, что ваш виртуальный IP-адрес не будет потерян, если произошла ошибка во время развертывания. Выбрав **обновление развертывания** флажок, вы убедитесь, что развертывание не удалено и VIP не будет потерян при повторной публикации приложения. 

    ![Публикация приложения Azure: Дополнительные параметры-вкладка](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-advanced-settings.png)

6. Чтобы уточнить, способ обновления ролей, выберите **параметры** рядом с полем **обновление развертывания**. Выберите либо **добавочное обновление** или **одновременное обновление**и выберите **ОК**. Выберите **добавочное обновление** для обновления каждого экземпляра приложения, один за другим, чтобы приложение всегда доступно. Выберите **одновременное обновление** обновление всех экземпляров приложения в то же время. Одновременное обновление выполняется быстрее, но службы могут быть недоступны во время обновления. Когда вы закончите настройку, выберите **Далее**.

    ![Параметры развертывания приложения Azure страница публикации.](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-deployment-update-settings.png)

7. В **опубликовать приложение Azure** выберите **Далее** пока **Сводка** откроется страница. Проверьте параметры, а затем выберите **публикации**.
   
    ![Опубликовать страницу сводки приложения Azure](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-summary.png)

## <a name="next-steps"></a>Следующие шаги
- [С помощью Visual Studio мастер публикации приложений Azure](vs-azure-tools-publish-azure-application-wizard.md)

