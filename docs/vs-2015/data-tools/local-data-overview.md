---
title: Общие сведения о локальных данных | Документация Майкрософт
ms.custom: ''
ms.date: 2018-06-30
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
dev_langs:
- VB
- CSharp
- C++
- aspx
helpviewer_keywords:
- SQL Server Express
- local data
- SQL Server LocalDB
- LocalDB
- SQLEXPRESS
- SQL Server, local data
- SQL Express
- SQL Server Compact
- data access [Visual Studio], troubleshooting
- Access, .mdb files in Visual Studio
- data [Visual Studio], local
ms.assetid: d6afa5ac-2bb8-49f2-a50e-f71f611ed506
caps.latest.revision: 71
author: gewarren
ms.author: gewarren
manager: ghogen
robots: noindex,nofollow
ms.openlocfilehash: b2bd594ba017a07ad3886a9aeb4b59d6f479a708
ms.sourcegitcommit: 55f7ce2d5d2e458e35c45787f1935b237ee5c9f8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2018
ms.locfileid: "47561288"
---
# <a name="local-data-overview"></a>Общие сведения о локальных данных
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

При разработке приложений для данных, как правило, лучше использовать локальную копию базы данных, таким образом, чтобы вы не возникнут новые ошибки в производственных данных. Даже общий доступ к тестовой базы данных с другими разработчиками создает потенциальные проблемы, если два разработчика привести к ошибкам, которые взаимодействуют способами жестких в обнаружении. Все эти проблемы можно избежать, используя собственные тестовые данные на локальном компьютере. Большинство, если не все базы данных системы позволяют создавать локальные файлы данных. Для проектов .NET Visual Studio предоставляет специальную поддержку для локальных файлов базы данных SQL Server (.mdf) и файлы базы данных Microsoft Access (.mdb).  
  
 Visual Studio поддерживает следующие сценарии:  
  
1.  
  
2.  
  
-  
  
-  
  
-   Создайте проект базы данных SQL Server, щелкнув узел решения в обозревателе решений и выбрав **добавить &#124; новый проект**.  В левой области выберите **SQL Server &#124; базы данных** проекта и нажмите кнопку ОК. В обозревателе решений щелкните правой кнопкой мыши узел проекта базы данных для импорта файла локальной базы данных, а затем разрабатывать приложения, которое подключается к базе данных, созданной проектом. Полезно при разработке и изменение схемы базы данных, в то же время, что вы разрабатываете приложение.  
  
     ![Импорт базы данных в проект базы данных](../data-tools/media/raddata-import-database-into-database-project.png "raddata Импорт базы данных в проект базы данных")  
  
-   Если вы создаете новую базу данных, сначала добавьте **файл базы данных, основанной на службах** в проект (**проекта &#124; Добавление нового элемента)**. Это создает новый MDF-файла, который подключен к экземпляру SQL Server по умолчанию на локальном компьютере, который по умолчанию является \MSSQLocalDB (localdb). Базы данных появится в обозревателе серверов. Разверните узел и щелкните правой кнопкой мыши на узлах для добавления новых объектов базы данных, таких как таблицы, представления, функции и т. д.  
  
 Дополнительные сведения о SQL Server Express LocalDB, см. в разделе [Introducing LocalDB, an Improved SQL Express](http://go.microsoft.com/fwlink/?LinkId=234375) и [LocalDB: Where is My Database?](http://go.microsoft.com/fwlink/?LinkId=234376) на веб-сайте Майкрософт.  
  
 В следующей таблице приведены ссылки на разделы, описывающие, как подключить приложение к локальным данным:  
  
|Раздел|Описание|  
|-----------|-----------------|  
|[Создание базы данных SQL с помощью конструктора](../data-tools/create-a-sql-database-by-using-a-designer.md)|Содержит пошаговые инструкции по созданию файла локальной базы данных, который может использоваться для тестирования возможностей для работы с данными и сборки приложений.|  
|[Пошаговое руководство. Подключение к данным в локальном файле базе данных (Windows Forms)](../data-tools/walkthrough-connecting-to-data-in-a-local-database-file-windows-forms.md)|Предоставляет пошаговые инструкции по подключению к базе данных LocalDB SQL Server Express при создании простого приложения Windows.|  
|[Подключение к данным в базе данных Access (Windows Forms)](../data-tools/connect-to-data-in-an-access-database-windows-forms.md)|Предоставляет пошаговые инструкции по подключению к базе данных Microsoft Access.|  
|[Практическое руководство. Подключение к базе данных "Борей"](../data-tools/how-to-connect-to-the-northwind-database.md)|Предоставляет инструкции по подключению к примеру базы данных Northwind в [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], SQL Server Compact, SQL Server Express и Access.|  
  
## <a name="use-the-connection-string"></a>Используйте строку подключения  
 Это простейший подход и является хорошим выбором, когда приложение только считывает данные из базы данных и при использовании сторонних баз данных. Файл базы данных могут располагаться в любом месте на локальном компьютере, что приложение имеет разрешения на доступ к и поддерживает система базы данных.  
  
1.  (Необязательно) Создайте новое соединение, как описано в разделе [Добавление новых подключений](../data-tools/add-new-connections.md). Для сторонних баз данных и MDF-файлов, для которых вы уже знать строку подключения и не будет это привязка данных или с использованием источника данных, например классами платформы Entity Framework или наборы данных этот шаг не является обязательным. Просто используйте строку подключения для подключения к локальному файлу. MDF-файлов, см. в разделе [обновление MDF-файлов](../data-tools/upgrade-dot-mdf-files.md) и [подключения к](https://msdn.microsoft.com/en-us/library/ms254507.aspx).  
  
2.  (Необязательно) Если вы используете наборы данных, Entity Framework или LINQ to SQL, затем создать источник данных с помощью мастера настройки источника данных. Дополнительные сведения см. в разделе [Добавление новых источников данных](../data-tools/add-new-data-sources.md).  
  
## <a name="add-an-existing-mdf-to-your-project"></a>Добавьте в проект существующие .mdf  
 Если приложение будет Вставка, удаление или обновление данных, и вы хотите сохранить копию исходного файла доступны, затем рассмотрите возможность добавления файла в проект. При этом можно задать свойство item ее, чтобы **Копировать в выходной каталог** для **всегда Копировать** или **копировать, если новее**и разрабатывать приложения. Каждый раз, когда вы создадите приложение, исходная база данных копируется в выходную папку и изменения приложения выполняются в копии. Таким образом, у вас всегда есть чистая копия исходных данных.  
  
1.  Используйте **проводника Windows** перетаскивание MDF-файл из текущего расположения на узел проекта в обозревателе решений в Visual Studio.  Если файл уже подключен к экземпляру localDB, сначала его необходимо отсоединить. После поместите его в проект Visual Studio будет автоматически повторно подключить ее к экземпляру localDB по умолчанию.  
  
2.  Щелкните правой кнопкой мыши на новом узле базы данных и выберите свойства. Выберите поведение копирования, либо **всегда Копировать** или **копировать, если новее**.  
  
## <a name="create-a-sql-server-database-project-and-import-your-database"></a>Создать проект базы данных SQL Server и импортируйте базу данных  
 Это хороший вариант, когда будет разрабатываться базе данных, возможно добавление столбцов или таблиц, или изменение типов данных.  
  
## <a name="each-project-contains-two-copies-of-the-database"></a>Каждый проект содержит две копии базы данных  
 При построении проекта файл базы данных может быть скопирован из корневой папки проекта в выходную, **bin**, папку. Это поведение зависит от **Копировать в выходной каталог** свойства файла и значение по умолчанию этого свойства зависит от типа файла базы данных, которую вы используете.  
  
 Чтобы просмотреть **bin** папку в **обозревателе решений**, выберите **Показать все файлы** на панели инструментов.  
  
> [!NOTE]
>  **Копировать в выходной каталог** не распространяется на веб- или проектов C++.  
  
 Файл базы данных в корневой папке проекта изменяется только при изменении схемы базы данных или данных с помощью **обозревателя серверов**/**обозреватель баз данных** или других [Visual Инструменты для баз данных](http://msdn.microsoft.com/en-us/6b145922-2f00-47db-befc-bf351b4809a1).  
  
 По мере изменения данных во время разработки приложения при изменении базы данных в **bin** папки. Например, при нажатии клавиши F5 для отладки приложения выполняется подключение к базе данных в этой папке.  
  
|Значение атрибута **Копировать в выходной каталог** свойство|Поведение|  
|----------------------------------------------------|--------------|  
|**Копировать, если новее** (значение по умолчанию для SDF-файлов)|Файл базы данных копируется из каталога проекта к **bin** directory при первом построении проекта. **Дата изменения** свойства файлов затем сравнивается при каждом построении проекта. Если файл в папке проекта новее, он копируется в **bin** папки, заменив предыдущий файл. В противном случае файлы не копируются. **Предупреждение:** мы не рекомендуем использовать это значение для .mdb или MDF-файлов. Файл базы данных может изменяться, даже когда не вносятся изменения в данные. Файл может быть помечен как более новый, если вы просто открыть подключение (например, разверните узел **таблиц** узел в **обозревателя серверов**).|  
|**Всегда копировать** (значение по умолчанию для MDB- и MDF-файлы)|Файл базы данных копируется из каталога проекта к **bin** directory каждый раз при сборке приложения. Все изменения, выполненные в файле данных из выходной папки, будут перезаписаны при следующем запуске приложения.|  
|**Не копировать**|Система не перезаписывает файл в **bin** каталога. Приложение создает динамическую строку подключения, указывающую на файл базы данных в выходном каталоге. Поэтому необходимо вручную скопировать файл в выходной каталог, если требуется, чтобы данные в выходном каталоге соответствовали данным в каталоге проекта.|  
  
## <a name="common-issues-with-local-data"></a>Общие проблемы локальных данных  
 В следующей таблице приведены типичные проблемы, возникающие при работе с локальными файлами данных.  
  
|Проблемы|Объяснение|  
|-----------|-----------------|  
|Каждый раз при проверке моего приложения и изменении данных мои изменения пропадают при следующем запуске приложения.|Значение **Копировать в выходной каталог** свойство **копировать, если новее** или **всегда Копировать**. База данных в выходной папке (база данных, изменяемая при тестировании приложения) перезаписывается каждый раз при сборке проекта. Дополнительные сведения см. в разделе [как: управление локальные файлы данных, в проект](../data-tools/how-to-manage-local-data-files-in-your-project.md).|  
|Появляется сообщение о том, что файл данных заблокирован.|Access (MDB-файлы): убедитесь, что файл не открыт в другой программе, например в Microsoft Access.<br /><br /> SQL Server Express (MDF-файлы): SQL Server Express блокирует файл данных при попытке скопировать, переместить или переименовать его вне Visual Studio IDE.|  
|При попытке нескольких пользователей обратиться к одной и той же базе данных в одно и то же время в доступе будет отказано.|Visual Studio использует преимущества *пользовательские экземпляры*, который входит в состав SQL Server Express, которая создает отдельный экземпляр SQL Server для каждого пользователя. После того как один пользователь обратится к файлу, все последующие пользователи подключиться не смогут. Эта проблема может произойти, например, при попытке запуска веб-приложений в ASP.NET Development Server и IIS в одно и то же время, поскольку IIS обычно выполняется под другой учетной записью.|  
  
## <a name="see-also"></a>См. также  
 [Пошаговое руководство: Подключение к данным в файл локальной базы данных (Windows Forms)](../data-tools/walkthrough-connecting-to-data-in-a-local-database-file-windows-forms.md)   
 [Подключение к данным в базе данных Access (Windows Forms)](../data-tools/connect-to-data-in-an-access-database-windows-forms.md)