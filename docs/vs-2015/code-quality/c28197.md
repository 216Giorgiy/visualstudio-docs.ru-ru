---
title: C28197 | Документация Майкрософт
ms.custom: ''
ms.date: 2018-06-30
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-devops-test
ms.tgt_pltfrm: ''
ms.topic: article
f1_keywords:
- C28197
helpviewer_keywords:
- C28197
ms.assetid: b685f4c1-9bd1-4ca3-a2b6-6eb87877b5db
caps.latest.revision: 5
author: corob-msft
ms.author: gewarren
manager: ghogen
ms.openlocfilehash: fe6a36f1cff0235d1f42ad9d3933a22ea797431e
ms.sourcegitcommit: 55f7ce2d5d2e458e35c45787f1935b237ee5c9f8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2018
ms.locfileid: "47562574"
---
# <a name="c28197"></a>C28197
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Последнюю версию этого раздела можно найти в [C28197](https://docs.microsoft.com/visualstudio/code-quality/c28197).  
  
Предупреждение C28197: Возможная утечка памяти  
  
 Это предупреждение передается утечек памяти и ресурсов, если ресурс является потенциально псевдонимом в другое расположение.  
  
 *Указатель* точек на выделенную память или на другой выделенный ресурс, который не был явно освобожден. Это предупреждение обычно является из-за недостатка заметок в вызываемой функции, несмотря на то, что недостаточно заметок на вызывающей функции можно также сделать этот процесс более вероятно.  
  
 Это предупреждение можно создавать отчеты о выходе из функции, если входной аргумент `__drv_freesMem` или `__drv_aliasesMem` заметки. Это предупреждение обычно указывает допустимое утечки или что функция, вызываемая текущей функцией должен добавить заметки.  
  
 В частности, отсутствие базовый `_In_` и `_Out_` заметок сделать это предупреждение довольно вероятно, несмотря на то что `__drv_aliasesMem` и `__drv_freesMem` также может потребоваться заметок. Ложный положительный результат — это вероятный результат такого отсутствует `_In_` заметки.  
  
 Функции, которые принимают указатель и псевдоним его (что позволяет избежать утечка) должен сопровождаться атрибутом `__drv_aliasesMem`. Если необходимо создать функцию, которая вставляет объект в глобальной структуры или передает его функции системы, который делает это, следует добавить `__drv_aliasesMem` заметки.  
  
 Функции, объем свободной памяти должно быть помечено атрибутом `__drv_freesMem`. Основные функции, которые освобождают память уже имеют эту заметку.  
  
## <a name="example"></a>Пример  
 Следующий пример кода вызывает появление этого предупреждения.  
  
```  
char *p = (char *)malloc(10);  
test(p);   // does not save a copy of p  
```  
  
 Следующий пример кода позволяет избежать появления этого предупреждения.  
  
```  
char *p = (char *)malloc(10);  
test(p);   // does not save a copy of p  
free(p);  
```



