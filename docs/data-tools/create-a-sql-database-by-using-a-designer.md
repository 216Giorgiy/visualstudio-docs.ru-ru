---
title: Создание файла базы данных и использование конструктора таблиц в Visual Studio
ms.date: 11/03/2017
ms.topic: conceptual
helpviewer_keywords:
- database tables, creating
- database files, creating
- table designer
ms.assetid: 99c2b06f-47aa-414e-8057-a3453712fd23
author: gewarren
ms.author: gewarren
manager: douge
ms.technology: vs-data-tools
ms.workload:
- data-storage
ms.openlocfilehash: 305374cbce519a87f1d40e09efac7f490b28fe0d
ms.sourcegitcommit: 42ea834b446ac65c679fa1043f853bea5f1c9c95
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/19/2018
---
# <a name="create-a-database-and-add-tables-in-visual-studio"></a>Создание базы данных и добавления таблицы в Visual Studio
Visual Studio можно использовать для создания и обновления файла локальной базы данных в SQL Server Express LocalDB. Также можно создать базу данных, выполнив инструкции Transact-SQL в **обозреватель объектов SQL Server** окна инструментов в Visual Studio. В этом разделе мы будем создайте MDF-файл и добавьте таблицами и ключами с помощью конструктора таблиц.

## <a name="prerequisites"></a>Предварительные требования
Для выполнения данного пошагового руководства, необходимо иметь необязательный **хранения и обработки данных** рабочей нагрузки, установленному в Visual Studio. Чтобы установить его, откройте **установщик Visual Studio** и выберите **рабочих нагрузок** вкладки. В разделе **веб-приложений и облачных**, выберите **хранения и обработки данных**. Выберите **изменить** кнопку, чтобы добавить рабочую нагрузку в Visual Studio.

## <a name="create-a-project-and-a-local-database-file"></a>Создание проекта и файла локальной базы данных

### <a name="to-create-a-project-and-a-database-file"></a>Создание проекта и файла базы данных
1.  Создайте проект Windows Forms с именем `SampleDatabaseWalkthrough`.

2.  В строке меню выберите **проекта**, **Добавление нового элемента**.

3.  В списке шаблонов элементов прокрутите список вниз и выберите **баз данных на основе службы**.

     ![Диалоговое окно «шаблоны»](../data-tools/media/raddata-vsitemtemplates.png "raddata VSItemTemplates")

4.  Имя базы данных **назовите**, а затем выберите **добавить** кнопки.

### <a name="to-add-a-data-source"></a>Добавление источника данных
5.  Если **источники данных** окно не открыто, откройте его, выбрав **Shift + Alt + D** ключей или в строке, выбрав меню **представление**, **другие окна**, **Источники данных**.

6.  В **источники данных** выберите **добавить новый источник данных** ссылку.

    **Мастер настройки источника данных** открывается.

7. На **Выбор типа источника данных** выберите **базы данных** и выберите **Далее**.

8. На **Выбор модели базы данных** выберите **Далее** принять значение по умолчанию (набор данных).

9. На **Выбор подключения к данным** выберите **SampleDatabase.mdf** файл в раскрывающемся списке, а затем выберите **Далее**.

10. На **сохранение подключения в файле конфигурации приложения** выберите **Далее**.

11. Один **Выбор объектов базы данных** страницы, появится сообщение об ошибке базы данных не содержит все объекты. Нажмите кнопку **Готово**.

### <a name="to-view-properties-of-the-data-connection"></a>Чтобы просмотреть свойства подключения к данным
Можно просмотреть строку соединения для файла SampleDatabase.mdf, откройте окно свойств подключения к данным:

-   В Visual Studio, выберите **представление**, **обозреватель объектов SQL Server** Если это окно еще не открыто. Откройте окно свойств, развернув **подключения к данным** узел, открыв контекстное меню для файла SampleDatabase.mdf и выбрав **свойства**.

-   Кроме того, можно выбрать **представление**, **обозревателя серверов**, если это окно еще не открыто. Откройте окно свойств, развернув **подключения к данным** узла. Откройте контекстное меню для файла SampleDatabase.mdf и выберите **свойства**.

## <a name="create-tables-and-keys-by-using-table-designer"></a>Создание таблиц и ключей с помощью конструктора таблиц
В этом разделе вы создадите двух таблиц, первичный ключ в каждой таблице и несколько строк данных выборки. Также создается внешний ключ, чтобы указать, как записи в одной таблице соотноситься с записями в другой таблице.

### <a name="to-create-the-customers-table"></a>Чтобы создать таблицу Customers
1.  В **обозревателя серверов** или **обозреватель объектов SQL Server**, разверните **подключения к данным** узел, а затем разверните **SampleDatabase.mdf**узла.

2.  Откройте контекстное меню для **таблиц**, а затем выберите **добавить новую таблицу**.

     **Конструктор таблиц** открывается и отображается таблица с одной строкой по умолчанию, который представляет один столбец в таблице, которую вы создаете. Путем добавления строк в сетку будут добавлены столбцы в таблицу.

3.  В сетке добавьте строку для каждой из следующих записей.

    |Имя столбца|Тип данных|Разрешить значения null|
    |-----------------|---------------|-----------------|
    |`CustomerID`|`nchar(5)`|False (не установлен)|
    |`CompanyName`|`nvarchar(50)`|False (не установлен)|
    |`ContactName`|`nvarchar (50)`|True (установлен)|
    |`Phone`|`nvarchar (24)`|True (установлен)|

4.  Откройте контекстное меню для `CustomerID` строк, а затем выберите **задать первичный ключ**.

5.  Откройте контекстное меню для строки по умолчанию, а затем выберите **удалить**.

6.  Назовите таблицу "Клиенты" путем обновления первой строки в области скриптов, как показано в следующем примере:

    ```
    CREATE TABLE [dbo].[Customers]
    ```

    Результат должен быть примерно таким:

    ![Конструктор таблиц](../data-tools/media/raddata-table-designer.png "raddata конструктора таблиц")

7.  В левом верхнем углу **конструктор таблиц**выберите **обновление** кнопки.

8.  В **Просмотр обновлений базы данных** выберите **обновление базы данных** кнопки.

    Ваши изменения сохраняются в файл локальной базы данных.

### <a name="to-create-the-orders-table"></a>Чтобы создать таблицу Orders
1.  Создайте еще одну таблицу, а затем добавьте строку для каждой записи следующей таблицы.

    |Имя столбца|Тип данных|Разрешить значения null|
    |-----------------|---------------|-----------------|
    |`OrderID`|`int`|False (не установлен)|
    |`CustomerID`|`nchar(5)`|False (не установлен)|
    |`OrderDate`|`datetime`|True (установлен)|
    |`OrderQuantity`|`int`|True (установлен)|

2.  Задать **OrderID** как первичный ключ, а затем удалите строку по умолчанию.

3.  Назовите таблицу "Заказы" путем обновления первой строки в области скриптов, как показано в следующем примере:

    ```sql
    CREATE TABLE [dbo].[Orders]
    ```

4.  В левом верхнем углу **конструктор таблиц**выберите **обновление** кнопки.

5.  В **Просмотр обновлений базы данных** выберите **обновление базы данных** кнопки.

    Ваши изменения сохраняются в файл локальной базы данных.

### <a name="to-create-a-foreign-key"></a>Создание внешнего ключа
1.  В области контекста в правой части сетки откройте контекстное меню для **внешние ключи**, а затем выберите **добавить новый внешний ключ**, как показано на следующем рисунке.

     ![Добавление внешнего ключа в конструкторе таблиц](../data-tools/media/foreignkey.png "ForeignKey")

2.  В появившемся текстовом поле замените **ToTable** с `Customers`.

3.  В области T-SQL обновите последнюю строку в соответствии со следующим примером:

    ```sql
    CONSTRAINT [FK_Orders_Customers] FOREIGN KEY ([CustomerID]) REFERENCES [Customers]([CustomerID])
    ```

4.  В левом верхнем углу **конструктор таблиц**выберите **обновление** кнопки.

5.  В **Просмотр обновлений базы данных** выберите **обновление базы данных** кнопки.

    Ваши изменения сохраняются в файл локальной базы данных.

## <a name="populate-the-tables-with-data"></a>Заполнение таблиц данными

### <a name="to-populate-the-tables-with-data"></a>Заполнение таблиц данными

1.  В **обозревателя серверов** или **обозреватель объектов SQL Server**, разверните узел примера базы данных.

2.  Откройте контекстное меню для **таблиц** выберите **обновление**и разверните **таблиц** узла.

3.  Откройте контекстное меню для таблицы Customers, а затем выберите **Показать таблицу данных**.

4.  Добавьте любые данные, необходимые для некоторых клиентов.

    Можно указать любые пять символов как ИД клиентов, но хотя бы один нужно выбрать и запомнить для дальнейшего использования в этой процедуре.

5.  Откройте контекстное меню для таблицы Orders, а затем выберите **Показать таблицу данных**.

6.  Добавьте данные для некоторых заказов.

    > [!IMPORTANT]
    > Убедитесь, что все идентификаторы заказов и количества заказов — целые числа и что каждый идентификатор клиента соответствует значение, указанное в столбце CustomerID таблицы клиентов.

7.  В строке меню выберите **файл**, **сохранить все**.

## <a name="see-also"></a>См. также

- [Доступ к данным в Visual Studio](accessing-data-in-visual-studio.md)