---
title: "Использование хранимых процедур для выполнения обновления, вставки и удаления в Linq to SQL реляционный конструктор объектов | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: e88224ab-ff61-4a3a-b6b8-6f3694546cac
caps.latest.revision: "2"
author: gewarren
ms.author: gewarren
manager: ghogen
ms.technology: vs-data-tools
ms.workload: data-storage
ms.openlocfilehash: 20669a4ec19865e99a9498e87e896aa645321257
ms.sourcegitcommit: 32f1a690fc445f9586d53698fc82c7debd784eeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="how-to-assign-stored-procedures-to-perform-updates-inserts-and-deletes-or-designer"></a>Как: назначение хранимых процедур для выполнения обновления, вставки и удаления (конструктор O/R)
Сохраненные процедуры можно добавлять в реляционный конструктор объектов и выполнять как обычные методы <xref:System.Data.Linq.DataContext>. Они также могут использоваться для переопределения [!INCLUDE[vbtecdlinq](../data-tools/includes/vbtecdlinq_md.md)] поведения во время выполнения, которая выполняет вставки, обновления и удаления, когда изменения сохраняются из классов сущностей в базу данных (например, при вызове <xref:System.Data.Linq.DataContext.SubmitChanges%2A> метода).  
  
> [!NOTE]
>  Если хранимые процедуры возвращают значения, которые должны отправляться обратно на клиент (например, значения, вычисляемые в хранимой процедуре), создайте в хранимых процедурах выходные параметры. Если использовать выходные параметры невозможно, то вместо применения переопределений, созданных реляционным конструктором объектов, реализуйте разделяемый метод. Элементы, сопоставляемые со значениями, созданными базой данных, должны получать соответствующие значения после успешного завершения операций INSERT или UPDATE. Дополнительные сведения см. в разделе [обязанности разработчика при переопределении поведения по умолчанию](/dotnet/framework/data/adonet/sql/linq/responsibilities-of-the-developer-in-overriding-default-behavior).  
  
> [!NOTE]
>  [!INCLUDE[vbtecdlinq](../data-tools/includes/vbtecdlinq_md.md)] автоматически обрабатывает значения, генерируемые в базе данных, на принадлежность к столбцам ключей (автоприращение), rowguidcol (созданный базой данных уникальный идентификатор GUID) и столбцам отметок времени. Генерируемые базой данных значения в других типах столбцов будут неожиданно давать нулевое значение. Для возврата генерируемых базой данных значений нужно вручную задать <xref:System.Data.Linq.Mapping.ColumnAttribute.IsDbGenerated%2A> в `true` и <xref:System.Data.Linq.Mapping.ColumnAttribute.AutoSync%2A> в одно из следующих: <xref:System.Data.Linq.Mapping.AutoSync>, <xref:System.Data.Linq.Mapping.AutoSync> или <xref:System.Data.Linq.Mapping.AutoSync>.  
  
## <a name="configuring-the-update-behavior-of-an-entity-class"></a>Конфигурирование Поведения обновления Класса сущностей  
 По умолчанию, логика обновления базы данных (вставки, обновления и удаления) с учетом изменений, внесенных в данные в [!INCLUDE[vbtecdlinq](../data-tools/includes/vbtecdlinq_md.md)] классы сущностей обеспечивается [!INCLUDE[vbtecdlinq](../data-tools/includes/vbtecdlinq_md.md)] среды выполнения. Среда выполнения по умолчанию создает команды INSERT, UPDATE и DELETE, которые основаны на схеме таблицы (столбца и информация о первичных ключах). Если не хотите использовать поведение по умолчанию, можно настроить поведение обновления, назначив хранимые процедуры для выполнения команд вставки, обновления и удаления, необходимых для работы с данными в таблице. Можно также сделать это, когда поведение по умолчанию не сгенерировано, например, когда ваши классы сущностей сопоставляются с представлениями. Наконец, можно отменить поведение обновления по умолчанию, когда база данных требует доступа к таблице через сохраненные процедуры.  
  
[!INCLUDE[note_settings_general](../data-tools/includes/note_settings_general_md.md)]  
  
#### <a name="to-assign-stored-procedures-to-override-the-default-behavior-of-an-entity-class"></a>Чтобы назначить сохраненные процедуры для переопределения заданного по умолчанию поведения класса сущностей  
  
1.  Откройте **LINQ to SQL** файл в конструкторе. (Дважды щелкните по DBML-файла в **обозревателе решений**.)  
  
2.  В **обозревателя серверов**/**обозреватель баз данных**, разверните **хранимых процедур** и найдите сохраненные процедуры, которые вы хотите использовать для вставки, обновления, и/или удалить команды класса сущностей.  
  
3.  Перетащите сохраненную процедуру на реляционный конструктор объектов.  
  
     Сохраненная процедура добавляется в область методов как метод <xref:System.Data.Linq.DataContext>. Дополнительные сведения см. в разделе [методы DataContext (O/R-конструктор)](../data-tools/datacontext-methods-o-r-designer.md).  
  
4.  Выберите класс сущностей, для которого вы хотите использовать сохраненную процедуру для выполнения обновлений.  
  
5.  В **свойства** окно, выберите команду для переопределения (**вставить**, **обновление**, или **удалить**).  
  
6.  Нажмите кнопку с многоточием (...) рядом с полем **использовать среду выполнения** Открытие **Конфигурирование поведения** диалоговое окно.  
  
7.  Выберите **настройки**.  
  
8.  Выберите нужную сохраненную процедуру в **Настройка** списка.  
  
9. Проверьте список **аргументы метода** и **свойства класса** и убедитесь, что **аргументы метода** сопоставляются соответствующим **свойства класса**. Сопоставьте аргументы исходного метода (Original_*Имя_аргумента*) исходным свойствам (*PropertyName* (исходное)) для команд Update и Delete.  
  
    > [!NOTE]
    >  По умолчанию аргументы метода сопоставляются со свойствами класса, если их имена совпадают. Если имена свойств были изменены и больше не совпадают в таблице и в классе сущностей, то может потребоваться выбор эквивалентного свойства класса для сопоставления, если конструктор не сможет определить правильное сопоставление.  
  
10. Нажмите кнопку **ОК** или **применить**.  
  
    > [!NOTE]
    >  Можно продолжить настройку режима для каждого сочетания класса и режима при условии, что нажатия **применить** после каждого изменения. Если вы изменяете класс или поведения до нажатия **применить**, диалоговое окно предупреждения, предоставляя, предлагающее применить выполненные изменения.  
  
Чтобы возвратиться к использованию логики среды выполнения по умолчанию для обновлений, нажмите кнопку с многоточием рядом с Insert, Update или удаления в **свойства** и потом выберите **использования среды выполнения** в  **Настройка поведения** диалоговое окно.  
  
## <a name="see-also"></a>См. также
[Средства LINQ to SQL в Visual Studio](../data-tools/linq-to-sql-tools-in-visual-studio2.md)   
[Методы DataContext](../data-tools/datacontext-methods-o-r-designer.md)   
[LINQ to SQL (.NET Framework)](/dotnet/framework/data/adonet/sql/linq/index)   
[Вставки, обновления и удаления (.NET Framework)](/dotnet/framework/data/adonet/sql/linq/insert-update-and-delete-operations)