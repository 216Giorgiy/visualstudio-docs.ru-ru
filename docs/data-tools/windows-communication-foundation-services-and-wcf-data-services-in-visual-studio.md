---
title: "Windows Communication Foundation Services and WCF Data Services in Visual Studio | Microsoft Docs"
ms.custom: ""
ms.date: "12/15/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "services, WCF Data"
  - "WCF services, binding to"
  - "WCF services, asynchronous service methods"
  - "service references [Visual Studio]"
  - "WCF Data Services"
  - "asynchronous calls"
  - "service references [Visual Studio], type sharing"
  - "endpoints [WCF]"
  - "asynchronous service methods"
  - "service references [Visual Studio] endpoints"
  - "WCF services, type sharing"
  - "Windows Communication Foundation, in Visual Studio"
  - "services, WCF"
  - "WCF service, Visual Studio"
  - "data services, WCF"
  - "services, in Visual Studio"
  - "data binding [Visual Studio], WCF"
  - "service endpoints [Visual Studio]"
  - "service references [Visual Studio], asynchronous calls"
  - "services, Windows Communication Foundation"
  - "type sharing in WCF services"
  - "WCF services, endpoints"
  - "service method, called asynchronously[Visual Studio]"
ms.assetid: d56f12cb-e139-4fec-b3e4-488383356642
caps.latest.revision: 26
caps.handback.revision: 21
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
---
# Windows Communication Foundation Services and WCF Data Services in Visual Studio
[!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] 2008 предоставляет инструментарий для работы с технологиями создания распределенных приложений Microsoft WCF \(Windows Communication Foundation\) и [!INCLUDE[ssAstoria](../data-tools/includes/ssastoria_md.md)].  В этом разделе приведены общие сведения о службах с точки зрения [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)].  
  
## Что такое WCF?  
 [!INCLUDE[vsindigo](../data-tools/includes/vsindigo_md.md)] ― это унифицированная интегрированная среда для создания защищенных, надежных, транзакционных и интероперабельных распределенных приложений.  В более ранних версиях [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] имелись некоторые технологии, которые можно было использовать для взаимодействия между приложениями.  
  
 Однако если требовалось обеспечить совместный доступ к информации с любых платформ, необходимо было использовать веб\-службу \(также известную как веб\-служба ASMX\).  Если достаточно было только обеспечить передачу данных между клиентом и сервером, использующим ОС Windows, то использовалось удаленное взаимодействие .NET Remoting.  Если требовалось обеспечить транзактные коммуникации, то нужно было использовать Enterprise Services \(DCOM\), а если требовалось реализовать модель с организацией очереди, то нужно было использовать Message Queuing \(или MSMQ\).  
  
 WCF сводит воедино функциональные возможности всех этих технологий в унифицированную модель программирования.  Это упрощает взаимодействие между разработанными распределенными приложениями.  
  
#### Что представляют собой службы данных WCF?  
 Службы [!INCLUDE[ssAstoria](../data-tools/includes/ssastoria_md.md)] взаимодействуют с базой данных напрямую, что позволяет возвращать данные с помощью стандартных операций HTTP: GET, POST, PUT или DELETE.  В общем случае службы [!INCLUDE[ssAstoria](../data-tools/includes/ssastoria_md.md)] оптимально подходят для приложений, используемых при создании, обновлении или удалении записей базы данных.  Дополнительные сведения см. в разделе [Платформа служб данных ADO.NET \(страница может быть на английском языке\)](http://go.microsoft.com/fwlink/?LinkID=119952).  
  
### Модель программирования WCF  
 Модель программирования WCF основана на коммуникации между двумя сущностями: службой WCF и клиентом WCF.  Эта модель программирования инкапсулирована в пространство имен <xref:System.ServiceModel> в [!INCLUDE[dnprdnshort](../code-quality/includes/dnprdnshort_md.md)].  
  
#### Служба WCF  
 Служба WCF основана на интерфейсе, задающем контракт между службой и клиентом.  Она помечается атрибутом <xref:System.ServiceModel.ServiceContractAttribute>, как показано в следующем коде:  
  
 [!code-cs[WCFWalkthrough#6](../data-tools/codesnippet/CSharp/windows-communication-foundation-services-and-wcf-data-services-in-visual-studio_1.cs)]
 [!code-vb[WCFWalkthrough#6](../data-tools/codesnippet/VisualBasic/windows-communication-foundation-services-and-wcf-data-services-in-visual-studio_1.vb)]  
  
 [!code-cs[WCFWalkthrough#1](../data-tools/codesnippet/CSharp/windows-communication-foundation-services-and-wcf-data-services-in-visual-studio_2.cs)]
 [!code-vb[WCFWalkthrough#1](../data-tools/codesnippet/VisualBasic/windows-communication-foundation-services-and-wcf-data-services-in-visual-studio_2.vb)]  
  
 Методы и функции, которые предоставляются службой WCF, задаются путем пометки их атрибутом <xref:System.ServiceModel.OperationContractAttribute>.  Кроме того, можно предоставить сериализованные данные, пометив составной тип атрибутом <xref:System.Runtime.Serialization.DataContractAttribute>.  Это делает возможным привязку данных на клиенте.  
  
 После того как интерфейс и его методы были определены, они инкапсулируются в класс, реализующий этот интерфейс.  Множественные контракты службы WCF может реализовать единственный ее класс.  
  
 Служба WCF предоставляется для использования посредством того, что называется *конечной точкой*.  Конечная точка ― это единственный способ сообщения с этой службой; невозможно получить к ней доступ посредством прямой ссылки, в отличие от других классов..  
  
 Конечная точка состоит из адреса, привязки и контракта.  Адрес задает расположение сервера; это может быть URL\-адрес, FTP\-адрес, а также сетевой или локальный путь.  Привязка задает способ сообщения с этой службой.  Привязки WCF предоставляют гибкую модель для задания протокола, например HTTP или FTP, механизма обеспечения безопасности, например проверка подлинности Windows или имена и пароли пользователей, и многого другого.  Контракт включает операции, предоставляемые классом службы WCF.  
  
 Для одной службы WCF может быть предоставлено несколько конечных точек.  Это дает возможность разным клиентам взаимодействовать с одной и той же службой разными способами.  Например, банковская служба может предоставить одну конечную точку для сотрудников, а другую ― для внешних клиентов, причем каждая конечная точка будет использовать другой адрес, привязку и\/или контракт.  
  
#### Клиент WCF  
 Клиент WCF состоит из *прокси*, позволяющего приложению сообщаться со службой \(WCF\), и конечной точки, соответствующей конечной точке, заданной для этой службы.  Прокси создается на стороне клиента в файле app.config и включает информацию о типах и методах, предоставляемых службой.  В случае служб, предоставляющих несколько конечных точек, клиент может выбрать одну, лучше всего соответствующую его требованиям; например, клиент может выбрать способ сообщения посредством протокола HTTP и проверку подлинности Windows.  
  
 После создания клиента WCF можно обращаться к его службе в коде точно так же, как это делается с любым другим объектом..  Например, для вызова метода `GetData`, показанного выше, можно написать примерно следующий код:  
  
 [!code-cs[WCFWalkthrough#3](../data-tools/codesnippet/CSharp/windows-communication-foundation-services-and-wcf-data-services-in-visual-studio_3.cs)]
 [!code-vb[WCFWalkthrough#3](../data-tools/codesnippet/VisualBasic/windows-communication-foundation-services-and-wcf-data-services-in-visual-studio_3.vb)]  
  
## Средства WCF в Visual Studio  
 В [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] 2008 предусмотрены средства, позволяющие создавать как службы, так и клиенты WCF.  Пошаговое руководство, демонстрирующее эти средства, см. в разделе [Walkthrough: Creating and Accessing WCF Services](../data-tools/walkthrough-creating-a-simple-wcf-service-in-windows-forms.md).  
  
### Создание и тестирование служб WCF  
 Для быстрого создания своей собственной службы можно воспользоваться шаблонами WCF [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] в качестве основы.  Затем с помощью инструментов Auto Host службы WCF и WCF Test Client отладить и протестировать службу.  Оба этих инструмента обеспечивают быстрый и удобный цикл отладки и тестирования, и исключают требование зафиксировать модель размещения на ранней стадии.  
  
#### Шаблоны WCF  
 Шаблоны WCF [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] предоставляют базовую структуру класса для разработки службы.  Несколько шаблонов WCF доступно в диалоговом окне **Добавление нового проекта**.  В частности, это шаблоны проектов библиотеки службы WCF, веб\-узлов службы WCF и элементов службы WCF.  
  
 При выборе шаблона файлы добавляются в контракт службы, в реализацию службы и в конфигурацию службы.  Также добавляются все необходимые атрибуты, создавая простую службу типа "Hello World", и создавать какой\-либо код нет необходимости.  Конечно, может потребоваться добавить код для обеспечения функций и методов реальной службы, потому что шаблоны предоставляют лишь основу для конструктора.  
  
 Дополнительные сведения о шаблонах WCF см. в разделе [Шаблоны WCF в Visual Studio](../Topic/WCF%20Visual%20Studio%20Templates.md).  
  
#### узел службы WCF  
 При запуске отладчика [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] \(путем нажатия F5\) для проекта службы WCF автоматически запускается инструмент узел службы WCF для размещения этой службы локально.  узел службы WCF составляет список служб в проекте службы WCF, загружает конфигурацию проекта и создает узел для каждой найденной службы.  
  
 С помощью узла службы WCF можно тестировать службу WCF без создания дополнительного кода или фиксации в конкретном узле во время разработки.  
  
 Дополнительные сведения об узле службы WCF см. в разделе [Узел службы WCF \(WcfSvcHost.exe\)](../Topic/WCF%20Service%20Host%20\(WcfSvcHost.exe\).md).  
  
#### Клиент теста WCF  
 Инструмент Клиент теста WCF позволяет ввести тестовые параметры, отправить их в службу WCF и увидеть ответную реакцию службы.  При комбинированном использовании с узлом службы WCF этот инструмент обеспечивает удобную практику тестирования службы.  
  
 При нажатии клавиши F5 для отладки проекта службы WCF открывается Клиент теста WCF, который выводит список конечных точек службы, заданных в файле конфигурации.  Можно протестировать эти параметры и запустить службу, и повторять этот процесс для последовательного тестирования и проверки службы.  
  
 Дополнительные сведения о Клиенте теста WCF см. в разделе [Тестовый клиент WCF \(WcfTestClient.exe\)](../Topic/WCF%20Test%20Client%20\(WcfTestClient.exe\).md).  
  
### Доступ к службам WCF в Visual Studio  
 [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] упрощает задачу создания клиентов WCF автоматически создавая прокси и конечную точку для службы, добавляемые с помощью  **Добавить ссылку на службу** диалоговое окно.  Вся необходимые сведения о конфигурации добавляются в файл app.config. Большей частью все, что необходимо сделать — это создать службу, чтобы потом ее использовать.  
  
 В диалоговом окне **Добавить ссылку на службу** можно вводить адрес службы или искать службу, заданную в решении.  В этом окне содержится список служб и операций, которые они предоставляют.  В нем также можно задать пространство имен, посредством которого в коде будут делаться ссылки на эти службы.  
  
 Диалоговое окно **Настройка ссылок на службы** позволяет настроить конфигурацию службы.  В нем можно изменить адрес службы, задать уровень доступа, поведение в асинхронном режиме, типы контрактов сообщений, а также настроить повторное использование типов.  
  
## Как Выберите конечную точку службы  
 Некоторые службы Windows Communication Foundation \(WCF\) предоставляют несколько конечных точек, с помощью которых клиент может сообщаться с сервером.  Например, служба может предоставлять одну конечную точку, использующую привязку HTTP и проверку подлинности в виде имени пользователя\/пароля, и вторую конечную точку, использующую FTP и проверку подлинности Windows.  Первую конечную точку могут использовать приложения, осуществляющие доступ к службе, расположенной снаружи брандмауэра, в то время как вторую конечную точку можно использовать в интрасети.  
  
 В таком случае можно задать `endpointConfigurationName` в качестве параметра конструктора для ссылки на службу.  
  
 [!INCLUDE[note_settings_general](../data-tools/includes/note_settings_general_md.md)]  
  
#### Чтобы выбрать конечную точку службы  
  
1.  Добавьте ссылку на службу WCF.  Дополнительные сведения см. в разделе [How to: Add, Update, or Remove a Service Reference](../Topic/How%20to:%20Add,%20Update,%20or%20Remove%20a%20Service%20Reference.md).  
  
2.  В редакторе кода добавьте конструктор для ссылки на службу:  
  
    ```vb#  
    Dim proxy As New ServiceReference.Service1Client(  
    ```  
  
    ```c#  
    ServiceReference.Service1Client proxy = new ServiceReference.Service1Client(  
    ```  
  
    > [!NOTE]
    >  Замените *ServiceReference* пространством имен для ссылки на службу, а *Service1Client* замените именем службы.  
  
3.  Появится список IntelliSense с перегрузками для конструктора.  Выберите перегрузку `endpointConfigurationName As String`.  
  
4.  Согласно перегрузке, введите `=` *ИмяКонфигурации*, где *ИмяКонфигурации* — это имя нужной конечной точки.  
  
    > [!NOTE]
    >  Если имена доступных конечных точек неизвестны, их можно найти в файле app.config.  
  
#### Чтобы найти доступные конечные точки для службы WCF  
  
1.  В **Обозревателе решений** щелкните правой кнопкой мыши файл app.config проекта, содержащий ссылку на эту службу, а затем щелкните **Открыть**.  Этот файл появится в редакторе кода.  
  
2.  Найдите в файле тег `<Client>`.  
  
3.  Найдите под тегом `<Client>` тег, начинающийся с `<Endpoint>`.  
  
     Если ссылка на службу предоставляет несколько конечных точек, найдется два или более тега `<Endpoint`.  
  
4.  В теге `<EndPoint>` вы найдете параметр `name="`*SomeService*`"` \(где *SomeService* представляет имя конечной точки\).  Это имя конечной точки, которое может быть передано в перегрузку `endpointConfigurationName As String` конструктора для ссылки на службу.  
  
## Как Вызовите метод служб асинхронно  
 Большинство методов в службах Windows Communication Foundation \(WCF\) может быть вызвано как синхронно, так и асинхронно.  Асинхронный вызов метода позволяет приложению работать во время выполнения этого вызова через медленное соединение.  
  
 По умолчанию при добавлении в проект ссылки на службу задается синхронный вызов методов..  Синхронный вызов можно изменить на асинхронный, изменив параметр в диалоговом окне **Настроить ссылку на службу**.  
  
> [!NOTE]
>  Этот параметр задается на уровне службы.  Если в службе один метод вызывается асинхронно, то асинхронно должны вызываться все методы этой службы.  
  
 [!INCLUDE[note_settings_general](../data-tools/includes/note_settings_general_md.md)]  
  
#### Чтобы задать асинхронный вызов метода службы  
  
1.  В **Обозревателе решений** выберите нужную ссылку на службу.  
  
2.  В меню **Проект** щелкните **Настроить ссылку на службу**.  
  
3.  В диалоговом окне **Настройка ссылок на службы** поставьте флажок **Создать асинхронные операции**.  
  
## Как Привязка данных, возвращаемых службой  
 Данные, возвращаемые службой Windows Communication Foundation \(WCF\), можно привязать к элементу управления так же, как данные из любого другого источника.  Если служба WCF содержит составные типы, возвращающие данные, то при добавлении ссылки на эту службу возвращаемые данные автоматически добавляются в окно **Источники данных**.  
  
#### Чтобы привязать элемент управления к одному полю данных, возвращаемому службой WCF  
  
1.  В меню **Данные** выберите пункт **Показать источники данных**.  Появится окно **Источники данных**.  
  
2.  В окне **Источники данных** разверните узел нужной ссылки на службу.  Будут выведены все составные типы, возвращаемые службой.  
  
3.  Разверните узел типа.  Будут выведены поля данных для этого типа.  
  
4.  Выберите поле и щелкните стрелку раскрывающегося списка, чтобы вывести список элементов управления, доступных для выбранного типа данных.  
  
5.  Щелкните тип элемента управления, который необходимо привязать.  
  
6.  Перетащите поле на форму.  Элемент управления будет добавлен в форму вместе с компонентами <xref:System.Windows.Forms.BindingSource> и <xref:System.Windows.Forms.BindingNavigator>.  
  
7.  Повторите шаги с четвертого по шестой для всех остальных полей, для которых нужно выполнить привязку.  
  
#### Чтобы привязать элемент управления к составному типу, возвращаемому службой WCF  
  
1.  В меню **Данные** выберите **Показать источники данных**.  Появится окно **Источники данных**.  
  
2.  В окне **Источники данных** разверните узел нужной ссылки на службу.  Будут выведены все составные типы, возвращаемые службой.  
  
3.  Выберите узел типа и щелкните стрелку раскрывающегося списка, чтобы вывести список доступных параметров.  
  
4.  Щелкните либо **DataGridView**, чтобы вывести данные в виде таблицы, либо **Details**, чтобы вывести данные в отдельных элементах управления.  
  
5.  Перетащите узел на форму.  Элементы управления будут добавлены в форму вместе с компонентами <xref:System.Windows.Forms.BindingSource> и <xref:System.Windows.Forms.BindingNavigator>.  
  
## Как Настройте службу повторно использовать существующие типы  
 При добавлении в проект ссылки на службу в этом локальном проекте создаются все типы, заданные в службе.  Если служба использует общие типы [!INCLUDE[dnprdnshort](../code-quality/includes/dnprdnshort_md.md)], или типы заданы в общей библиотеке, то в результате в большинстве случаев создаются дублирующиеся типы.  
  
 Чирбы избежать этой проблемы, типы в сборках, на которые есть ссылки, по умолчанию являются совместно используемыми.  Если требуется отключить совместное использование типов для одной или нескольких сборок, это можно сделать в диалоговом окне **Настройка ссылок на сборки**.  
  
#### Чтобы отключить совместное использование типов в одной сборке  
  
1.  В **Обозревателе решений** выберите нужную ссылку на службу.  
  
2.  В меню **Проект** щелкните **Настроить ссылку на службу**.  
  
3.  В диалоговом окне **Настройка ссылок на службы** выберите **Повторно использовать типы в указанных сборках, на которые имеется ссылка**.  
  
4.  Поставьте флажок для каждой сборки, в которой нужно включить совместное использование типов.  Чтобы отключить совместное использование типов, снимите этот флажок.  
  
#### Чтобы отключить совместное использование типов во всех сборках  
  
1.  В **Обозревателе решений** выберите нужную ссылку на службу.  
  
2.  В меню **Проект** щелкните **Настроить ссылку на службу**.  
  
3.  В диалоговом окне **Настройка ссылок на службы** уберите флажок **Повторно использовать типы в указанных сборках, на которые имеется ссылка**.  
  
## Связанные разделы  
  
|Заголовок|Описание|  
|---------------|--------------|  
|[Walkthrough: Creating and Accessing WCF Services](../data-tools/walkthrough-creating-a-simple-wcf-service-in-windows-forms.md)|Пошаговая демонстрация создания и использования служб WCF в [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)].|  
|[Walkthrough: Creating and Accessing a WCF Data Service in Visual Studio](../data-tools/walkthrough-creating-a-wcf-data-service-with-wpf-and-entity-framework.md)|Пошаговая демонстрация создания и использования [!INCLUDE[ssAstoria](../data-tools/includes/ssastoria_md.md)] в [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)].|  
|[Использование средств разработки WCF](../Topic/Using%20the%20WCF%20Development%20Tools.md)|Обсуждение способов создания и тестирования служб WCF в [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)].|  
|[How to: Add, Update, or Remove a Service Reference](../Topic/How%20to:%20Add,%20Update,%20or%20Remove%20a%20Service%20Reference.md)|Описание способов добавления, обновления и удаления служб WCF в проекте.|  
|[How to: Add, Update, or Remove a WCF Data Service Reference](../data-tools/how-to-add-update-or-remove-a-wcf-data-service-reference.md)|Описание способов, позволяющих создавать ссылки на [!INCLUDE[ssAstoria](../data-tools/includes/ssastoria_md.md)] и использовать эти службы в [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)].|  
|[How to: Add a Reference to a Web Service](../Topic/How%20to:%20Add%20a%20Reference%20to%20a%20Web%20Service.md)|Описание способа добавления в проект ссылки на веб\-службу XML \(ASMX\).|  
|[Troubleshooting Service References](../data-tools/troubleshooting-service-references.md)|Описание некоторых наиболее распространенных ошибок, возникающих при ссылках на службы, и способов их устранения.|  
|[Отладка служб WCF](../debugger/debugging-wcf-services.md)|Описание наиболее часто возникающих проблем, связанных с отладкой, а также методов отладки служб WCF.|  
|[Windows Communication Foundation Authentication Service Overview](../Topic/Windows%20Communication%20Foundation%20Authentication%20Service%20Overview.md)|Описание использования WCF для предоставления службы роли для веб\-узла.|  
|[Messaging in the .NET Compact Framework](http://msdn.microsoft.com/ru-ru/fb74d82c-f81e-46f9-aceb-f875c5c6be4f)|В этом разделе описывается поддержка уровня сообщений WCF в .NET Compact Framework.|  
|[Пошаговое руководство. Создание многоуровневого приложения для работы с данными](../data-tools/walkthrough-creating-an-n-tier-data-application.md)|Предоставляет пошаговые инструкции для создания типизированного набора данных и разделения кода адаптера таблицы и кода набора данных на несколько проектов.|  
|[Add Service Reference Dialog Box](../Topic/Add%20Service%20Reference%20Dialog%20Box.md)|Описание элементов пользовательского интерфейса диалогового окна **Добавить ссылку на службу**.|  
|[Диалоговое окно "Настроить ссылку на службу"](../data-tools/configure-service-reference-dialog-box.md)|Описание элементов пользовательского интерфейса диалогового окна **Настройка ссылок на службы**.|  
  
## Ссылки  
 <xref:System.ServiceModel>  
  
 <xref:System.Data.Services>