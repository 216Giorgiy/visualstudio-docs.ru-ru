---
title: "Добавление пользовательских элементов управления в окно &quot;Источники данных&quot; | Microsoft Docs"
ms.custom: ""
ms.date: "09/21/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "vs.datasource.howtoaddcustomcontrol"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "aspx"
helpviewer_keywords: 
  - "Окно "Источники данных", добавление элементов управления"
  - "элементы управления [Visual Studio], добавление в окно "Источники данных""
  - "Класс DefaultBindingPropertyAttribute, использование"
  - "Класс LookupBindingPropertiesAttribute, использование"
  - "Класс ComplexBindingPropertiesAttribute, использование"
  - "Окно "Источники данных", выбор элементов управления"
ms.assetid: 8c43e7d2-ba94-4d9b-96de-3aa971955afd
caps.latest.revision: 42
caps.handback.revision: 39
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
---
# Добавление пользовательских элементов управления в окно &quot;Источники данных&quot;
При перетаскивании элемента из окна **Источники данных** в рабочую область конструирования для создания элемента управления, связанного с данными, можно выбрать тип создаваемого элемента управления.  Каждый элемент в этом окне содержит раскрывающееся меню, в котором отображаются доступные элементы управления.  Набор элементов управления, связанных с тем или иным элементом, определяется по типу данных этого элемента.  Если создаваемый элемент управления отсутствует в списке, можно выполнить инструкции, приведенные в этом разделе, для добавления этого элемента управления в список.  
  
 Дополнительные сведения о выборе элементов управления, связанных с данными, которые следует создавать для объектов окна **Источники данных**, см. в разделе [Задание поведения, при котором элемент управления создается при перетаскивании из окна "Источники данных"](../data-tools/set-the-control-to-be-created-when-dragging-from-the-data-sources-window.md).  
  
> [!NOTE]
>  Отображаемые диалоговые окна и команды меню могут отличаться от описанных в справке в зависимости от текущих настроек или выпуска.  Чтобы изменить параметры, выберите в меню **Сервис** команду **Импорт и экспорт параметров**.  Дополнительные сведения см. в разделе [Customizing Development Settings in Visual Studio](http://msdn.microsoft.com/ru-ru/22c4debb-4e31-47a8-8f19-16f328d7dcd3).  
  
##  <a name="customizinglist"></a> Настройка списка элементов управления, доступных для привязки к типу данных  
 Выполните приведенные ниже действия для добавления элементов управления в список доступных элементов управления для объектов в окне **Источники данных** с определенным типом данных или удаления элементов управления из этого списка.  
  
#### Для выбора элементов управления отображающихся для типа данных  
  
1.  Убедитесь, что открыт конструктор WPF или конструктор Windows Forms.  
  
2.  В окне **Источники данных** щелкните элемент, который является частью добавленного в окно источника данных, затем щелкните раскрывающееся меню для этого элемента.  
  
3.  В раскрывающемся меню щелкните пункт **Настроить**.  Будет открыто одно из перечисленных ниже диалоговых окон:  
  
    -   Если открыт конструктор Windows Forms, будет открыта страница **Настройка данных интерфейса пользователя** диалогового окна  **Параметры**.  
  
    -   Если открыт конструктор WPF, будет открыто диалоговое окно **Настройка привязки элементов управления**.  
  
4.  В раскрывающемся списке **Тип данных** этого диалогового окна выберите тип данных.  
  
    -   Чтобы настроить список элементов управления для таблицы или объекта, выберите пункт **\[Список\]**.  
  
    -   Чтобы настроить список элементов управления для столбца таблицы или свойства объекта, выберите тип данных столбца или свойства в базовом хранилище данных.  
  
    -   Чтобы настроить список элементов управления для отображения объектов с пользовательскими типами данных, выберите пункт **\[Другой\]**.  Например, если приложение имеет настраиваемый элемент управления, отображающий данные из нескольких свойств определенного объекта, для элемента управления следует выбрать тип данных **\[Другой\]**.  
  
5.  Для каждого элемента управления в поле **Связанные элементы управления**, который должен быть доступен для выбранного типа данных, установите или снимите выделение всех элементов управления, которые требуется удалить из списка.  
  
    > [!NOTE]
    >  Если выбираемый элемент управления не появляется в списке **Связанные элементы управления**, необходимо добавить элемент управления в этот список.  Дополнительные сведения см. в разделе [Добавление элемента управления в список сопоставленных с типом данных элементов управления](#addingcontrols).  
  
6.  Нажмите кнопку **ОК**.  
  
7.  В окне **Источники данных** щелкните элемент, который имеет тип данных, сопоставленный с одним или несколькими элементами управления, затем щелкните раскрывающееся меню для этого элемента.  
  
     Теперь элементы управления, выбранные в поле **Связанные элементы управления**, отображаются в раскрывающемся меню элемента.  
  
##  <a name="addingcontrols"></a> Добавление элемента управления в список сопоставленных с типом данных элементов управления  
 Если следует сопоставить элемент управления с типом данных, однако элемент управления не отображается в списке **Связанные элементы управления**, необходимо добавить элемент управления в этот список.  Элемент управления должен быть размещен в текущем решении или в ссылочной сборке, должен быть доступен на **панели элементов** и иметь атрибут, определяющий поведение привязки данных для этого элемента.  
  
#### Добавление элементов управления в список связанных элементов управления  
  
1.  Добавьте нужный элемент управления на **Панель элементов**, щелкнув правой кнопкой мыши **Панель элементов** и выбрав **Выбрать элементы**.  
  
     Элемент управления должен иметь один из перечисленных ниже атрибутов.  
  
    |Атрибут|Описание|  
    |-------------|--------------|  
    |<xref:System.ComponentModel.DefaultBindingPropertyAttribute>|Реализуйте этот атрибут для простого элемента управления, отображающего один столбец \(или свойство\) данных, например <xref:System.Windows.Forms.TextBox>.|  
    |<xref:System.ComponentModel.ComplexBindingPropertiesAttribute>|Реализуйте этот атрибут в элементе управления, отображающем списки \(или таблицы\) данных, например <xref:System.Windows.Forms.DataGridView>.|  
    |<xref:System.ComponentModel.LookupBindingPropertiesAttribute>|Реализуйте этот атрибут в элементе управления, отображающем списки \(или таблицы\) данных, но также требующем представления одного столбца или свойства, например <xref:System.Windows.Forms.ComboBox>.|  
  
2.  Откройте страницу **Настройка данных интерфейса пользователя** диалогового окна **Параметры** \(для Windows Forms\) или диалоговое окно **Настройка привязки элементов управления** \(для WPF\).  Дополнительные сведения см. в разделе [Настройка списка элементов управления, доступных для привязки к типу данных](#customizinglist).  
  
3.  Теперь в поле **Связанные элементы управления** должен отображаться элемент управления, который был добавлен на **панель элементов**.  
  
    > [!NOTE]
    >  Только элементы управления, которые расположены в текущем решении или в указанной ссылочной сборке \(и реализуют один из атрибутов привязки данных в таблице выше\), могут быть добавлены в список связанных элементов.  Чтобы связать пользовательский элемент управления, не доступный в окне **Источники данных**, перетащите элемент управления с **Панели элементов** в рабочую область конструирования, затем перетащите на этот элемент управления из окна **Источники данных** элемент, к которому следует выполнить привязку.  
  
## См. также  
 [Пошаговое руководство. Отображение данных на форме в приложении Windows](../data-tools/walkthrough-displaying-data-on-a-windows-form.md)   
 [Привязка элементов управления Windows Forms к данным в Visual Studio](../data-tools/bind-windows-forms-controls-to-data-in-visual-studio.md)   
 [Создание и изменение типизированных наборов данных](../data-tools/creating-and-editing-typed-datasets.md)   
 [Общие сведения об источниках данных](../data-tools/add-new-data-sources.md)   
 [Задание поведения, при котором элемент управления создается при перетаскивании из окна "Источники данных"](../data-tools/set-the-control-to-be-created-when-dragging-from-the-data-sources-window.md)   
 [Пошаговое руководство. Создание пользовательского элемента управления Windows Forms с простой привязкой данных](../data-tools/create-a-windows-forms-user-control-that-supports-simple-data-binding.md)   
 [Пошаговое руководство. Создание пользовательского элемента управления Windows Forms со сложной привязкой данных](../data-tools/create-a-windows-forms-user-control-that-supports-complex-data-binding.md)   
 [Пошаговое руководство. Создание пользовательского элемента управления Windows Forms с подстановочной привязкой данных](../data-tools/create-a-windows-forms-user-control-that-supports-lookup-data-binding.md)   
 [Диалоговое окно "Настройка привязки элементов управления"](../data-tools/customize-control-binding-dialog-box.md)