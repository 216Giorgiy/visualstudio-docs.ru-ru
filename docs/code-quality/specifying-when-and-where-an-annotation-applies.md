---
title: "Указание времени и места применения примечания | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-devops-test"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "_Group_"
  - "_At_"
  - "_When_"
  - "_At_buffer_"
ms.assetid: 8e4f4f9c-5dfa-4835-87df-ecd1698fc650
caps.latest.revision: 7
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
caps.handback.revision: 7
---
# Указание времени и места применения примечания
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Если заметка условна, она может требовать, чтобы другие заметки указали это анализатору.  Например, если в функции есть переменная, которая может быть либо синхронной, либо асинхронной, то функция работает следующим образом: В случае, если переменная синхронная, она всегда в конце концов завершается успешно, но в случае, если переменная асинхронная, то появляется сообщения об ошибке, в случае, когда функция не может завершится сразу.  Когда функция вызывается синхронно, проверяя, что результирующее значение не предоставляет никакого значения для анализатора кода, поскольку оно не было возвращено.  Однако если функция вызывается асинхронно и результат функции не проверяется, может возникнуть серьезная ошибка.  Этот пример иллюстрирует ситуацию, в которой можно использовать заметку `_When_`, как описано далее в этом статья, чтобы включить проверку.  
  
## Структурные аннотации  
 Для того, чтобы контролировать, когда и в каких местах применяются аннотации, используйте следующие структурные аннотации.  
  
|Заметка|Описание|  
|-------------|--------------|  
|`_At_(expr, anno-list)`|`expr` \- это выражение, которое предоставляет lvalue.  Заметки в `anno-list` применяются к объекту с именем `expr`.  Для каждой аннотации в `anno-list`, `expr` интерпретируется в предусловии, если аннотация интерпретируется в предусловии, и в постусловии, если аннотация интерпретируется в постусловии.|  
|`_At_buffer_(expr, iter, elem-count, anno-list)`|`expr` \- это выражение, которое предоставляет lvalue.  Заметки в `anno-list` применяются к объекту с именем `expr`.  Для каждой аннотации в `anno-list`, `expr` интерпретируется в предусловии, если аннотация интерпретируется в предусловии, и в постусловии, если аннотация интерпретируется в постусловии.<br /><br /> `iter` имя переменной с областью видимости в аннотации \(включающую `anno-list`\).  `iter` имеет неявный тип `long`.  Идентично именованные переменные в любой внешней области видимости скрыты от проверки.<br /><br /> `elem-count` выражение, результатом которого является целое число.|  
|`_Group_(anno-list)`|Аннотации в `anno-list` рассматриваются, как имеющие любой квалификатор, который применяется к групповой аннотации, применяемой к каждой аннотации.|  
|`_When_(expr, anno-list)`|`expr` выражение, которое можно преобразовать в `bool`.  Если не равен нулю \(`true`\), то аннотации, определенные в `anno-list`, считаются применимыми.<br /><br /> По умолчанию, для каждой аннотации в `anno-list`, `expr` интерпретируются с использованием входных значений, если аннотация с предусловием, и выходных значений, если аннотация с постусловием.  Чтобы переопределить настройки по умолчанию, можно использовать встроенный `_Old_` для проверки постусловия, чтобы указать, что должны использоваться входные значения. **Note:**  Другие аннотации могут быть включены как следствие использования `_When_`, если задействовано изменяемое значение \- например, `*pLength` \-, поскольку результат проверки `expr` в предусловии может отличаться от результата, полученного в постусловии.|  
  
## См. также  
 [Использование аннотаций SAL для сокращения количества дефектов в коде C\/C\+\+](../code-quality/using-sal-annotations-to-reduce-c-cpp-code-defects.md)   
 [Основные сведения о языке SAL](../code-quality/understanding-sal.md)   
 [Создание примечаний к параметрам и возвращаемым значениям функций](../code-quality/annotating-function-parameters-and-return-values.md)   
 [Аннотация поведения функций](../code-quality/annotating-function-behavior.md)   
 [Аннотация структур и классов](../code-quality/annotating-structs-and-classes.md)   
 [Аннотация поведения блокировки](../code-quality/annotating-locking-behavior.md)   
 [Встроенные функции](../code-quality/intrinsic-functions.md)   
 [Рекомендации и примеры](../code-quality/best-practices-and-examples-sal.md)