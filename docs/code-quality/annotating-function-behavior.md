---
title: "Аннотация поведения функций | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-devops-test"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "_On_failure_"
  - "_Return_type_success_"
  - "_Always_"
  - "_Maybe_raises_SEH_exception_"
  - "_Raises_SEH_exception_"
  - "_Called_from_function_class_"
  - "_Function_class_"
  - "_Must_inspect_result_"
  - "_Success_"
  - "_Check_return_"
  - "_Use_decl_annotations_"
ms.assetid: c0aa268d-6fa3-4ced-a8c6-f7652b152e61
caps.latest.revision: 11
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
caps.handback.revision: 11
---
# Аннотация поведения функций
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Помимо аннотирования [параметры и возвращаемые значения функции](../code-quality/annotating-function-parameters-and-return-values.md), можно аннотировать свойства функции целиком.  
  
## Заметки функции  
 Следующие заметки применяются к функции в целом и описывают, как она работает и что она ожидает.  
  
|Заметка|Описание|  
|-------------|--------------|  
|`_Called_from_function_class_(name)`|Не должна стоять отдельно; вместо этот предикат,должен использоваться с заметкой `_When_`.  Для получения дополнительной информации см. [Указание времени и места применения примечания](../code-quality/specifying-when-and-where-an-annotation-applies.md).<br /><br /> Параметр `name` \- произвольная строка, которая также отображается в заметке `_Function_class_` в объявлении некоторых функций. `_Called_from_function_class_` возвращает значения, отличное от нуля, если функция, которая в настоящее время анализируется, аннотирована с помощью `_Function_class_`, которая имеет то же, что и значение `name`; в противном случае он возвращается ноль.|  
|`_Check_return_`|Аннотирует возвращаемое значение и заявляет, что вызывающий объект должен проверять его.  Средства проверки выдаёт ошибку, если функция вызывается в пустом контексте.|  
|`_Function_class_(name)`|Параметр `name` является произвольной строкой, указанной пользователем.  Существует в пространстве имен, отличном от других пространств имен.  Функция, указатель на функцию или, что наиболее полезно, тип указателя на функцию может быть обозначен как принадлежащий к одному или нескольким классам функции.|  
|`_Raises_SEH_exception_`|Добавляет заметку к функции, которая всегда вызывает исключение структурированного обработчика исключений \(SEH\), при условии `_When_` и `_On_failure_`.  Для получения дополнительной информации см. [Указание времени и места применения примечания](../code-quality/specifying-when-and-where-an-annotation-applies.md).|  
|`_Maybe_raises_SEH_exception_`|Добавляет заметку к функции, которая может при необходимости вызывать SЕH исключение, при условии `_When_` и `_On_failure_`.|  
|`_Must_inspect_result_`|Добавляет заметку к любому выходному значению, включая возвращаемое значение, параметры и глобальные параметры.  Анализатор выдаёт ошибку, если значение в объекте, к которому добавлена заметку, далее не проверяется. «Проверка» инспектирует, используется ли он в условном выражении, присвоен ли он параметру вывода или глобальному параметру, или передается ли он как параметр.  Для возвращаемых значений, `_Must_inspect_result_` подразумевает `_Check_return_`.|  
|`_Use_decl_annotations_`|Может использоваться в определении функции \(также известном, как тело функции\) вместо списка заметок в заголовке. Когда используется `_Use_decl_annotations_`, заметки, которые отображаются в области заголовка в области для той же функции, используются, как если бы они также присутствовали в определении, имеющем заметку `_Use_decl_annotations_`.|  
  
## Заметки успеха или сбоя  
 Функция может завершиться ошибкой, и когда это случается, её результаты могут быть неполноценны или отличаться от результатов того случая, когда функция завершилась успешно.  Заметки в следующем списке предоставляют способы указания расширение функциональности при сбое.  Для использования этих заметок необходимо включить их для определения успешного завершения, поэтому требуется заметка `_Success_`.  Следует заметить, что `NTSTATUS` и `HRESULT` уже содержат заметку `_Success_`, встроенную в их; однако, если указать собственную заметку `_Success_` на `NTSTATUS` или `HRESULT`, она переопределит встроенную заметку.  
  
|Заметка|Описание|  
|-------------|--------------|  
|`_Always_(anno_list)`|Эквивалентно `anno_list _On_failure_(anno_list)`; заметки в `anno_list` применяются вне зависимости от того, завершилась функция успехом или нет.|  
|`_On_failure_(anno_list)`|Может использоваться только когда `_Success_` также используется для аннотирования функции или явно, или неявно через `_Return_type_success_` на typedef.  Если заметка `_On_failure_` присутствует в параметре функции или возвращаемом значении, каждая заметка в `anno_list` \(anno\) ведет себя так, как если бы она была закодирована как `_When_(!expr, anno)`, где `expr` является параметром для обязательной заметки `_Success_`.  Это означает, что неявное приложение `_Success_` ко всем постусловиям неприменимо для `_On_failure_`.|  
|`_Return_type_success_(expr)`|Может применяться к typedef.  Указывает, что все функции, которые возвращают этот тип и явно не имеют `_Success_`, аннотированы, как если бы они имели `_Success_(expr)`.  `_Return_type_success_` нельзя использовать в функции или typedef указателя функции.|  
|`_Success_(expr)`|`expr` \- это выражение, которое предоставляет rvalue.  Если заметка `_Success_` присутствует в объявлении или определении функции, каждая заметка \(`anno`\) на функции и в постусловии ведет себя так, как если бы она была закодирована как `_When_(expr, anno)`.  Заметка `_Success_` может быть использована только для функции, не для ее параметров или возвращаемого типа.  Может быть не более одной заметки `_Success_` на функции, и она не может быть в `_When_`, `_At_` или `_Group_`.  Для получения дополнительной информации см. [Указание времени и места применения примечания](../code-quality/specifying-when-and-where-an-annotation-applies.md).|  
  
## См. также  
 [Использование аннотаций SAL для сокращения количества дефектов в коде C\/C\+\+](../code-quality/using-sal-annotations-to-reduce-c-cpp-code-defects.md)   
 [Основные сведения о языке SAL](../code-quality/understanding-sal.md)   
 [Создание примечаний к параметрам и возвращаемым значениям функций](../code-quality/annotating-function-parameters-and-return-values.md)   
 [Аннотация структур и классов](../code-quality/annotating-structs-and-classes.md)   
 [Аннотация поведения блокировки](../code-quality/annotating-locking-behavior.md)   
 [Указание времени и места применения примечания](../code-quality/specifying-when-and-where-an-annotation-applies.md)   
 [Встроенные функции](../code-quality/intrinsic-functions.md)   
 [Рекомендации и примеры](../code-quality/best-practices-and-examples-sal.md)