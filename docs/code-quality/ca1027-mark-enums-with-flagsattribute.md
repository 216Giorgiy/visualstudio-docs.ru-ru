---
title: "CA1027: следует помечать перечисления атрибутом FlagsAttribute | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-devops-test"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "MarkEnumsWithFlags"
  - "CA1027"
helpviewer_keywords: 
  - "CA1027"
  - "MarkEnumsWithFlags"
ms.assetid: 249e882c-8cd1-4c00-a2de-7b6bdc1849ff
caps.latest.revision: 18
caps.handback.revision: 18
author: "stevehoag"
ms.author: "shoag"
manager: "wpickett"
---
# CA1027: следует помечать перечисления атрибутом FlagsAttribute
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

|||  
|-|-|  
|TypeName|MarkEnumsWithFlags|  
|CheckId|CA1027|  
|Категория|Microsoft.Design|  
|Критическое изменение|Не критическое|  
  
## Причина  
 Значения открытого перечисления являются степенями двух или сочетаниями других значений, определенных в перечислении, а атрибут <xref:System.FlagsAttribute?displayProperty=fullName> отсутствует.  Для сокращения количества ложных положительных результатов данное правило не сообщает о нарушениях для перечислений с непрерывными значениями.  
  
## Описание правила  
 Перечисление является типом значения, которое определяет набор связанных именованных констант.  <xref:System.FlagsAttribute> применяется к перечислению, когда его именованные константы могут быть целенаправленно объединены.  Например, рассмотрим перечисление дней недели в приложении, предназначенном для отслеживания доступности ресурсов определенного дня.  Если для кодирования доступности каждого ресурса использовалось перечисление с атрибутом <xref:System.FlagsAttribute>, могут быть представлены все сочетания дней.  Без данного атрибута можно представить только один день недели.  
  
 В полях, где хранятся комбинируемые перечисления, отдельные значения перечислений обрабатываются как группы битов.  Поэтому такие поля иногда называются *битовыми*.  Для объединения значений перечисления для хранения в битовом поле следует использовать логические условные операторы.  Для проверки битового поля на наличие конкретного значения перечисления следует использовать логические операторы.  Для надлежащего хранения комбинируемых значений перечисления в битовом поле и извлечения их из него каждое значение, определенное в перечислении, должно быть степенью двух.  До тех пор, пока не будет выполнено это условие, извлечь хранящиеся в этом поле отдельные значения перечисления с помощью логических операторов будет невозможно.  
  
## Устранение нарушений  
 Чтобы устранить нарушение данного правила, добавьте в перечисление атрибут <xref:System.FlagsAttribute>.  
  
## Отключение предупреждений  
 Если значения перечисления не должны быть комбинируемыми, вывод предупреждения для данного правила можно отключить.  
  
## Пример  
 В следующем примере `DaysEnumNeedsFlags` является перечислением, которое соответствует требованиям для использования атрибута <xref:System.FlagsAttribute>, но не имеет его.  В перечислении `ColorEnumShouldNotHaveFlag` отсутствуют значения, являющиеся степенями двух, коме того, оно неправильно задает <xref:System.FlagsAttribute>.  Это является нарушением правила [CA2217: не следует помечать перечисления атрибутом FlagsAttribute](../code-quality/ca2217-do-not-mark-enums-with-flagsattribute.md).  
  
 [!CODE [FxCop.Design.EnumFlags#1](../CodeSnippet/VS_Snippets_CodeAnalysis/FxCop.Design.EnumFlags#1)]  
  
## Связанные правила  
 [CA2217: не следует помечать перечисления атрибутом FlagsAttribute](../code-quality/ca2217-do-not-mark-enums-with-flagsattribute.md)  
  
## См. также  
 <xref:System.FlagsAttribute?displayProperty=fullName>