---
title: C6262
ms.date: 11/04/2016
ms.prod: visual-studio-dev15
ms.technology: vs-ide-code-analysis
ms.topic: reference
f1_keywords:
- C6262
helpviewer_keywords:
- C6262
ms.assetid: 3eddc74e-2b05-4159-a093-fd469fdcebbb
author: mikeblome
ms.author: mblome
manager: wpickett
ms.workload:
- multiple
ms.openlocfilehash: b931b65c1b9c7ac0ec5a930527bbeb93f6eec052
ms.sourcegitcommit: e13e61ddea6032a8282abe16131d9e136a927984
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
---
# <a name="c6262"></a>C6262
Предупреждение C6262: функция использует \<константой > байт стека: превышает / analyze: stacksize\<константа 2 >. Попробуйте переместить некоторые данные в куче

 Это предупреждение указывает, что стек, превышает заданный порог (`constant 2`) обнаружена в функции. Размер кадра стека по умолчанию для данного предупреждения — 16 КБ для пользователя режим, 1 КБ для режима ядра. Стек — даже в пользовательском режиме — ограничен и не удалось зафиксировать транзакцию страницей стека причины исключение переполнения стека. В режиме ядра имеет ограничение размера стека 12 КБ, который не может быть увеличена; Таким образом код в режиме ядра агрессивно следует ограничить использование стека.

 Чтобы устранить проблему за это предупреждение, можно либо переместить некоторые данные в кучу или других динамической памяти.  В пользовательском режиме, на один кадр стека больших не могут возникать проблемы, и это предупреждение может быть отменено — но кадр стека больших повышает риск переполнения стека. (Кадр стека больших может произойти, если функция интенсивно использует стек или является рекурсивной.) Общий размер стека в пользовательском режиме можно увеличить, если фактически происходит переполнение стека, но только до системное ограничение.  Можно использовать **/ analyze** параметр командной строки, чтобы изменить значение для `<constant 2>`, но увеличивать его представляет риск, что ошибка не возникнет.

 Для кода в режиме ядра, например, в проектах драйвер — значение `<constant 2>` равным 1 КБ. Грамотно сконструированные драйверы имели очень небольшое число функций, которые подход, это значение и изменение вниз ограничения может быть нежелательно.  Же общие методы, которые используются для кода пользовательского режима, чтобы уменьшить размер стека может быть адаптирован для кода в режиме ядра.

## <a name="example"></a>Пример
 Следующий код создает данное предупреждение, поскольку `char buffer` выделяет 16,382 байт и локальная целочисленная переменная `i` выделяет еще 4 байта, в которых совместно превышает предельный размер стека по умолчанию 16 КБ.

```cpp
// cl.exe /c /analyze /EHsc /W4
#include <windows.h>
#define MAX_SIZE 16382

void f( )
{
    int i;
    char buffer[MAX_SIZE];

    i = 0;
    buffer[0]='\0';

    // code...
}

```

 Следующий код это предупреждение устраняется путем переноса некоторых данных в куче.

```cpp
// cl.exe /c /analyze /EHsc /W4
#include <stdlib.h>   
#include <malloc.h>
#define MAX_SIZE 16382

void f( )
{
    int i;
    char *buffer;

    i = 0;
    buffer = (char *) malloc( MAX_SIZE );
    if (buffer != NULL) 
    {
        buffer[0] = '\0';
        // code...
        free(buffer);
    }
}

```

 Использование malloc и бесплатные имеют множество ловушек с точки зрения утечек памяти и исключения. Чтобы избежать такого рода утечки и исключение проблемы, используйте механизмов, которые содержатся в C++ стандартной библиотеки шаблонов (STL). К ним относятся [shared_ptr](/cpp/standard-library/shared-ptr-class), [unique_ptr](/cpp/standard-library/unique-ptr-class), и [вектор](/cpp/standard-library/vector). Дополнительные сведения см. в разделе [интеллектуальные указатели](/cpp/cpp/smart-pointers-modern-cpp) и [стандартной библиотеки C++](/cpp/standard-library/cpp-standard-library-reference).

 **Чтобы устранить это предупреждение, корректируя размер стека**

1.  В строке меню выберите **Проект**, **Свойства**.

     Откроется диалоговое окно **Страницы свойств**.

2.  Разверните **свойства конфигурации**.

3.  Разверните **C/C++**.

4.  Выберите **командной строки** свойства.

5.  В **Дополнительные параметры**, добавьте **/ analyze: stacksize16388**.

## <a name="see-also"></a>См. также
 [Параметр / STACK (выделение памяти в стеке)](/cpp/build/reference/stack-stack-allocations) [_resetstkoflw](/cpp/c-runtime-library/reference/resetstkoflw) [как: использовать проверки времени выполнения машинного кода](../debugger/how-to-use-native-run-time-checks.md)