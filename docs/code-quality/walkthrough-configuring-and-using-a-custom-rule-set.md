---
title: "Пошаговое руководство по настройке и использовании настраиваемый набор правил | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: vs-ide-code-analysis
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- code analysis, walkthroughs
- code analysis, rule sets
ms.assetid: 7fe0a4e3-1ce0-4f38-a87a-7d81238ec7cd
caps.latest.revision: "40"
author: gewarren
ms.author: gewarren
manager: ghogen
ms.openlocfilehash: 28f572ff80888f9d207c9ade9042414127abb154
ms.sourcegitcommit: f40311056ea0b4677efcca74a285dbb0ce0e7974
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2017
---
# <a name="walkthrough-configuring-and-using-a-custom-rule-set"></a>Пошаговое руководство. Настройка и использование набора настраиваемых правил
В этом пошаговом руководстве показано, как использовать средства анализа кода, которые были настроены для использования настраиваемый *набор правил* для библиотеки классов. Можно выбрать набор правил, связанного с типом проекта, заданным для решения, или можно выбрать другие наборы правил в соответствии со своими нуждами, такие как сканирование устаревшего кода для проблем, которые могут быть исправлены является критическим. В любом случае наборы правил можно настроить для тонкой настройки их в соответствии со своими требованиями проекта.  
  
 В этом пошаговом руководстве будет пошагово выполните эти процессы.  
  
-   Создайте библиотеку классов.  
  
-   Выберите **базовые правила и рекомендации по разработке Microsoft** набора правил анализа кода.  
  
-   Добавьте свой код в класс.  
  
-   Запуск анализа кода.  
  
-   Настройка набора правил.  
  
-   Запуск анализа кода и просмотр поведения настроек набора правил.  
  
## <a name="prerequisites"></a>Предварительные требования  
  
-   [!INCLUDE[vsUltLong](../code-quality/includes/vsultlong_md.md)], [!INCLUDE[vsPreLong](../code-quality/includes/vsprelong_md.md)] или [!INCLUDE[vsPro](../code-quality/includes/vspro_md.md)]  
  
## <a name="using-rule-sets-with-code-analysis"></a>Использование наборов правил для анализа кода  
 Сначала создайте простой библиотеки классов.  
  
#### <a name="create-a-class-library"></a>Создание библиотеки классов  
  
1.  В меню **Файл** последовательно выберите пункты **Создать** и **Проект**.  
  
2.  В **новый проект** диалогового **типы проектов**, нажмите кнопку **Visual C#**.  
  
3.  В разделе **Visual C#**выберите **библиотеки классов**.  
  
4.  В **имя** введите **Пример_набора_правил** и нажмите кнопку **ОК**.  
  
 Далее следует выбрать **базовые правила и рекомендации по разработке Microsoft** набор правил и сохраните его с проектом.  
  
#### <a name="select-a-code-analysis-rule-set"></a>Выберите набор правил анализа кода  
  
1.  На **анализ** меню, нажмите кнопку **Настройка анализа кода для Пример_набора_правил**.  
  
     Отображаются параметры конфигурации для анализа кода.  
  
2.  В **выполнить этот набор правил** раскрывающемся списке выберите **все правила Майкрософт**.  
  
     Дополнительные сведения о доступных наборах правил см. в разделе [Справочник по набору правил анализа кода](../code-quality/code-analysis-rule-set-reference.md).  
  
     В меню «Файл» выберите **сохранить выбранные элементы** для обновления файла проекта с сведения о наборе правил, выбранная и его параметры.  
  
    > [!TIP]
    >  В реальной ситуации, используемый для определения приоритетов какие проблемы вы будете работать с анализом кода рекомендуется начинать с **минимальные правила и рекомендации** набор правил и устранить необходимые проблемы и последовательно добавлять другие правила или правило задает для нахождения и исправления дополнительные проблемы.  
  
 Далее добавим некоторый код для библиотеки класса, который будет использоваться для демонстрации нарушений CA1704 «Идентификаторы должны иметь правильное правописание» правила анализа кода. Дополнительные сведения см. в разделе [CA1704: идентификаторы должны иметь правильное правописание](../code-quality/ca1704-identifiers-should-be-spelled-correctly.md).  
  
#### <a name="add-your-own-code"></a>Добавьте свой код  
  
-   В обозревателе решений откройте файл Class1.cs и замените существующий код следующим кодом:  
  
    ```  
    using System;  
    using System.Collections.Generic;  
    using System.Text;  
  
    namespace RuleSetSample  
    {  
        public class Class1  
        {  
            //The variable parameter names "a" and "b" will cause  
            //the warning CA 1704 Microsoft.Naming "Consider   
            //providing a more meaningful name" to fire  
            public int AddIntegers(int a, int b)  
            {  
  
                int sum = a + b;  
  
                return (sum);  
            }  
        }  
    }  
  
    ```  
  
 Теперь можно запустить анализ кода для проекта Пример_набора_правил и найдите все ошибки и предупреждения, созданные в окне списка ошибок.  
  
#### <a name="run-code-analysis-on-the-rulesetsample-project"></a>Запустить анализ кода для проекта Пример_набора_правил  
  
1.  На **анализ** меню, нажмите кнопку **запустить анализ кода на Пример_набора_правил**.  
  
2.  В окне списка ошибок щелкните **предупреждения** и нажмите кнопку **описание** заголовок столбца, чтобы отсортировать предупреждения алфавитно-цифровом порядке.  
  
     В реальном приложении будет устранить любые нарушения правил, требующая исправления на этом этапе или при необходимости выключите или отключить правило, если определить, не требующая исправления. Дополнительные сведения см. в разделе [подавления предупреждений с помощью атрибута SuppressMessage](../code-quality/suppress-warnings-by-using-the-suppressmessage-attribute.md).  
  
3.  Обратите внимание на предупреждения CA1704. Эти нарушения этого правила указывают, что» следует предоставления более значимое имя для параметров.» Может устранить проблему в коде или отключить правило, как описано в следующей процедуре.  
  
 Далее будет выполнена настройка исключаемое предупреждение CA1704: набор правил, «Идентификаторы должны иметь правильное правописание».  
  
#### <a name="customize-the-rule-set-for-your-project-to-disable-a-specific-rule"></a>Настройка набора правил для проекта с целью отключения определенного правила  
  
1.  На **анализ** меню, нажмите кнопку **Настройка анализа кода для Пример_набора_правил**.  
  
2.  В **выполнить этот набор правил** раскрывающегося списка убедитесь, что **все правила Майкрософт** правила, по-прежнему выделяется набора и нажмите кнопку **откройте**. Отображается страница набора правил.  
  
3.  Разверните узел категории Microsoft.Naming, а затем выберите предупреждение CA1704:.  
  
4.  В разделе **действия** выберите **None.** Это предотвращает отображение данных в виде предупреждения или ошибки в окне списка ошибок CA1704.  
  
     Теперь будет подходящий момент, чтобы поэкспериментировать с различными кнопками панели инструментов и опциями фильтрации, чтобы ознакомиться с ними. Например, можно использовать **Group By** раскрывающегося списка, чтобы найти определенное правило или категорию правил. Другой пример — можно использовать **Скрыть отключенные правила** кнопку в страницах наборов правил, чтобы скрыть или отобразить все правила, для которых **действия** столбец значение **нет**. Это может быть полезно, если требуется найти все правила, которые выключены, чтобы подтвердить, что вы по-прежнему отключены.  
  
5.  В меню «Вид» выберите окно свойств. Тип **Мой настраиваемый набор правил** в поле имя окне "Свойства". Это изменяет отображаемое имя набора правил в [!INCLUDE[vs_current_short](../code-quality/includes/vs_current_short_md.md)] интегрированной среды разработки.  
  
6.  На **файл** меню, нажмите кнопку **сохранить все Rules.ruleset Microsoft** чтобы сохранить настраиваемые правила набор. Перейдите в корневую папку проекта. В **имя файла** введите **"Мой_настраиваемый_набор_правил"**. Теперь можно выбрать настраиваемый набор правил для использования в проекте.  
  
 С создан новый набор правил теперь необходимо настроить параметры проекта для указания, что вы хотите использовать набор с ним.  
  
#### <a name="specify-the-new-rule-set-for-use-with-your-project"></a>Укажите новый набор правил для использования в проекте  
  
1.  В обозревателе решений щелкните правой кнопкой мыши проект и выберите **свойства**.  
  
2.  В **свойства** щелкните **анализа кода**.  
  
     В **выполнить этот набор правил** раскрывающемся списке выберите  **\<Обзор... >**. Перейдите в корневую папку проекта кода и выберите **MyCustomRuleSet.ruleset**. Это новый набор правил, созданный в предыдущей процедуре.  
  
3.  На **файл** меню, нажмите кнопку **Сохранить** сохранить конфигурацию проекта. Теперь настраиваемый набор правил можно использовать вместе с проектом.  
  
 Наконец выполняется анализ снова с помощью правил Мой_настраиваемый_набор_правил. Обратите внимание, что нарушение правила производительности CA1704 не отображаются в окне списка ошибок.  
  
#### <a name="run-code-analysis-on-the-rulesetsample-project-for-the-second-time"></a>Запустить анализ кода для проекта Пример_набора_правил во второй раз  
  
1.  На **анализ** меню, нажмите кнопку **запустить анализ кода на Пример_набора_правил**.  
  
2.  В окне списка ошибок Обратите внимание, что при нажатии кнопки **предупреждения**, больше нет нарушений предупреждения CA1704 для правила «Идентификаторы должны иметь правильное правописание».  
  
## <a name="see-also"></a>См. также  
 [Как: Настройка анализа кода для проекта управляемого кода](../code-quality/how-to-configure-code-analysis-for-a-managed-code-project.md)   
 [Справочник по набору правил анализа кода](../code-quality/code-analysis-rule-set-reference.md)