---
title: "Краткое руководство. Анализ кода для C/C++ | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-devops-test"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "C/C++ - анализ кода"
  - "анализ кода, C/C++"
ms.assetid: 6110b8ba-0af6-4acd-b1ba-bb0551f90e44
caps.latest.revision: 8
caps.handback.revision: 8
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
---
# Краткое руководство. Анализ кода для C/C++
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Качество приложения можно улучшить путем регулярного выполнения анализа кода C или C\+\+.  Это может помочь найти распространенные проблемы, нарушения рекомендаций по программированию или ошибки, которые трудно обнаружить в процессе тестирования.  Предупреждения функции анализа кода отличаются от ошибок и предупреждений компилятора, поскольку функция анализа кода выполняет поиск конкретных шаблонов кода, которые являются допустимыми, но тем не менее могут вызвать проблемы при использовании кода.  
  
## Содержание раздела  
  
-   [Настройка наборов правил для проекта](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_ConfigureRuleSets)  
  
-   [Запуск анализа кода](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Run)  
  
-   [Анализ и устранение предупреждений функции анализа кода](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Analyze)  
  
-   [Отключение предупреждений функции анализа кода](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Suppress)  
  
-   [Создание рабочих элементов для предупреждений функции анализа кода](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Creating_work_items_for_code_analysis_warnings)  
  
-   [Поиск и фильтрация результатов анализа кода](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Search)  
  
##  <a name="BKMK_ConfigureRuleSets"></a> Настройка наборов правил для проекта  
  
1.  В **обозревателе решений** откройте контекстное меню проекта и выберите пункт **Свойства**.  
  
2.  Следующие действия необязательны.  
  
    1.  В списках **Конфигурация** и **Платформа** выберите конфигурацию сборки и целевую платформу.  
  
    2.  По умолчанию функция анализа кода выдает предупреждения, связанные с кодом, автоматически созданным внешними средствами.  Чтобы просмотреть предупреждения, связанные с созданным кодом, снимите флажок **Исключить результаты из созданного кода**.  
  
        > [!NOTE]
        >  Этот параметр не отключает ошибки и предупреждения из созданного кода, если ошибки и предупреждения появляются в формах и шаблонах.  Вы можете просматривать и обслуживать исходный код для формы или шаблона.  
  
3.  Чтобы анализ кода запускался при каждой сборке проекта с использованием выбранной конфигурации, установите флажок **Включить анализ кода для C\/C\+\+ при сборке**.  Также можно выполнить анализ кода в ручном режиме, открыв меню **Анализ** и выбрав пункт **Выполнить анализ кода для** *ИмяПроекта*.  
  
4.  В списке **Выполнить этот набор правил** выполните одно из следующих действий.  
  
    -   Выберите набор правил, который хотите использовать.  
  
    -   Нажмите **\<Обзор...\>**, чтобы указать существующий настраиваемый набор правил, если его нет в списке.  
  
    -   Определите настраиваемый набор правил.  
  
         Дополнительные сведения см. в разделе [Создание настраиваемых наборов правил](../code-quality/creating-custom-code-analysis-rule-sets.md).  
  
### Стандартные наборы правил C\/C\+\+  
 Visual Studio включает два стандартных набора правил для машинного кода.  
  
|Набор правил|Описание|  
|------------------|--------------|  
|Минимально рекомендуемые корпорацией Майкрософт правила для машинного кода|Этот набор правил ориентирован на наиболее важные проблемы в машинном коде, включая возможные уязвимости безопасности и случаи аварийного завершения работы приложений.  Этот набор правил можно включить в любой настраиваемый набор правил, созданный для собственных проектов машинного кода.|  
|Рекомендуемые Майкрософт правила для машинного кода|Этот набор правил охватывает широкий спектр проблем.  Он включает все правила из набора "Минимально рекомендуемые корпорацией Майкрософт правила для машинного кода".|  
  
##  <a name="BKMK_Run"></a> Запуск анализа кода  
 На странице "Анализ кода" свойств проекта можно настроить выполнение анализа кода при каждой сборке проекта.  Кроме того, можно запустить анализ кода вручную.  
  
 Чтобы запустить анализ кода для решения, выполните следующие действия.  
  
-   В меню **Сборка** выберите **Выполнить анализ кода в решении**.  
  
 Чтобы запустить анализ кода для проекта, выполните следующие действия.  
  
-   В обозревателе решений выберите имя проекта.  
  
-   В меню **Сборка** выберите **Выполнить анализ кода для** *ИмяПроекта*.  
  
 Будет выполнена компиляция проекта или решения и запуск анализа кода.  Результаты отображаются в окне анализа кода.  
  
##  <a name="BKMK_Analyze"></a> Анализ и устранение предупреждений функции анализа кода  
 Чтобы проанализировать конкретное предупреждение, выберите заголовок предупреждения в окне "Анализ кода".  Предупреждение будет развернуто для отображения дополнительных сведений о проблеме.  По возможности функция анализа кода выводит на экран номера строк и логику анализа, вызвавшие предупреждение.  Чтобы получить подробные сведения о предупреждении, включая возможные решения проблемы, выберите идентификатор предупреждения, чтобы вывести на экран раздел справки в библиотеке MSND для данного сообщения.  
  
 При развертывании предупреждения вызвавшая его строка кода выделяется в редакторе кода Visual Studio.  
  
 Изучив и поняв причину проблемы, можно разрешить ее в коде.  После этого повторно запустите анализ кода, чтобы убедиться, что предупреждение больше не отображается в окне анализа кода и исправление не привело к появлению новых предупреждений.  
  
> [!TIP]
>  Повторно запустить анализ кода можно из окна анализа кода.  Нажмите кнопку **Анализ** и выберите область анализа.  Можно повторно запустить анализ для всего решения или для выбранного проекта.  
  
##  <a name="BKMK_Suppress"></a> Отключение предупреждений функции анализа кода  
 Бывают случаи, когда может потребоваться не устранять предупреждения анализа кода.  Возможно, вы решите, что устранение предупреждения потребует слишком больших усилий по исправлению кода в сравнении с вероятностью того, что проблема проявит себя в любой реальной реализации кода.  Или вы сочтете, что логика анализа, которая используется в предупреждении, не соответствует данному контексту.  Можно отключить отдельные предупреждения, чтобы они больше не отображались в окне анализа кода.  
  
 Чтобы отключить предупреждение, выполните следующие действия.  
  
1.  Если подробные сведения не отображаются, выберите заголовок предупреждения, чтобы развернуть его.  
  
2.  Щелкните ссылку **Действия** внизу предупреждения.  
  
3.  Выберите **Подавить сообщение**, а затем **В исходном**.  
  
 Функция подавления сообщения вставляет идентификатор `#pragma warning (disable:`*WarningId*`)`, который отключает предупреждение для строки кода.  
  
##  <a name="BKMK_Creating_work_items_for_code_analysis_warnings"></a> Создание рабочих элементов для предупреждений функции анализа кода  
 Для регистрации ошибок в журнале из среды Visual Studio можно использовать функцию отслеживания рабочих элементов.  Чтобы использовать эту функцию, необходимо подключиться к экземпляру Team Foundation Server.  
  
 **Создание рабочего элемента для одного или нескольких предупреждений кода C\/C\+\+**  
  
1.  В окне "Анализ кода" разверните и выберите предупреждения.  
  
2.  В контекстном меню для предупреждений выберите **Создать рабочий элемент**, а затем выберите тип рабочего элемента.  
  
3.  Visual Studio создает один рабочий элемент для выбранных предупреждений и отображает рабочий элемент в окне документа интегрированной среды разработки.  
  
4.  Добавьте любые дополнительные сведения, а затем выберите **Сохранить рабочий элемент**.  
  
##  <a name="BKMK_Search"></a> Поиск и фильтрация результатов анализа кода  
 Можно выполнять поиск в длинных списках предупреждений и фильтровать предупреждения в решениях с несколькими проектами.  
  
1.  **Для фильтрации предупреждений по заголовку или идентификатору предупреждения**: введите ключевое слово в текстовое поле **Фильтр**.  
  
2.  **Для фильтрации предупреждений по проекту**: в решении, содержащем несколько проектов, выберите один или несколько проектов в списке в верхней правой части окна "Анализ кода".  Выберите имя решения, чтобы отобразить все предупреждения.  
  
3.  **Для фильтрации предупреждений по уровню серьезности**: по умолчанию сообщениям функции анализа кода назначается уровень **Предупреждение**.  Одному или нескольким сообщениям можно назначить уровень **Ошибка** в настраиваемом наборе правил.  Выберите **Предупреждение** или **Ошибка** для отображения только тех сообщений, которым назначен соответствующий уровень серьезности.  Выберите **Все** для отображения всех сообщений.