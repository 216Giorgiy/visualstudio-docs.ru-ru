---
title: "Практическое руководство. Обеспечение простоты поддержки кода с помощью политики возврата с анализом кода | Microsoft Docs"
ms.custom: ""
ms.date: "12/12/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-general"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "анализ кода, политики возврата"
ms.assetid: d1b3b04f-4dd9-40e6-b2d4-b414d33fb647
caps.latest.revision: 8
caps.handback.revision: 8
author: "stevehoag"
ms.author: "shoag"
manager: "wpickett"
---
# Практическое руководство. Обеспечение простоты поддержки кода с помощью политики возврата с анализом кода
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Разработчики могут использовать средство определения метрики кода для измерения сложности и определения возможности поддержки их кода, однако они не могут вызывать метрики кода в рамках политики возврата.  Тем не менее, команда может включить правила анализа кода, которые обеспечат проверку нового кода на соответствие стандартам метрик кода и выполнение правил при помощи политик возврата.  Дополнительные сведения о метриках кода см. в разделе [Значения метрик кода](../code-quality/code-metrics-values.md).  
  
 Разработчики могут включить такие правила, как глубина наследования, связанность классов, индекс удобства поддержки и сложность, для обеспечения удобства поддержки кода посредством политик возврата с анализом кода.  Все четыре правила принадлежат к категории "Правила удобства поддержки" в редакторе политик анализа кода.  
  
 Администраторы системы управления версиями [!INCLUDE[esprfound](../code-quality/includes/esprfound_md.md)] могут добавить правила анализа удобства поддержки кода в требования политик возврата.  В соответствии с этими политиками возврата перед началом возврата кода разработчики должны провести анализ код с использованием заданных правил.  
  
### Открытие редактора политики анализа кода  
  
1.  В **командном обозревателе** щелкните правой кнопкой мыши новый командный проект, выберите пункт **Параметры проекта группы**, а затем — **Система управления версиями**.  
  
     Будет открыто диалоговое окно **Система управления версиями**.  
  
2.  На вкладке **Политика возврата** нажмите кнопку **Добавить**.  
  
     Откроется диалоговое окно **Добавление политики возврата**.  
  
3.  В списке **Политика возврата** установите флажок **Анализ кода** и нажмите кнопку **ОК**.  
  
     Появится диалоговое окно **Редактор политики анализа кода**.  
  
### Включение правил анализа кода на удобство поддержки  
  
1.  В диалоговом окне **Редактор политики анализа кода** в группе **Параметры правила** разверните узел **Правила удобства поддержки**.  
  
2.  Установите флажки для перечисленных ниже правил.  
  
    -   Глубина наследования: **CA1501 AvoidExcessiveInheritance** — пороговое значение: предупреждение при глубине более 5 уровней.  
  
    -   Сложность: **CA1502 AvoidExcessiveComplexity** — пороговое значение: предупреждение при значении свыше 25.  
  
    -   Индекс удобства поддержки: **CA1505 AvoidUnmaintainableCode** — пороговое значение: предупреждение при значении менее 20.  
  
    -   Связанность классов: **CA1506 AvoidExcessiveClassCoupling** — пороговое значение: предупреждение при значении свыше 80 для класса и свыше 30 для метода.  
  
    -   Кроме того, если необходимо запретить построение при нарушении правила, установите флажок **Рассматривать предупреждение как ошибку** рядом с описанием правила.  
  
3.  Нажмите кнопку **ОК**.  При следующих возвратах теперь будет применяться новая политика возврата.  
  
## См. также  
 [Значения метрик кода](../code-quality/code-metrics-values.md)   
 [Создание и использование политик возврата с анализом кода](../code-quality/creating-and-using-code-analysis-check-in-policies.md)