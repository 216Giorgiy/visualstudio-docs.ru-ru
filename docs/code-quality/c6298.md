---
title: "C6298 | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-devops-test"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "C6298"
helpviewer_keywords: 
  - "C6298"
ms.assetid: 986dc8e7-8596-4223-a66f-8616357d4399
caps.latest.revision: 13
caps.handback.revision: 13
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
---
# C6298
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Предупреждение C6298: Аргумент \<указатель\>: использование строки, доступной только для чтения, в качестве изменяемого строкового аргумента. Это приведет к попытке записи в статическую память только для чтения и вызовет случайные сбои.  
  
 Данное предупреждение указывает на использование строковой константы в качестве аргумента функции, которая может изменить содержимое строки.  Поскольку компилятор выделяет для строковых констант статическую память, доступную только для чтения, любые попытки изменения приведут к нарушениям доступа и случайным сбоям.  
  
 Этого можно избежать, сохранив строковую константу в локальном массиве, а затем используя данный массив в качестве аргумента функции.  
  
## Пример  
 Это предупреждение создается в следующем примере кода:  
  
```  
#include <windows.h>  
#include <stdio.h>  
  
void f()  
{  
    STARTUPINFO si;  
    PROCESS_INFORMATION pi;  
  
    ZeroMemory( &si, sizeof( si ) );  
    si.cb = sizeof( si );  
    ZeroMemory( &pi, sizeof( pi ) );  
    if( !CreateProcess(NULL,  
                      "\"c:\\Windows\\system32\\calc.exe\"",  
                      NULL,               
                      NULL,                
                      FALSE,              
                      0,                   
                      NULL,               
                      NULL,                
                      &si,                
                      &pi ) )   
    {  
        puts( "CreateProcess failed." );  
        return;  
    }  
  
    // Wait until child process exits.  
    WaitForSingleObject( pi.hProcess, INFINITE );  
  
    // Close process and thread handles.   
    CloseHandle( pi.hProcess );  
    CloseHandle( pi.hThread );  
}  
  
```  
  
 Для устранения этого предупреждения используйте следующий пример кода:  
  
```  
#include <windows.h>  
#include <stdio.h>  
  
void f( )  
{  
    STARTUPINFO si;  
    PROCESS_INFORMATION pi;  
  
    char szCmdLine[] = "\"c:\\Windows\\system32\\calc.exe\"";  
    ZeroMemory( &si, sizeof( si ) );  
    si.cb = sizeof( si );  
    ZeroMemory( &pi, sizeof( pi ) );  
  
    if( !CreateProcess(NULL,  
                      szCmdLine,  
                      NULL,               
                      NULL,                
                      FALSE,              
                      0,                   
                      NULL,               
                      NULL,                
                      &si,                
                      &pi ) )   
    {  
        puts( "CreateProcess failed." );  
        return;  
    }  
  
    // Wait until child process exits.  
    WaitForSingleObject( pi.hProcess, INFINITE );  
  
    // Close process and thread handles.   
    CloseHandle( pi.hProcess );  
    CloseHandle( pi.hThread );  
}  
```