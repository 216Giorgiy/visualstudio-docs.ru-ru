---
title: Развертывание и безопасность технологии ClickOnce | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- vs-ide-deployment
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- Windows applications, ClickOnce deployment
- deploying applications [ClickOnce]
- ClickOnce deployment
- publishing, ClickOnce
ms.assetid: abab6d34-c3c2-45c1-a8b6-43c7d3131e7a
author: stevehoag
ms.author: shoag
manager: wpickett
ms.workload:
- multiple
ms.openlocfilehash: 24ebab9776c6cb0b829e1b79cb089ef6b826f726
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
---
# <a name="clickonce-security-and-deployment"></a>Развертывание и безопасность технологии ClickOnce
[!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] — это технология развертывания, которая позволяет создавать самообновления приложений Windows, которые могут устанавливаться и работать при минимальном участии пользователя. [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] обеспечивает полную поддержку публикации и обновления приложений, развернутых с использованием технологии ClickOnce, если вы разработали проекты в Visual Basic и Visual C#. Сведения о развертывании приложений Visual C++ см. в разделе [развертывания ClickOnce для приложений Visual C++](/cpp/ide/clickonce-deployment-for-visual-cpp-applications).  
  
 [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] предназначена для решения трех основных проблем развертывания:  
  
-   **Трудности обновления приложений.** С помощью развертывания установщика Windows каждый раз, когда приложение обновляется, пользователь может установить обновление, msp-файл и применить его к установленного продукта; с помощью [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] развертывания, вы можете предоставлять обновления автоматически. Загружаются только те части приложения, которые были изменены, и затем полное обновленное приложение восстанавливается из новой папки side-by-side.  
  
-   **Влияние на компьютере пользователя.** С помощью развертывания установщика Windows приложения часто зависят от общих компонентов, с возможностью конфликтов контроля версий. с помощью [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] развертывания, каждое приложение является самодостаточным и не смогут взаимодействовать с другими приложениями.  
  
-   **Разрешения безопасности.** Развертывание установщика Windows требуются права администратора и допускает только ограниченную пользовательскую установку. [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] развертывания позволяет пользователям без прав администратора для установки и предоставляет только те разрешения управления доступом для кода, которые требуются для приложения.  
  
 В прошлом эти проблемы иногда возникает разработчиков принимать решение о создании веб-приложений вместо Windows-приложениях, ущерба многофункциональный пользовательский интерфейс для упрощения установки. С помощью приложения, развернутые с помощью [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)], можно использовать преимущества обеих технологий.  
  
## <a name="what-is-a-clickonce-application"></a>Что такое приложение ClickOnce  
 Объект [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] является приложение Windows Presentation Foundation (XBAP-файл), Windows Forms (.exe), консольное приложение (.exe) или решения Office (.dll), опубликованной с использованием [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] технологии. Вы можете опубликовать [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения тремя разными способами: с веб-страницы, из общей сетевой папки или с носителя, например компакт-диска. Объект [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения могут быть установлены на компьютере конечного пользователя и запускать локально даже в том случае, если компьютер находится в автономном режиме, или он может выполняться в интерактивном режиме без постоянной установки ничего на компьютере конечного пользователя. Подробнее см. в разделе [Выбор стратегии развертывания ClickOnce](../deployment/choosing-a-clickonce-deployment-strategy.md).  
  
 [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения могут обновляться автоматически. они могут проверять наличие новых версий по мере их доступности и заменять все обновленные файлы автоматически. Разработчик может указать поведение обновления. сетевой администратор также может управлять стратегиями обновления, например, пометить обновление как обязательное. Обновления можно также понизить до более ранней версии конечным пользователем или администратором. Дополнительные сведения см. в разделе [Выбор стратегии обновления ClickOnce](../deployment/choosing-a-clickonce-update-strategy.md).  
  
 Поскольку [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения изолированы, установку и запуск [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения не может нарушить работу существующих приложений. [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения самодостаточны; Каждый [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложение устанавливается и запускать из безопасного каждого пользователя, кэша на уровне приложений. [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] приложения выполняются в зонах безопасности Интернета или интрасети. При необходимости приложение может запросить повышение прав. Дополнительные сведения см. в разделе [Защита приложений ClickOnce](../deployment/securing-clickonce-applications.md).  
  
## <a name="how-clickonce-security-works"></a>Как работает защита приложений ClickOnce  
 Ядро [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] безопасность основана на сертификаты, политики управления доступом для кода и о доверии ClickOnce.  
  
### <a name="certificates"></a>Сертификаты  
 Сертификаты Authenticode используются для проверки подлинности издателя приложения. С помощью Authenticode для развертывания приложения, ClickOnce помогает предотвратить вредоносной программы случаи как надежная программу, поступающую из авторитетного, заслуживающего доверия источника. При необходимости сертификаты могут также использоваться для подписи приложения и манифестов развертывания, чтобы доказать, что файлы не были изменены. Дополнительные сведения см. в разделе [ClickOnce и технология Authenticode](../deployment/clickonce-and-authenticode.md). Сертификаты могут использоваться также для настройки клиентских компьютеров, составив список доверенных издателей. Если приложение получено из надежного издателя, его можно установить без вмешательства пользователя. Для получения дополнительной информации см. [Trusted Application Deployment Overview](../deployment/trusted-application-deployment-overview.md).  
  
### <a name="code-access-security"></a>Управление доступом для кода  
 Управление доступом для кода помогает ограничить доступ кода к защищенным ресурсам. В большинстве случаев вы можете зоны Интернета или локальной интрасети, чтобы ограничить разрешения. Используйте **безопасности** страницы в **ProjectDesigner** чтобы запросить зону, подходящую для приложения. Можно также выполнять отладку приложений с ограниченными правами для имитации взаимодействия с пользователем. Дополнительные сведения см. в статье [Управление доступом для кода для приложения ClickOnce](../deployment/code-access-security-for-clickonce-applications.md).  
  
### <a name="clickonce-trust-prompt"></a>Запрос о доверии ClickOnce  
 Если приложение запрашивает больше разрешений, чем позволяет зона, конечный пользователь может предложено принять решение о доверии. Конечный пользователь вправе ли доверенным для выполнения приложения ClickOnce, таких как приложения Windows Forms, приложениях Windows Presentation Foundation, консольные приложения, приложения браузера XAML и решений Office. Дополнительные сведения см. в разделе [как: Настройка ClickOnce доверия поведения запроса](../deployment/how-to-configure-the-clickonce-trust-prompt-behavior.md).  
  
## <a name="how-clickonce-deployment-works"></a>Как работает развертывание ClickOnce  
 Ядро [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] развертывания архитектура основана на двух файлах манифеста XML: манифест приложения и манифест развертывания. Файлы используются для описания откуда установлены приложения ClickOnce, способ обновления и при обновлении.  
  
### <a name="publishing-clickonce-applications"></a>Публикация ClickOnce-приложений  
 В манифесте приложения описаны самого приложения. Сюда входят сборки, зависимости и файлы, составляющие приложение, необходимые разрешения и место, где будут доступны обновления. Разработчик приложения создает манифест приложения с помощью мастера публикации в Visual Studio или манифеста средство создания и редактирования (Mage.exe) в [!INCLUDE[winsdklong](../deployment/includes/winsdklong_md.md)]. Дополнительные сведения см. в разделе [как: публикация приложения ClickOnce с использованием мастера публикации](../deployment/how-to-publish-a-clickonce-application-using-the-publish-wizard.md).  
  
 Манифест развертывания описывает способ развертывания приложения. Сюда входят расположение манифеста приложения и версию приложения, которое должно запускаться клиентами.  
  
### <a name="deploying-clickonce-applications"></a>Развертывание приложений ClickOnce  
 После его создания манифеста развертывания копируется в папку развертывания. Это может быть Web server, сетевую общую папку или носители, такие как компакт-диска. Манифест приложения и все файлы приложения также копируются в место развертывания, указанный в манифесте развертывания. Это может быть таким же, как расположение развертывания, или он может быть другое расположение. При использовании **мастер публикации** в Visual Studio операции копирования выполняются автоматически.  
  
### <a name="installing-clickonce-applications"></a>Установка приложений ClickOnce  
 После развертывания в место развертывания конечным пользователям можно загрузить и установить приложение, щелкнув значок, представляющий файл манифеста развертывания на веб-странице или в папке. В большинстве случаев пользователю предоставляется простое диалоговое окно, запросом на подтверждение установки, после которого выполняется установка, и приложение запускается без дополнительных действий пользователя. В случаях, если приложению требуются повышенные разрешения или если приложение не подписано с помощью доверенного сертификата диалоговое окно также запрашивает у пользователя разрешение перед продолжением установки. То, что ClickOnce устанавливает на уровне пользователя, повышение уровня разрешений может потребоваться в случае необходимые компоненты, которые требуются права администратора. Дополнительные сведения о повышенных разрешениях см. в разделе [защита приложений ClickOnce](../deployment/securing-clickonce-applications.md).  
  
 Сертификаты должны быть доверенными на уровне компьютера или предприятия, чтобы приложения ClickOnce, подписанные с помощью доверенного сертификата можно выполнить автоматическую установку. Дополнительные сведения о доверенных сертификатов см. в разделе [Общие сведения о развертывании доверенных приложений](../deployment/trusted-application-deployment-overview.md).  
  
 Приложение можно добавить для пользователя **запустить** меню и **Установка и удаление программ** в группе **панели управления**. В отличие от других технологий развертывания ничего не добавляется к **Program Files** отсутствуют права администратора или папки и реестр являются обязательными для установки  
  
> [!NOTE]
>  Также можно запретить добавление приложения **запустить** меню и **Установка и удаление программ** группы, делая его поведение аналогично поведению веб-приложения. Подробнее см. в разделе [Выбор стратегии развертывания ClickOnce](../deployment/choosing-a-clickonce-deployment-strategy.md).  
  
### <a name="updating-clickonce-applications"></a>Обновление приложений ClickOnce  
 Если разработчик приложения создает обновленную версию приложения, создать новый манифест приложения и скопируйте файлы в расположение развертывания — обычно это папка одного уровня папки развертывания исходного приложения. Администратор обновляет манифест развертывания, чтобы он указывал на расположение новой версии приложения.  
  
> [!NOTE]
>  **Мастер публикации** в Visual Studio можно использовать для выполнения этих шагов.  
  
 Помимо расположения развертывания манифест развертывания также содержит расположение обновления (веб-страницу или общий сетевой ресурс), где приложение проверяет наличие обновленных версий. [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] **Публикация** свойства, используемые для указания того, когда и как часто приложение должно проверять наличие обновлений. Поведение обновления может быть задано в манифесте развертывания, или оно может быть представлено в виде вариантов выбора в пользовательском интерфейсе приложения с помощью параметра [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] API-интерфейсы. Кроме того **публикации** свойства могут использоваться для выполнения обязательных обновлений или откат к предыдущей версии. Дополнительные сведения см. в разделе [Выбор стратегии обновления ClickOnce](../deployment/choosing-a-clickonce-update-strategy.md).  
  
### <a name="third-party-installers"></a>Установщики компонентов сторонних производителей  
 Можно использовать установщик ClickOnce для установки приложения и компонентов сторонних разработчиков. Необходимо иметь распространяемый пакет (.exe или MSI-файл) и описания пакета с манифеста продукта не зависящий от языка и манифест пакета для конкретного языка. Дополнительные сведения см. в разделе [создание пакетов загрузчика](../deployment/creating-bootstrapper-packages.md).  
  
## <a name="clickonce-tools"></a>Средства ClickOnce  
 Ниже приведены средства, можно использовать для создания, редактирования, входа и повторной подписи манифестов приложения и развертывания.  
  
|Средство|Описание|  
|----------|-----------------|  
|[Страница "Безопасность" в конструкторе проектов](../ide/reference/security-page-project-designer.md)|Признаки манифесты приложения и развертывания.|  
|[Страница публикации в конструкторе проектов](../ide/reference/publish-page-project-designer.md)|Создания и изменения манифестов приложения и развертывания для приложений Visual Basic и Visual C#.|  
|[Mage.exe (средство создания и редактирования манифеста)](/dotnet/framework/tools/mage-exe-manifest-generation-and-editing-tool)|Создает манифесты приложения и развертывания для приложений Visual Basic, Visual C# и Visual C++.<br /><br /> Подписывает и повторного подписывания манифестов приложения и развертывания.<br /><br /> Может выполняться в пакетных скриптах и из командной строки.|  
|[MageUI.exe (средство создания и редактирования манифестов, графический клиент)](/dotnet/framework/tools/mageui-exe-manifest-generation-and-editing-tool-graphical-client)|Создания и изменения манифестов приложения и развертывания.<br /><br /> Подписывает и повторного подписывания манифестов приложения и развертывания.|  
|[Задача GenerateApplicationManifest](../msbuild/generateapplicationmanifest-task.md)|Создает манифест приложения.<br /><br /> Можно запускать из MSBuild. Дополнительные сведения см. в разделе [Справочник по MSBuild](../msbuild/msbuild-reference.md).|  
|[Задача GenerateDeploymentManifest](../msbuild/generatedeploymentmanifest-task.md)|Создает манифест развертывания.<br /><br /> Можно запускать из MSBuild. Дополнительные сведения см. в разделе [Справочник по MSBuild](../msbuild/msbuild-reference.md).|  
|[Задача SignFile](../msbuild/signfile-task.md)|Признаки манифесты приложения и развертывания.<br /><br /> Можно запускать из MSBuild. Дополнительные сведения см. в разделе [Справочник по MSBuild](../msbuild/msbuild-reference.md).|  
|<xref:Microsoft.Build.Tasks.Deployment.ManifestUtilities>|Разработайте приложение для создания манифестов приложения и развертывания.|  
  
 В следующей таблице показаны версии платформы .NET Framework, необходимые для поддержки приложений ClickOnce в следующих браузерах.  
  
|Браузер|Версия платформы .NET Framework|  
|-------------|----------------------------|  
|Internet Explorer|2.0, 3.0, 3.5, 3.5 SP1, 4|  
|Firefox|2.0 SP1, 3.5 С ПАКЕТОМ ОБНОВЛЕНИЯ 1, 4|  
  
## <a name="see-also"></a>См. также  
 [Развертывание ClickOnce в Windows Vista](../deployment/clickonce-deployment-on-windows-vista.md)   
 [Публикация приложений ClickOnce](../deployment/publishing-clickonce-applications.md)   
 [Защита приложений ClickOnce](../deployment/securing-clickonce-applications.md)   
 [Развертывание компонентов COM с помощью ClickOnce](../deployment/deploying-com-components-with-clickonce.md)   
 [Построение приложений ClickOnce из командной строки](../deployment/building-clickonce-applications-from-the-command-line.md)   
 [Отладка ClickOnce-приложений, использующих System.Deployment.Application](../deployment/debugging-clickonce-applications-that-use-system-deployment-application.md)