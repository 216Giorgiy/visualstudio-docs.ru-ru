---
title: Создание пакетов начального загрузчика
ms.custom: ''
ms.date: 05/02/2018
ms.technology: vs-ide-deployment
ms.topic: conceptual
dev_langs:
- FSharp
- VB
- CSharp
- C++
helpviewer_keywords:
- deploying applications [Visual Studio], prerequisites
- deploying applications [Visual Studio], custom prerequisites
- prerequisites, custom
- RedistList file
- custom prerequisites
- redistributables list
ms.assetid: ba1a785b-693d-446b-bcae-b88cadee73d1
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: 80acb4dd08c9785d17187f6048d7133232b0bf6f
ms.sourcegitcommit: 8ee7efb70a1bfebcb6dd9855b926a4ff043ecf35
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/17/2018
ms.locfileid: "39078446"
---
# <a name="create-bootstrapper-packages"></a>Создание пакетов начального загрузчика
Программа установки — это общий установщик, который можно настроить на обнаружение и установку распространяемых компонентов, таких как установщик Windows (*.msi*) файлы и исполняемые программы. Установщик также называется начальным загрузчиком. Он программируется с помощью набора XML манифестов, определяющих метаданные для управления установкой компонента.  Каждый распространяемый компонент или необходимый компонент, который отображается в **предварительные требования** диалоговое окно по технологии ClickOnce — это пакет начального загрузчика. Пакет начальной загрузки — это группа директорий и файлов, в которых содержатся файлы манифеста, описывающие порядок установки необходимого компонента. 
  
Сначала начальный загрузчик проверяет, установлены ли необходимые компоненты. Если нет, то начальный загрузчик показывает лицензионные соглашения. Во-вторых после того как пользователь принимает лицензионные соглашения, начнется установка необходимых компонентов. Если все необходимые компоненты обнаружены, начальный загрузчик просто запустит установщик приложения.  
  
## <a name="create-custom-bootstrapper-packages"></a>Создать настраиваемые пакеты загрузчика  
Манифестов начального загрузчика можно создать с помощью редактора XML в Visual Studio. Пример создания пакета загрузчика см. в разделе [Пошаговое руководство: Создание пользовательского загрузчика с предупреждением о конфиденциальности](../deployment/walkthrough-creating-a-custom-bootstrapper-to-show-a-privacy-prompt.md).  
  
Чтобы создать пакет начального загрузчика, вы создание манифеста продукта и, для каждого локализованные версии компонента, а также манифест пакета.
  
* Манифест продукта *product.xml*, содержит все метаданные не зависящий от языка для пакета. Здесь находятся общие метаданные для всех локализованных версий распространяемого компонента.  Чтобы создать этот файл, см. в разделе [как: Create a Product Manifest](../deployment/how-to-create-a-product-manifest.md).
  
* Манифест пакета, *package.xml*, содержащий метаданные для конкретного языка; обычно они содержат локализованных сообщений об ошибках. Компонент должен содержать хотя бы один манифест пакета для каждой локализованной версии. Чтобы создать этот файл, см. в разделе [как: Create a Package Manifest](../deployment/how-to-create-a-package-manifest.md).
  
После создания этих файлов необходимо сохранить манифест продукта в папку с именем стандартного начального загрузчика. Файл манифеста пакета следует переместить в папку с именем языкового стандарта. Например, если манифест пакета создан для распространения на английском языке, то файл необходимо положить в папку с названием "en". Повторите эту процедуру для каждого языкового стандарта, например "ja" для японского языка и "de" для немецкого. Окончательный пользовательский пакет начального загрузчика может иметь следующую структуру папок.  

    ```xml
    CustomBootstrapperPackage
      product.xml
      CustomBootstrapper.msi
      de
        eula.rtf
        package.xml
      en
        eula.rtf
        package.xml
      ja
        eula.rtf
        package.xml
    ```
  
Затем скопируйте распространяемые файлы в папку начального загрузчика. Дополнительные сведения см. в разделе [как: Создание локализованного пакета загрузчика](../deployment/how-to-create-a-localized-bootstrapper-package.md).
 
    *\Program Files\Microsoft Visual Studio 14.0\SDK\Bootstrapper\Packages*
    
или  
    
    *\Program Files (x86)\Microsoft Visual Studio 14.0\SDK\Bootstrapper\Packages*
  
Определить расположение папки начального загрузчика можно по значению **Путь** в следующем разделе реестра:  
  
    *HKLM\Software\Microsoft\GenericBootstrapper\11.0*
  
В 64-разрядных системах используйте следующий раздел реестра:  
  
    *HKLM\Software\Wow6432Node\Microsoft\GenericBootstrapper\11.0*
  
Каждый распространяемый компонент создается в своей подпапке в каталоге пакетов. Продукт манифеста и распространяемые файлы необходимо поместить в эту папку. Локализованные версии манифестов компонента и пакета должны быть размещены в подпапки с именем, соответствующим названию культуры.  
  
После эти файлы будут скопированы в папку начального загрузчика, пакет начального загрузчика автоматически появится в Visual Studio **предварительные требования** диалоговое окно. Если ваш пользовательский пакет начального загрузчика не отображается, закройте и снова **предварительные требования** диалоговое окно. Дополнительные сведения см. в разделе [одноименном диалоговом окне](../ide/reference/prerequisites-dialog-box.md).  
  
В следующей таблице перечислены свойства, которые заполняются начальным загрузчиком автоматически.  
  
|Свойство|Описание|  
|--------------|-----------------|  
|ApplicationName|Имя приложения.|  
|ProcessorArchitecture|Процессор и количество бит на слово в платформе, для которой предназначен исполняемый файл. В эти значения входят:<br /><br /> -Intel<br />-IA64<br />-AMD64|  
|[Version9x](https://msdn.microsoft.com/en-us/library/aa372490\(v=vs.140\).aspx)|Номер версии для операционных систем Microsoft Windows 95, Windows 98 и Windows ME. Синтаксис версии — Major.Minor.ServicePack.|  
|[VersionNT](https://msdn.microsoft.com/en-us/library/aa372495\(v=vs.140\).aspx)|Номер версии для операционных систем Windows NT, Windows 2000, Windows XP, Windows Vista, Windows Server 2008 и Windows 7. Синтаксис версии — Major.Minor.ServicePack.|  
|[VersionMSI](https://msdn.microsoft.com/en-us/library/aa372493\(v=vs.140\).aspx)|Версия сборки установщика Windows (msi.dll) для запуска во время установки.|  
|[AdminUser](https://msdn.microsoft.com/en-us/library/aa367545\(v=vs.140\).aspx)|Данное свойство устанавливается, если пользователь имеет права администратора. Значения — true или false.|  
|InstallMode|Режим установки показывает, откуда должен быть установлен компонент. В эти значения входят:<br /><br /> -HomeSite: необходимые компоненты устанавливаются с веб-сайта поставщика.<br />-SpecificSite: необходимые компоненты устанавливаются из выбранного расположения.<br />-SameSite: необходимые компоненты устанавливаются в том же расположении, что и приложение.|  
  
## <a name="separate-redistributables-from-application-installations"></a>Отдельные распространяемых компонентов от установок приложения  
Размещение распространяемых файлов в проектах установки можно предотвратить. Для этого необходимо создать список распространяемых компонентов в папке RedistList каталога .NET Framework:  
  
`%ProgramFiles%\Microsoft.NET\RedistList`  
  
Список распространяемых компонентов — это XML-файл, которому необходимо присвоить имя, используя следующий формат:  *\<название организации >.\< Имя компонента >. RedistList.xml*. Таким образом, например, если компонент называется DataWidgets и разработан компанией Acme, использовать *Acme.DataWidgets.RedistList.xml*. Пример содержания списка распространяемых компонентов:  
  
```xml  
<?xml version="1.0" encoding="UTF-8"?>  
<FileList Redist="Acme.DataWidgets" >  
<File AssemblyName="Acme.DataGrid" Version="1.0.0.0" PublicKeyToken="b03f5f7f11d50a3a" Culture="neutral" ProcessorArchitecture="MSIL" InGAC="true" />  
</FileList>  
```  
  
## <a name="see-also"></a>См. также  
 [Практическое: Установка необходимых компонентов для приложения ClickOnce](../deployment/how-to-install-prerequisites-with-a-clickonce-application.md)   
 [Диалоговое окно необходимых компонентов](../ide/reference/prerequisites-dialog-box.md)   
 [Справочник по схеме продукта и пакета](../deployment/product-and-package-schema-reference.md)   
 [Используйте загрузчик Visual Studio 2005 для запуска установки](http://go.microsoft.com/fwlink/?LinkId=107537)
