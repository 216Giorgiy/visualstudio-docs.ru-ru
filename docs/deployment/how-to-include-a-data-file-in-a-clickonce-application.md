---
title: "Практическое руководство. Включение файла данных в приложение ClickOnce | Microsoft Docs"
ms.custom: ""
ms.date: "12/15/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-deployment"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
helpviewer_keywords: 
  - "развертывание ClickOnce, данные"
  - "доступ к данным, приложения ClickOnce"
  - "развертывание приложений [ClickOnce], файлы данных"
ms.assetid: 89ee46ef-bc8c-4ab0-a2ac-1220f9da06fc
caps.latest.revision: 15
caps.handback.revision: 15
author: "stevehoag"
ms.author: "shoag"
manager: "wpickett"
---
# Практическое руководство. Включение файла данных в приложение ClickOnce
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Каждому устанавливаемому приложению [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] назначается каталог данных на локальном диске конечного компьютера, где приложение может работать со своими данными.  Файлы данных могут содержать файлы любого типа: текстовые файлы, XML\-файлы или даже файлы \(.mdb\) базы данных Microsoft Access.  Добавление в приложение [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] файла данных любого типа показано в приводимых ниже процедурах.  
  
### Чтобы включить файл данных с помощью Mage.exe  
  
1.  Добавьте файл данных в каталог приложения с остальными файлами приложения.  
  
     Обычно каталогом приложения является каталог, помеченный текущей версией развертывания — например v1.0.0.0.  
  
2.  Обновите манифест приложения для включения в список файла данных.  
  
     **mage \-u v1.0.0.0\\Application.manifest \-FromDirectory v1.0.0.0**  
  
     При выполнении этой задачи вновь создается список файлов в манифесте приложения, а также автоматически генерируются хэш\-подписи.  
  
3.  Откройте манифест приложения в предпочитаемом редакторе, работающем с обычным текстом или XML\-данными, и найдите элемент `file` для недавно добавленного файла.  
  
     Если добавлен XML\-файл с именем `Data.xml`, файл будет выглядеть подобно следующему примеру кода.  
  
 `<file name="Data.xml" hash="23454C18A2DC1D23E5B391FEE299B1F235067C59" hashalg="SHA1" asmv2:size="39500" />`  
  
1.  Добавьте в этот элемент атрибут `type`, и передайте в него значение `data`.  
  
 `<file name="Data.xml" writeableType="applicationData" hash="23454C18A2DC1D23E5B391FEE299B1F235067C59" hashalg="SHA1" asmv2:size="39500" />`  
  
1.  Подпишите вновь манифест приложения, используя пару ключей или сертификат, а затем подпишите вновь манифест развертывания.  
  
     Манифест развертывания необходимо подписать заново, так как изменился его хэш\-код для манифеста приложения.  
  
     **mage \-s app manifest \-cf cert\_file \-pwd password**  
  
     **mage \-u deployment manifest \-appm app manifest**  
  
     **mage \-s deployment manifest \-cf certfile \-pwd password**  
  
### Чтобы включить файл данных с помощью MageUI.exe  
  
1.  Добавьте файл данных в каталог приложения с остальными файлами приложения.  
  
2.  Обычно каталогом приложения является каталог, помеченный текущей версией развертывания — например v1.0.0.0.  
  
3.  В меню **Файл** выберите команду **Открыть**, чтобы открыть манифест приложения.  
  
4.  Перейдите на вкладку **Файлы**.  
  
5.  В текстовом поле вверху вкладки введите каталог, который содержит файлы приложения, а затем щелкните **Заполнить**.  
  
     Файл данных появится в сетке.  
  
6.  Установите для файла данных параметр **Тип файла** равным значению **Данные**.  
  
7.  Сохраните манифест приложения, а затем вновь подпишите файл.  
  
     Программа MageUI.exe выведет запрос на подписание файла заново.  
  
8.  Заново подпишите манифест развертывания  
  
     Манифест развертывания необходимо подписать заново, так как изменился его хэш\-код для манифеста приложения.  
  
## См. также  
 [Доступ к локальным и удаленным данным в приложениях ClickOnce](../deployment/accessing-local-and-remote-data-in-clickonce-applications.md)