---
title: "Практическое руководство. Подписывание файлов установки с помощью программы SignTool.exe (ClickOnce) | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-deployment"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
helpviewer_keywords: 
  - "приложения ClickOnce, повторное подписывание setup.exe"
  - "приложения ClickOnce, signtool.exe"
  - "развертывание ClickOnce, повторное подписывание setup.exe"
  - "развертывание ClickOnce, signtool.exe"
  - "развертывание приложений [ClickOnce], повторное подписывание setup.exe"
ms.assetid: 545a4005-d283-4110-9821-c78a9833c250
caps.latest.revision: 8
caps.handback.revision: 8
author: "stevehoag"
ms.author: "shoag"
manager: "wpickett"
---
# Практическое руководство. Подписывание файлов установки с помощью программы SignTool.exe (ClickOnce)
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Чтобы подписать программу установки \(setup.exe\), можно использовать SignTool.exe.  Этот процесс позволяет проверить, не установлены ли на компьютер конечного пользователя измененные злоумышленниками файлы.  
  
 По умолчанию ClickOnce включает подписанные манифесты и подписанную программу установки.  Если вы собираетесь изменить параметры программы установки в дальнейшем, ее следует подписать позже.  Если вы измените параметры после того, как программа установки будет подписана, подпись будет повреждена.  
  
 В ходе описанной ниже процедуры генерируются неподписанные манифесты и неподписанная программа установки.  После этого в Visual Studio станет доступна процедура подписи приложений ClickOnce, позволяющая сгенерировать подписанные манифесты.  Программа установки остается неподписанной, чтобы клиент смог подписать исполняемый файл своим собственным сертификатом.  
  
### Генерирование неподписанной программы установки и ее последующая подпись  
  
1.  На компьютере разработчика установите сертификат для подписи манифестов.  
  
2.  Выберите проект в **Обозревателе решений**.  
  
3.  В меню **Проект** выберите пункт *Имя проекта* **Свойства**.  
  
4.  На странице **Подпись** снимите флажок **Подпись манифестов ClickOnce**.  
  
5.  На странице **Публикация** щелкните **Необходимые компоненты**.  
  
6.  Убедитесь, что все необходимые компоненты выбраны, и нажмите кнопку **ОК**.  
  
7.  На странице **Публикация** проверьте настройки публикации и нажмите кнопку **Опубликовать сейчас**.  
  
     Решение опубликует неподписанный манифест приложения, неподписанный манифест развертывания, файлы конкретной версии и неподписанную программу установки в расположение папки для публикации.  
  
8.  На странице **Публикация** щелкните **Необходимые компоненты**.  
  
9. В диалоговом окне **Необходимые компоненты** снимите флажок **Создать программу установки для необходимых компонентов**.  
  
10. На странице **Публикация** проверьте настройки публикации и нажмите кнопку **Опубликовать сейчас**.  
  
     Решение опубликует подписанный манифест приложения, подписанный манифест развертывания и файлы конкретной версии в расположение папки для публикации.  Неподписанная программа установки в процессе публикации не переписывается.  
  
11. На сайте клиента откройте командную строку.  
  
12. Перейдите в каталог, содержащий файл .EXE.  
  
13. Введите следующую команду, чтобы подписать файл .EXE:  
  
    ```  
    signtool sign /sha1 CertificateHash Setup.exe  
    signtool sign /f CertFileName Setup.exe  
    ```  
  
     Например, для подписи программы установки используются следующие команды:  
  
    ```  
    signtool sign /sha1 CCB... Setup.exe  
    signtool sign /f CertFileName Setup.exe  
    ```  
  
## См. также  
 [Практическое руководство. Повторное подписание манифестов приложения и развертывания](../deployment/how-to-re-sign-application-and-deployment-manifests.md)