---
title: 'Как: знак установки файлов с SignTool.exe (ClickOnce) | Документы Microsoft'
ms.custom: ''
ms.date: 11/04/2016
ms.technology: vs-ide-deployment
ms.topic: conceptual
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- ClickOnce applications, signtool.exe
- deploying applications [ClickOnce], re-signing setup.exe
- ClickOnce deployment, signtool.exe
- ClickOnce applications, re-signing setup.exe
- ClickOnce deployment, re-signing setup.exe
ms.assetid: 545a4005-d283-4110-9821-c78a9833c250
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: dc4dc7b2f96b1d36e91e8114458a7a8e9f3231f3
ms.sourcegitcommit: 42ea834b446ac65c679fa1043f853bea5f1c9c95
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/19/2018
ms.locfileid: "31566125"
---
# <a name="how-to-sign-setup-files-with-signtoolexe-clickonce"></a>Практическое руководство. Подписывание файлов установки с помощью программы SignTool.exe (ClickOnce)
Чтобы подписать программу установки (setup.exe), можно использовать SignTool.exe. Этот процесс позволяет проверить, не установлены ли на компьютер конечного пользователя измененные злоумышленниками файлы.  
  
 По умолчанию ClickOnce включает подписанные манифесты и подписанную программу установки. Если вы собираетесь изменить параметры программы установки в дальнейшем, ее следует подписать позже. Если вы измените параметры после того, как программа установки будет подписана, подпись будет повреждена.  
  
 В ходе описанной ниже процедуры генерируются неподписанные манифесты и неподписанная программа установки. После этого в Visual Studio станет доступна процедура подписи приложений ClickOnce, позволяющая сгенерировать подписанные манифесты. Программа установки остается неподписанной, чтобы клиент смог подписать исполняемый файл своим собственным сертификатом.  
  
### <a name="to-generate-an-unsigned-setup-program-and-sign-later"></a>Генерирование неподписанной программы установки и ее последующая подпись  
  
1.  На компьютере разработчика установите сертификат для подписи манифестов.  
  
2.  Выберите проект в **обозревателе решений**.  
  
3.  На **проекта** меню, нажмите кнопку *ProjectName* **свойства**.  
  
4.  В **подписывание** снимите **подписать манифесты ClickOnce**.  
  
5.  В **публикации** щелкните **необходимых компонентов**.  
  
6.  Убедитесь, что выбраны все необходимые компоненты и нажмите кнопку **ОК**.  
  
7.  В **публикации** , проверьте настройки публикации и нажмите кнопку **Опубликовать сейчас**.  
  
     Решение опубликует неподписанный манифест приложения, неподписанный манифест развертывания, файлы конкретной версии и неподписанную программу установки в расположение папки для публикации.  
  
8.  В **публикации** щелкните **необходимых компонентов**.  
  
9. В **необходимые компоненты** снимите флажок **создать программу установки для необходимых компонентов**.  
  
10. В **публикации** , проверьте настройки публикации и нажмите кнопку **Опубликовать сейчас**.  
  
     Решение опубликует подписанный манифест приложения, подписанный манифест развертывания и файлы конкретной версии в расположение папки для публикации. Неподписанная программа установки в процессе публикации не переписывается.  
  
11. На сайте клиента откройте командную строку.  
  
12. Перейдите в каталог, содержащий файл .EXE.  
  
13. Введите следующую команду, чтобы подписать файл .EXE:  
  
    ```  
    signtool sign /sha1 CertificateHash Setup.exe  
    signtool sign /f CertFileName Setup.exe  
    ```  
  
     Например, для подписи программы установки используются следующие команды:  
  
    ```  
    signtool sign /sha1 CCB... Setup.exe  
    signtool sign /f CertFileName Setup.exe  
    ```  
  
## <a name="see-also"></a>См. также  
 [Практическое руководство. Повторное подписание манифестов приложения и развертывания](../deployment/how-to-re-sign-application-and-deployment-manifests.md)