---
title: 'Пошаговое руководство: отладка таблицы стилей XSLT'
ms.date: 11/04/2016
ms.prod: visual-studio-dev15
ms.technology: vs-xml-tools
ms.topic: conceptual
ms.assetid: 3db9fa5a-f619-4cb6-86e7-64b364e58e5d
author: gewarren
ms.author: gewarren
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: ebc8e8f8700690a2ae74fcc91384fb77b238ea33
ms.sourcegitcommit: 0aafcfa08ef74f162af2e5079be77061d7885cac
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2018
ms.locfileid: "34693400"
---
# <a name="walkthrough-debug-an-xslt-style-sheet"></a>Пошаговое руководство: Отладка таблицы стилей XSLT

Шаги в данном пошаговом руководстве демонстрируют, как использовать XSLT-отладчик. Шаги включают просмотр переменных, задание точек останова и пошаговое прохождение кода. Таблица стилей находит все книги, которые стоят меньше средней цены книги.

## <a name="to-prepare-for-this-walkthrough"></a>Чтобы подготовиться к выполнению данного пошагового руководства

1.  Закройте все открытые решения.

2.  Скопируйте два файла с образцами на локальный компьютер.

## <a name="start-debugging"></a>Начать отладку

### <a name="to-start-debugging"></a>Начало отладки

1.  Из **файл** последовательно выберите пункты **откройте**и нажмите кнопку **файл**.

2.  Найдите *belowAvg.xsl* файла и нажмите кнопку **откройте**.

     Таблица стиля откроется в XML-редакторе.

3.  Нажмите кнопку обзора (**...** ) на **ввода** окна свойств документа.

4.  Найдите *books.xml* файла и нажмите кнопку **откройте**.

     Таким образом задается файл исходного документа, используемого в XSLT-преобразовании.

5.  Щелкните правой кнопкой мыши `xsl:if` открывающего тега, укажите **останова**и нажмите кнопку **вставить точку останова**.

6.  Нажмите кнопку **Отладка XSL** на панели инструментов редактора XML.

Это запускает процесс отладки и открывает несколько новых окон, которые используются отладчиком.

Входной документ и таблица стиля отображаются в двух окнах. Отладчик использует эти окна, чтобы показывать текущее состояние выполнения. Отладчик располагается на `xsl:if` элемент таблицы стилей и на первом узле книги в *books.xml* файла.

**Локальные** окне отображаются все локальные переменные и их текущие значения. Сюда относятся переменные, определенные в таблице стиля, а также переменные, используемые отладчиком для отслеживания узлов, которые в настоящий момент находятся в контексте.

**Выходного XSL** отображает результат XSL-преобразования. Это окно будет отдельно от **вывода Visual Studio** окна.

## <a name="watch-window"></a>Контрольные значения - окно

### <a name="to-use-the-watch-window"></a>Использование окна просмотра значений

1.  Из **отладки** последовательно выберите пункты **Windows**, пункты **Контрольные значения**и нажмите кнопку **Контрольные значения 1**.

     Это делает **Контрольные значения 1** окно видимым.

2.  Тип `$bookAverage` в **имя** поле и нажмите клавишу **ввод**.

     В окне отобразится значение переменной `$bookAverage`.

3.  Тип `self::node()` в **имя** поле и нажмите клавишу **ввод**.

     `self::node()` является выражением XPath, которое вычисляется до текущего узла контекста. Значение `self::node()` выражения XPath является первым узлом книги. Оно меняется по мере прохождения преобразования.

4.  Раскройте узел `self::node()`, а затем узел `price`.

     Это позволяет увидеть значение цены книги, и его можно легко сравнить со значением `$bookAverage`. Так как цена книги ниже средней, условие `xsl:if` должно выполняться.

## <a name="step-through-the-code"></a>Пошаговое выполнение кода
 Отладчик позволяет выполнять код по одной строке.

### <a name="to-step-through-the-code"></a>Пошаговое прохождение кода

1.  Чтобы продолжить выполнение, нажмите клавишу **F5**.

     Так как первый узел книги удовлетворяет `xsl:if` , узел книги добавляется условие **выходного XSL** окна. Отладчик продолжает выполнение, пока не будет вновь достигнут элемент `xsl:if` в таблице стилей. Теперь отладчик располагается на втором узле книги в *books.xml* файла.

     В **Контрольные значения 1** окна `self::node()` значение изменяется на второй узел книги. Проверив значение элемента цены, можно определить, что цена выше средней; таким образом, условие `xsl:if` не выполняется.

2.  Чтобы продолжить выполнение, нажмите клавишу **F5**.

     Так как второй узел книги удовлетворяет `xsl:if` , узел книги не добавляется условие **выходного XSL** окна. Отладчик продолжает выполнение, пока не будет вновь достигнут элемент `xsl:if` в таблице стилей. Теперь отладчик располагается на третьем `book` узел в *books.xml* файла.

     В **Контрольные значения 1** окна `self::node()` значение изменяется на третий узел книги. Проверив значение элемента `price`, можно определить, что цена ниже средней; таким образом, условие `xsl:if` выполняется.

3.  Чтобы продолжить выполнение, нажмите клавишу **F5**.

     Поскольку `xsl:if` условие выполняется, третья книга добавляется **выходного XSL** окна. Все книги в XML-документе обработаны, отладчик прекращает выполнение.

## <a name="sample-files"></a>Образцы файлов

В этом пошаговом руководстве используются следующие два файла.

### <a name="belowavgxsl"></a>belowAvg.xsl

```xml
<?xml version='1.0'?>
<xsl:stylesheet version="1.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" encoding="utf-8"/>
  <xsl:template match="/">
    <xsl:variable name="bookCount" select="count(/bookstore/book)"/>
    <xsl:variable name="bookTotal" select="sum(/bookstore/book/price)"/>
    <xsl:variable name="bookAverage" select="$bookTotal div $bookCount"/>
    <books>
      <!--Books That Cost Below Average-->
      <xsl:for-each select="/bookstore/book">
        <xsl:if test="price < $bookAverage">
          <xsl:copy-of select="."/>
        </xsl:if>
      </xsl:for-each>
    </books>
  </xsl:template>
</xsl:stylesheet>
```

### <a name="booksxml"></a>books.xml

```xml
<?xml version='1.0'?>
<!-- This file represents a fragment of a book store inventory database -->
<bookstore>
  <book genre="autobiography" publicationdate="1981" ISBN="1-861003-11-0">
    <title>The Autobiography of Benjamin Franklin</title>
    <author>
      <first-name>Benjamin</first-name>
      <last-name>Franklin</last-name>
    </author>
    <price>8.99</price>
  </book>
  <book genre="novel" publicationdate="1967" ISBN="0-201-63361-2">
    <title>The Confidence Man</title>
    <author>
      <first-name>Herman</first-name>
      <last-name>Melville</last-name>
    </author>
    <price>11.99</price>
  </book>
  <book genre="philosophy" publicationdate="1991" ISBN="1-861001-57-6">
    <title>The Gorgias</title>
    <author>
      <name>Plato</name>
    </author>
    <price>9.99</price>
  </book>
</bookstore>
```

## <a name="see-also"></a>См. также

- [Отладка XSLT](../xml-tools/debugging-xslt.md)