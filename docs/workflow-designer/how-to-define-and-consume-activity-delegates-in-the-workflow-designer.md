---
title: "Как: определение и использование делегатов действий в конструкторе рабочих процессов | Документы Microsoft"
ms.date: 11/04/2016
ms.topic: reference
ms.assetid: c68e42ad-3ec0-4c2d-b104-fe36c6d83b5e
ms.author: gewarren
manager: ghogen
ms.workload:
- multiple
author: gewarren
ms.openlocfilehash: d5f1a84983156e1e12c2407b1d128511eb27284f
ms.sourcegitcommit: 37c87118f6f41e832da96f21f6b4cc0cf8fee046
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2018
---
# <a name="how-to-define-and-consume-activity-delegates-in-the-workflow-designer"></a>Как определить и использовать делегатов действий в конструкторе рабочих процессов
[!INCLUDE[net_v45](../ide/includes/net_v45_md.md)] содержит новый готовый конструктор для действия <xref:System.Activities.Statements.InvokeDelegate>. Данный конструктор можно использовать в целях назначения делегатов для действия, производного от <xref:System.Activities.ActivityDelegate>, такого как <xref:System.Activities.ActivityAction> или <xref:System.Activities.ActivityFunc%601>.  
  
### <a name="define-an-activity-delegate"></a>Укажите делегат действия  
  
1.  В [!INCLUDE[vs_current_short](../code-quality/includes/vs_current_short_md.md)]выберите **файл**, **New**, **проекта**. Выберите **рабочего процесса** узел слева, а **консольное приложение рабочего процесса** справа шаблон. Имя проекта (при необходимости) и нажмите кнопку **ОК**.  
  
2.  Правой кнопкой мыши проект в **обозревателе решений** и выберите **добавить**, **новый элемент...** . Выберите **рабочего процесса** слева, узел и **действия** справа шаблон. Имя нового действия **MyForEach.xaml** и нажмите кнопку **ОК**. Действие откроется в конструкторе рабочих процессов.  
  
3.  В конструкторе рабочих процессов щелкните **аргументы** вкладки.  
  
4.  Нажмите кнопку **создать аргумент**. Назовите новый аргумент **элементы**.  
  
5.  В **тип аргумента** выберите **массив [T]**.  
  
6.  В браузере типов выберите **объекта**. Click **Ok**.  
  
7.  Нажмите кнопку **создать аргумент** еще раз. Назовите новый аргумент **текст**. В **направление** столбец для нового аргумента выберите **свойства**.  
  
8.  В столбце типа аргумента выберите **поиск типов...**  
  
9. В браузере типов введите **ActivityAction** в **имя типа** поля. Выберите **ActivityAction\<T >** в древовидном представлении. Выберите **объекта** в раскрывающемся списке, который появляется в целях присваивания типа **ActivityAction\<объекта >** к аргументу.  
  
10. Перетащите <xref:System.Activities.Statements.While> действия из **поток управления** области элементов в область конструктора.  
  
11. Выберите <xref:System.Activities.Statements.While> действия, а затем выберите **переменных** вкладки.  
  
12. Выберите **создания переменной**. Имя новой переменной **индекса**.  
  
13. В **тип переменной** выберите **Int32**. Оставить **область** как **при**и **по умолчанию** пустой столбец.  
  
14. Задать **условие** свойство <xref:System.Activities.Statements.While> действие **индекс < Items.Length;**.  
  
15. Перетащите <xref:System.Activities.Statements.InvokeDelegate> действия из **примитивы** области элементов в **текст** из <xref:System.Activities.Statements.While> действия.  
  
16. Выберите **текст** в раскрывающемся списке делегата.  
  
17. В **свойства** сетки для <xref:System.Activities.Statements.InvokeDelegate> действия, нажмите кнопку **...**  кнопку в **аргументов делегата** свойство.  
  
18. В **значение** столбца аргумента с именем **аргумент**, введите **Items [Index]**. Нажмите кнопку **ОК** закрыть **DelegateArguments** диалогового окна.  
  
19. Перетащите действие <xref:System.Activities.Statements.Assign> на горизонтальную линию под действием <xref:System.Activities.Statements.InvokeDelegate>. <xref:System.Activities.Statements.Assign> Создается действие и <xref:System.Activities.Statements.Sequence> действия создается автоматически для размещения двух действий в **текст** раздел **MyForEach** действия. Требуется последовательность, так как **текст** раздел может содержать только одно действие. Автоматическое создание нового действия <xref:System.Activities.Statements.Sequence> - это новая функция [!INCLUDE[net_v45](../ide/includes/net_v45_md.md)].  
  
20. Задать **для** свойство <xref:System.Activities.Statements.Assign> действие **индекса**. Задать **значение** свойство **назначить** действие **index + 1**.  
  
 Пользовательский **MyForEach** действия теперь будет вызывать по одному произвольному действию один раз для каждого значения, переданного с помощью **элементы** коллекции со значениями в коллекцию в качестве входных данных для действия.  
  
### <a name="use-the-custom-activity-in-a-workflow"></a>Использование настраиваемого действия в рабочем процессе  
  
1.  Постройте проект, нажав клавишу **Ctrl + Shift + B**.  
  
2.  В **обозревателе решений**откройте **Workflow1.xaml** в конструкторе.  
  
3.  Перетащите **MyForEach** действия из области элементов в область конструктора. Действие находится в разделе области элементов с тем же именем, что и проект.  
  
4.  Задать **элементы** свойство **MyForEach** действие **new Object [] {1, «abc»}**.  
  
5.  Перетащите <xref:System.Activities.Statements.WriteLine> действия из **примитивы** области элементов в **Delegate: текст** раздел **MyForEach** действия.  
  
6.  Задать **текст** свойство <xref:System.Activities.Statements.WriteLine> действие **Argument.ToString()**.  
  
 При выполнении рабочего процесса в консоли отобразится следующее:  
  
 **1**   
**abc**