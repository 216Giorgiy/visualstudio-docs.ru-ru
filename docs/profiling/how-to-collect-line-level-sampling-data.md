---
title: "Практическое руководство. Выборка данных на уровне строк | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "средства повышения производительности, выборка на уровне строк"
ms.assetid: 44803aad-dd39-4c2e-9209-d35185d44983
caps.latest.revision: 22
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
caps.handback.revision: 22
---
# Практическое руководство. Выборка данных на уровне строк
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Выборка на уровне строк — это возможность профилировщика определять, в каком месте кода функции, требующей значительных ресурсов процессора, например функции с большим количеством эксклюзивных данных выборки, процессору приходится тратить наибольшее количество времени.  
  
## Обзор  
 При выборке на уровне строк профилировщик обходит стек вызова программы через регулярные интервалы времени и выполняет статистические вычисления для полученных результатов.  Эти результаты показывают, какие инструкции выполнялись процессором в момент сбора данных.  Затем собранные эксклюзивные данные выборки анализируются, чтобы определить строки кода и значения указателя инструкций \(IP\).  
  
 Выборку на уровне строк можно применять как для управляемого, так и для машинного кода.  Отчеты о производительности, в которых отображаются эти данные, содержат представление строк и представление модулей.  
  
 Сведения о знаках начала и конца недоступны для машинного кода.  В случае многострочных операторов сведения о начальной строке недоступны для машинного кода — можно получить только сведения о конечной строке.  
  
### Доступные данные  
 Доступные данные выборки уровня строк включают следующие сведения.  
  
-   Имя функции.  
  
-   Адрес функции.  
  
-   Начало строки — номер строки профилируемого кода.  
  
-   Конец строки — номер конечной строки исходного кода.  Это значение обычно совпадает с "началом строки" за исключением случаев, когда один оператор языка программирования занимает несколько строк исходного кода программы.  
  
-   Начальный знак — начальная позиция статистических данных выборки.  Это значение обычно равняется нулю за исключением случаев, когда в одной строке исходного кода программы содержатся несколько операторов языка программирования.  
  
-   Конечный знак — конечная позиция статистических данных выборки.  
  
-   Указатель инструкций — адрес, в котором были собраны статистические данные выборки \(только в представлении указателя инструкций\).  
  
 Если в представлении **Модули** для функций отображаются статистические данные на уровне строк, эта статистика представлена под каждой функцией.  Кроме того, под каждой строкой отображаются статистические данные на уровне указателя инструкций.  
  
### Отключение выборки на уровне строк для управляемого кода  
 По умолчанию выборка на уровне строк включена.  Чтобы отключить сбор данных на уровне строк для управляемого кода, выполните следующие действия.  
  
-   Перед началом профилирования введите команду VSPerfCLREnv \/samplelineoff.  Эта команда распространяется на приложения и службы.  
  
     либо  
  
-   При запуске приложения введите команду VSPerfCmd \/lineoff \<другие аргументы\>.  
  
## См. также  
 [Настройка сеансов анализа производительности](../profiling/configuring-performance-sessions.md)   
 [Анализ данных средств профилирования](../profiling/analyzing-performance-tools-data.md)