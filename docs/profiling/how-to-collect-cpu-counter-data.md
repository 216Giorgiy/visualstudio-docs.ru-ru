---
title: "Практическое руководство. Сбор данных счетчика ЦП с помощью метода инструментирования | Microsoft Docs"
ms.custom: ""
ms.date: "12/16/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "vs.performance.property.cpucounters"
helpviewer_keywords: 
  - "средства профилирования, использование переносных счетчиков ЦП"
  - "средства профилирования, переносные счетчики ЦП"
ms.assetid: 102fb6ca-5fbf-4b05-925f-56912ce3f44b
caps.latest.revision: 21
caps.handback.revision: 21
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
---
# Практическое руководство. Сбор данных счетчика ЦП с помощью метода инструментирования
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Счетчик событий ЦП используется для сбора данных о производительности конкретного оборудования.  В этом разделе показано, как собирать данные от счетчика событий при использовании метода профилирования с инструментированием.  
  
 **Требования**  
  
-   [!INCLUDE[vsUltLong](../code-quality/includes/vsultlong_md.md)], [!INCLUDE[vsPreLong](../code-quality/includes/vsprelong_md.md)], [!INCLUDE[vsPro](../code-quality/includes/vspro_md.md)]  
  
 Предусмотрено два типа событий счетчиков ЦП.  
  
-   Переносимые события — это события ЦП, которые могут регистрироваться независимо от конкретного ЦП.  
  
-   Платформозависимые свойства — это события ЦП, который привязаны к конкретному ЦП.  
  
 К переносимым событиям относятся события общего назначения, например "Удаленные инструкции" и "Не остановлены циклы", события, которые связаны с буфером ЦП, события ветвления и события кэша уровня 2.  Доступные счетчики событий платформы определяются изготовителем процессора.  
  
 Одни и те же категории событий могут распространяться на счетчики как переносимых, так и платформозависимых событий.  Например, следующие категории данных часто используются для событий обоих типов.  
  
-   События памяти.  
  
-   События внешнего интерфейса.  
  
-   События ветви.  
  
 Профилировщик обеспечивает два способа сбора данных счетчиков производительности.  
  
-   При профилировании с инструментированием собирайте данные от одного или нескольких счетчиков.  
  
-   Указывайте событие счетчика в качестве интервала выборки при профилировании с выборкой.  Для получения дополнительной информации см. [Практическое руководство. Выбор событий выборки](../Topic/How%20to:%20Choose%20Sampling%20Events.md).  
  
### Сбор данных счетчика производительности ЦП при профилировании с помощью инструментирования  
  
1.  На **Странице свойств** сеанса производительности щелкните **Счетчики ЦП**.  
  
2.  Установите флажок **Сбор данных счетчиков ЦП**.  
  
3.  Разверните дерево **Доступные счетчики производительности**, чтобы найти события выборки, которые следует собирать.  
  
4.  Для каждого из событий, которые требуется собирать, выделите событие и нажмите на стрелку вправо, чтобы добавить событие в список **Выбранные счетчики**.  
  
    > [!NOTE]
    >  Дерево **Доступные счетчики** становится активным, только если установить флажок **Сбор данных счетчиков ЦП**.  
  
## См. также  
 [Настройка сеансов анализа производительности](../profiling/configuring-performance-sessions.md)   
 [Свойства сеанса анализа производительности](../profiling/performance-session-properties.md)   
 [Счетчики ЦП и Windows](../profiling/cpu-and-windows-counters.md)   
 [Практическое руководство. Выбор событий выборки](../Topic/How%20to:%20Choose%20Sampling%20Events.md)