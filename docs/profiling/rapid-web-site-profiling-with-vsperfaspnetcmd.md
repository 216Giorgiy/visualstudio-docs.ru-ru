---
title: "Быстрое профилирование веб-сайтов с помощью средства VSPerfASPNETCmd | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "средства профилирования, VSPerfASPNETCmd"
  - "VSPerfASPNETCmd"
ms.assetid: 9a9d62a6-549a-45ac-a948-76eb98586ac5
caps.latest.revision: 16
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
caps.handback.revision: 16
---
# Быстрое профилирование веб-сайтов с помощью средства VSPerfASPNETCmd
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Программа командной строки **VSPerfASPNETCmd** позволяет без труда профилировать веб\-приложения [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)].  У этой программы меньше параметров по сравнению с программой командной строки [VSPerfCmd](../profiling/vsperfcmd.md), в ней не нужно задавать переменные среды и не требуется перезагрузка компьютера.  Программу **VSPerfASPNETCmd** предпочтительнее использовать для профилирования с помощью отдельного профилировщика.  Для получения дополнительной информации см. [Практическое руководство. Установка изолированного профилировщика](../profiling/how-to-install-the-stand-alone-profiler.md).  
  
> [!NOTE]
>  Функции усиленной безопасности в Windows 8 и Windows Server 2012 требуют значительных изменений в способе сбора данных профилировщиком Visual Studio на этих платформах.  Для Приложений Магазина Windows также требуются новые методы сбора.  См. раздел [Профилирование приложений для Windows 8 и Windows Server 2012](../profiling/performance-tools-on-windows-8-and-windows-server-2012-applications.md).  
  
 В некоторых сценариях, например при сборе данных о параллелизме или в случае приостановки и возобновления профилирования, более предпочтительным методом профилирования является использование **VSPerfCmd**.  
  
> [!NOTE]
>  Программы командной строки средств профилирования расположены в подкаталоге \\Team Tools\\Performance Tools каталога установки [!INCLUDE[vs_current_short](../code-quality/includes/vs_current_short_md.md)].  На 64\-разрядных компьютерах следует использовать программу VSPerfASPNETCmd, расположенную в 32\-битном каталоге \\Team Tools\\Performance Tools.  Для использования программ командной строки профилировщика необходимо добавить путь к этим программам в переменную среды PATH окна командной строки или указать этот путь при вызове команды.  Для получения дополнительной информации см. [Указание пути к средствам командной строки](../profiling/specifying-the-path-to-profiling-tools-command-line-tools.md).  
  
## Профилирование приложения ASP.NET  
 Для профилирования веб\-приложения [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] введите одну из команд, описанных в следующих разделах.  Будет запущен веб\-сайт, и профилировщик начнет собирать данные.  Запустите приложение, а затем закройте браузер.  Чтобы остановить профилирование, нажмите клавишу Enter в окне командной строки.  
  
> [!NOTE]
>  По умолчанию командная строка после команды **vsperfaspnetcmd** не возвращается.  Для принудительного возврата командной строки можно воспользоваться командой **\/nowait**.  См. [Использование параметра /NoWait](#UsingNoWait).  
  
## Сбор статистики приложения с помощью метода выборки  
 Выборка – это метод профилирования, используемый по умолчанию в программе **VSPerfASPNETCmd**, который не нужно задавать в командной строке.  Следующая командная строка позволяет собрать статистику для заданного веб\-приложения:  
  
 **vsperfaspnetcmd**  *websiteUrl*  
  
## Сбор подробных данных о времени с помощью метода инструментирования  
 С помощью следующей командой строки можно собрать подробные данные о времени в динамически компилируемом веб\-приложении [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)]:  
  
 **vsperfaspnetcmd \/trace**  *websiteUrl*  
  
 Для профилирования статически скомпилированных DLL\-файлов в веб\-приложении следует инструментировать файлы с помощью программы командной строки [VSInstr](../profiling/vsinstr.md).  Команда vsperfaspnetcmd \/trace позволяет включить данные из инструментированных файлов.  
  
## Сбор данных памяти .NET  
 Параметр **\/Memory** позволяет собирать данные о выделении объектов в памяти .NET, а также сведения о времени существования этих объектов.  Сбор данных о выделении – это режим, используемый по умолчанию для параметра данных **\/Memory**, который не нужно задавать в командной строке.  
  
 **vsperfaspnetcmd \/memory** *websiteUrl*  
  
 Чтобы в дополнение к данным о выделении собрать данные о времени существования объекта, воспользуйтесь параметром **Lifetime**:  
  
 **vsperfaspnetcmd \/memory:lifetime** *websiteUrl*  
  
 Кроме того, можно воспользоваться параметром **\/Trace** для включения подробных данных о времени вместе с данными о памяти .NET:  
  
 **vsperfaspnetcmd \/memory**\[**:lifetime**\] **\/trace** `websiteUrl`  
  
## Сбор данных об уровневом взаимодействии  
  
> [!WARNING]
>  Данные профилирования уровневого взаимодействия \(TIP\) можно собирать с помощью [!INCLUDE[vsUltLong](../code-quality/includes/vsultlong_md.md)], [!INCLUDE[vsPreLong](../code-quality/includes/vsprelong_md.md)] или [!INCLUDE[vs_pro_current_short](../profiling/includes/vs_pro_current_short_md.md)].  Однако данные профилирования уровневого взаимодействия можно просматривать только в [!INCLUDE[vsUltLong](../code-quality/includes/vsultlong_md.md)] и [!INCLUDE[vsPreLong](../code-quality/includes/vsprelong_md.md)].  
>   
>  Для сбора данных TIP в Windows 8 или Windows Server 2012 необходимо использовать параметр инструментирования \(**\/trace**\).  
  
 Чтобы собрать данные об уровневом взаимодействии вместе с данными выборки, воспользуйтесь командной строкой:  
  
 **vsperfaspnetcmd \/tip** `websiteUrl`  
  
 Чтобы собрать данные об уровневом взаимодействии вместе с данными инструментирования, воспользуйтесь командной строкой:  
  
 **vsperfaspnetcmd \/trace \/tip** *websiteUrl*  
  
 Чтобы собрать данные об уровневом взаимодействии вместе с данными о памяти .NET, воспользуйтесь командной строкой:  
  
 **vsperfaspnetcmd \/memory**\[**:lifetime**\] **\/tip** *websiteUrl*  
  
##  <a name="UsingNoWait"></a> Использование параметра \/NoWait  
 По умолчанию командная строка после команды **vsperfaspnetcmd** не возвращается.  Для принудительного возврата командной строки можно воспользоваться следующим синтаксисом.  Затем в окне командной строки можно выполнить другие операции.  Для завершения профилирования воспользуйтесь параметром **\/shutdown** в отдельной команде **vsperfaspnetcmd**.  
  
 Чтобы начать профилирование, воспользуйтесь следующей командной строкой:  
  
 **vsperfaspnetcmd** \[*\/Options*\] **\/nowait** *websiteUrl*  
  
 Для завершения профилирования воспользуйтесь следующей командной строкой:  
  
 **vsperfaspnetcmd \/shutdown** *websiteUrl*  
  
## Дополнительные параметры  
 Во все команды, перечисленные ранее в этом разделе, за исключением команды **vsperfaspnetcmd \/shutdown**, можно добавить любой из следующих параметров.  
  
|Команда|Описание|  
|-------------|--------------|  
|**\/Output:** `VspFile`|По умолчанию файл данных профилирования \(VSP\) создается в текущем каталоге с именем файла **PerformanceReport.vsp**.  Параметр \/output позволяет задать другое расположение, имя файла или и то, и другое.|  
|**\/PackSymbols:Off**|По умолчанию VsPerfASPNETCmd встраивает символы \(имена функций и параметров и т. п.\) в VSP\-файл.  Встраивание символов может привести к существенному увеличению файла данных профилирования.  При обращении к PDB\-файлам, содержащим такие символы, в процессе анализа данных следует воспользоваться параметром \/packsymbols:off, чтобы отключить встраивание символов.|