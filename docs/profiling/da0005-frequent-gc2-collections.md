---
title: "DA0005: частые коллекции GC2 | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "vs.performance.DA0005"
  - "vs.performance.rules.DAManyGC2Collections"
  - "vs.performance.5"
  - "vs.performance.rules.DA0005"
ms.assetid: 8d3f267c-8a74-4cf4-91a5-0b06a76dc2bd
caps.latest.revision: 11
caps.handback.revision: 11
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
---
# DA0005: частые коллекции GC2
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

|||  
|-|-|  
|Идентификатор RuleId|DA0005|  
|Категория|Использование .NET Framework|  
|Метод профилирования|Память .NET|  
|Сообщение|Многие из ваших объектов собираются в поколении 2 сборки мусора.|  
|Тип сообщения|Предупреждение|  
  
## Причина  
 В процессе сборки мусора 2\-го поколения было удалено большое число объектов памяти .NET.  
  
## Описание правила  
 Среда CLR Microsoft .NET обеспечивает автоматический механизм управления памятью, который использует сборщик мусора для удаления из памяти объектов, более не используемых приложением.  Работа сборщика мусора основана на понятии поколений и предположении о краткосрочном характере выделения памяти.  Например, время существования локальных переменных должно быть небольшим.  Поколение новых объектов начинается с 0 \(поколение 0\), затем они переходят в поколение 1, если они сохраняются после сборки мусора, и, наконец, в поколение 2, если они все еще используются приложением.  
  
 Объекты поколения 0 собираются часто и обычно очень эффективно.  Объекты поколения 1 собираются менее часто и менее эффективно.  Наконец, сбор объектов с большим временем существования из поколения 2 должен происходить еще реже.  Сборка поколения 2, т. е. полная сборка мусора, также является наиболее ресурсоемкой операцией.  
  
 Это правило применяется при слишком большом относительном количестве операций сборок мусора поколения 2.  Если слишком много объектов с относительно небольшим временем существования остаются после сборки поколения 1, однако при этом их удается собрать в процессе полной сборки поколения 2, затраты на управление памятью могут легко оказаться слишком высокими.  Дополнительные сведения см. в [Mid\-life crisis](http://go.microsoft.com/fwlink/?LinkId=177835) в Rico Mariani's Performance Tidbits на веб\-сайте MSDN.  
  
## Анализ предупреждения  
 Ознакомьтесь с отчетами [Представления данных в памяти .NET](../profiling/dotnet-memory-data-views.md), чтобы разобраться со структурой выделения памяти в приложении.  Воспользуйтесь [Представление "Время существования объектов"](../profiling/object-lifetime-view.md), чтобы определить объекты данных программы, которые остаются в поколении 2, а затем из него удаляются.  Воспользуйтесь [Представление выделения](../profiling/dotnet-memory-allocations-view.md), чтобы определить путь выполнения, который привел к таким выделениям.  
  
 Сведения о том, как повысить производительность сборки мусора, см. в разделе [Garbage Collector Basics and Performance Hints](http://go.microsoft.com/fwlink/?LinkId=148226) на веб\-сайте корпорации Майкрософт.  Дополнительные сведения о дополнительных затратах на автоматическую сборку мусора см. в статье [Large Object Heap Uncovered](http://go.microsoft.com/fwlink/?LinkId=177836).