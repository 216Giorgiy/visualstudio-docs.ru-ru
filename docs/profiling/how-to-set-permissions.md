---
title: "Практическое руководство. Установка разрешений профилирования | Microsoft Docs"
ms.custom: ""
ms.date: "12/16/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "профилирование, установка разрешений"
  - "безопасность [Visual Studio ALM], установка разрешений"
  - "разрешения [Visual Studio ALM], профилирование"
  - "средства профилирования, установка разрешений профилирования"
  - "средства повышения производительности, установка разрешений профилирования"
ms.assetid: 69f27896-8f46-4ef3-bfb7-726d95304f3a
caps.latest.revision: 23
caps.handback.revision: 23
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
---
# Практическое руководство. Установка разрешений профилирования
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

В этом разделе описывается процесс предоставления администратором компьютера разрешений безопасности, необходимых для профилирования, тем пользователям и группам, которые не обладают правами администратора на этом компьютере.  
  
 Основной принцип безопасности утверждает, что при выполнении приложению должны предоставляться только те разрешения, которые ей действительно необходимы.  Этот принцип применим и к пользователям.  Если пользователи могут эффективно работать как члены группы "Пользователи", а не "Администраторы"; им не следует предоставлять права администратора.  В первой процедуре, "Создание учетной записи с разрешениями группы "Пользователи"", описывается, как создать учетную запись для участника группы "Пользователи".  
  
 **Требования**  
  
-   [!INCLUDE[vsUltLong](../code-quality/includes/vsultlong_md.md)], [!INCLUDE[vsPreLong](../code-quality/includes/vsprelong_md.md)], [!INCLUDE[vsPro](../code-quality/includes/vspro_md.md)]  
  
 Членам группы "Пользователи" необходим доступ к папкам и файлам на диске, являющимся общими для всех участников рабочей группы.  Во второй процедуре, "Предоставление доступа к общим файлам проекта", описывается порядок предоставления доступа.  
  
 Члены группы "Пользователи" могут запускать средства профилирования в том случае, если администратор предоставил им доступ к программному драйверу для этих средств.  В последней процедуре, "Предоставление доступа к драйверу профилирования", описывается порядок предоставления доступа к этому драйверу.  
  
> [!NOTE]
>  Для выполнения действий данной процедуры требуются права администратора.  
  
### Создание учетной записи с разрешениями группы "Пользователи"  
  
1.  Щелкните правой кнопкой мыши **Мой компьютер**, затем выберите пункт **Управление**.  
  
     Откроется окно **Управление компьютером**.  
  
2.  Разверните узел **Локальные пользователи и группы**.  
  
3.  Щелкните правой кнопкой мыши папку **Пользователи** и выберите пункт **Новый пользователь**.  
  
     Откроется диалоговое окно **Новый пользователь**.  
  
4.  Заполните поля этого диалогового окна данными создаваемой учетной записи.  Укажите пароль.  Можно установить флажок с требованием сменить пароль при следующем входе в систему.  
  
5.  Нажмите кнопку **Создать**, а затем кнопку **Закрыть**.  
  
     Созданный пользователь появится в группе "Пользователи", которой не предоставлены права администратора.  
  
### Предоставление доступа к общим файлам проекта  
  
1.  В проводнике перейдите к корневой папке файлов проекта, совместно используемых данным пользователем и всеми участниками группы проекта.  
  
     Путь к этой папке может выглядеть следующим образом:  
  
    ```  
    D:\ourProject  
    ```  
  
2.  Щелкните правой кнопкой мыши папку и выберите пункт **Свойства**.  
  
     Откроется диалоговое окно **Свойства \<имя\_папки\>**.  
  
3.  Перейдите на вкладку **Безопасность**.  
  
4.  В поле **Группы или пользователи** щелкните имя учетной записи пользователя.  
  
5.  В поле **Разрешения для \<имя\_пользователя\>** установите флажок **Полный доступ**.  
  
6.  Нажмите кнопку **ОК**.  
  
     При этом пользователю будут предоставлены разрешения на доступ к дереву общих папок, которое начинается с папки, выбранной на шаге 5.  
  
### Предоставление доступа к драйверу профилирования  
  
1.  Откройте командную строку от имени учетной записи администратора.  
  
2.  Перейдите в каталог:  
  
    ```  
    <drive>:\Program Files\Microsoft Visual Studio 10\Team Tools\Performance Tools  
    ```  
  
3.  Выполните следующую команду:  
  
    ```  
    vsperfcmd /admin:driver,start /admin:service,start  
    ```  
  
     Данная команда устанавливает и запускает драйвер для средств профилирования.  
  
     Драйвер и служба профилирования запускаются таким образом, что пользователи без прав администратора могут использовать функции профилирования, доступные в пространстве их пользовательских процессов.  Данная команда может выполняться только администратором; при запуске команды от имени пользователя без прав администратора возникает ошибка.  
  
     Обратите внимание, что, если не выполнить заключительный шаг данной процедуры, результат выполнения данного шага исчезает после перезапуска компьютера.  
  
4.  Выполните команду, чтобы предоставить доступ к функциям драйвера профилирования пользователю или группе, которые не обладают правами администратора компьютера.  
  
    ```  
    vsperfcmd /admin:security,allow,<right[,right],<user name|group name>  
    ```  
  
     При этом учетной записи \<имя пользователя\> или \<имя группы\> предоставляется доступ к средствам профилирования.  Параметр \<right\> определяет функциональность профилирования, к которой предоставляется доступ.  Параметр \<right\> может иметь одно или несколько из следующих значений.  
  
    -   FullAccess. Доступ предоставляется ко всем методам профилирования, включая сбор данных о производительности служб, профилированию с выборкой и профилированию в нескольких сеансах.  
  
    -   SampleProfiling. Доступ предоставляется к методам профилирования с выборкой.  
  
    -   CrossSession. Доступ предоставляется к средствам профилирования в нескольких сеансах, которые требуются для профилирования работы служб.  
  
5.  \(Необязательно\) Чтобы сохранить результаты выполнения всех предыдущих шагов после перезапуска компьютера, выполните следующую команду:  
  
    ```  
    vsperfcmd /admin:driver,autostart,on  
    ```  
  
 После входа в систему указанные пользователи смогут пользоваться средствами профилирования без прав администратора.  
  
## См. также  
 [Настройка сеансов анализа производительности](../profiling/configuring-performance-sessions.md)   
 [VSPerfCmd](../profiling/vsperfcmd.md)   
 [Профилирование и безопасность Windows Vista](../profiling/profiling-and-windows-vista-security.md)