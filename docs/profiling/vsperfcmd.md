---
title: "VSPerfCmd | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "командная строка, средства"
  - "средства командной строки, VSPerfCmd - средство"
  - "средства повышения производительности, VSPerfCmd - средство"
  - "средства профилирования, VSPerfCmd"
  - "VSPerfCmd - средство"
ms.assetid: 778bc105-7643-46c4-a338-f3620e31125a
caps.latest.revision: 49
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
caps.handback.revision: 49
---
# VSPerfCmd
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Средство **VSPerfCmd.exe** используется для запуска и остановки сбора данных о производительности.  Для этого используется следующий синтаксис.  
  
```  
VSPerfCmd [/U] [/options]  
```  
  
 В следующих таблицах описываются параметры средства **VSPerfCmd.exe**.  
  
|Команда|Описание|  
|-------------|--------------|  
|**U**|Перенаправленный вывод на консоль записывается в кодировке Юникода.  Этот параметр необходимо указывать первым.|  
|[Запуск](../profiling/start.md) **:** `mode`|Запускает службу профилирования в заданном режиме.|  
|[Output](../profiling/output.md) **:** `filename`|Задает имя выходного файла.  Используйте только с **Start**.|  
|[CrossSession&#124;CS](../profiling/crosssession.md)|Включает профилирование в нескольких сеансах Windows.  Используйте только с **Start**, **Attach**, **or Launch**.|  
|[Пользователь](../profiling/user-vsperfcmd.md) **:**\[`domain\`\]`username`|Включает доступ к службе профилировщика для заданной учетной записи.  Используйте только с **Start**.|  
|[WaitStart](../profiling/waitstart.md)\[**:**`n`\]|Ожидает инициализации средство ведения журнала сбора данных.  Если указано значение `n`, средство **VSPerfCmd** будет ожидать не более `n` секунд.  Если значение `n` не указано, средство **VSPerfCmd** ожидает в течение неограниченного периода.  Это упрощает использование средства **VSPerfCmd** в составе пакетного процесса.|  
|[Счетчик](../profiling/counter.md) **:** `cfg`|При использовании метода профилирования с выборкой указывает на счетчик ЦП и количество событий, которое должно использоваться в качестве интервала выборки.  Можно указать только одно значение счетчика.<br /><br /> При использовании метода профилирования с инструментированием указывает на счетчик ЦП, значение которого требуется собирать в каждой точке инструментирования.  Используйте только с **Start:**`Trace`, **Attach**,или **Launch**.|  
|[Параметр QueryCounters](../profiling/querycounters.md)|Отображение списка допустимых счетчиков ЦП для текущего компьютера.|  
|[WinCounter](../profiling/wincounter.md) **:** *path*|Задает событие счетчика производительности Windows, которое следует включить в данные меток профилирования.  Используйте только с **Start**.|  
|[Параметр AutoMark](../profiling/automark.md) **:** *n*|Задает интервал времени \(в миллисекундах\) между событиями сбора данных счетчика производительности Windows.  Используйте с **WinCounter**.|  
|[События](../profiling/events-vsperfcmd.md) **:** `option`|Управляет получением заданной трассировки событий Windows.  Данные трассировки событий Windows собираются в файл ITL, который отличается от файлов данных профилирования \(VSP\).|  
|[Состояние](../profiling/status.md)|Отображает состояние профилировщика, сведения о профилируемых в настоящий момент процессах и учетные записи, которые имеют разрешения на управление профилировщиком.|  
|[Shutdown](../profiling/shutdown.md)\[**:**`n`\]|Закрывает файл данных профилирования и отключает профилировщик.|  
|[GlobalOn](../profiling/globalon-and-globaloff.md)|Возобновляет сбор данных после вызова **VSPerfCmd GlobalOff**.|  
|[GlobalOff](../profiling/globalon-and-globaloff.md)|Останавливает сбор всех данных, но не завершает сеанс профилирования.|  
|[ProcessOn](../profiling/processon-and-processoff.md) **:** `pid`|Возобновляет сбор данных для заданного процесса, после того как профилирование было приостановлено путем вызова **VSPerfCmd ProcessOff**.|  
|[ProcessOff](../profiling/processon-and-processoff.md) **:** `pid`|Останавливает сбор данных для заданного процесса.|  
|[Параметры ThreadOn и ThreadOff](../profiling/threadon-and-threadoff.md) **:** *tid*|Возобновляет профилирование для заданного процесса, после того как профилирование было приостановлено путем вызова **VSPerfCmd ThreadOff**.  Используйте параметр **ThreadOn** только при профилировании методом инструментирования.|  
|[Параметры ThreadOn и ThreadOff](../profiling/threadon-and-threadoff.md) **:** *tid*|Приостанавливает профилирование для заданного потока.  Используйте параметр **ThreadOff** только при профилировании методом инструментирования.|  
|[Метка](../profiling/mark.md) **:** *MarkNum*\[**,***MarkText***\]**|Вставляет метку с необязательным текстом в файл данных профилирования.|  
  
## Параметры метода профилирования с выборкой  
 Следующие параметры доступны только при использовании метода профилирования с выборкой.  
  
|Команда|Описание|  
|-------------|--------------|  
|[Запуск](../profiling/launch.md) **:** *Executable*|Запускает заданное приложение и начинает профилирование.|  
|[Args](../profiling/args.md) **:** *Arguments*|Задает аргументы командной строки для передачи в запущенное приложение.|  
|[Параметр Console](../profiling/console.md)|Запускает указанную команду в новом окне командной строки.|  
|[Attach](../profiling/attach.md) **:** *PID*\[**,***PID*\]|Начинает профилирование указанного процесса.  Процессы можно задавать с помощью идентификатора или имени процесса.|  
|[Detach](../profiling/detach.md)\[**:***PID*\[,*PID*\]\]|Останавливает профилирование указанного процесса.  Процессы можно задавать с помощью идентификатора или имени процесса.  Если процесс не указан, профилирование останавливается для всех процессов.|  
|[GC](../profiling/gc-vsperfcmd.md)\[**:**{**Allocation** `&#124;` **Lifetime**}\]|Собирает данные о выделении памяти для объектов .NET и времени их существования.  Используйте только с **VSPerfCmd Launch**.|  
  
### Параметры интервала выборки  
 Следующие параметры определяют тип и продолжительность интервалов выборки.  Значение по умолчанию — **Timer**.  Кроме того, можно с помощью параметра **Counter** задать в качестве интервала счетчик ЦП.  Эти параметры можно задавать только с параметром **Launch** или с первым параметром **Attach** сеанса профилирования.  
  
|Команда|Описание|  
|-------------|--------------|  
|[Параметр PF](../profiling/pf.md)\[**:***n*\]|Выборка осуществляется на каждой n\-ой  ошибке страницы \(значение по умолчанию\=10\).|  
|[Sys](../profiling/sys-vsperfcmd.md)\[**:***n*\]|Выборка осуществляется при каждом n\-ом системном вызове \(значение по умолчанию\=10\).|  
|[Timer](../profiling/timer.md)\[**:***n*\]|Выборка осуществляется на каждом n\-ом цикле процессора \(значение по умолчанию\=10000000\).|  
  
## Параметры компонентов служб и драйверов устройств, работающих в режиме ядра  
 Перечисленные ниже параметры Admin поддерживают компоненты служб профилирования или работающие в режиме ядра драйверы устройств.  Параметры Admin задают разрешения профилирования и управляют профилируемой службой или драйвером устройства.  
  
 Параметры Admin следует использовать в командной строке, работающей от имени учетной записи с правами администратора.  
  
|Команда|Описание|  
|-------------|--------------|  
|**Admin:Security** \<**ALLOW&#124;DENY**\> *Right*\[ *Right*\] \<*User*&#124;*Group*\>|Запрет или разрешение доступа к службам профилирования для указанного пользователя или группы.<br /><br /> Параметр `Right` может принимать следующие значения:<br /><br /> CrossSession — предоставляет пользователю доступ к службе для выполнения профилирования в нескольких сеансах.<br /><br /> SampleProfiling — предоставляет пользователю доступ к драйверу для включения профилирования с выборкой;  также используется для доступа к сведениям о переходе в режим ядра и выходе из этого режима во время профилирования с трассировкой.<br /><br /> FullAccess — предоставляет пользователю права, определяемые параметрами CrossSession и SampleProfiling.|  
|**Admin:Security, List**|Создает список текущих состояний служб профилирования и разрешений пользователей.|  
|**Admin:**  `` \<*Service*&#124;*Driver*\>\<**START**&#124;**STOP**&#124;**INSTALL**&#124;**UNINSTALL**\>|Запуск, остановка, установка или удаление службы профилирования \(service\) или работающего в режиме ядра драйвера устройства \(driver\).|  
|**Admin:**  `` \<*Service*&#124;*Driver*\>**AutoStart** `` \<**ON**&#124;**OFF**\>|Включение или выключение автоматического запуска службы профилирования \(service\) или работающего в режиме ядра драйвера устройства \(driver\) после перезапуска системы.|  
  
## VSPerfCmd \/Driver  
 Параметр **VSPerfCmd \/Driver** устарел.  Вместо него следует использовать параметры **VsPerfCmd Admin**.  
  
## См. также  
 [VSInstr](../profiling/vsinstr.md)   
 [VSPerfMon](../profiling/vsperfmon.md)   
 [VSPerfReport](../profiling/vsperfreport.md)