---
title: "Отладка кода GPU | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: vs-ide-debug
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- CSharp
- VB
- FSharp
- C++
ms.assetid: c7e77a5a-cb57-4b11-9187-ecc89acc8775
caps.latest.revision: "20"
author: mikejo5000
ms.author: mikejo
manager: ghogen
ms.openlocfilehash: eac4799bec68b275586512dcf0b55fffa7484a90
ms.sourcegitcommit: f40311056ea0b4677efcca74a285dbb0ce0e7974
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2017
---
# <a name="debugging-gpu-code"></a>Отладка кода GPU
Можно выполнять отладку кода C++, который выполняется в графическом процессоре (GPU). Поддержка отладки GPU в Visual Studio включает обнаружение состояния гонки, запуск процессов и присоединение к ним, а также интеграцию с окнами отладчика.  
  
## <a name="supported-platforms"></a>Поддерживаемые платформы  
 Поддерживается отладка в [!INCLUDE[win7](../debugger/includes/win7_md.md)], [!INCLUDE[win8](../debugger/includes/win8_md.md)], [!INCLUDE[winsvr08_r2](../debugger/includes/winsvr08_r2_md.md)] и [!INCLUDE[winserver8](../debugger/includes/winserver8_md.md)]. Для отладки в программном эмуляторе требуется [!INCLUDE[win8](../debugger/includes/win8_md.md)] или [!INCLUDE[winserver8](../debugger/includes/winserver8_md.md)]. Для отладки на оборудовании необходимо установить драйверы для видеокарты. Не все производители оборудования реализуют полный набор функций для отладки. См. информацию об ограничениях в документации производителя.  
  
> [!NOTE]
>  Независимые производители оборудования, желающие реализовать поддержку отладки GPU в Visual Studio, должны создать библиотеку DLL, реализующую интерфейс VSD3DDebug для взаимодействия с драйверами производителей.  
  
## <a name="configuring-gpu-debugging"></a>Настройка отладки GPU  
 Отладчик не может прерывать выполнение одновременно кода ЦП и кода GPU при работе одного приложения. По умолчанию отладчик прерывает выполнение кода ЦП. Для отладки кода GPU следует выполнить одно из указанных ниже действий.  
  
-   В **тип отладки** списке **Стандартная** инструментов, выберите **только графический Процессор**.  
  
-   В **обозревателе решений**, в контекстном меню проекта выберите **свойства**. В **страницы свойств** установите флажок **Отладка**, а затем выберите **только графический Процессор** в **тип отладчика** списка.  
  
## <a name="launching-and-attaching-to-applications"></a>Запуск приложений и присоединение к ним  
 Для запуска и остановки отладки GPU можно использовать команды отладки Visual Studio. Дополнительные сведения см. в статье [Навигация по коду с помощью отладчика](../debugger/navigating-through-code-with-the-debugger.md). Можно также присоединить отладчик GPU к выполняющемуся процессу, но лишь при условии, что этот процесс выполняет код GPU. Дополнительные сведения см. в разделе [присоединение к процессу под управлением](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md).  
  
## <a name="run-current-tile-to-cursor-and-run-to-cursor"></a>Команды "Выполнить текущий Tile до курсора" и "Выполнить до текущей позиции"  
 При отладке кода GPU существуют два варианта выполнения кода до текущего положения курсора. Команды для обоих вариантов доступны в контекстном меню редактора кода.  
  
1.  **Выполнить до текущей позиции** команда приложение выполняется до достижения текущей позиции курсора и приостанавливается. Это не означает, что текущий поток будет выполнен до позиции курсора. Инициировать приостановку выполнения может любой поток, который первым достигнет текущего положения курсора. В разделе [Навигация по коду с помощью отладчика](../debugger/navigating-through-code-with-the-debugger.md)  
  
2.  **Выполнить текущий Tile до курсора** команда приложение выполняется, пока все потоки в текущий tile не достигнут курсора и разрывов.  
  
## <a name="debugging-windows"></a>Окна отладки  
 С помощью некоторых окон отладки можно просматривать, помечать и замораживать потоки GPU. Дополнительные сведения:  
  
-   [Использование окна "Параллельные стеки"](../debugger/using-the-parallel-stacks-window.md)  
  
-   [Использование окна задач](../debugger/using-the-tasks-window.md)  
  
-   [Практическое руководство. Использование окна контроля параллельных данных](../debugger/how-to-use-the-parallel-watch-window.md)  
  
-   [Отладка потоков и процессов](../debugger/debug-threads-and-processes.md) (панель инструментов "Место отладки")  
  
-   [Практическое руководство. Использование окна потоков GPU](../debugger/how-to-use-the-gpu-threads-window.md)  
  
## <a name="data-synchronization-exceptions"></a>Исключения синхронизации данных  
 Отладчик может распознавать несколько условий синхронизации данных во время выполнения. При обнаружении условия отладчик переходит в состояние приостановки выполнения. У вас есть два варианта —**прервать** или **Продолжить**. С помощью **исключения** диалоговое окно, можно определить, нужно ли отладчик распознавать эти условия, а также какие условия будет нарушено для. Дополнительные сведения см. в разделе [Управление исключениями с помощью отладчика](../debugger/managing-exceptions-with-the-debugger.md). Можно также использовать **параметры** диалоговое окно «», чтобы указать, что отладчик должен игнорировать исключения, если данные, записываемые не изменяют значения данных. Дополнительные сведения см. в разделе [Общие, отладка, диалоговое окно «Параметры»](../debugger/general-debugging-options-dialog-box.md).  
  
## <a name="troubleshooting"></a>Устранение неполадок  
  
### <a name="specifying-an-accelerator"></a>Определение ускорителя  
 Точки останова в коде GPU которые срабатывают только в том случае, если код выполняется на [accelerator::direct3d_ref](/cpp/parallel/amp/reference/accelerator-class.md#accelerator__direct3d_ref_Data_Member) сочетаний клавиш (REF). Если ускоритель в коде не указывается, как автоматически выбран ускоритель REF **тип ускорителя отладки** в свойствах проекта. Если ускоритель явным образом указывается непосредственно в коде, ускоритель REF во время отладки использоваться не будет и точки останова не будут распознаваться, если только поддержка отладки не предусмотрена в самом оборудовании GPU. Выходом из этой ситуации может быть создание собственного кода, который будет использовать ускоритель REF во время отладки. Дополнительные сведения см. в разделе свойств проекта и [использование объектов accelerator и accelerator_view](/cpp/parallel/amp/using-accelerator-and-accelerator-view-objects) и [параметры проекта для конфигурации отладки C++](../debugger/project-settings-for-a-cpp-debug-configuration.md).  
  
### <a name="conditional-breakpoints"></a>Условные точки останова  
 Условные точки останова в коде GPU поддерживаются, но не каждое выражение может быть вычислено на устройстве. Если выражение не может быть вычислено на устройстве, оно вычисляется в отладчике. Отладчик, вероятно, работает медленнее, чем устройство.  
  
### <a name="error-there-is-a-configuration-issue-with-the-selected-debugging-accelerator-type"></a>Ошибка: Возникла проблема конфигурации с выбранным типом акселератора отладки.  
 Эта ошибка возникает, если значения параметров проекта не соответствуют конфигурации компьютера, на котором производится отладка. Дополнительные сведения см. в разделе [параметры проекта для конфигурации отладки C++](../debugger/project-settings-for-a-cpp-debug-configuration.md).  
  
### <a name="error-the-debug-driver-for-the-selected-debugging-accelerator-type-is-not-installed-on-the-target-machine"></a>Ошибка: На целевом компьютере не установлен драйвер отладки для выбранного типа акселератора отладки.  
 Эта ошибка происходит при отладке на удаленном ПК. Пока не будет начато выполнение, отладчик не может определить, установлены ли драйверы на удаленном ПК. Драйверы предоставляются производителем видеоадаптера.  
  
### <a name="error-timeout-detection-and-recovery-tdr-must-be-disabled-at-the-remote-site"></a>Ошибка: На удаленном сайте необходимо отключить механизм обнаружения и исправления зависания во время ожидания (TDR).  
 При выполнении вычислений C++ AMP существует вероятность превышения контрольного времени ожидания, установленного предусмотренным в Windows механизмом обнаружения и исправления зависаний (TDR). При возникновении этой ошибки вычисления прекращаются и данные утрачиваются. Дополнительные сведения см. в разделе [TDRs обработки в C++ AMP](http://go.microsoft.com/fwlink/p/?LinkId=249154).  
  
## <a name="see-also"></a>См. также  
 [Пошаговое руководство: Отладка приложения C++ AMP](/cpp/parallel/amp/walkthrough-debugging-a-cpp-amp-application)   
 [Параметры проекта для конфигурации отладки C++](../debugger/project-settings-for-a-cpp-debug-configuration.md)   
 [Запуск отладки GPU в Visual Studio](http://go.microsoft.com/fwlink/p/?LinkId=255381)