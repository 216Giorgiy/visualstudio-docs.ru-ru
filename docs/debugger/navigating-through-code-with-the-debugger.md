---
title: "Навигация по коду с помощью отладчика | Microsoft Docs"
ms.custom: ""
ms.date: "12/08/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "hero-article"
f1_keywords: 
  - "vs.debug.execution"
dev_langs: 
  - "FSharp"
  - "VB"
  - "CSharp"
  - "C++"
  - "JScript"
helpviewer_keywords: 
  - "отладка [Visual Studio], управление выполнением"
  - "выполнение, управление в отладчике"
  - "пошаговое выполнение"
ms.assetid: 759072ba-4aaa-447e-8e51-0dd1456fe896
caps.latest.revision: 42
caps.handback.revision: 28
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
---
# Навигация по коду с помощью отладчика
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Существует множество способов для перемещения по коду в отладчике: методы шага с обходом и выполнения по шагам, выполнение до точки останова или указанного расположения, а также указание того, нужно ли ограничить отладку своим собственным кодом или включить символы для отладки внешнего кода.  
  
##  <a name="BKMK_Step_into__over__or_out_of_the_code"></a> Выполнение шагов с заходом в код, с обходом кода или выходом из него  
 Одной из наиболее распространенных процедур отладки является *пошаговое выполнение*. При пошаговом выполнении код выполняется по одной строке за раз. Во время остановки выполнения, например при достижении отладчиком точки останова, можно осуществлять пошаговое выполнение кода с помощью трех команд меню **Отладка**.  
  
|Команда меню|Сочетание клавиш|Описание|  
|------------------|----------------------|--------------|  
|**Шаг с заходом**|**F11**|Если строка содержит вызов функции, команда **Шаг с заходом** выполняет только сам вызов, а затем останавливает выполнение в первой строке кода внутри функции. В противном случае команда **Шаг с заходом** выполняет следующий оператор.|  
|**Шаг с обходом**|**F10**|Если строка содержит вызов функции, команда **Шаг с обходом** выполняет вызываемую функцию, а затем останавливает выполнение в первой строке кода внутри вызывающей функции. В противном случае команда **Шаг с заходом** выполняет следующий оператор.|  
|**Шаг с выходом**|**Shift\+F11**|Команду **Шаг с выходом** возобновляет выполнение кода до возврата функции, а затем прерывает выполнение в точке возврата вызывающей функции.|  
  
-   При вызове вложенных функций команда **Шаг с заходом** позволяет попасть в самую глубокую вложенную функцию. Если использовать **Шаг с заходом** на вызове `Func1(Func2())`, отладчик заходит в функцию `Func2`.  
  
-   Отладчик фактически осуществляет пошаговое выполнение операторов кода, а не физических строк. Например, предложение `if` может быть записано в одной строке:  
  
    ```c#  
    int x = 42;  
    string s = "Not answered";  
    if( int x == 42) s = "Answered!";  
    ```  
  
    ```vb  
    Dim x As Integet = 42  
    Dim s As String = "Not answered"  
    If x = 42 Then s = "Answered!"  
    ```  
  
     При пошаговом выполнении этой строки отладчик обрабатывает условие как один шаг, а следствие как другой \(в этом примере условие выполняется\).  
  
 Сведения о визуальном отслеживании стека вызовов при выполнении шагов с заходом в функции см. в статье [Сопоставление методов в визуализации стека вызовов при отладке](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md).  
  
##  <a name="BKMK_Break_into_code_by_using_breakpoints_or_Break_All"></a> Приостановка выполнения кода с помощью точек остановка или команды "Прервать все"  
 Во время отладки приложения с помощью отладчика VS приложение может либо выполняться, либо находиться в режиме приостановки выполнения.  
  
 Отладчик прерывает выполнение приложения, когда достигается точка останова или возникает исключение. Можно также прервать выполнение вручную в любой момент времени.  
  
 Точка останова — это сигнал, который указывает отладчику временно остановить выполнение приложения в определенной точке. Приостановка выполнения программы в точке останова называется режимом приостановки. Вход в режим приостановки выполнения не приводит к прекращению или завершению работы программы, поэтому выполнение программы может быть продолжено в любое время.  
  
 Многие возможности отладчика, такие как просмотр значений переменных в окне локальных переменных или вычисление выражений в окне контрольных значений, доступны только в режиме приостановки. В этом режиме все элементы приложения, например функции, переменные и объекты, сохраняются в памяти, но их перемещения и действия приостанавливаются. Во время режима приостановки выполнения можно выполнить поиск ошибок и нарушений целостности данных, проверив положения элементов и их состояние. В режиме приостановки выполнения можно также внести корректировки в приложение.  
  
 Точки останова можно настроить таким образом, чтобы приостанавливать выполнение на основе ряда условий. См. раздел [Использование точек останова](../debugger/using-breakpoints.md). В этом разделе описаны два основных способа приостановки выполнения кода.  
  
1.  **Задание точек останова в коде**  
  
     Для установки простой точки останова в коде откройте исходный файл в редакторе Visual Studio. Поместите курсор в строку кода, на которой требуется приостановить выполнение, и выберите пункты **Точка останова**, **Вставить точку останова** в контекстном меню \(на клавиатуре: **F9**\). Отладчик приостанавливает выполнение непосредственно перед выполнением указанной строки.  
  
     ![Задание точки останова](~/debugger/media/dbg_basics_setbreakpoint.png "DBG\_Basics\_SetBreakpoint")  
  
     Точки останова в Visual Studio предоставляют широкий набор дополнительных функций, таких как условные точки останова и точки трассировки. См. раздел [Использование точек останова](../debugger/using-breakpoints.md).  
  
2.  **Приостановка выполнения кода вручную**  
  
     Чтобы приостановить выполнение на следующей доступной строке кода в выполняющемся приложении, выберите **Отладка**, **Прервать все** \(на клавиатуре: **Ctrl\+Alt\+Break**\).  
  
-   При отладке с включенным параметром "только мой код" приостановка происходит на следующей строке кода в вашем проекте. См. раздел [Пошаговое выполнение "только моего кода"](#BKMK_Restrict_stepping_to_Just_My_Code).  
  
-   При отладке нескольких программ команда Приостановить все или точка останова по умолчанию влияет на выполнение всех отлаживаемых программ. См. раздел [Настройка поведения выполнения нескольких процессов](../debugger/debug-multiple-processes.md#BKMK_Configure_the_execution_behavior_of_multiple_processes).  
  
-   Если во время приостановки выполнения кода отсутствуют соответствующие исходные файлы или файлы символов \(PDB\-файлы\), отладчик отображает страницу **Исходный файл не найден** или **Символы не найдены**, которая поможет найти необходимые файлы. См. раздел [Указание файлов символов \(.pdb\) и файлов с исходным кодом](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).  
  
     Если у вас нет доступа к вспомогательным файлам, можно выполнить отладку инструкций на языке ассемблера в окне "Дизассемблирование".  
  
##  <a name="BKMK_Run_to_a_specified_location_or_function"></a> Выполнение до указанного расположения или функции  
 Иногда необходимо осуществить выполнение до определенного места в коде, а затем сделать остановку. Если вы установили точку останова в место, где требуется приостановить выполнение, выберите **Отладка**, **Начать отладку**, если отладка еще не запущена, или **Отладка**, **Продолжить** \(в обоих случаях можно нажать клавишу **F5**\). При выполнении кода отладчик останавливается в следующей точке останова. Выбирайте команду **Отладка**, **Продолжить**, пока не будет достигнута требуемая точка останова.  
  
 Можно также осуществлять выполнение до места, где установлен курсор в редакторе кода, или до указанной функции.  
  
 **Выполнение до расположения курсора**  
  
 Чтобы осуществить выполнение до расположения курсора, поместите курсор в исполняемую строку кода в окне исходного кода. В контекстном меню редактора выберите команду **Выполнить до текущей позиции**.  
  
 **Выполнение до функции в стеке вызовов**  
  
 Выберите функцию в окне **Стек вызовов** и щелкните команду **Выполнить до текущей позиции** в контекстном меню. Сведения о визуальном отслеживании стека вызовов см. в статье [Сопоставление методов в визуализации стека вызовов при отладке](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md).  
  
 **Выполнение до функции, указанной по имени**  
  
 Можно дать команду отладчику на выполнение приложения до тех пор, пока не будет достигнута заданная функция. Можно задать функцию по имени или выбрать ее из стека вызовов.  
  
 Чтобы указать функцию по имени, последовательно выберите **Отладка**, **Создать точку останова**, **Прервать в функции**, а затем введите имя функции и другие идентификационные сведения.  
  
 ![Диалоговое окно «Создать точку останова»](../debugger/media/dbg_execution_newbreakpoint.png "DBG\_Execution\_NewBreakpoint")  
  
 Если функция перегружается или находится в нескольких пространствах имен, необходимые функции можно выбрать в диалоговом окне **Выбор точек останова**.  
  
 ![Диалоговое окно «Выбор точек останова»](~/debugger/media/dbg_execution_overloadedbreakpoints.png "DBG\_Execution\_OverloadedBreakpoints")  
  
##  <a name="BKMK_Set_the_next_statement_to_execute"></a> Задание следующего оператора для выполнения  
 Приостановив выполнение в отладчике, можно переместить точку выполнения, чтобы задать следующий оператор кода для выполнения. Желтая стрелка на границе исходного текста или в окне "Дизассемблированный код" отмечает текущее расположение оператора, который должен быть выполнен следующим. Посредством перемещения этой стрелки можно пропустить часть кода или вернуться к строке, выполненной ранее. Это можно использовать при возникновении таких ситуаций, как пропуск раздела кода, содержащего известную ошибку.  
  
 ![Example2](~/debugger/media/dbg_basics_example2.png "DBG\_Basics\_Example2")  
  
 Чтобы задать следующий оператор для выполнения, воспользуйтесь одной из следующих процедур.  
  
-   В окне исходного кода перетащите желтую стрелку в то место этого же исходного файла, где необходимо задать следующий оператор.  
  
-   В окне исходного кода установите курсор в строке, которую требуется выполнить следующей, и выберите в контекстном меню команду **Задать следующий оператор**.  
  
-   В окне "Дизассемблирование" установите курсор на инструкцию ассемблера, которую требуется выполнить следующей, и выберите в контекстном меню команду **Задать следующий оператор**.  
  
> [!CAUTION]
>  Установка следующего оператора заставит программный счетчик инструкций перейти непосредственно на новое место. Следует применять эту команду с осторожностью.  
>   
>  -   Инструкции между старой и новой точками не выполняются.  
> -   При перемещении точки выполнения обратно, промежуточные инструкции не отменяются.  
> -   Перемещение следующего оператора на другую функцию или область обычно приводит к повреждению стека вызова, вызывая ошибку времени выполнения или исключение. При попытке перемещения следующего оператора в другую область, отладчик открывает диалоговое окно с предупреждением и предоставляет возможность отменить операцию. В Visual Basic нельзя переместить следующий оператор на другую область или функцию.  
> -   Если при использовании машинного кода C\+\+ включены проверки времени выполнения, установка следующего оператора может вызвать исключение, когда выполнение достигнет конца метода.  
> -   При включенной операции "Изменить и продолжить" команда **Задать следующий оператор** завершится неудачей, если вы внесете изменения, которые операция "Изменить и продолжить" не сможет немедленно применить. Например, это может произойти, если были внесены изменения внутри блока catch. При возникновении такой ситуации появится сообщение об ошибке, указывающее, что операция не поддерживается.  
  
> [!NOTE]
>  В управляемом коде нельзя перемещать следующий оператор в следующих случаях:  
>   
>  -   Следующий оператор находится в методе, отличном от метода текущего оператора.  
> -   Отладка была запущена через JIT–отладку.  
> -   Выполняется очистка стека вызова.  
> -   Вызвано исключение System.StackOverflowException или System.Threading.ThreadAbortException.  
  
 Нельзя устанавливать следующий оператор, если приложение выполняется. Чтобы задать следующий оператор, отладчик должен находиться в режиме приостановки.  
  
##  <a name="BKMK_Restrict_stepping_to_Just_My_Code"></a> Пошаговое выполнение "только моего кода"  
 Иногда во время отладки может потребоваться отображать только код, созданный самостоятельно, и пропускать другой код, например, системные вызовы. Для этого существует возможность отладки в режиме "Только мой код". В режиме "Только мой код" код, написанный не пользователем, скрывается и не отображается в окнах отладчика. При пошаговом выполнении отладчик проходит любой код, написанный не пользователем, но не останавливается в нем. См. раздел [Только мой код](../debugger/just-my-code.md).  
  
> [!NOTE]
>  Режим "Только мой код" не поддерживается для проектов устройств.  
  
##  <a name="BKMK_Step_into_system_calls"></a> Шаг с заходом в системные вызовы  
 Если вы загрузили отладочные символы для системного кода и отключили режим "Только мой код", можно производить шаг с заходом в системные вызовы с целью их пошагового выполнения точно так же, как любых других вызовов.  
  
 Сведения о получении доступа к файлам символов \(Майкрософт\) см. в разделе [Использование серверов символов для поиска файлов символов не на локальном компьютере](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md#BKMK_Use_symbol_servers_to_find_symbol_files_not_on_your_local_machine) статьи [Указание файлов символов \(.pdb\) и файлов с исходным кодом](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).  
  
 Чтобы загрузить символы для определенного системного компонента во время отладки, выполните следующие действия.  
  
1.  Откройте окно "Модули" \(на клавиатуре: **Ctrl\+Alt\+U**\).  
  
2.  Выберите модуль, для которого требуется загрузить символы.  
  
     Определить, для каких модулей символы загружены, можно по значению в столбце **Состояние символов**.  
  
3.  В контекстном меню выберите команду **Загрузить символы**.  
  
##  <a name="BKMK_Step_into_properties_and_operators_in_managed_code"></a> Шаг с заходом в свойства и операторы в управляемом коде  
 По умолчанию отладчик обходит свойства и операторы при пошаговом выполнении в управляемом коде. В большинстве случаев это делает отладку более удобной и эффективной. Чтобы включить пошаговое выполнение свойств и операторов, выберите **Отладка**, **Параметры и настройки**. На странице **Отладка**, **Общие** снимите флажок **Обход свойств и операторов \(только управляемый код\)**.