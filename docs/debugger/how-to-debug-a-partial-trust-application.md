---
title: "Практическое руководство. Отладка не вполне надежного приложения | Microsoft Docs"
ms.custom: ""
ms.date: "12/14/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "FSharp"
  - "VB"
  - "CSharp"
  - "C++"
helpviewer_keywords: 
  - "отладка [Visual Studio], приложения с частичным доверием"
  - "приложения с частичным доверием"
  - "безопасность [Visual Studio], приложения с частичным доверием"
ms.assetid: 9d30ad92-28ce-4b21-91d8-698474cddf64
caps.latest.revision: 25
caps.handback.revision: 25
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
---
# Практическое руководство. Отладка не вполне надежного приложения
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Применяется к приложениям Windows и консольным приложениям.  
  
 [Развертывание и безопасность технологии ClickOnce](../deployment/clickonce-security-and-deployment.md) облегчает развертывание приложения частичного доверия, использующего преимущества [Code Access Security](../Topic/Code%20Access%20Security.md) для ограничения доступа к ресурсам компьютера.  
  
 Отладка приложения частичного доверия может быть сложной задачей, так как приложения частичного доверия имеют различные права \(и поэтому ведут себя по\-разному\) в зависимости от того, откуда они установлены.  Если из интернета, то у приложения частичного доверия будут мало прав.  Если из локальной интрасети, прав будет больше, а если с локального компьютера, оно будет иметь полные права.  Также возможны настраиваемые зоны, с настраиваемыми разрешениями.  Может потребоваться отладка приложений частичного доверия при любых условиях из упомянутых.  К счастью, Visual Studio упрощает и это.  
  
 Перед началом сеанса отладки в Visual Studio можно выбрать нужную зону для имитации места, откуда установлено приложение.  При запуске отладки приложение будет иметь права, соответствующие приложению частичного доверия из этой зоны.  Это позволяет увидеть поведение приложения так, как оно будет выглядеть для пользователя, загрузившего его из этой зоны.  
  
 Если приложение пытается выполнить действие, на которое не имеет разрешения, то возникнет исключение.  В этот момент помощник по исключениям предоставляет возможность добавить дополнительные права, что позволяет перезапустить отладку с достаточными правами и избежать проблем.  
  
 Позже можно вернуться назад и увидеть, какие права были добавлены во время отладки.  Если было необходимо добавить разрешение во время отладки, значит, вероятно, необходимо добавить запрос согласия пользователя в этой точке кода.  
  
> [!NOTE]
>  Визуализаторы отладчика требуют больше прав, чем разрешено приложениям частичного доверия.  Визуализатор не загрузит переменную или объект, если остановка произошла в коде с частичным доверием.  Чтобы отлаживать, используя визуализатор, необходимо запустить код с полным доверием.  
  
### Выбор зоны для приложения частичного доверия  
  
1.  В меню **Проект** выберите пункт *Projectname***Свойства**.  
  
2.  На страницах свойств проекта *Projectname* щелкните страницу **Безопасность**.  
  
3.  Выберите **Включить параметры безопасности ClickOnce\-приложений**.  
  
4.  В группе **Зона, из которой приложение будет установлено** выберите в раскрывающемся списке нужную зону для имитации места, откуда устанавливалось приложение.  
  
     Сетка **Разрешения, необходимые для приложения** отображает все доступные разрешения.  Установленный флажок указывает разрешения, данные приложению.  
  
5.  Если выбранная зона была **\(Другой\)**, выберите правильные параметры в столбце **Параметр** сетки **Разрешения**.  
  
6.  Нажмите кнопку **ОК**, чтобы закрыть страницы свойств.  
  
### Добавление дополнительного разрешения при возникновении исключения безопасности  
  
1.  Откроется диалоговое окно **помощника по исключениям** с сообщением "SecurityException не обработано".  
  
2.  В диалоговом окне **Помощник по исключениям** в группе **Действия** выберите пункт **Добавить разрешение в проект**.  
  
3.  Откроется диалоговое окно **Перезапуск отладки**.  
  
    -   Чтобы перезапустить отладку сеанса с новым разрешением, нажмите кнопку **Да**.  
  
    -   Если перезапускать сейчас не нужно, нажмите кнопку **Нет**.  
  
### Просмотр дополнительных разрешений, добавленных во время отладки  
  
1.  В меню **Проект** выберите пункт *Projectname***Свойства**.  
  
2.  На страницах свойств проекта *Projectname* щелкните страницу **Безопасность**.  
  
3.  Посмотрите на сетку **Разрешения, необходимые для приложения**.  Любые добавленные дополнительные разрешения имеют два значка в столбце **Включен**: обычный флажок, который имеют все включенные разрешения, и дополнительный значок, который выглядит как шарик, содержащий букву "i".  
  
4.  Используйте вертикальную полосу прокрутки для просмотра всей сетки **Разрешения, необходимые для приложения**.  
  
## См. также  
 [Развертывание и безопасность технологии ClickOnce](../deployment/clickonce-security-and-deployment.md)   
 [Безопасность отладчика](../debugger/debugger-security.md)