---
title: Настройка брандмауэра Windows для удаленной отладки | Документы Microsoft
ms.custom: ''
ms.date: 05/18/2017
ms.technology:
- vs-ide-debug
ms.topic: conceptual
ms.assetid: 66e3230a-d195-4473-bbce-8ca198516014
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: 7e8c0a99e010058f513341c18d6088b6bb10b3f3
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
---
# <a name="configure-the-windows-firewall-for-remote-debugging"></a>Настройка брандмауэра Windows для удаленной отладки
В этом разделе описывается настройка брандмауэра для обеспечения удаленной отладки на компьютерах со следующими операционными системами:  
  
-   Windows 10  
  
-   Windows 8 или 8.1  
  
-   Windows 7   
  
-   Windows Server 2012 R2  

-   Windows Server 2012
  
-   Windows Server 2008 R2 
  
 Если сеть, в которой выполняется отладка, не защищена брандмауэром, в этой настройке нет необходимости. В противном случае и на компьютере, на котором размещена среда Visual Studio, и на удаленном компьютере, на котором выполняется отладка, нужно внести изменения в конфигурацию брандмауэра.  
  
 **IPSec** . Если обмен данными по сети должен выполняться по протоколу IPSec, необходимо открыть дополнительные порты как на компьютере с Visual Studio, так и на удаленном компьютере.  
  
 **Веб-сервер** . При отладке удаленного веб-сервера необходимо открыть дополнительный порт на удаленном компьютере. (Для служб IIS, порт 80 должен быть открыт.)  
  
 Имейте в виду, что на двух компьютерах необязательно должна использоваться одна и та же операционная система. Например, на компьютере с Visual Studio может использоваться Windows 10, а на удаленном компьютере — Windows Server 2012 R2.      
  
## <a name="ports-on-the-remote-computer-that-enable-remote-debugging"></a>Порты на удаленном компьютере, обеспечивающие удаленную отладку  
  
|||||  
|-|-|-|-|  
|**Порты**|**Входящий или исходящий**|**Протокол**|**Описание**|   
|4022|Входящие|TCP|Для VS 2017 г. Номер порта увеличивается на 2 с каждой версией Visual Studio. Дополнительные сведения см. в разделе [Visual Studio назначение портов удаленного отладчика](../debugger/remote-debugger-port-assignments.md).|  
|4023|Входящие|TCP|Для VS 2017 г. Номер порта увеличивается на 2 с каждой версией Visual Studio. (Только для удаленной отладки 32-разрядного процесса 64-разрядной версии удаленного отладчика.) Дополнительные сведения см. в разделе [Visual Studio назначение портов удаленного отладчика](../debugger/remote-debugger-port-assignments.md).| 
|3702|Исходящий|UDP|(Необязательно) Требуется для обнаружения удаленного отладчика.|    
  
## <a name="how-to-configure-ports-in-windows-firewall"></a>Настройка портов в брандмауэре Windows  

При установке Visual Studio или удаленный отладчик, программное обеспечение будет пытаться открыть соответствующие порты. Однако в некоторых сценариях (например, с помощью брандмауэра независимого), может потребоваться вручную открыть порт. Если необходимо убедиться, что открыты порты, см. раздел [Устранение неполадок](#troubleshooting). Некоторые инструкции для открытия порта может называться иначе на предыдущих версиях Windows.

Открытие порта:
  
1. Откройте **запустить** меню, поиск **брандмауэр Windows в режиме повышенной безопасности**.

2. Выберите **правила для входящих подключений > новое правило > порт**, а затем нажмите кнопку **Далее**. (Исходящие правила, выберите **правила для исходящих подключений** вместо.)

3. Выберите либо **TCP** или **UDP**, в зависимости от номера порта.

4. В разделе **определенные локальные порты**, введите номер порта, нажмите кнопку **Далее**.

5. Щелкните **Allow the Connection** , а затем в списке **Далее**.

6. Выберите один или несколько типов сетей для включения для порта и нажмите кнопку **Далее**.

    Выбранные типы должны включать сеть, к которой подключен удаленный компьютер.
7. Добавьте имя (например, **msvsmon**, **IIS**, или **веб-развертывания**) для правила и нажмите кнопку **Готово**.

    Вы увидите новое правило в списке правила для входящих подключений или правила для исходящих подключений.

## <a name="troubleshooting"></a>Устранение неполадок

Убедитесь, что открыты порты, может потребоваться в том случае, если возникают проблемы, присоединение к приложению с удаленного отладчика.

### <a name="verify-that-ports-are-open-in-the-windows-firewall-on-the-visual-studio-computer"></a>Убедитесь, что открыты порты в брандмауэре Windows на компьютере с Visual Studio  
 Инструкции по настройке брандмауэра Windows немного различаются в зависимости от операционной системы. В Windows 8 и 8.1, Windows 10 и Windows Server 2012, слово **приложения** используется; в Windows 7 или Windows Server 2008, слово **программы** используется;  В следующих шагах будет использоваться слово **приложения**.  
  
1.  Откройте страницу брандмауэра Windows. (В поле поиска меню **Пуск** введите **Брандмауэр Windows**).  
  
2.  Щелкните **Разрешение взаимодействия с приложением или компонентом в брандмауэре Windows**.  
  
3.  В списке **Разрешенные программы и компоненты** найдите пункт **Обнаружение удаленного отладчика Visual Studio**. Если он есть, убедитесь в том, что он выбран и что также выбран один или несколько типов сетей.  
  
4.  Если пункт **Обнаружение удаленного отладчика Visual Studio** отсутствует в списке, щелкните **Разрешить другое приложение**. Если вы по-прежнему не отображается в **Добавление приложения** окно, нажмите кнопку **Обзор** и перейдите к  **\<каталога установки Visual Studio > \Common7\IDE\Remote Debugger**. Найдите соответствующую приложению папку (x86, x64, Appx) и выберите файл **msvsmon.exe**. Затем нажмите кнопку **Добавить**.  
  
5.  В **допускается программы и компоненты** выберите **удаленного отладчика Visual Studio**. Выберите один или несколько типов сетей (**Доменная, Домашняя или рабочая (частная), Общедоступная**), с которыми должен взаимодействовать монитор удаленной отладки. Эти типы должны включать сеть, к которой подключен компьютер Visual Studio. 

### <a name="verify-that-ports-are-open-in-the-windows-firewall-on-the-remote-computer"></a>Убедитесь, что открыты порты в брандмауэре Windows на удаленном компьютере  
 Компоненты удаленной отладки можно установить на удаленном компьютере или запустить из общего каталога. В обоих случаях необходимо настроить брандмауэр на удаленном компьютере. Компоненты удаленной отладки находятся в следующем каталоге:  
  
 **\<Каталог установки Visual Studio > \Common7\IDE\Remote Debugger**  
  
 Инструкции по настройке брандмауэра Windows немного различаются в зависимости от операционной системы. В Windows 8 и 8.1, Windows 10 и Windows Server 2012, слово **приложения** используется; в Windows 7 или Windows Server 2008, слово **программы** используется;  В следующих шагах будет использоваться слово **приложения**.  
  
1.  Откройте страницу брандмауэра Windows. (В поле поиска меню **Пуск** введите **Брандмауэр Windows**.)  
  
2.  Щелкните **Разрешение взаимодействия с приложением или компонентом в брандмауэре Windows**.  
  
3.  В **допускается программы и компоненты** найдите **удаленного отладчика Visual Studio**. Если он есть, убедитесь в том, что он выбран и что также выбран один или несколько типов сетей.  
  
4.  Если **удаленного отладчика Visual Studio** — отсутствует в списке, щелкните **разрешить другое приложение**. Если вы по-прежнему не отображается в **добавить окно приложения**, нажмите кнопку **Обзор** и перейдите к  **\<каталога установки Visual Studio > \Common7\IDE\Remote Debugger**. Найдите соответствующую приложению папку (x86, x64, Appx) и выберите файл **msvsmon.exe**. Затем нажмите кнопку **Добавить**.  
  
5.  В **приложения, разрешенные** выберите **удаленного отладчика Visual Studio**. Выберите один или несколько типов сетей (**Доменная, Домашняя или рабочая (частная), Общедоступная**), с которыми должен взаимодействовать монитор удаленной отладки. Эти типы должны включать сеть, к которой подключен компьютер Visual Studio. 

### <a name="managed-or-native-compatibility-mode-open-additional-ports-on-the-remote-computer"></a>(Режима совместимости управляемого или машинного) Открыть дополнительные порты на удаленном компьютере

Если вы используете режим совместимости для отладчика (**Сервис > Параметры > Отладка**), будет необходимо открыть дополнительные порты. Режим совместимости позволяет устаревшую версию отладчика, и разные порты являются обязательными.

> [!NOTE]
> Устаревший версия отладчика, отладчик Visual Studio 2010.
  
|||||  
|-|-|-|-|  
|**Порты**|**Входящий или исходящий**|**Протокол**|**Описание**|  
|135, 139, 445|Исходящий|TCP|Обязательно.|  
|137, 138|Исходящий|UDP|Обязательно.|  
|500, 4500|Исходящий|UDP|Требуется, если в соответствии с политикой домена обмен данными по сети должен осуществляться по протоколу IPSec.|  
|80|Исходящий|TCP|Требуется для отладки веб-сервера.|
  
## <a name="see-also"></a>См. также  
 [Удаленная отладка](../debugger/remote-debugging.md)