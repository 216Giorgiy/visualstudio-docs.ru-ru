---
title: Настройка брандмауэра Windows для удаленной отладки | Документация Майкрософт
ms.custom: ''
ms.date: 05/18/2017
ms.technology: vs-ide-debug
ms.topic: conceptual
ms.assetid: 66e3230a-d195-4473-bbce-8ca198516014
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: 7f6904313ff585b8099c993f83e90bacb91a4ba2
ms.sourcegitcommit: 240c8b34e80952d00e90c52dcb1a077b9aff47f6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/23/2018
ms.locfileid: "49847959"
---
# <a name="configure-the-windows-firewall-for-remote-debugging"></a>Настройка брандмауэра Windows для удаленной отладки
В этом разделе описывается настройка брандмауэра для обеспечения удаленной отладки на компьютерах со следующими операционными системами:  
  
- Windows 10  
  
- Windows 8 или 8.1  
  
- Windows 7   
  
- Windows Server 2012 R2  

- Windows Server 2012
  
- Windows Server 2008 R2 
  
  Если сеть, в которой выполняется отладка, не защищена брандмауэром, в этой настройке нет необходимости. В противном случае и на компьютере, на котором размещена среда Visual Studio, и на удаленном компьютере, на котором выполняется отладка, нужно внести изменения в конфигурацию брандмауэра.  
  
  **IPSec** . Если обмен данными по сети должен выполняться по протоколу IPSec, необходимо открыть дополнительные порты как на компьютере с Visual Studio, так и на удаленном компьютере.  
  
  **Веб-сервер** . При отладке удаленного веб-сервера необходимо открыть дополнительный порт на удаленном компьютере. (Для IIS, порт 80 должен быть открыт.)  
  
  Имейте в виду, что на двух компьютерах необязательно должна использоваться одна и та же операционная система. Например, на компьютере с Visual Studio может использоваться Windows 10, а на удаленном компьютере — Windows Server 2012 R2.      
  
## <a name="ports-on-the-remote-computer-that-enable-remote-debugging"></a>Порты на удаленном компьютере, обеспечивающие удаленную отладку  
  
|**Порты**|**Входящий или исходящий**|**Протокол**|**Описание**|   
|-|-|-|-|  
|4022|Входящие|TCP|Для Visual STUDIO 2017. Номер порта увеличивается на 2 с каждой версией Visual Studio. Дополнительные сведения см. в разделе [Visual Studio Remote Debugger Port Assignments](../debugger/remote-debugger-port-assignments.md).|  
|4023|Входящие|TCP|Для Visual STUDIO 2017. Номер порта увеличивается на 2 с каждой версией Visual Studio. (Только используется для удаленной отладки 32-разрядного процесса из 64-разрядной версии удаленного отладчика.) Дополнительные сведения см. в разделе [Visual Studio Remote Debugger Port Assignments](../debugger/remote-debugger-port-assignments.md).| 
|3702|Исходящий|UDP|(Необязательно) Требуется для обнаружения удаленного отладчика.|    
  
## <a name="how-to-configure-ports-in-windows-firewall"></a>Настройка портов в брандмауэре Windows  

При установке Visual Studio или удаленный отладчик, программное обеспечение будет пытаться открыть необходимые порты. Однако в некоторых сценариях (например, при использовании стороннего брандмауэра), может потребоваться вручную открыть порт. Если требуется, чтобы убедиться, что открыты порты, см. в разделе [Устранение неполадок](#troubleshooting). Некоторые инструкции по открытию портов могут отличаться в старых версиях Windows.

Открытие порта:
  
1. Откройте **запустить** меню, и выполните поиск **брандмауэр Windows в режиме повышенной безопасности**.

2. Затем выберите **правила для входящих подключений > новое правило > порт**, а затем нажмите кнопку **Далее**. (Для исходящих правил, выберите **правила для исходящих подключений** вместо.)

3. Выберите либо **TCP** или **UDP**, в зависимости от номер порта.

4. В разделе **определенные локальные порты**, введите номер порта, нажмите кнопку **Далее**.

5. Щелкните **Allow the Connection** , а затем в списке **Далее**.

6. Выберите один или несколько типов сетей, чтобы включить для порта, а затем нажмите кнопку **Далее**.

    Выбранные типы должны включать сеть, к которой подключен удаленный компьютер.
7. Добавьте имя (например, **msvsmon**, **IIS**, или **веб-развертывания**) для правила и нажмите кнопку **Готово**.

    Вы увидите новое правило в списке правила для входящих подключений или правила для исходящих подключений.

## <a name="troubleshooting"></a>Устранение неполадок

Если у вас возникают проблемы, присоединение к приложению с удаленным отладчиком, может потребоваться проверить, что необходимые порты открыты.

### <a name="verify-that-ports-are-open-in-the-windows-firewall-on-the-visual-studio-computer"></a>Убедитесь, что порты открыты в брандмауэре Windows на компьютере с Visual Studio  
 Инструкции по настройке брандмауэра Windows немного различаются в зависимости от операционной системы. В Windows 8 и 8.1, Windows 10 и Windows Server 2012 — слово **приложения** используется; в Windows 7 или Windows Server 2008 используется слово **программы** используется;  В следующих шагах мы будем использовать слово **приложения**.  
  
1.  Откройте страницу брандмауэра Windows. (В поле поиска меню **Пуск** введите **Брандмауэр Windows**).  
  
2.  Щелкните **Разрешение взаимодействия с приложением или компонентом в брандмауэре Windows**.  
  
3.  В списке **Разрешенные программы и компоненты** найдите пункт **Обнаружение удаленного отладчика Visual Studio**. Если он есть, убедитесь в том, что он выбран и что также выбран один или несколько типов сетей.  
  
4.  Если пункт **Обнаружение удаленного отладчика Visual Studio** отсутствует в списке, щелкните **Разрешить другое приложение**. Если вы по-прежнему не отображается в **Добавление веб-приложения** окно, нажмите кнопку **Обзор** и перейдите к  **\<каталог установки Visual Studio > \Common7\IDE\Remote Debugger**. Найдите соответствующую приложению папку (x86, x64, Appx) и выберите файл **msvsmon.exe**. Затем нажмите кнопку **Добавить**.  
  
5.  В **Разрешенные программы и компоненты** выберите **удаленный отладчик Visual Studio**. Выберите один или несколько типов сетей (**Доменная, Домашняя или рабочая (частная), Общедоступная**), с которыми должен взаимодействовать монитор удаленной отладки. Эти типы должны включать сеть, к которой подключен компьютер Visual Studio. 

### <a name="verify-that-ports-are-open-in-the-windows-firewall-on-the-remote-computer"></a>Убедитесь, что порты открыты в брандмауэре Windows на удаленном компьютере  
 Компоненты удаленной отладки можно установить на удаленном компьютере или запустить из общего каталога. В обоих случаях необходимо настроить брандмауэр на удаленном компьютере. Компоненты удаленной отладки находятся в следующем каталоге:  
  
 **\<Каталог установки Visual Studio > \Common7\IDE\Remote Debugger**  
  
 Инструкции по настройке брандмауэра Windows немного различаются в зависимости от операционной системы. В Windows 8 и 8.1, Windows 10 и Windows Server 2012 — слово **приложения** используется; в Windows 7 или Windows Server 2008 используется слово **программы** используется;  В следующих шагах мы будем использовать слово **приложения**.  
  
1.  Откройте страницу брандмауэра Windows. (В поле поиска меню **Пуск** введите **Брандмауэр Windows**.)  
  
2.  Щелкните **Разрешение взаимодействия с приложением или компонентом в брандмауэре Windows**.  
  
3.  В **Разрешенные программы и компоненты** список, искать **удаленный отладчик Visual Studio**. Если он есть, убедитесь в том, что он выбран и что также выбран один или несколько типов сетей.  
  
4.  Если **удаленный отладчик Visual Studio** — отсутствует в списке, щелкните **разрешить другое приложение**. Если вы по-прежнему не отображается в **добавить окно приложения**, нажмите кнопку **Обзор** и перейдите к  **\<каталог установки Visual Studio > \Common7\IDE\Remote Debugger**. Найдите соответствующую приложению папку (x86, x64, Appx) и выберите файл **msvsmon.exe**. Затем нажмите кнопку **Добавить**.  
  
5.  В **разрешенные приложения** выберите **удаленный отладчик Visual Studio**. Выберите один или несколько типов сетей (**Доменная, Домашняя или рабочая (частная), Общедоступная**), с которыми должен взаимодействовать монитор удаленной отладки. Эти типы должны включать сеть, к которой подключен компьютер Visual Studio. 

### <a name="managed-or-native-compatibility-mode-open-additional-ports-on-the-remote-computer"></a>(Режим совместимости управляемого или машинного) Открыть дополнительные порты на удаленном компьютере

Если вы используете режим совместимости для отладчика (**Сервис > Параметры > Отладка**), будет необходимо открыть дополнительные порты. Режим совместимости позволяет устаревшей версии отладчика и разные порты являются обязательными.

> [!NOTE]
> Устаревшие версии отладчика является отладчик Visual Studio 2010.
  
|**Порты**|**Входящий или исходящий**|**Протокол**|**Описание**|  
|-|-|-|-|  
|135, 139, 445|Исходящий|TCP|Обязательно.|  
|137, 138|Исходящий|UDP|Обязательно.|  
|500, 4500|Исходящий|UDP|Требуется, если в соответствии с политикой домена обмен данными по сети должен осуществляться по протоколу IPSec.|  
|80|Исходящий|TCP|Требуется для отладки веб-сервера.|
  
## <a name="see-also"></a>См. также  
 [Remote Debugging](../debugger/remote-debugging.md)