---
title: Отладка кода для начинающих
description: Если отладка выполняется в первый раз, узнайте несколько принципов, которые помогут вам выполнять приложение в режиме отладки с помощью Visual Studio
ms.custom: ''
ms.date: 07/06/2018
ms.technology: vs-ide-debug
ms.topic: tutorial
helpviewer_keywords:
- debugger
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: 6c10032bf12060c8c5e42f93f6596fe576adfccf
ms.sourcegitcommit: 7bb0225e1fd45999ce09e0b49c2cfae515c27e11
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/14/2018
ms.locfileid: "45612679"
---
# <a name="how-to-debug-for-absolute-beginners"></a>Способы отладки для начинающих

Без ошибок код, который пишут разработчики программного обеспечения всегда не выполняет наши ожидания действия. Иногда она совершенно иной! В этом случае следующая задача — определить причину проблемы, и несмотря на то, что мы может возникнуть желание просто сохранить, глядя на наш код для часов, это гораздо проще и эффективнее использовать средства отладки, или отладчика.

Отладчик, к сожалению, не то, что волшебным образом может выявить все проблемы или «ошибки» в своем коде. *Отладка* означает, что для выполнения кода шаг за шагом в средства отладки, такие как Visual Studio, чтобы найти точный момент, где вы допустили ошибку программирования. Затем понять, какие изменения необходимо внести в код и средства отладки часто дают возможность внесения временных изменений, чтобы продолжить выполнение программы.

Эффективное использование отладчика — также навыка, занимает время и рекомендаций, чтобы узнать, но в конечном счете — это основная задача, для всех разработчиков программного обеспечения. В этой статье мы описываются основные принципы отладки затем ряд советов, чтобы приступить к работе.

## <a name="clarify-the-problem-by-asking-yourself-the-right-questions"></a>Решить эту проблему, задайте себе правильные вопросы

Он позволяет решить эту проблему, который вы выполняли в, прежде чем приступать к ее устранению. Мы ожидаем, что вы уже произошла ошибка в коде, в противном случае вы не здесь пытаетесь понять, как для его отладки! Таким образом перед запуском отладки убедитесь, что вы определили проблему, с которой вы пытаетесь решить:

* Что вы ожидали код, чтобы сделать?

* Что произошло на самом деле?

    В случае ошибки (исключение) при выполнении приложения, который может быть хорошо! Исключение при выполнении кода, обычно ошибка какого-либо непредвиденное событие. Средства отладки можно перейти к точное место в коде, в которой возникло исключение и может помочь вам исследовать возможные исправления.

    Если что-то еще, что такое симптомы проблемы? Подозрение на место возникновения этой проблемы в коде? Например если текст содержит код, но неверный текст, известно, что данные неправильный или кода, который задать отображаемый текст содержит какой-либо ошибки. Путем пошагового выполнения кода в отладчике, можно изучить всех изменений для переменных для обнаружения точно в том случае, когда и каким образом назначаются неправильные значения.

## <a name="examine-your-assumptions"></a>Изучите сомнению свои допущения

Прежде чем переходить ошибки или ошибки, можно рассматривать допущений, привлекали ожидают определенного результата. Скрытые или неизвестный предположений можно получить препятствует формулировки проблемы, даже в том случае, если вы хотите сразу на причину проблемы в отладчике. Возможно, длинный список возможные допущения! Ниже приведены несколько контрольных вопросов для своих предположений.

* Вы используете правой API (то есть правый объект, функция, метод или свойство)? API, который вы используете не делается, что вы думаете, что он. (После изучения вызова API в отладчике, исправить неполадку может потребоваться поездку на документацию, которая поможет определить правильный API.)

* Вы используете API правильно? Возможно вы использовали право API, но не использовали ее надлежащим образом.

* Содержит ли ваш код любой опечаток? Некоторые опечатки, такие как простой неправильное написание имени переменной, может быть трудно понять, особенно при работе с языками, которые не требуется объявлять перед они используются переменные.

* Внести изменения в код и предполагается, что он не связан с, у вас возникла проблема?

* Вы ожидали, объекта или переменной должен содержать определенное значение (или тип значения), отличается от, что реально произошло?

* Известно ли назначение кода? Часто трудно отладить кого-то другого кода. Если это не ваш код, это возможно, необходимо потратить время обучения, точно код работает, прежде чем эффективной отладки.

    > [!TIP]
    > При написании кода, начните с малого и начните с кодом, который работает! (Хороший пример кода полезно здесь.) В некоторых случаях проще устранить больших или сложных фрагментом кода, начиная с небольшой фрагмент кода, демонстрирующий core задачу, которую вы пытаетесь достичь. Затем можно изменить или добавить код постепенно, тестирование в каждой точке для ошибки.

По поводу сомнению свои допущения, может сократить время, необходимое для обнаружения проблемы в коде. Кроме того, может сократить время, необходимое для устранения проблемы.

## <a name="step-through-your-code-in-debugging-mode-to-find-where-the-problem-occurred"></a>Пошаговое выполнение кода при отладке режиме, чтобы определить, где возникла проблема

Когда вы обычно работают с приложением, вы увидите ошибки и неверные результаты только в том случае, после выполнения кода. Программа также может неожиданно завершиться без о том, почему.

Запуск приложения в отладчике, также называемый *режим отладки*, означает, что отладчик активно отслеживает все, что происходит во время выполнения программы. Он также позволяет приостановить приложение в любой момент изучать ее состояние и затем пошагово выполнять код по одной строке для просмотра все детали, как это происходит.

В Visual Studio введите режим отладки с помощью **F5** (или **Отладка** > **начать отладку** команды меню или **начать отладку**  кнопку ![начать отладку](../debugger/media/dbg-tour-start-debugging.png "начать отладку")) на панели инструментов отладки. При возникновении любого исключения, помощника по исправлению ошибок Visual Studio осуществляется переход к точному моменту, где произошло исключение и предоставляет другие полезные сведения.

Если не получил исключение, возможно, имеется смысл где искать проблемы в коде. Это где использовать *точки останова* с помощью отладчика, чтобы дать пользователю возможность более тщательно проверьте код. Точки останова — это один из самых простых и важных компонентов надежной отладки. Точка останова указывает, где Visual Studio следует приостановить выполнение кода, можно взглянуть на значения переменных, или поведение памяти или последовательности, в котором выполняется код.

В Visual Studio вы можете быстро настроить точку останова, щелкнув в левом поле рядом со строкой кода. Или поместите курсор в строку и нажмите клавишу **F9**.

Для иллюстрации этих основных понятий, мы будет приведен пример кода, который уже имеет несколько ошибок. Мы с помощью C#, но возможности отладки применяются в Visual Basic, C++, JavaScript, Python и других поддерживаемых языков.

### <a name="create-a-sample-app-with-some-bugs"></a>Создание примера приложения (в некоторые сообщения об ошибках)

Далее мы создадим приложение, имеется несколько ошибок.

1. Необходимо наличие установленной среды Visual Studio и либо. **NET разработки настольных приложений** рабочей нагрузки или. **NET Core кроссплатформенной разработки** установленной рабочей нагрузкой, в зависимости от типа приложения, которое вы хотите создать.

    Установите Visual Studio бесплатно со страницы [скачиваемых материалов Visual Studio](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017), если еще не сделали этого.

    Если необходимо установить рабочую нагрузку, но уже есть Visual Studio, нажмите кнопку **средства** > **получить средства и компоненты**. Запускается Visual Studio Installer. Выберите. **NET разработки настольных приложений** (или. **NET Core кроссплатформенной разработки**) рабочей нагрузки, затем выберите **изменить**.

1. Откройте Visual Studio, а затем выберите **файл** > **New** > **проекта**.

1. Выберите шаблон из кода приложения.

    Для платформы .NET Framework в **новый проект** диалоговое окно, выберите **Visual C#**, **Windows Desktop** из установленных шаблонов раздела, а затем в средней области выберите  **Консольное приложение (.NET Framework)**.

    Для .NET Core в **новый проект** диалоговое окно, выберите **Visual C#**, **.NET Core** из установленных шаблонов раздела, а затем в средней области выберите  **Консольное приложение (.NET Core)**.

    Если вы не видите эти шаблоны, необходимо установить соответствующую рабочую нагрузку (см. в статье ранее).

1. В **имя** введите **ConsoleApp FirstApp** и нажмите кнопку **ОК**.

    Visual Studio создает проект консоли, который отображается в обозревателе решений в области справа.

1. В *Program.cs*, замените весь код по умолчанию следующим кодом:

    ```csharp
    using System;
    using System.Collections.Generic;
    
    namespace ConsoleApp_FirstApp
    {
        class Program
        {
            static void Main(string[] args)
            {
                Console.WriteLine("Welcome to Galaxy News!");
                IterateThroughList();
                Console.ReadKey();
            }
    
            private static void IterateThroughList()
            {
                var theGalaxies = new List<Galaxy>
            {
                new Galaxy() { Name="Tadpole", MegaLightYears=400, GalaxyType=new GType('S')},
                new Galaxy() { Name="Pinwheel", MegaLightYears=25, GalaxyType=new GType('S')},
                new Galaxy() { Name="Cartwheel", MegaLightYears=500, GalaxyType=new GType('L')},
                new Galaxy() { Name="Small Magellanic Cloud", MegaLightYears=.2, GalaxyType=new GType('I')},
                new Galaxy() { Name="Andromeda", MegaLightYears=3, GalaxyType=new GType('S')},
                new Galaxy() { Name="Maffei 1", MegaLightYears=11, GalaxyType=new GType('E')}
            };
    
                foreach (Galaxy theGalaxy in theGalaxies)
                {
                    Console.WriteLine(theGalaxy.Name + "  " + theGalaxy.MegaLightYears + ",  " + theGalaxy.GalaxyType);
                }
    
                // Expected Output:  
                //  Tadpole  400,  Spiral 
                //  Pinwheel  25,  Spiral 
                //  Cartwheel, 500,  Lenticular
                //  Small Magellanic Cloud .2,  Irregular
                //  Andromeda  3,  Spiral
                //  Maffei 1,  11,  Elliptical
            }
        }
    
        public class Galaxy
        {
            public string Name { get; set; }
    
            public double MegaLightYears { get; set; }
            public object GalaxyType { get; set; }
    
        }
    
        public class GType
        { 
            public GType(char type)
            {
                switch(type)
                {
                    case 'S':
                        MyGType = Type.Spiral;
                        break;
                    case 'E':
                        MyGType = Type.Elliptical;
                        break;
                    case 'l':
                        MyGType = Type.Irregular;
                        break;
                    case 'L':
                        MyGType = Type.Lenticular;
                        break;
                    default:
                        break;
                }
            }
            public object MyGType { get; set; }
            private enum Type { Spiral, Elliptical, Irregular, Lenticular}
        }
    }
    ```

    Наши намерения для этого кода является отображение имени galaxy, расстояние до космоса и galaxy тип в список. Чтобы выполнить отладку, важно понимать назначение кода. Ниже приведен формат для одной строки из списка, нам нужно показать в выходных данных:

    *Имя galaxy*, *расстояние*, *galaxy тип*.

### <a name="run-the-app"></a>Запуск приложения

1. Нажмите клавишу **F5** или **начать отладку** кнопку ![начать отладку](../debugger/media/dbg-tour-start-debugging.png "начать отладку") на панели инструментов отладки, расположенную над редакторе кода.

    Приложение запускается и исключений, не показано нам отладчиком. Тем не менее, которое отображается в окне консоли выводится не соответствует ожиданиям. Ниже приведен ожидаемый результат.

    ```
    Tadpole  400,  Spiral 
    Pinwheel  25,  Spiral 
    Cartwheel, 500,  Lenticular
    Small Magellanic Cloud .2,  Irregular
    Andromeda  3,  Spiral
    Maffei 1,  Elliptical
    ```

    Но мы увидим следующее вместо:

    ```
    Tadpole  400,  ConsoleApp_FirstApp.GType 
    Pinwheel  25,  ConsoleApp_FirstApp.GType 
    Cartwheel, 500,  ConsoleApp_FirstApp.GType
    Small Magellanic Cloud .2,  ConsoleApp_FirstApp.GType
    Andromeda  3,  ConsoleApp_FirstApp.GType
    Maffei 1, 11,  ConsoleApp_FirstApp.GType
    ```

    Глядя на выходные данные и на наш код, нам известно, что `GType` — это имя класса, который хранит тип galaxy. Мы пытаемся Показать galaxy фактический тип (например, «спирали»), не имя класса!

### <a name="debug-the-app"></a>Отладка приложения

1. Используя приложение все еще выполняется, установите точку останова, щелкнув в левом поле рядом `Console.WriteLine` вызов метода в эту строку кода.

    ```csharp
    foreach (Galaxy theGalaxy in theGalaxies)
    {
        Console.WriteLine(theGalaxy.Name + "  " + theGalaxy.MegaLightYears + ",  " + theGalaxy.GalaxyType);
    }    
    ```

    Если вы задали точку останова, в левом поле появится красная точка.

    Так как мы видим проблема в выходных данных, мы начнем, отладка, просмотрев предыдущий код, который задает выходные данные в отладчике.

1. Нажмите кнопку **перезапустите** ![перезапустить приложение](../debugger/media/dbg-tour-restart.png "RestartApp") кнопку на панели инструментов отладки (**Ctrl** + **Shift**   +  **F5**).

    Приложение приостановит выполнение в заданной точке останова. Желтый выделение указывает, где работа отладчика была приостановлена (желтая линия кода еще не выполнена).

1. Наведите указатель мыши `GalaxyType` разверните переменную справа, а затем слева от значок гаечного ключа `theGalaxy.GalaxyType`. Вы увидите, что `GalaxyType` содержит свойство `MyGType`, а значение свойства имеет значение `Spiral`.

    ![Проверить переменную](../debugger/media/beginners-inspect-variable.png)

    «Спирали» является фактически правильное значение, которые вы ожидали для вывода на консоль. Это хорошее начало, это значение в этом коде доступно во время выполнения приложения. В этом случае мы используем неверные API. Мы увидим, если мы можем исправить это во время выполнения кода в отладчике.

1. В один и тот же код, во время отладки по-прежнему, поместите курсор в конце `theGalaxy.GalaxyType` и измените его на `theGalaxy.GalaxyType.MyGType`. Несмотря на то, что это можно сделать, редактор кода показано сообщение об ошибке, его не удается скомпилировать этот код.

    ![Синтаксическая ошибка](../debugger/media/beginners-edit.png)

1. Нажмите кнопку **изменить** в **изменить и продолжить** окно сообщения. Вы видите сообщение об ошибке теперь в **список ошибок** окна. Ошибка указывает, что `'object'` не содержит определение для `MyGType`.

    ![Синтаксическая ошибка](../debugger/media/beginners-no-definition.png)

    Несмотря на то, что мы задаем каждого galaxy с объектом типа `GType` (который имеет `MGType` свойство), отладчик не распознает `theGalaxy` объект в качестве объекта типа `GType`. Что происходит? Вы хотите просмотреть любой код, который задает тип galaxy. После этого, вы увидите, что `GType` класс определенно имеет свойство `MyGType`, но что-то неправильно. Сообщение об ошибке `object` окажется может понять; к интерпретатору язык, типа будет иметь тип объекта `object` вместо объекта типа `GType`.

1. Просматривая код, связанный с установкой типа galaxy, обнаружится `GalaxyType` свойство `Galaxy` класс был определен как `object` вместо `GType`.

    ```csharp
    public object GalaxyType { get; set; }     
    ```

1. Измените приведенный выше код на следующий:

    ```csharp
    public GType GalaxyType { get; set; }     
    ```

1. Нажмите кнопку **перезапустите** ![перезапустить приложение](../debugger/media/dbg-tour-restart.png "RestartApp") кнопку на панели инструментов отладки (**Ctrl** + **Shift**   +  **F5**) код перекомпиляции и перезапуска.

    Теперь, когда отладчик приостанавливает на `Console.WriteLine`, можно навести указатель `theGalaxy.GalaxyType.MyGType`и увидите, что правильно задано значение.

1. Удалите точку останова, щелкнув круг точки останова в левом поле (или щелкните правой кнопкой мыши и выберите **точки останова** > **удалить точку останова**), а затем нажмите клавишу **F5** для продолжения.

    Приложение запускается и отображает выходные данные. Он теперь хорошими выглядит, но можно заметить одну вещь; Ожидается galaxy небольшой облачный Magellanic отображаться состояние нестандартные galaxy в выходных данных консоли, но его тип не galaxy вообще.

    ```
    Tadpole  400,  Spiral 
    Pinwheel  25,  Spiral 
    Cartwheel, 500,  Lenticular
    Small Magellanic Cloud .2,
    Andromeda  3,  Spiral
    Maffei 1,  Elliptical
    ```

1. Установите точку останова в этой строке кода.

    ```csharp
    public GType(char type)
    ```

    Этот код является устанавливаемый тип galaxy, поэтому мы хотели бы более подробно рассмотрим.

1. Нажмите кнопку **перезапустите** ![перезапустить приложение](../debugger/media/dbg-tour-restart.png "RestartApp") кнопку на панели инструментов отладки (**Ctrl** + **Shift**   +  **F5**) для перезапуска.

    Отладчик приостанавливается на строке кода, где вы задали точку останова.  

1. Наведите указатель мыши `type` переменной. Вы увидите значение `S` (см. код символа). Вы заинтересованы в значение `I`, так как вы знаете, который является типом нестандартные galaxy.

1. Нажмите клавишу **F5** и наведите указатель мыши `type` переменной еще раз. Повторите этот шаг, пока не появится значение `I` в `type` переменной.

    ![Проверить переменную](../debugger/media/beginners-inspecting-data.png)

1. Теперь нажмите клавишу **F11** (**Отладка** > **шаг с заходом** или **шаг с заходом** кнопку на панели инструментов отладки).

    **F11** отладчик (и выполняет код) одной инструкции одновременно. **F10** (**шаг с обходом**) является подобной команды, и обе они очень полезно при изучении использования отладчика.

1. Нажмите клавишу **F11** до остановки на строке кода в `switch` инструкции для значения «I». Здесь вы увидите Устранение проблемы, полученный в результате опечатка. Ожидался код, чтобы перейти к которой он задает `MyGType` как нестандартные тип галактики, но отладчик вместо полностью пропускает этот код и приостанавливается на `default` раздел `switch` инструкции.

    ![Найти опечатки](../debugger/media/beginners-typo.png)

    Просмотрев код, вы увидите опечатки в `case 'l'` инструкции. Он должен быть `case 'I'`.

1. Щелкните в коде для `case 'l'` и замените ее строкой `case 'I'`.

1. Удалить точки останова и нажмите кнопку **перезапустите** кнопку, чтобы перезапустить приложение.

    Теперь исправлены ошибки, и вы увидите результат, предполагается, что!

    Нажмите любую клавишу, чтобы завершить приложение.

## <a name="summary"></a>Сводка

При появлении проблемы, используйте отладчик и [шаг команды](../debugger/navigating-through-code-with-the-debugger.md) например **F10** и **F11** найти области кода с проблемой.

> [!NOTE]
> Если это трудно определить области кода, в которой возникает проблема, установите точку останова в коде, выполняемом до появления проблемы и использовать команды шаг, пока не появится проблема манифест. Можно также использовать [точки трассировки](../debugger/using-breakpoints.md#BKMK_Print_to_the_Output_window_with_tracepoints) в журнал сообщения **вывода** окна. Просмотрев сообщения в журнале (и обнаружить, какие сообщения были еще не вошли!), часто можно изолировать области кода с проблемой. Повторите эту процедуру несколько раз, чтобы сузить ее может потребоваться.

Когда вы найдете области кода с проблемой, используйте отладчик для расследования. Чтобы найти причину проблемы, проверьте код ошибки при выполнении приложения в отладчике.

* [Проверить значения переменных](../debugger/view-data-values-in-data-tips-in-the-code-editor.md) и проверьте, содержат ли они тип значений, которые они должны содержать. Если неверное значение, узнайте, где было задано недопустимое значение (чтобы найти, где было задано значение, может потребоваться перезапустить отладчик, взглянем на [стек вызовов](../debugger/how-to-use-the-call-stack-window.md), или оба).

* Проверьте, выполняется ли код, который предполагается, что приложение. (Например, в приложении-примере ожидалось код для оператора switch задать тип galaxy для нестандартных, но приложению пропущена кода из-за опечатки.)

> [!TIP]
> Использовать отладчик для поиска ошибок. Находить ошибки и средства отладки *для вас* только в том случае, если известно, суть кода. Это средство можно известна цель вашего кода только в том случае, если вас как разработчика, express, чье намерение. Написание [модульные тесты](../test/improve-code-quality.md) является, как это сделать.

## <a name="next-steps"></a>Следующие шаги

В этой статье вы узнали, как несколько общих понятий отладки. Теперь можно запустить, освоение отладки с помощью Visual Studio.

> [!div class="nextstepaction"]
> [Сведения об отладке с помощью Visual Studio](../debugger/getting-started-with-the-debugger.md)
