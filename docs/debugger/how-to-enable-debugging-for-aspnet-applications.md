---
title: Включение отладки для приложений ASP.NET | Документы Microsoft
ms.custom: H1HackMay2017
ms.date: 09/21/17
ms.technology:
- vs-ide-debug
ms.topic: conceptual
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords:
- debugging ASP.NET Web applications
- Web.config configuration file, debug mode
- debugging [Visual Studio], ASP.NET
ms.assetid: 3beed819-cece-4864-8184-bd410000973a
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- aspnet
ms.openlocfilehash: 397dbe26aafd7ec385e6afeb11b3ca19155dfbcc
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
---
# <a name="debug-aspnet-applications-in-visual-studio"></a>Отладка приложений ASP.NET в Visual Studio

Можно выполнять отладку приложений ASP.NET из Visual Studio.

## <a name="requirements"></a>Требования

Следуйте инструкциям в этом разделе, необходимо:

- IIS Express, который включен по умолчанию в Visual Studio 2012 и более поздних версий

    - или -

- Локальный IIS веб-сервера (версии 8.0 или более поздней версии), правильность настройки и запуска приложения ASP.NET без ошибок.

Если удаленный сервер, удаленный отладчик должен выполняться на удаленном компьютере. Для отладки на удаленном сервере IIS в разделе [удаленной отладки ASP.NET на сервере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md). 

## <a name="configure-debug-settings"></a>Настройка параметров отладки

### <a name="enable-aspnet-debugging-in-the-project-properties"></a>Включение отладки ASP.NET в свойствах проекта

1. Откройте проект ASP.NET в Visual Studio.

2. Щелкните правой кнопкой мыши проект в **обозревателе решений**, выберите **свойства**и нажмите кнопку **Web** вкладки.

    Для некоторых типов проектов выберите **свойства > Отладка** вместо него. Для проекта Web Forms ASP.NET, щелкните правой кнопкой мыши проект и выберите **страницы свойств > Параметры запуска**.
  
3.  В окне **Отладчики**установите флажок **ASP.NET** .

    ![Параметры отладчика](../debugger/media/dbg-aspnet-enable-debugging.png "параметры отладчика")

> [!NOTE]
> При создании нового проекта ASP.NET (**файл > Новый проект**), параметры отладки уже настроены правильно.

### <a name="enable-debugging-in-the-webconfig-file"></a>Включить отладку в файле web.config  

Чтобы выполнить отладку веб-приложения, должны правильно настроены в файле web.config. Файл web.config является обязательным, если размещение приложения в IIS или IIS Express.

Для ASP.NET Core файл web.config создается автоматически при развертывании приложения (если он не существует).

> [!TIP]
> Процесс развертывания может обновить параметры файла web.config. Поэтому прежде чем пытаться выполнить отладку, проверьте параметр web.config на сервере.
  
1.  В Visual Studio откройте файл web.config.  
  
    > [!NOTE]  
    > Удаленный доступ к файлу web.config с помощью веб-браузера. Из соображений безопасности настройка служб Microsoft IIS [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] осуществляется ASP.NET таким образом, чтобы предотвратить прямой доступ к файлам Web.config с помощью браузеров. При попытке доступа к файлу конфигурации с помощью браузера, возникает ошибка доступа HTTP 403 (запрещено).  
  
2.  Найдите элемент `configuration/system.web/compilation` . Если элемент compilation не существует, создайте его.

    Файл Web.config — это XML-файл, поэтому он содержит вложенные разделы, помеченные тегами.
  
3.  Если элемент `compilation` не содержит атрибут `debug` , добавьте этот атрибут к элементу.  
  
4.  Убедитесь в том, что значение атрибута `debug` равно `true`.  
  
Файл web.config должен выглядеть как в следующем примере:

> [!NOTE]
> В этом примере — это файл web.config частичной. Дополнительные разделы XML обычно присутствуют между элементами system.web и configuration. Элемент compilation может также содержать другие элементы или атрибуты.
  
#### <a name="example"></a>Пример  
  
```  
<configuration>  
    ...  
    <system.web>  
        <compilation  
            debug="true"  
            ...  
        >  
        ...  
        </compilation>  
    </system.web>  
</configuration>  
```

При использовании внешнего сервера вместо сервера IIS Express по умолчанию, кроме того, необходимо убедиться, что, `targetFramework` значение атрибута соответствует настройке сервера.

> [!IMPORTANT]
> Для наилучшей производительности присвоено рабочее приложение `debug=false` и укажите сборку выпуска при построении и опубликуйте приложение.

## <a name="configure-project-settings-for-the-server"></a>Настройка параметров проекта для сервера

Для отладки на локальном веб-сервере, задайте свойства проекта. Для отладки на удаленном сервере, следуйте комплексный инструкциям, описанным в [удаленной отладки ASP.NET в IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md) вместо него.

1. В **Web** окна проекта выберите свойства, либо **IIS Express** или **внешнего сервера** под **сервера** параметры. (Для некоторых типов проектов, эти параметры будут расположены в **отладки** вместо вкладки.)

    ![Параметры сервера](../debugger/media/dbg-aspnet-server-settings.png "параметры сервера")

    IIS Express является сервером по умолчанию для ASP.NET и не требует специальной конфигурации. Это самый простой способ отладки приложения ASP.NET.

    Для проекта Web Forms ASP.NET, щелкните правой кнопкой мыши проект, выберите **страницы свойств > Параметры запуска**и выберите либо **использовать по умолчанию веб-сервер** или **использовать другой сервер** () вместо **внешнего сервера**).

    ![Параметры сервера для приложений Web Forms](../debugger/media/dbg-aspnet-server-settings-webforms.png "параметры сервера для приложения веб-форм")

2. Если внешний сервер (пользовательский), введите правильный URL-адрес в **URL-адрес проекта** (или **базовый URL-адрес**) поля.

    Если локальный сервер IIS внешнего сервера, необходимо установить IIS и правильно настроен. Например необходимая версия ASP.NET необходимо настроить в IIS. Дополнительные сведения см. в разделе [IIS 8.0 с помощью ASP.NET 3.5 и ASP.NET 4.5](/iis/get-started/whats-new-in-iis-8/iis-80-using-aspnet-35-and-aspnet-45). Если вы хотите протестировать развертывание, а также отладку, см. раздел [развертывание для тестирования](/aspnet/web-forms/overview/deployment/visual-studio-web-deployment/deploying-to-iis).

    Если внешний сервер [удаленного](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md), присоединение к процессу, вместо того, не используются указанные ниже параметры проекта для отладки.

## <a name="local-iis-web-server-configure-iis"></a>(Локальный сервер IIS веб-сервера) Настройка служб IIS

Для IIS Express, не нужно настроить веб-сервер (пропустите этот раздел). Для первоначального тестирования рекомендуется использовать IIS Express.

Если вы используете локальный веб-сервер IIS, выполните следующие действия.

1. Убедитесь, что службы IIS установлены правильно. Дополнительные сведения см. в разделе [IIS 8.0 с помощью ASP.NET 3.5 и ASP.NET 4.5](/iis/get-started/whats-new-in-iis-8/iis-80-using-aspnet-35-and-aspnet-45).

    * Убедитесь, что установить правильную версию ASP.NET на сервере. Используйте установщик веб-платформы (WebPI) для установки ASP.NET 4.5 (с узла сервера в Windows Server 2012 R2, выберите **получить новые компоненты платформы Web** и выполните поиск ASP.NET). Для установки ASP.NET Core см [публикация в службах IIS](https://docs.asp.net/en/latest/publishing/iis.html#iis-configuration).

    > [!NOTE]
    > Если вы используете Windows Server 2008 R2, установите ASP.NET 4, вместо этого с помощью этой команды:

     **C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -ir**

2. Откройте **Internet Information Services (IIS) Manager**. (В левой панели диспетчера серверов выберите **IIS**. Щелкните правой кнопкой мыши сервер и выберите **Диспетчер Internet Information Services (IIS)**.)

3. В разделе **подключений** в левой области выберите **узлы**.

4. Щелкните правой кнопкой мыши узел **Веб-сайт по умолчанию** и выберите команду **Добавить приложение**.

5. Задать **псевдоним** на **MyASPApp**, примите имя по умолчанию пула приложений (**DefaultAppPool**) и задайте **физический путь** для  **C:\inetpub\myNewFolder** (создать новую папку для приложения).

6. В разделе **подключений**выберите **пулы приложений**. Откройте **DefaultAppPool** и поле пул приложений присвоено значение, которое является правильным для приложения (рекомендуется использовать ASP.NET 4 для ASP.NET 4.5. Используйте **управляемый код** для ASP.NET Core).

## <a name="local-iis-web-server-deploy-the-app"></a>(Локальный сервер IIS веб-сервера) Развертывание приложения

Для IIS Express, веб-приложение развертывается автоматически при запуске отладки (пропустите этот раздел).

Если вы используете локальный веб-сервер IIS, выполните следующие действия. Существуют различные способы публикации приложения в IIS. В этом пошаговом руководстве мы показывают, как создавать и использовать профиль публикации, чтобы выполнить развертывание в файловой системе.

1. Перезапустите Visual Studio с правами администратора.

    Развертывание с помощью этого метода, необходимы права администратора.

2. В Visual Studio, щелкните правой кнопкой мыши проект и выберите команду **публикации** (веб-формы, используйте **публикации веб-приложение**).

3. Выберите **IIS, FTP, т. д.** и нажмите кнопку **публикации**.

    ![Публикация в IIS](../debugger/media/dbg-aspnet-local-iis.png "публикация в IIS")

    Для приложения веб-форм выберите **настраиваемый** в диалоговом окне «Публикация» введите имя профиля и выберите **ОК**.

4. В **метод публикации** выберите **файловая система**.

5. Для **целевое расположение**, нажмите кнопку **Обзор** кнопки.

6. (ASP.NET Core) Выберите **файловой системы** и выберите папку, где вы создали для приложения.

6. (ASP.NET) Выберите **локальный сервер IIS**и выберите веб-сайт, вы создали и нажмите кнопку **откройте**.

    ![Публикация в IIS](../debugger/media/dbg-aspnet-local-iis-select-site.png "публикация в IIS")

    > [!TIP]
    > Вы увидите, что сообщение о веб-сервер настроен неправильно, убедитесь, что для IIS установлена необходимая версия ASP.NET.

7. Нажмите кнопку **Далее** и выберите **отладки** конфигурации.

    > [!NOTE]
    > При развертывании с конфигурацией выпуска, таким образом задается `debug=false` в файле web.config для сервера.

8. Нажмите кнопку **Сохранить** сохранить параметры публикации и нажмите кнопку **публикации**.

    > [!CAUTION]
    >  Если необходимо внести изменения в код или перестроения, необходимо повторно опубликовать и повторите этот шаг. Исполняемый файл, скопированный на удаленный компьютер, должен в точности совпадать с локальным исходным кодом и символами.

## <a name="set-a-breakpoint-and-start-debugging"></a>Установите точку останова и начните отладку

1. В проект в Visual Studio набор точки останова на некоторый код, который вы знаете, будет выполнен.

2. Чтобы начать отладку, нажмите клавишу **F5** (**Отладка > Начать отладку**).

3. Выполните действия для выполнения кода, который содержит точку останова.

    Отладчик приостанавливает, где вы задали точку останова.

### <a name="local-iis-troubleshooting-cannot-hit-the-breakpoint"></a>(Локальный сервер IIS) Устранение неполадок: Не удается попадет на точке останова

1. Запустить веб-приложение из служб IIS и убедитесь, что он работает правильно. Оставьте под управлением веб-приложения.

2. В Visual Studio, выберите **Отладка > присоединить к процессу** и подключитесь к процессу ASP.NET (обычно **w3wp.exe** или **dotnet.exe**). Дополнительные сведения см. в разделе [присоединиться к процессу](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md).

    Если вы можете подключиться с помощью **присоединиться к процессу** можно точки останова, но не удается начать отладку с помощью **F5**, вероятно, что в свойствах проекта неправильный параметр. Если вы используете файл HOSTS, проверьте, правильно ли настроен.

  
## <a name="robust-programming"></a>Отказоустойчивость  
С помощью объекта [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] производится автоматическое обнаружение изменений в файлах Web.config и применяются новые параметры конфигурации. При этом нет необходимости перезагружать компьютер или IIS, чтобы изменения вступили в силу.  
  
Веб-сайт может содержать несколько виртуальных каталогов и подкаталогов. и файлы Web.config могут содержаться в каждом из них. Приложения [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] наследуют параметры от файлов Web.config, находящихся на более высоких уровнях URL-пути. Файлы иерархической конфигурации позволяют изменять параметры различных приложений [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] одновременно, например, для всех приложений, расположенных ниже по иерархии. Однако если `debug` задается в файле, находящемся ниже по иерархии, он переопределяет более высокое значение.  
  
Например, можно указать `debug="true"` в www.microsoft.com/aaa/Web.config и любые приложения в папке aaa, либо в любом подкаталоге aaa унаследует эти параметры. Поэтому, если ваш [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] приложение находится в www.microsoft.com/aaa/bbb, наследует эту настройку, как и любой [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] приложений в www.microsoft.com/aaa/ccc, www.microsoft.com/aaa/ddd и т. д. Единственное исключение — случай, когда одно из приложений переопределяет настройку посредством собственного файла Web.config, находящегося ниже по иерархии.  
  
> [!IMPORTANT]
> Включение режима отладки сильно влияет на производительность вашей [!INCLUDE[vstecasp](../code-quality/includes/vstecasp_md.md)] приложения. Режим отладки следует отключить перед развертыванием конечного приложения или перед оценкой его производительности.  
  
## <a name="see-also"></a>См. также  
[Отладка ASP.NET: системные требования](aspnet-debugging-system-requirements.md)   
[Как: выполнение рабочего процесса с учетной записью пользователя](how-to-run-the-worker-process-under-a-user-account.md)   
[Как: поиск имени процесса ASP.NET](how-to-find-the-name-of-the-aspnet-process.md)   
[Отладка развернутых веб-приложений](debugging-deployed-web-applications.md)   
[Пошаговое руководство: Отладка веб-формы](walkthrough-debugging-a-web-form.md)   
[Как: Отладка исключений ASP.NET](how-to-debug-aspnet-exceptions.md)   
[Отладка веб-приложений: ошибки и устранение неполадок](debugging-web-applications-errors-and-troubleshooting.md)
  