---
title: Присоединение к выполняемым процессам с отладчиком в Visual Studio | Документация Майкрософт
ms.custom: H1Hack27Feb2017
ms.date: 06/20/2018
ms.technology: vs-ide-debug
ms.topic: conceptual
f1_keywords:
- vs.debug.processes.attach
- vs.debug.process
- vs.debug.programs
- vs.debug.detaching
- vs.debug.processes
- vs.debug.error.attach
- vs.debug.remotemachine
dev_langs:
- CSharp
- FSharp
- C++
- VB
helpviewer_keywords:
- remote debugging, attaching to programs
- processes, attaching to running processes
- Attach to Process dialog box
- debugging [Visual Studio], attaching to processes
- debugger, processes
ms.assetid: 27900e58-090c-4211-a309-b3e1496d5824
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: 260047497ddb9515505c13f0b861c8eee05d71b0
ms.sourcegitcommit: e6b13898cfbd89449f786c2e8f3e3e7377afcf25
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/22/2018
ms.locfileid: "36327337"
---
# <a name="attach-to-running-processes-with-the-visual-studio-debugger"></a>Присоединение к выполняемым процессам с использованием отладчика Visual Studio
Отладчик Visual Studio можно подключить к запущенному процессу на локальном или удаленном компьютере. Запустив процесс, выберите команду **Отладка > присоединение к процессу** (или нажмите клавишу **CTRL + ALT + P**) чтобы открыть **присоединение к процессу** диалоговое окно.

Эту возможность можно использовать для отладки приложений, запущенных на локальном или удаленном компьютере, одновременной отладки нескольких процессов или отладки приложения, который не был создан в Visual Studio. Часто бывает полезно для устранения проблем в приложении, но (по любой причине) вы не запускали приложение из Visual Studio с подключенным отладчиком. Например если вы запускаете приложение без отладчика и исключение, может затем присоединяется к процессу, запустив его, чтобы начать отладку.

> [!TIP]
> Не уверены ли вам нужно использовать **присоединение к процессу** для отладки сценария? См. в разделе [распространенных сценариях отладки](#BKMK_Scenarios). Если необходимо выполнить отладку приложений ASP.NET, которые были развернуты в IIS, см. в разделе [Remote Debugging ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md).

##  <a name="BKMK_Attach_to_a_running_process"></a> Присоединение к выполняющемуся процессу на локальном компьютере  
 Для присоединения к процессу, необходимо знать имя процесса (см. в разделе [распространенных сценариях отладки](#BKMK_Scenarios) для несколько общих имен процесса).
  
1.  В Visual Studio выберите **Отладка > присоединение к процессу** (или нажмите клавишу **CTRL + ALT + P**).

    Если вы хотите быстро повторно подключиться к процессу вместо этого, см. в разделе [повторно подключиться к процессу](#BKMK_reattach).
  
2.  В диалоговом окне **Присоединение к процессу** найдите программу, к которой требуется присоединиться, в списке **Доступные процессы** .  

     Чтобы быстро выбрать процесс, которому необходимо, введите первую букву имени процесса, или можно ввести значение в поле фильтра для поиска имени процесса. Если вы не знаете имя процесса, см. в разделе [распространенных сценариях отладки](#BKMK_Scenarios).
     
     ![DBG_Basics_Attach_To_Process](../debugger/media/DBG_Basics_Attach_To_Process.png "DBG_Basics_Attach_To_Process") 
  
     Если процесс выполняется с другой учетной записью пользователя, установите флажок **Показать процессы всех пользователей** .
  
3.  Убедитесь, что в окне **Присоединиться к** указан тип кода, который необходимо отладить. Параметр по умолчанию **Авто** пытается определить тип кода, который нужно отладить. Чтобы вручную задать тип кода, выполните следующие действия.  
  
    1.  В поле **Присоединиться к** щелкните **Выбрать**.  
  
    2.  В диалоговом окне **Выбор типа кода** нажмите кнопку **Выполнять отладку кода следующих типов** и выберите типы для отладки.

        Значение по умолчанию **автоматического** задание работает для большинства типов приложений. Отладка клиентского сценария в Chrome, выберите **Webkit** как тип кода. Для Chrome, возможно требуется запуске обозревателя в режиме в зависимости от типа приложения отладки (тип `chrome.exe --remote-debugging-port=9222` из командной строки).

        > [!NOTE]
        > Для отладки скриптов на стороне клиента необходимо включить отладку скриптов в браузере. 
  
    3.  Нажмите кнопку **ОК**.  
  
4.  Нажмите кнопку **Присоединить**.

##  <a name="BKMK_Attach_to_a_process_on_a_remote_computer"></a> Присоединение к процессу на удаленном компьютере  
Для присоединения к процессу, необходимо знать имя процесса (см. в разделе [распространенных сценариях отладки](#BKMK_Scenarios) для несколько общих имен процесса). Для получения более подробной для приложения ASP.NET, которые были развернуты в IIS, см. в разделе [Remote Debugging ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md). Если вы не знаете имя процесса для вашего сценария, см. в разделе [распространенных сценариях отладки](#BKMK_Scenarios)
  
При использовании **присоединение к процессу** диалоговом окне можно выбрать другой компьютер, который настроен для удаленной отладки (то есть на удаленном компьютере должен быть запущен удаленный отладчик). Дополнительные сведения см. в разделе [удаленной отладки](../debugger/remote-debugging.md). После выбора удаленного компьютера можно просмотреть список доступных процессов, запущенных на этом компьютере, и подключиться к одному или нескольким процессам для отладки.
  
**Чтобы выбрать удаленный компьютер:**  

1. В Visual Studio выберите **Отладка > присоединение к процессу** (или нажмите клавишу **CTRL + ALT + P**).

    Если вы хотите быстро повторно подключиться к процессу вместо этого, см. в разделе [повторно подключиться к процессу](#BKMK_reattach).

2.  В диалоговом окне **Присоединение к процессу** выберите подходящий тип подключения в списке **Транспорт** . **По умолчанию** — правильный параметр в большинстве случаев.

    Параметр **Транспорт** хранится между сеансами отладки. 
  
3.  Воспользуйтесь списком **Квалификатор** для выбора имени удаленного компьютера одним из следующих способов:  
  
    1.  Введите имя в списке **Квалификатор** .
    
        > [!Note]
        > Если позднее, не удается подключиться, используя имя удаленного компьютера, используйте IP-адрес. (Номер порта может отображаться автоматически после выбора процесса. Можно также ввести его вручную. На следующем рисунке 4020 является портом по умолчанию для удаленного отладчика.)  

        Если вы хотите использовать **найти** кнопку, может потребоваться [откройте порт UDP 3702](../debugger/remote-debugger-port-assignments.md) на сервере.
  
    2.  Щелкните стрелку раскрывающегося списка **Квалификатор** и выберите из раскрывающегося списка имя компьютера.  
  
    3.  Нажмите кнопку **Поиск** рядом со списком**Квалификатор** , чтобы открыть диалоговое окно **Выбор подключения к удаленному отладчику** . В диалоговом окне **Выбор подключения к удаленному отладчику** будут перечислены все устройства, присутствующие в локальной подсети, а также устройства, непосредственно подключенные к компьютеру с помощью кабеля Ethernet (если таковые имеются). Щелкните нужный компьютер или устройство, после чего щелкните **Выбрать**. 
  
     Параметр **Квалификатор** хранится между сеансами отладки только в случае успешного подключения отладки с этим квалификатором.
     
4.  Нажмите кнопку **Обновить**.

      Список **Доступные процессы** отображается автоматически при открытии диалогового окна **Процессы** . Процессы могут запускаться и останавливаться в фоновом режиме, пока диалоговое окно открыто. Однако содержимое окна не всегда отражает текущее состояние. Можно обновить список в любое время, щелкнув кнопку **Обновить**, чтобы просмотреть текущий список процессов. 
     
4.  В диалоговом окне **Присоединение к процессу** найдите программу, к которой требуется присоединиться, в списке **Доступные процессы** .

     Чтобы быстро выбрать процесс, которому необходимо, введите первую букву имени процесса, или можно ввести значение в поле фильтра для поиска имени процесса. Если вы не знаете имя процесса, см. в разделе [распространенных сценариях отладки](#BKMK_Scenarios).
  
     Если процесс выполняется с другой учетной записью пользователя, установите флажок **Показать процессы всех пользователей** .
     
5.  Нажмите кнопку **Присоединить**.

## <a name="BKMK_reattach"></a> Повторно подключиться к процессу

Вы можете быстро повторно подключиться к процессам, которые были ранее подключены к, выбрав **Отладка > повторно подключиться к процессу...** (**Shift + Alt + P**). При выборе этой команды, отладчик немедленно выполняется попытка подключить к последнему процессов, подключенных с помощью **присоединение к процессу** диалоговое окно.

Отладчик будет повторно подключаться, сначала пытаясь сопоставить идентификатор предыдущего процесса и затем, если это не удается, путем сопоставления с именем предыдущего процесса. Если соответствий не найдено, или при наличии нескольких процессов с тем же именем, то **присоединение к процессу** будет отображаться диалоговое окно, в котором можно выбрать нужный процесс.

> [!NOTE]
> **Повторно подключиться к процессу** command появился в Visual Studio 2017.

## <a name="additional-info"></a>Дополнительные сведения

Во время отладки можно подключиться к нескольким программам, но в любой момент времени только одна из них активна в отладчике. Можно выбрать текущую программу в панели инструментов **Место отладки** или окне **Процессы** .  
  
Если попытаться подключиться к процессу, работающему под управлением ненадежной учетной записи, появится диалоговое окно подтверждения с предупреждением безопасности. Дополнительные сведения см. в разделе [предупреждение системы безопасности: присоединение к процессу, принадлежит недоверенному пользователю не может быть опасно. Если вы не уверены, ниже сведения, не присоединяться к процессу](../debugger/security-warning-attaching-to-a-process-owned-by-an-untrusted-user.md).  
  
В некоторых случаях при отладке в сеансе удаленного рабочего стола (службы терминалов), список **Доступные процессы** не отображает все доступные процессы. При работе с Visual Studio в качестве пользователя с ограниченным доступом в списке **Доступные процессы** не будут отображаться процессы, запущенные в сеансе 0, который используется для служб и других серверных процессов, включая w3wp.exe. Можно устранить эту проблему, запустив [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] под учетной записью администратора или запустив [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] с консоли сервера вместо сеанса служб терминалов. Если ни один из этих обходных путей использовать невозможно, третий вариант — присоединение к процессу путем запуска `vsjitdebugger.exe -p` *ProcessId* из командной строки Windows. Можно определить идентификатор процесса с помощью Tlist.exe. Чтобы получить tlist.exe, загрузите и установите отладки средства для Windows, доступные в [загрузки WDK и WinDbg](/windows-hardware/drivers/download-the-wdk).

## <a name="BKMK_Scenarios"></a> Распространенные сценарии отладки

Чтобы помочь вам определить, является ли вам нужно использовать **присоединение к процессу** и какой процесс для присоединения, ниже представлены наиболее распространенные сценарии отладки (список не является исчерпывающим). Там, где доступны дополнительные инструкции, мы предоставляем ссылки. Чтобы быстро получить доступ к диалоговое окно, используйте **CTRL + ALT + P** и введите первую букву имени процесса.

Для некоторых типов приложений (например, приложения для универсальной платформы Windows), не прямое подключение к имени процесса, но использовать **отлаживать установленный пакет приложения** параметр меню (см. таблицу).

> [!NOTE]
> Сведения о основы отладки в Visual Studio, см. в разделе [Приступая к работе с отладчиком](../debugger/getting-started-with-the-debugger.md).

|Сценарий|Отладка метода|Имя процесса|Примечания и ссылки|
|-|-|-|-|
|Удаленная отладка ASP.NET 4 или 4.5 на сервере IIS|Используйте инструменты удаленной отладки и присоединение к процессу|w3wp.exe|См. в разделе [Remote Debugging ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)|
|Удаленная отладка ASP.NET Core на сервере IIS|Используйте инструменты удаленной отладки и присоединение к процессу|DotNet.exe|Для развертывания приложений, см. в разделе [публикация в IIS](https://docs.asp.net/en/latest/publishing/iis.html). Для отладки, см. в разделе [удаленной отладки ASP.NET Core на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-computer.md)|
|Отладка клиентского сценария на локальном сервере IIS (только для типов поддерживаемых приложений)|Использовать присоединение к процессу|Chrome.exe, MicrosoftEdgeCP.exe или iexplore.exe|Необходимо включить отладку скриптов. Для Chrome, необходимо также выполнить Chrome в режиме отладки и выберите **код Webkit** в **присоединить к** поля.|
|Отладка приложения C#, Visual Basic или C++ на локальном компьютере|Использовать [стандартный отладки](../debugger/getting-started-with-the-debugger.md) или присоединение к процессу|*AppName*.exe|В большинстве случаев использовать стандартный отладку и не присоединиться к процессу.|
|Удаленная отладка классического приложения Windows|Инструменты удаленной отладки|Н/Д| См. в разделе [удаленной отладки приложения C# или Visual Basic](../debugger/remote-debugging-csharp.md) или [удаленная отладка приложения C++](../debugger/remote-debugging-cpp.md)|
|Отладка приложений ASP.NET на локальном компьютере после запуска приложения без отладчика|Использовать присоединение к процессу|iiexpress.exe|Это может быть полезно отключить учет загрузить приложения быстрее, такие как (например) при профилировании. |
|Отладка других поддерживаемых типов приложений в процессе сервера|Использовать удаленные средства (если сервер расположен удаленно) и присоединение к процессу|Chrome.exe iexplore.exe и другие процессы|При необходимости используйте монитор ресурсов для определения процесса. См. в разделе [удаленной отладки](../debugger/remote-debugging.md) и дальнейших разделах этой статьи|
|Удаленная отладка в приложение Универсальной OneCore, HoloLens и IoT|Отладка установленного пакета приложения|Н/Д|См. в разделе [отлаживать установленный пакет приложения](debug-installed-app-package.md) вместо использования **присоединение к процессу**|
|Отладка универсальных приложениях Windows (UWP), OneCore, HoloLens и IoT приложения, вы не запускали из Visual Studio|Отладка установленного пакета приложения|Н/Д|См. в разделе [отлаживать установленный пакет приложения](debug-installed-app-package.md) вместо использования **присоединение к процессу**|  
  
> [!NOTE]
>  Чтобы отладчик мог присоединиться к коду на языке C++, код должен предоставлять `DebuggableAttribute`. Это можно добавить в код автоматически, путем связывания с параметром [/ASSEMBLYDEBUG](/cpp/build/reference/assemblydebug-add-debuggableattribute) компоновщика.

## <a name="what-debugger-features-can-i-use"></a>Какие возможности отладчика можно использовать?

Чтобы использовать все возможности отладчика Visual Studio (например, прерывания в точках останова) при присоединении к процессу, исполняемый файл должен точно соответствовать локального источника и символов (то есть отладчик должен находиться удалось загрузить правильный [(.pbd) файлы символов ](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)). По умолчанию для этого отладочную сборку.

Для удаленной отладки сценариев необходимо иметь исходный код (или копию исходного кода), уже открыт в Visual Studio. Двоичные файлы скомпилированное приложение на удаленном компьютере должны поступать из одной сборки, как на локальном компьютере.

В некоторых сценариях локальной отладки отладки в Visual Studio без доступа к источнику при наличии файлов правильный символов с помощью приложения (по умолчанию для этого требуется отладочной сборки). Дополнительные сведения см. в разделе [Указание файлов символов и исходных файлов](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).
  
##  <a name="BKMK_Troubleshoot_attach_errors"></a> Устранение ошибок присоединения  
 При присоединении отладчика к выполняющемуся процессу этот процесс может содержать один или несколько типов кода. Типы кода, к которым может присоединиться отладчик, отображаются и выбираются в диалоговом окне **Выбор типа кода** .  
  
 Иногда отладчик может успешно присоединяться к одному типу кода, но не к другому. Такое может происходить при попытке присоединения к процессу, выполняющемуся на удаленном компьютере. На удаленном компьютере для одних типов кода могут иметься компоненты удаленной отладки, а для других — нет. Такое также может происходить при попытке присоединиться к двум или более процессам для прямой отладки базы данных. Отладка SQL поддерживает присоединение только к одному процессу.  
  
 Если отладчик может присоединиться не ко всем типам кода, то будет отображено сообщение, идентифицирующее типы, к которым присоединиться не удалось.  
  
 Если отладчик успешно подключается хотя бы к одному типу кода, то можно приступать к отладке процесса. Но отлаживать можно будет только те типы кода, к которым удалось подсоединиться. В приведенном выше сообщении указано, что не удалось присоединиться к типу кода скриптов. Поэтому проводить отладку кода скриптов в данном процессе не удастся. Код скриптов в этом процессе будет выполняться, но задавать в этом сценарии точки останова, просматривать данные и выполнять другие операции отладки не удастся.  
  
 Если нужны более конкретные сведения о том, почему отладчику не удалось присоединиться к некоторому типу кода, можно попытаться повторно присоединиться только к этому типу кода.  
  
 **Чтобы получить подробные сведения о причине сбоя типа кода для присоединения**  
  
1.  Отключитесь от процесса. В меню **Отладка** выберите команду **Отсоединить все**.  
  
2.  Вновь подключитесь к процессу, выбрав единственный тип кода.  
  
    1.  В диалоговом окне **Присоединение к процессу** выберите процесс в списке **Доступные процессы** .  
  
    2.  Нажмите кнопку **Выбрать**.  
  
    3.  В диалоговом окне **Выбор типа кода** выберите **Выполнять отладку кода следующих типов** и выберите тип кода, к которому не удалось присоединиться. Отмените выбор всех остальных типов кода.  
  
    4.  Нажмите кнопку **ОК**. Диалоговое окно **Выбор типа кода** будет закрыто.  
  
    5.  В диалоговом окне **Присоединение к процессу** нажмите **Присоединиться**.  
  
     На этот раз присоединение не пройдет полностью, и будет выдано сообщение о конкретной ошибке.  
  
## <a name="see-also"></a>См. также  
 [Отладка нескольких процессов](../debugger/debug-multiple-processes.md)   
 [Отладка Just-In-Time](../debugger/just-in-time-debugging-in-visual-studio.md)   
 [Удаленная отладка](../debugger/remote-debugging.md)