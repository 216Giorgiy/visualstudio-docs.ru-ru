---
title: "Присоединение к выполняемым процессам с использованием отладчика Visual Studio | Microsoft Docs"
ms.custom: ""
ms.date: "12/15/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "vs.debug.processes.attach"
  - "vs.debug.process"
  - "vs.debug.programs"
  - "vs.debug.detaching"
  - "vs.debug.processes"
  - "vs.debug.error.attach"
  - "vs.debug.remotemachine"
dev_langs: 
  - "C++"
  - "CSharp"
  - "FSharp"
  - "VB"
  - "c++"
helpviewer_keywords: 
  - "удаленная отладка, присоединение к программам"
  - "процессы, присоединение к выполняемым процессам"
  - "Присоединение к процессу - диалоговое окно"
  - "отладка [Visual Studio], присоединение к процессам"
  - "отладчик, процессы"
ms.assetid: 27900e58-090c-4211-a309-b3e1496d5824
caps.latest.revision: 57
caps.handback.revision: 53
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
---
# Присоединение к выполняемым процессам с использованием отладчика Visual Studio
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Присоединение к процессу отладчик Visual Studio часто используется приложение еще не запущено из Visual Studio, когда необходимо выполнить его отладку. Например можно присоединить к процессу IIS или службы Windows, на котором размещается приложение .NET. Процесс присоединения к может быть локальным или удаленным. Другой пример — Если приложение без отладчика выполняется и возникает исключение, может затем присоединяется к процессу выполнения приложения, чтобы начать отладку.

Для некоторых типов приложений (например, приложений для магазина Windows), не присоединить имя процесса, но использовать **отлаживать установленный пакет приложения** вместо него параметр меню (см. таблицу).

Позволяет определять необходимость присоединения к процессу для вашего сценария, ниже представлены некоторые из наиболее распространенных сценариях отладки. Где доступны дополнительные инструкции, мы предоставляем ссылки.

|Сценарий|Отладка метода|Имя процесса|Обратите внимание и ссылки|
|-|-|-|-|
|Отладка любого типа поддерживаемого приложения на локальном компьютере, запустив его из Visual Studio|Стандартная отладку F5|Н/Д|В разделе [Приступая к работе с отладчиком](../debugger/getting-started-with-the-debugger.md)|
|Удаленная отладка ASP.NET 4 или 4.5 на сервере IIS|Использовать средства удаленного управления и присоединить к процессу|w3wp.exe|В разделе [удаленной отладки ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)|
|Удаленная отладка ASP.NET Core на сервере IIS|Использовать средства удаленного управления и присоединить к процессу|dnx.exe|Развертывание приложения в разделе [Опубликовать в IIS](https://docs.asp.net/en/latest/publishing/iis.html). Для отладки см [удаленной отладки ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)|
|Другие типы поддерживаемых приложений на серверный процесс отладки|Использовать средства удаленного управления (если сервер является удаленным) и присоединение к процессу|Iexplore.exe или других процессов|При необходимости используйте диспетчер задач для определения процесса. В разделе [удаленной отладки](../debugger/remote-debugging.md) и последующих подразделах этого раздела|
|Удаленная отладка классического приложения Windows|Инструменты удаленной отладки и F5|Н/Д| В разделе [удаленной отладки](../debugger/remote-debugging.md)|
|Удаленная отладки универсальной Windows (UWP), OneCore, HoloLens или IoT приложения|Отладка установленного приложения пакета|Н/Д|Используйте **отладки или другие отладки целевых объектов и отладки пакета установки приложения** вместо **присоединиться к процессу**|
|Отладка приложения универсальной Windows (UWP), OneCore, HoloLens или IoT, вы не запускали из Visual Studio|Отладка установленного приложения пакета|Н/Д|Используйте **отладки или другие отладки целевых объектов и отладки пакета установки приложения** вместо **присоединиться к процессу**|
  
> [!WARNING]
>  Для присоединения к универсальному приложению Windows, которое написано на JavaScript, сначала необходимо включить отладку для приложения. См. раздел [Attach the debugger](../debugger/start-a-debugging-session-for-store-apps-in-visual-studio-javascript.md#BKMK_Attach_the_debugger) в Центре разработчика Windows.  
  
> [!NOTE]
>  Чтобы отладчик мог присоединиться к коду на языке C++, код должен предоставлять `DebuggableAttribute`. Это можно добавить в код автоматически, путем связывания с параметром [/ASSEMBLYDEBUG](/visual-cpp/build/reference/assemblydebug-add-debuggableattribute) компоновщика.

## <a name="what-debugger-features-can-i-use"></a>Какие возможности отладчика можно использовать?

Чтобы использовать все возможности отладчика Visual Studio (например, прерывания в точках останова), исполняемого файла должно совпадать локального источника и символов (то есть, отладчик должен находиться возможность загрузить правильный [(.pbd) файлы символов](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)). По умолчанию для этого построения отладки.

Для удаленной отладки сценариев необходимо иметь либо исходный код копию исходного кода уже открыт в Visual Studio. Двоичные файлы скомпилированного приложения на удаленном компьютере должна быть из той же сборки, как на локальном компьютере.

В некоторых сценариях локальной отладки отладки в Visual Studio без доступа к источнику при наличии файлов правильный символ с помощью приложения (по умолчанию для этого требуется отладочной сборки). Дополнительные сведения см. в разделе [Указание файлов символов и исходные файлы](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).

Для классических приложений Windows можно также отлаживать выполняющегося приложения с помощью отладчика JIT-Компилятора (Visual Studio откроется и приостановка выполнения кода приложения после возникновения ошибки).

##  <a name="a-namebkmkattachtoaprocessonaremotecomputera-attach-to-a-process-on-a-remote-computer"></a><a name="BKMK_Attach_to_a_process_on_a_remote_computer"></a> Присоединение к процессу на удаленном компьютере  
 Для присоединения к процессу необходимо знать его имя. Для приложений ASP.NET, которые были развернуты в IIS, в разделе [удаленной отладки ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md) или [Опубликовать в IIS](https://docs.asp.net/en/latest/publishing/iis.html) для приложения ASP.NET Core. Для других приложений, возможно, имя процесса удастся найти в диспетчере задач.
  
 При использовании диалогового окна **Присоединение к процессу** можно выбрать другой компьютер, который настроен для удаленной отладки. Дополнительные сведения см. в разделе [удаленной отладки](../Topic/Set%20Up%20the%20Remote%20Tools%20on%20the%20Device.md). После выбора удаленного компьютера можно просмотреть список доступных процессов, запущенных на этом компьютере, и подключиться к одному или нескольким процессам для отладки.
  
 **Чтобы выбрать удаленный компьютер:**  

1. В Visual Studio выберите пункт **Отладка &gt; Присоединить к процессу**.

2.  В диалоговом окне **Присоединение к процессу** выберите подходящий тип подключения в списке **Транспорт** . **По умолчанию** — правильный параметр в большинстве случаев.

    Параметр **Транспорт** хранится между сеансами отладки. 
  
3.  Воспользуйтесь списком **Квалификатор** для выбора имени удаленного компьютера одним из следующих способов:  
  
    1.  Введите имя в списке **Квалификатор** .
    
        >**Примечание** Если позднее, не удается подключиться с помощью имени удаленного компьютера, используйте IP-адрес. (Номер порта может отображаться автоматически после выбора процесса. Можно также ввести его вручную. На следующем рисунке 4020 — это порт по умолчанию для удаленного отладчика.)  
  
    2.  Щелкните стрелку раскрывающегося списка **Квалификатор** и выберите из раскрывающегося списка имя компьютера.  
  
    3.  Нажмите кнопку **Поиск** рядом со списком**Квалификатор** , чтобы открыть диалоговое окно **Выбор подключения к удаленному отладчику** . В диалоговом окне **Выбор подключения к удаленному отладчику** будут перечислены все устройства, присутствующие в локальной подсети, а также устройства, непосредственно подключенные к компьютеру с помощью кабеля Ethernet (если таковые имеются). Щелкните нужный компьютер или устройство, после чего щелкните **Выбрать**. 
    
    ![DBG_Basics_Attach_To_Process](../debugger/media/dbg_basics_attach_to_process.png "DBG_Basics_Attach_To_Process") 
  
     Параметр **Квалификатор** хранится между сеансами отладки только в случае успешного подключения отладки с этим квалификатором.
     
4.  Нажмите кнопку **Обновить**.

      Список **Доступные процессы** отображается автоматически при открытии диалогового окна **Процессы** . Процессы могут запускаться и останавливаться в фоновом режиме, пока диалоговое окно открыто. Однако содержимое окна не всегда отражает текущее состояние. Можно обновить список в любое время, щелкнув кнопку **Обновить**, чтобы просмотреть текущий список процессов. 
     
4.  В диалоговом окне **Присоединение к процессу** найдите программу, к которой требуется присоединиться, в списке **Доступные процессы** .  
  
     Если процесс выполняется с другой учетной записью пользователя, установите флажок **Показать процессы всех пользователей** .
     
5.  Нажмите кнопку **Присоединить**.  
  
##  <a name="a-namebkmkattachtoarunningprocessa-attach-to-a-running-process-on-the-local-machine"></a><a name="BKMK_Attach_to_a_running_process"></a> Присоединение к выполняющемуся процессу на локальном компьютере  
 Для присоединения к процессу необходимо знать его имя.  Возможно, имя процесса удастся найти в диспетчере задач.  
  
1.  В Visual Studio выберите пункт **Отладка &gt; Присоединить к процессу**.
  
2.  В диалоговом окне **Присоединение к процессу** найдите программу, к которой требуется присоединиться, в списке **Доступные процессы** .  
  
     Если процесс выполняется с другой учетной записью пользователя, установите флажок **Показать процессы всех пользователей** .
  
3.  Убедитесь, что в окне **Присоединиться к** указан тип кода, который необходимо отладить. Параметр по умолчанию **Авто** пытается определить тип кода, который нужно отладить. Чтобы вручную задать тип кода, выполните следующие действия.  
  
    1.  В поле **Присоединиться к** щелкните **Выбрать**.  
  
    2.  В диалоговом окне **Выбор типа кода** нажмите кнопку **Выполнять отладку кода следующих типов** и выберите типы для отладки.  
  
    3.  Нажмите кнопку **ОК**.  
  
4.  Нажмите кнопку **Присоединить**.

## <a name="additional-info"></a>Дополнительная информация

Во время отладки можно подключиться к нескольким программам, но в любой момент времени только одна из них активна в отладчике. Можно выбрать текущую программу в панели инструментов **Место отладки** или окне **Процессы** . Дополнительные сведения см. в разделе [Практическое руководство: Установка текущей программы](http://msdn.microsoft.com/ru-ru/7e1d7fa5-0e40-44cf-8c41-d3dba31c969e).  
  
Если попытаться подключиться к процессу, работающему под управлением ненадежной учетной записи, появится диалоговое окно подтверждения с предупреждением безопасности. Дополнительные сведения см. [Предупреждение системы безопасности: присоединение к процессу, принадлежат недоверенному пользователю может быть опасным. Если приведенные ниже выглядит подозрительно, или вы не уверены, не присоединяться к процессу](../debugger/security-warning-attaching-to-a-process-owned-by-an-untrusted-user-can-be-dangerous-if-the-following-information-looks-suspicious-or-you-are-unsure-do-not-attach-to-this-process.md).  
  
В некоторых случаях при отладке в сеансе удаленного рабочего стола (службы терминалов), список **Доступные процессы** не отображает все доступные процессы. При работе с Visual Studio в качестве пользователя с ограниченным доступом в списке **Доступные процессы** не будут отображаться процессы, запущенные в сеансе 0, который используется для служб и других серверных процессов, включая w3wp.exe. Можно устранить эту проблему, запустив [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] под учетной записью администратора или запустив [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] с консоли сервера вместо сеанса служб терминалов. Если ни один из этих обходных путей использовать невозможно, третий вариант — присоединение к процессу путем запуска `vsjitdebugger.exe -p` *ProcessId* из командной строки Windows. Можно определить идентификатор процесса с помощью Tlist.exe. Чтобы получить файл tlist.exe, скачайте и установите средства отладки для Windows, которые доступны на  [странице файлов загрузки WDK и WinDbg](http://go.microsoft.com/fwlink/?LinkId=168279).
  
##  <a name="a-namebkmktroubleshootattacherrorsa-troubleshoot-attach-errors"></a><a name="BKMK_Troubleshoot_attach_errors"></a> Устранение ошибок присоединения  
 При присоединении отладчика к выполняющемуся процессу этот процесс может содержать один или несколько типов кода. Типы кода, к которым может присоединиться отладчик, отображаются и выбираются в диалоговом окне **Выбор типа кода** .  
  
 Иногда отладчик может успешно присоединяться к одному типу кода, но не к другому. Такое может происходить при попытке присоединения к процессу, выполняющемуся на удаленном компьютере. На удаленном компьютере для одних типов кода могут иметься компоненты удаленной отладки, а для других — нет. Такое также может происходить при попытке присоединиться к двум или более процессам для прямой отладки базы данных. Отладка SQL поддерживает присоединение только к одному процессу.  
  
 Если отладчик может присоединиться не ко всем типам кода, то будет отображено сообщение, идентифицирующее типы, к которым присоединиться не удалось.  
  
 Если отладчик успешно подключается хотя бы к одному типу кода, то можно приступать к отладке процесса. Но отлаживать можно будет только те типы кода, к которым удалось подсоединиться. В приведенном выше сообщении указано, что не удалось присоединиться к типу кода скриптов. Поэтому проводить отладку кода скриптов в данном процессе не удастся. Код скриптов в этом процессе будет выполняться, но задавать в этом сценарии точки останова, просматривать данные и выполнять другие операции отладки не удастся.  
  
 Если нужны более конкретные сведения о том, почему отладчику не удалось присоединиться к некоторому типу кода, можно попытаться повторно присоединиться только к этому типу кода.  
  
 **Чтобы получить подробные сведения о почему не удалось присоединиться к типу кода**  
  
1.  Отключитесь от процесса. В меню **Отладка** выберите команду **Отсоединить все**.  
  
2.  Вновь подключитесь к процессу, выбрав единственный тип кода.  
  
    1.  В диалоговом окне **Присоединение к процессу** выберите процесс в списке **Доступные процессы** .  
  
    2.  Нажмите кнопку **Выбрать**.  
  
    3.  В диалоговом окне **Выбор типа кода** выберите **Выполнять отладку кода следующих типов** и выберите тип кода, к которому не удалось присоединиться. Отмените выбор всех остальных типов кода.  
  
    4.  Нажмите кнопку **ОК**. Диалоговое окно **Выбор типа кода** будет закрыто.  
  
    5.  В диалоговом окне **Присоединение к процессу** нажмите **Присоединиться**.  
  
     На этот раз присоединение не пройдет полностью, и будет выдано сообщение о конкретной ошибке.  
  
## <a name="see-also"></a>См. также раздел  
 [Отладка нескольких процессов](../debugger/debug-multiple-processes.md)   
 [Отладка Just-In-Time](../debugger/just-in-time-debugging-in-visual-studio.md)   
 [Удаленная отладка](../debugger/remote-debugging.md)