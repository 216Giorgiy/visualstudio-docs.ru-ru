---
title: "Присоединение к выполняемым процессам с отладчиком в Visual Studio | Документы Microsoft"
ms.custom: H1Hack27Feb2017
ms.date: 05/18/2017
ms.reviewer: 
ms.suite: 
ms.technology: vs-ide-debug
ms.tgt_pltfrm: 
ms.topic: article
f1_keywords:
- vs.debug.processes.attach
- vs.debug.process
- vs.debug.programs
- vs.debug.detaching
- vs.debug.processes
- vs.debug.error.attach
- vs.debug.remotemachine
dev_langs:
- CSharp
- FSharp
- C++
- VB
helpviewer_keywords:
- remote debugging, attaching to programs
- processes, attaching to running processes
- Attach to Process dialog box
- debugging [Visual Studio], attaching to processes
- debugger, processes
ms.assetid: 27900e58-090c-4211-a309-b3e1496d5824
caps.latest.revision: "53"
author: mikejo5000
ms.author: mikejo
manager: ghogen
ms.workload: multiple
ms.openlocfilehash: 6ca076ef20ad8751619a715721c6423b5211bc3f
ms.sourcegitcommit: 32f1a690fc445f9586d53698fc82c7debd784eeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="attach-to-running-processes-with-the-visual-studio-debugger"></a>Присоединение к выполняемым процессам с использованием отладчика Visual Studio
Отладчик Visual Studio можно подключить к запущенному процессу на локальном или удаленном компьютере. После запуска процесса, нажмите кнопку **Отладка > присоединение к процессу** (или нажмите клавишу **CTRL + ALT + P**) для открытия **присоединиться к процессу** диалоговое окно.

Эту возможность можно использовать для отладки приложений, запущенных на локальном или удаленном компьютере, для одновременной отладки нескольких процессов или отладки приложения, созданного в Visual Studio. Может быть полезным при необходимости выполнить отладку приложения, но (для какой-либо причине) вы не запускали приложение из Visual Studio с подключенным отладчиком. Например если вы запускаете приложение без отладчика и возникает исключение, может затем присоединяется к процессу, выполняемое приложение, чтобы начать отладку.

> [!TIP]
> Убедитесь, что не нужно использовать **присоединиться к процессу** для отладки сценария? В разделе [распространенных сценариях отладки](#BKMK_Scenarios). Если необходимо выполнить отладку приложения ASP.NET, которые были развернуты в IIS см. в разделе [удаленной отладки ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md).

##  <a name="BKMK_Attach_to_a_running_process"></a>Присоединение к выполняющемуся процессу на локальном компьютере  
 Для присоединения к процессу, необходимо знать имя процесса (в разделе [распространенных сценариях отладки](#BKMK_Scenarios) для нескольких общих имен процесса).
  
1.  В Visual Studio, выберите **Отладка > присоединить к процессу** (или нажмите клавишу **CTRL + ALT + P**).

    Если вы хотите быстро восстановить подключение к процессу, вместо этого, см. раздел [заново присоединить к процессу](#BKMK_reattach).
  
2.  В диалоговом окне **Присоединение к процессу** найдите программу, к которой требуется присоединиться, в списке **Доступные процессы** .  

     Чтобы быстро выбрать процесс, которому необходимо, введите первую букву имени процесса. Если вы не знаете имя процесса, см. раздел [распространенных сценариях отладки](#BKMK_Scenarios).
     
     ![DBG_Basics_Attach_To_Process](../debugger/media/DBG_Basics_Attach_To_Process.png "DBG_Basics_Attach_To_Process") 
  
     Если процесс выполняется с другой учетной записью пользователя, установите флажок **Показать процессы всех пользователей** .
  
3.  Убедитесь, что в окне **Присоединиться к** указан тип кода, который необходимо отладить. Параметр по умолчанию **Авто** пытается определить тип кода, который нужно отладить. Чтобы вручную задать тип кода, выполните следующие действия.  
  
    1.  В поле **Присоединиться к** щелкните **Выбрать**.  
  
    2.  В диалоговом окне **Выбор типа кода** нажмите кнопку **Выполнять отладку кода следующих типов** и выберите типы для отладки.  
  
    3.  Нажмите кнопку **ОК**.  
  
4.  Нажмите кнопку **Присоединить**.

##  <a name="BKMK_Attach_to_a_process_on_a_remote_computer"></a>Присоединение к процессу на удаленном компьютере  
 Для присоединения к процессу, необходимо знать имя процесса (в разделе [распространенных сценариях отладки](#BKMK_Scenarios) для нескольких общих имен процесса). Для получения более подробной информации для приложений ASP.NET, которые были развернуты в IIS. в разделе [удаленной отладки ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md). Для других приложений, возможно, имя процесса удастся найти в диспетчере задач.
  
 При использовании диалогового окна **Присоединение к процессу** можно выбрать другой компьютер, который настроен для удаленной отладки. Дополнительные сведения см. в разделе [удаленной отладки](../debugger/remote-debugging.md). После выбора удаленного компьютера можно просмотреть список доступных процессов, запущенных на этом компьютере, и подключиться к одному или нескольким процессам для отладки.
  
 **Чтобы выбрать удаленный компьютер:**  

1. В Visual Studio, выберите **Отладка > присоединить к процессу** (или нажмите клавишу **CTRL + ALT + P**).

    Если вы хотите быстро восстановить подключение к процессу, вместо этого, см. раздел [заново присоединить к процессу](#BKMK_reattach).

2.  В диалоговом окне **Присоединение к процессу** выберите подходящий тип подключения в списке **Транспорт** . **По умолчанию** — правильный параметр в большинстве случаев.

    Параметр **Транспорт** хранится между сеансами отладки. 
  
3.  Воспользуйтесь списком **Квалификатор** для выбора имени удаленного компьютера одним из следующих способов:  
  
    1.  Введите имя в списке **Квалификатор** .
    
        >**Примечание** Если позднее, не удается подключиться с помощью имени удаленного компьютера, используйте IP-адрес. (Номер порта может отображаться автоматически после выбора процесса. Можно также ввести его вручную. На следующем рисунке 4020 — это порт по умолчанию для удаленного отладчика.)  

        Если вы хотите использовать **найти** кнопки, может потребоваться [откройте порт UDP 3702](../debugger/remote-debugger-port-assignments.md) на сервере.
  
    2.  Щелкните стрелку раскрывающегося списка **Квалификатор** и выберите из раскрывающегося списка имя компьютера.  
  
    3.  Нажмите кнопку **Поиск** рядом со списком**Квалификатор** , чтобы открыть диалоговое окно **Выбор подключения к удаленному отладчику** . В диалоговом окне **Выбор подключения к удаленному отладчику** будут перечислены все устройства, присутствующие в локальной подсети, а также устройства, непосредственно подключенные к компьютеру с помощью кабеля Ethernet (если таковые имеются). Щелкните нужный компьютер или устройство, после чего щелкните **Выбрать**. 
  
     Параметр **Квалификатор** хранится между сеансами отладки только в случае успешного подключения отладки с этим квалификатором.
     
4.  Нажмите кнопку **Обновить**.

      Список **Доступные процессы** отображается автоматически при открытии диалогового окна **Процессы** . Процессы могут запускаться и останавливаться в фоновом режиме, пока диалоговое окно открыто. Однако содержимое окна не всегда отражает текущее состояние. Можно обновить список в любое время, щелкнув кнопку **Обновить**, чтобы просмотреть текущий список процессов. 
     
4.  В диалоговом окне **Присоединение к процессу** найдите программу, к которой требуется присоединиться, в списке **Доступные процессы** .

     Чтобы быстро выбрать процесс, которому необходимо, введите первую букву имени процесса. Если вы не знаете имя процесса, см. раздел [распространенных сценариях отладки](#BKMK_Scenarios).
  
     Если процесс выполняется с другой учетной записью пользователя, установите флажок **Показать процессы всех пользователей** .
     
5.  Нажмите кнопку **Присоединить**.

## <a name="BKMK_reattach"></a>Заново присоединить к процессу

Можно быстро восстановить подключение к процессам, которые были ранее присоединена к, выбрав **Отладка > повторно присоединиться к процессу...** (**Shift + Alt + P**). При выборе этой команды отладчик немедленно попытается процессов, связанных с помощью присоединения к последнему **присоединиться к процессу** диалоговое окно.

Отладчик будет заново присоединить сначала попытается сопоставьте идентификатор процесса предыдущей и затем, если это не удается, путем сопоставления к старому имени процесса. Если совпадения не найдены, или при наличии нескольких процессов, с тем же именем, то **присоединиться к процессу** будет отображаться диалоговое окно, в котором можно выбрать нужный процесс.

> [!NOTE]
> **Заново присоединить к процессу** команда новые возможности Visual Studio 2017 г.

## <a name="additional-info"></a>Дополнительные сведения

Во время отладки можно подключиться к нескольким программам, но в любой момент времени только одна из них активна в отладчике. Можно выбрать текущую программу в панели инструментов **Место отладки** или окне **Процессы** .  
  
Если попытаться подключиться к процессу, работающему под управлением ненадежной учетной записи, появится диалоговое окно подтверждения с предупреждением безопасности. Дополнительные сведения см. [предупреждение системы безопасности: присоединение к процессу, который принадлежит недоверенному пользователю может быть опасно. Если приведенные ниже выглядит подозрительно, или вы не уверены, не присоединяться к процессу](../debugger/security-warning-attaching-to-a-process-owned-by-an-untrusted-user-can-be-dangerous-if-the-following-information-looks-suspicious-or-you-are-unsure-do-not-attach-to-this-process.md).  
  
В некоторых случаях при отладке в сеансе удаленного рабочего стола (службы терминалов), список **Доступные процессы** не отображает все доступные процессы. При работе с Visual Studio в качестве пользователя с ограниченным доступом в списке **Доступные процессы** не будут отображаться процессы, запущенные в сеансе 0, который используется для служб и других серверных процессов, включая w3wp.exe. Можно устранить эту проблему, запустив [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] под учетной записью администратора или запустив [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] с консоли сервера вместо сеанса служб терминалов. Если ни один из этих обходных путей использовать невозможно, третий вариант — присоединение к процессу путем запуска `vsjitdebugger.exe -p` *ProcessId* из командной строки Windows. Можно определить идентификатор процесса с помощью Tlist.exe. Чтобы получить файл tlist.exe, скачайте и установите средства отладки для Windows, которые доступны на  [странице файлов загрузки WDK и WinDbg](http://go.microsoft.com/fwlink/?LinkId=168279).

## <a name="BKMK_Scenarios"></a>Распространенные сценарии отладки

Помогают определить, нужны ли вам использовать **присоединиться к процессу** и какие процесса для вложения, которые здесь показаны наиболее распространенные сценарии отладки (список не является исчерпывающим). Там, где доступны дополнительные инструкции, мы предоставляем ссылки.

Для некоторых типов приложений (например, приложения UWP), не прямое подключение к имени процесса, но использовать **отлаживать установленный пакет приложения** параметр меню (см. таблицу).

> [!NOTE]
> Сведения о базовых отладки в Visual Studio см. в разделе [начало работы с отладчиком](../debugger/getting-started-with-the-debugger.md).

|Сценарий|Отладка метода|Имя процесса|Примечания и ссылки|
|-|-|-|-|
|Отладку управляемого и машинного приложения на локальном компьютере|Используйте присоединиться к процессу или [стандартные отладки](../debugger/getting-started-with-the-debugger.md)|*AppName*.exe|Чтобы быстро получить доступ к диалоговым окном, используйте **CTRL + ALT + P** , а затем введите первую букву имени процесса.|
|Отладка приложений ASP.NET на локальном компьютере после запуска приложения без отладчика|Используйте присоединиться к процессу|iiexpress.exe|Это может быть полезно для обеспечения быстродействия приложения загрузить быстрее, например, (например) при профилировании. |
|Удаленная отладка ASP.NET 4 или 4.5 на сервере IIS|Использовать инструменты удаленной отладки и присоединения к процессу|w3wp.exe|В разделе [удаленной отладки ASP.NET на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)|
|Удаленная отладка ASP.NET Core на сервере IIS|Использовать инструменты удаленной отладки и присоединения к процессу|DotNet.exe|Развертывание приложения в разделе [опубликовать в службах IIS](https://docs.asp.net/en/latest/publishing/iis.html). Для отладки см [удаленной отладки ASP.NET Core на удаленном компьютере IIS](../debugger/remote-debugging-aspnet-on-a-remote-iis-computer.md)|
|Другие типы поддерживаемого приложения на серверный процесс отладки|Использовать инструменты удаленной отладки (если сервер является удаленным) и присоединения к процессу|Iexplore.exe или других процессов|При необходимости используйте диспетчер задач для определения процесса. В разделе [удаленной отладки](../debugger/remote-debugging.md) и дальнейших разделах этой статьи|
|Удаленная отладка классического приложения Windows|F5 и инструментов удаленной отладки|Н/Д| В разделе [удаленной отладки](../debugger/remote-debugging.md)|
|Удаленное отлаживать приложение универсальной (UWP), OneCore, HoloLens и IoT|Отладка пакета установленного приложения|Н/Д|В разделе [отлаживать установленный пакет приложения](debug-installed-app-package.md) вместо **присоединиться к процессу**|
|Отладка универсальных приложений Windows (UWP), OneCore, HoloLens и IoT приложение, которое вы не запускали из Visual Studio|Отладка пакета установленного приложения|Н/Д|В разделе [отлаживать установленный пакет приложения](debug-installed-app-package.md) вместо **присоединиться к процессу**|
  
> [!WARNING]
>  Чтобы присоединить UWP, который написан на языке JavaScript, сначала необходимо включить отладку для приложения. В разделе [присоединить отладчик](../debugger/start-a-debugging-session-for-store-apps-in-visual-studio-javascript.md#BKMK_Attach_the_debugger) в центре разработчиков Windows.  
  
> [!NOTE]
>  Чтобы отладчик мог присоединиться к коду на языке C++, код должен предоставлять `DebuggableAttribute`. Это можно добавить в код автоматически, путем связывания с параметром [/ASSEMBLYDEBUG](/cpp/build/reference/assemblydebug-add-debuggableattribute) компоновщика.

## <a name="what-debugger-features-can-i-use"></a>Какие возможности отладчика можно использовать?

Для использования всех возможностей отладчика Visual Studio (например, обращение к точкам останова) для присоединения к процессу, исполняемого файла должно точно соответствовать локальный источник и символы (то есть, отладчик должен находиться может загрузить правильный [(.pbd) файлы символов ](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)). По умолчанию это требует отладочную сборку.

Для удаленной отладки сценариев необходимо иметь исходный код (или копию исходного кода) уже открыт в Visual Studio. Двоичные файлы скомпилированного приложения на удаленном компьютере должны поступать из одной сборки, как на локальном компьютере.

В некоторых сценариях локальной отладки отладки в Visual Studio без доступа к источнику при наличии файлов правильный символов с помощью приложения (по умолчанию для этого требуется отладочной сборки). Дополнительные сведения см. в разделе [укажите символов и исходные файлы](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).
  
##  <a name="BKMK_Troubleshoot_attach_errors"></a>Устранение ошибок присоединения  
 При присоединении отладчика к выполняющемуся процессу этот процесс может содержать один или несколько типов кода. Типы кода, к которым может присоединиться отладчик, отображаются и выбираются в диалоговом окне **Выбор типа кода** .  
  
 Иногда отладчик может успешно присоединяться к одному типу кода, но не к другому. Такое может происходить при попытке присоединения к процессу, выполняющемуся на удаленном компьютере. На удаленном компьютере для одних типов кода могут иметься компоненты удаленной отладки, а для других — нет. Такое также может происходить при попытке присоединиться к двум или более процессам для прямой отладки базы данных. Отладка SQL поддерживает присоединение только к одному процессу.  
  
 Если отладчик может присоединиться не ко всем типам кода, то будет отображено сообщение, идентифицирующее типы, к которым присоединиться не удалось.  
  
 Если отладчик успешно подключается хотя бы к одному типу кода, то можно приступать к отладке процесса. Но отлаживать можно будет только те типы кода, к которым удалось подсоединиться. В приведенном выше сообщении указано, что не удалось присоединиться к типу кода скриптов. Поэтому проводить отладку кода скриптов в данном процессе не удастся. Код скриптов в этом процессе будет выполняться, но задавать в этом сценарии точки останова, просматривать данные и выполнять другие операции отладки не удастся.  
  
 Если нужны более конкретные сведения о том, почему отладчику не удалось присоединиться к некоторому типу кода, можно попытаться повторно присоединиться только к этому типу кода.  
  
 **Чтобы получить подробные сведения о том, почему не удалось присоединиться к некоторому типу кода**  
  
1.  Отключитесь от процесса. В меню **Отладка** выберите команду **Отсоединить все**.  
  
2.  Вновь подключитесь к процессу, выбрав единственный тип кода.  
  
    1.  В диалоговом окне **Присоединение к процессу** выберите процесс в списке **Доступные процессы** .  
  
    2.  Нажмите кнопку **Выбрать**.  
  
    3.  В диалоговом окне **Выбор типа кода** выберите **Выполнять отладку кода следующих типов** и выберите тип кода, к которому не удалось присоединиться. Отмените выбор всех остальных типов кода.  
  
    4.  Нажмите кнопку **ОК**. Диалоговое окно **Выбор типа кода** будет закрыто.  
  
    5.  В диалоговом окне **Присоединение к процессу** нажмите **Присоединиться**.  
  
     На этот раз присоединение не пройдет полностью, и будет выдано сообщение о конкретной ошибке.  
  
## <a name="see-also"></a>См. также  
 [Отладка нескольких процессов](../debugger/debug-multiple-processes.md)   
 [В время отладки](../debugger/just-in-time-debugging-in-visual-studio.md)   
 [Удаленная отладка](../debugger/remote-debugging.md)