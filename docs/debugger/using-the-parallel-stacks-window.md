---
title: "Просмотр потоков с помощью окна \"Параллельные стеки\" | Документы Microsoft"
ms.custom: 
ms.date: 04/25/2017
ms.reviewer: 
ms.suite: 
ms.technology: vs-ide-debug
ms.tgt_pltfrm: 
ms.topic: article
f1_keywords: vs.debug.parallelstacks
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords: debugger, parallel tasks window
ms.assetid: f50efb78-5206-4803-bb42-426ef8133f2f
caps.latest.revision: "18"
author: mikejo5000
ms.author: mikejo
manager: ghogen
ms.workload: multiple
ms.openlocfilehash: 72c7c38dece8924f48298c0b7b661f564f9b1afc
ms.sourcegitcommit: 32f1a690fc445f9586d53698fc82c7debd784eeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="view-threads-and-tasks-using-the-parallel-stacks-window"></a>Представление потоков и задач с помощью окна "Параллельные стеки"
**Параллельные стеки** применяется при отладке многопотоковых приложений. Его **представление "Потоки"** содержит сведения о стеке вызова для всех потоков приложения. Оно также позволяет переходить в различные потоки и кадры стека в потоках. В управляемом коде **представление "задачи"** отображает стеки вызова <xref:System.Threading.Tasks.Task?displayProperty=fullName> объектов. В машинном коде **представление "задачи"** отображает стеки вызова [групп задач](/cpp/parallel/concrt/task-parallelism-concurrency-runtime), [параллельные алгоритмы](/cpp/parallel/concrt/parallel-algorithms), [асинхронных агентов](/cpp/parallel/concrt/asynchronous-agents)и [упрощенных задач](/cpp/parallel/concrt/task-scheduler-concurrency-runtime).  
  
## <a name="threads-view"></a>Представление потоков  
 На следующем рисунке показан поток, идущий от Main через A до B, а затем во внешний код. Два других потока начались во внешнем коде, а затем перешли к A, но один из потоков продолжился в объект B и затем во внешний код, а другой потом продолжился в объект C и затем в метод AnonymousMethod.  
  
 ![Представление в окне параллельных стеков потоков](../debugger/media/parallel_stacksthread.png "Parallel_StacksThread")  
  
 На рисунке путь вызова текущего потока выделен синим, а в настоящий момент (активный кадр стека) поток обозначается желтой стрелкой. Текущий кадр стека можно изменить, выбрав другой метод в **Параллельные стеки** окна. При этом также может измениться текущий поток в зависимости от того, входит ли выбранный метод в текущий поток или является частью другого потока. В следующей таблице описаны основные компоненты окна **Параллельные стеки** окна, как показано на рисунке.  
  
|Буква выноски|Имя элемента|Описание:|  
|--------------------|------------------|-----------------|  
|А|Сегмент или узел стека вызова|Содержит ряд методов для одного или нескольких потоков. Если узел не имеет линий со стрелками, то он представляет собой единый путь вызова для потоков.|  
|С|Синее выделение|Указывает путь вызова текущего потока.|  
|В|Линии со стрелками|Соединяют узлы и показывают единый путь вызова для потоков.|  
|D|Всплывающая подсказка заголовка узла|Показывает идентификатор и пользовательское имя каждого потока, путь вызова которого использует данный узел.|  
|E|Метод|Представляет один или несколько кадров стека одного метода.|  
|C|Всплывающая подсказка для метода|В представлении "Потоки" отображает все потоки в таблицы аналогично **потоков** окна. В представлении задач, он отображает все задачи в таблице аналогичен **задачи** окна.|  
  
 Кроме того, в окне параллельных стеков показано **вид с высоты птичьего полета** значок в главной области при наличии слишком большой для помещения в окне. Щелкнув этот значок, можно просмотреть в окне всю схему целиком.  
  
## <a name="stack-frame-icons"></a>Значки кадра стека  
 В следующей таблице описываются значки, которые предоставляют сведения об активных и текущих кадрах стека.  
  
|||  
|-|-|  
|Значок|Описание:|  
|![Желтая стрелка параллельных стеков](../debugger/media/icon_parallelyellowarrow.gif "Icon_ParallelYellowArrow")|Указывает, что метод содержит текущее положение текущего потока (активный кадр стека).|  
|![Параллельных стеков потоков значок](../debugger/media/icon_parallelthreads.gif "Icon_ParallelThreads")|Указывает, что метод содержит текущего расположения (активный кадр стека) потока не является текущей.|  
|![Зеленая стрелка параллельных стеков](../debugger/media/icon_parallelgreenarrow.gif "Icon_ParallelGreenArrow")|Указывает, что метод содержит текущий кадр стека (текущий контекст отладчика). Имя этого метода выделено жирным шрифтом во всех узлах.|  
  
## <a name="toolbar-controls"></a>Элементы управления панели инструментов  
 На следующем рисунке и в следующей таблице описываются элементы управления, доступные на панели управления "Параллельные стеки".  
  
 ![Панель инструментов в окне параллельных стеков](../debugger/media/parallel_stackstoolbar.png "Parallel_StacksToolbar")  
  
|Буква выноски|Элемент управления|Описание:|  
|--------------------|-------------|-----------------|  
|А|Поле со списком "Потоки"/"Задачи"|Переключает отображение между стеками вызова для потоков и стеками вызова для задач. Дополнительные сведения см. в разделах по представлениям "Задачи" и "Потоки".|  
|С|Показывать только помеченные|Отображает стеки вызовов только для потоков, которые помечены в других окнах отладки, таких как **потоки GPU** окна и **контроль параллельных данных** окна.|  
|В|Представление метода|Переключает представление стека и представление метода. Дополнительные сведения см. в разделе представления "Метод".|  
|D|Автопрокрутка к текущему кадру стека|Автоматически прокручивает схему для отображения текущего кадра стека. Этот компонент применяется при изменении текущего кадра стека из других окон или при появлении точки останова в крупных диаграммах.|  
|E|Переключить элемент управления масштабом|Отображает или скрывает элемент управления масштабом. Можно также увеличивать, нажав клавишу CTRL и повернуть колесо мыши вне зависимости от видимости элемента управления "масштаб", или с помощью клавиши CTRL + SHIFT + «+», чтобы увеличить масштаб и CTRL + SHIFT +'-' для уменьшения масштаба. Нажмите клавиши CTRL + F8 будет увеличить, чтобы уместиться на экране.|  
  
### <a name="context-menu-items"></a>Элементы контекстного меню  
 Ниже на рисунке и в таблице описываются элементы контекстного меню, доступные при щелчке правой кнопкой мыши метод в представление потоков или задач. Последние шесть элементов получены напрямую из окна "Стек вызова" и не предоставляют новых возможностей.  
  
 ![Контекстное меню в окне параллельных стеков](../debugger/media/parallel_contmenu.png "Parallel_ContMenu")  
  
|Menu Item|Описание:|  
|---------------|-----------------|  
|Flag|Помечает выбранный элемент.|  
|Снять пометку|Снимает пометку с выбранного элемента.|  
|Заморозить|Замораживает выбранный элемент.|  
|Разморозить|Размораживает выбранный элемент.|  
|Переход к задаче (поток)|Выполняет ту же функцию, что и поле со списком на панели инструментов. При этом кадр стека остается выделенным.|  
|Перейти к исходному коду|Вызывает переход к расположению в исходном коде, которое соответствует кадру стека, который пользователь щелкнул правой кнопкой мыши.|  
|Перейти к кадру|Выполняет те же функции, то и соответствующая команда меню в окне "Стек вызова". Однако с помощью параллельных стеков несколько кадров может соответствовать один метод. Таким образом, этот элемент меню имеет вложенные меню, каждое из которых представляет определенный кадр стека. Если один из кадров стека расположен в текущем потоке, то выбирается меню, соответствующее этому кадру стека.|  
|Перейти к дизассемблированию|Вызывает переход к расположению в окне дизассемблирования, которое соответствует кадру стека, который пользователь щелкнул правой кнопкой мыши.|  
|Показать внешний код|Скрывает и показывает внешний код.|  
|Шестнадцатеричный вывод|Переключается между десятичным и шестнадцатеричным отображением.|  
|Сведения о загрузке символов|Отображает соответствующее диалоговое окно.|  
|Параметры символов|Отображает соответствующее диалоговое окно.|  
  
## <a name="tasks-view"></a>Представление задач  
 Если приложение использует <xref:System.Threading.Tasks.Task?displayProperty=fullName> объектов (управляемый код) или `task_handle` объектов (машинный код) для выражения параллелизма, можно использовать поле со списком на панели инструментов окна "Параллельные стеки" для переключения в *представление "задачи"*. Представление "Задачи" отображает стеки вызова задач вместо потоков. Представление "Задачи" отличается от представления "Потоки" следующим образом:  
  
-   Стеки вызова потоков, не выполняющие задачи, не отображаются.  
  
-   Стеки вызова потоков, выполняющие задачи, визуально отделяются в верхней и нижней части для отображения наиболее релевантных кадров, относящихся к задачам.  
  
-   Когда несколько задач расположены в одном потоке, стеки вызова этих задач разделяются в отдельные узлы.  
  
 На следующем рисунке представление задач параллельных стеков показано с правой стороны, а с левой стороны — соответствующее представление "Потоки".  
  
 ![Задачи представления в окне параллельных стеков](../debugger/media/parallel_tasksview.png "Parallel_TasksView")  
  
 Чтобы увидеть весь стек вызова, переключитесь обратно в представление "Потоки", щелкните правой кнопкой мыши кадр стека и выбрав **перейти к потоку**.  
  
 Как описано в предыдущей таблице, наведя на метод, можно просмотреть дополнительную информацию. На следующем рисунке показаны сведения всплывающей подсказки в представлении потоков и задач.  
  
 ![Всплывающие подсказки в окне параллельных стеков](../debugger/media/parallel_stack_tooltips.png "Parallel_Stack_Tooltips")  
  
## <a name="method-view"></a>Представление метода  
 Представление потоков или задач позволяет прикрепить график для текущего метода. Для этого следует щелкнуть значок представления метода на панели инструментов. Представление методы показывает все методы для всех потоков, которые вызывают текущий метод или вызываются им. На следующем рисунке показано представление потоков, а также отображение той же информации в представлении методов.  
  
 ![Представление методов в окне параллельных стеков](../debugger/media/parallel_methodview.png "Parallel_MethodView")  
  
 Переключение на новый кадр стека делает этот метод текущим методом и отображает в окне все вызывающие и вызываемые объекты нового метода. Из-за этого некоторые потоки могут появиться на представлении или исчезнуть из него (в зависимости от того, отображается ли этот метод в их стеках вызова). Чтобы вернуться в представление стека, повторно нажмите кнопку представления метода на панели инструментов.  
  
## <a name="see-also"></a>См. также  
 [Начало отладки многопоточного программного обеспечения](../debugger/get-started-debugging-multithreaded-apps.md)   
 [Пошаговое руководство: Отладка параллельного приложения](../debugger/walkthrough-debugging-a-parallel-application.md)   
 [Основы отладки](../debugger/debugger-basics.md)   
 [Отладка управляемого кода](../debugger/debugging-managed-code.md)   
 [Параллельное программирование](/dotnet/standard/parallel-programming/index)   
 [Использование окна задач](../debugger/using-the-tasks-window.md)   
 [Task-класс](../extensibility/debugger/task-class-internal-members.md)
