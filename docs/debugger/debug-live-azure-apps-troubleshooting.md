---
title: Устранение неполадок отладки моментальных снимков | Документация Майкрософт
ms.custom: seodec18
ms.date: 11/07/2017
ms.topic: troubleshooting
helpviewer_keywords:
- debugger
ms.assetid: 511a0697-c68a-4988-9e29-8d0166ca044a
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: bb6e7332386e7dc22465eaffedd01a969673dc3c
ms.sourcegitcommit: d0425b6b7d4b99e17ca6ac0671282bc718f80910
ms.translationtype: MTE95
ms.contentlocale: ru-RU
ms.lasthandoff: 02/21/2019
ms.locfileid: "56607919"
---
# <a name="troubleshooting-and-known-issues-for-snapshot-debugging-in-visual-studio"></a>Устранение неполадок и известные проблемы для отладки моментальных снимков в Visual Studio

Если действия, описанные в этой статье не решило проблему, обратитесь в службу snaphelp@microsoft.com.

## <a name="issue-snappoint-does-not-turn-on"></a>Проблема: Точки прикрепления не включается

Если отображается значок предупреждения ![значок предупреждения точка прикрепления](../debugger/media/snapshot-troubleshooting-snappoint-warning-icon.png "значок предупреждения точка прикрепления") с вашей точки прикрепления вместо значка регулярных точка прикрепления, затем точка прикрепления не включена.

![Точка прикрепления к включению](../debugger/media/snapshot-troubleshooting-dont-turn-on.png "точка прикрепления к включению")

Выполните следующие действия:

1. Убедитесь, что у вас есть ту же версию исходного кода, который использовался для создания и развертывания вашего app.isua1. Убедитесь, что загружается правильное символы для развертывания. Чтобы сделать это, просмотрите **модули** окна во время отладки моментальных снимков и проверить файл символов в столбце отображается PDB-файл загружен для отладки модуля. Отладчик моментальных снимков будет пытаться автоматически загружать и использовать символы для развертывания.

## <a name="issue-symbols-do-not-load-when-i-open-a-snapshot"></a>Проблема: При открытии моментального снимка не загружать символы

Если вы увидите представленную ниже окна, символы, не был загружен.

![Не загружать символы](../debugger/media/snapshot-troubleshooting-symbols-wont-load.png "не загружать символы")

Выполните следующие действия:

- Нажмите кнопку **изменить параметры символов...** ссылка на этой странице. В **Отладка > символ** параметры, добавьте каталог кэша символов. Перезапустите после задания пути к символам отладки моментальных снимков.

   Символы, то есть PDB-файлы, доступные в проекте должен соответствовать развертывания службы приложений. В большинстве случаев (развертывание с помощью Visual Studio, CI/CD с Azure конвейеров или Kudu, и т.д.) будет публиковать файлы символов вдоль в службе приложений. Установка каталога кэша символов позволяет Visual Studio для использования этих символов.

   ![Параметры символов](../debugger/media/snapshot-troubleshooting-symbol-settings.png "параметры символов")

- Кроме того Если ваша организация использует сервер символов или удаляет символы в другой путь, используйте параметры символов для загрузки нужные символы для развертывания.

## <a name="issue-i-cannot-see-the-attach-snapshot-debugger-option-in-the-cloud-explorer"></a>Проблема: я не вижу параметр «Присоединить отладчик моментальных снимков» в Cloud Explorer

Выполните следующие действия:

- Убедитесь, что установлен компонент отладчика моментальных снимков. Откройте установщик Visual Studio и проверьте **Snapshot Debugger** компонента в рабочую нагрузку Azure.
::: moniker range="< vs-2019"
- Убедитесь, что поддерживается приложение. В настоящее время только ASP.NET (4.6.1+) и поддерживаются приложений ASP.NET Core (2.0 или более поздней), развернутых в службах приложений Azure.
::: moniker-end
::: moniker range=">= vs-2019"
- Убедитесь, что поддерживается приложения:
  - Службы приложений Azure — приложений ASP.NET, работающих на платформе .NET Framework 4.6.1 или более поздней версии.
  - Службы приложений Azure - приложений ASP.NET Core, выполняющихся на .NET Core 2.0 или более поздней версии на Windows.
  - Azure виртуальные машины (и масштабируемого набора виртуальных МАШИН) - приложений ASP.NET, работающих на платформе .NET Framework 4.6.1 или более поздней версии.
  - Azure виртуальные машины (и масштабируемого набора виртуальных МАШИН) - приложений ASP.NET Core в .NET Core 2.0 или более поздней версии на Windows.
  - Kubernetes служб Azure - приложений ASP.NET Core, выполняющихся на .NET Core 2.2 или более поздней на Debian 9.
  - Kubernetes служб Azure - приложений ASP.NET Core, выполняющихся на .NET Core 2.2 или более поздней на Alpine 3.8.
  - Kubernetes служб Azure - приложений ASP.NET Core, выполняющихся на .NET Core 2.2 или более поздней Ubuntu 18.04.
::: moniker-end

## <a name="issue-i-only-see-throttled-snapshots-in-the-diagnostic-tools"></a>Проблема: я вижу только регулирование моментальные снимки в окне средств диагностики

![Регулируемая точка прикрепления](../debugger/media/snapshot-troubleshooting-throttled-snapshots.png "регулирование точка прикрепления")

Выполните следующие действия:

- Моментальные снимки занимают место в памяти мало, но имеют плата фиксации. Если отладчик моментальных снимков обнаруживает, что сервер находится в памяти в условиях большой нагрузки, они не имеют моментальные снимки. Их можно удалить уже записанных, остановите сеанс отладчика моментальных снимков и повторить попытку.

## <a name="known-issues"></a>Известные проблемы

- Отладка моментальных снимков с несколькими клиентами Visual Studio от ту же службу приложений в настоящее время не поддерживается.
- Оптимизация Roslyn IL не полностью поддерживаются в проектах ASP.NET Core. Для некоторых проектов ASP.NET Core не будет видеть некоторые переменные или использовать некоторые переменные в условных операторах.
- Специальные переменные, такие как *$FUNCTION* или *$CALLER*, не могут выполняться в условных инструкциях или точек ведения журнала для проектов ASP.NET Core.
- Отладка моментальных снимков не работает в службах приложений, имеющих [локальное кэширование](/azure/app-service/app-service-local-cache) включен.
- Моментальный снимок отладки приложения API в настоящее время не поддерживается.

## <a name="site-extension-upgrade"></a>Обновление расширения сайта

Отладка моментальных снимков и Application Insights, зависящих от ICorProfiler, который загружается в процесс сайта и вызывает проблемы блокировки файлов во время обновления. Мы рекомендуем использовать этот процесс, чтобы убедиться, что имеется без простоя, на рабочем сайте.

- Создание [слот развертывания](/azure/app-service/web-sites-staged-publishing) в службе приложений и развертывание вашего сайта в слоте.
- Переключает слот с производством, из Cloud Explorer в Visual Studio или с помощью портала Azure.
- Остановите сайт слота. Это займет несколько секунд, чтобы завершить процесс w3wp.exe узел от всех экземпляров.
- Обновление расширения слот сайта на сайт Kudu или портала Azure (*колонку службы приложений > средства разработки > расширения > обновления*).
- Запустите слот веб-сайт. Рекомендуется перейти на сайт еще раз разобрались.
- Переключает слот с производством.

## <a name="see-also"></a>См. также

- [Отладка в Visual Studio](../debugger/index.md)
- [Отладка работающих приложений ASP.NET, с помощью отладчика моментальных снимков](../debugger/debug-live-azure-applications.md)
- [Отладка динамического ASP.NET Azure Machines\Virtual машин масштабируемые наборы виртуальных машин с помощью отладчика моментальных снимков](../debugger/debug-live-azure-virtual-machines.md)
- [Отладка с помощью отладчика моментальных снимков Kubernetes динамической ASP.NET в Azure](../debugger/debug-live-azure-kubernetes.md)
- [Ответы на часто задаваемые вопросы по отладке моментальных снимков](../debugger/debug-live-azure-apps-faq.md)