---
title: "Устранение неполадок и известные проблемы для отладки моментального снимка | Документы Microsoft"
ms.date: 11/07/2017
ms.reviewer: 
ms.suite: 
ms.technology:
- vs-ide-debug
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- debugger
ms.assetid: 511a0697-c68a-4988-9e29-8d0166ca044a
caps.latest.revision: 
author: mikejo5000
ms.author: mikejo
manager: ghogen
ms.workload:
- multiple
ms.openlocfilehash: 7792e22398afd476703407e8ae2159e0f1afd931
ms.sourcegitcommit: 5d43e9590e2246084670b79269cc9d99124bb3df
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/19/2018
---
# <a name="troubleshooting-and-known-issues-for-snapshot-debugging-in-visual-studio"></a>Устранение неполадок и известные проблемы для моментального снимка отладки в Visual Studio

Если действия, описанные в этом разделе устранить неполадку, обратитесь в службу snaphelp@microsoft.com.

## <a name="issue-snappoint-does-not-turn-on"></a>Проблема: Snappoint не включается

Если отображается значок предупреждения ![значок предупреждения Snappoint](../debugger/media/snapshot-troubleshooting-snappoint-warning-icon.png "значок предупреждения Snappoint") с вашей snappoint вместо обычных snappoint значок, затем snappoint не включен.

![Не включать Snappoint](../debugger/media/snapshot-troubleshooting-dont-turn-on.png "Snappoint не включается")

Выполните следующие действия:

1. Убедитесь, что у вас есть одна и та же версия исходного кода, который использовался для построения и развертывания вашего app.isua1. Убедитесь, что загружается правильное символы для развертывания. Для этого просмотра **модули** окна во время отладки моментальных снимков и проверьте файл символов в столбце отображается PDB-файла, загруженного модуля отладки. Обратите внимание, что отладчик моментального снимка попытается автоматически загрузить и использовать символы для развертывания.

## <a name="issue-symbols-do-not-load-when-i-open-a-snapshot"></a>Проблема: При открытии моментального снимка не загружать символы

Если вы видите следующие окна, не удалось загрузить символы.

![Не загружать символы](../debugger/media/snapshot-troubleshooting-symbols-wont-load.png "не загружать символы")

Выполните следующие действия:

- Нажмите кнопку **изменить параметры символов...** ссылки на этой странице. В **Отладка > символ** параметров, добавьте каталог кэша символов. Перезапустите отладку моментальных снимков после задания путь к символам.

   Символы или PDB-файлы, доступные в проекте должен соответствовать развертывания приложения службы. Большинство развертываний (развертывание с помощью Visual Studio, CI или компакт-диска с VSTS или Kudu, т. д.) будет публиковать файлы символов вдоль в службе приложений. Установка каталог кэша символов позволяет Visual Studio для использования этих символов.

   ![Параметры символов](../debugger/media/snapshot-troubleshooting-symbol-settings.png "параметры символов")

- Кроме того Если ваша организация использует сервер символов или удаляет символы в другой путь, используйте параметры символов для загрузки нужные символы для развертывания.

## <a name="issue-i-cannot-see-the-attach-snapshot-debugger-option-in-the-cloud-explorer"></a>Проблема: не отображается вариант «Присоединить отладчик моментальный снимок» в Cloud Explorer

Выполните следующие действия:

- Убедитесь, что установлен компонент отладчика моментального снимка. Откройте установщик Visual Studio и проверьте **отладчик моментального снимка** компонент Azure рабочей нагрузки.
- Убедитесь, что поддерживается приложение. В настоящее время только ASP.NET (4.6.1+) и поддерживаются приложения ASP.NET Core (2.0 +), развернутые службы приложений Azure.

## <a name="issue-i-only-see-throttled-snapshots-in-the-diagnostic-tools"></a>Проблема: отображается только регулированию моментальные снимки в средствах диагностики

![Ограниченный режим snappoint](../debugger/media/snapshot-troubleshooting-throttled-snapshots.png "регулированию snappoint")

Выполните следующие действия:

- Моментальные снимки занимают очень мало памяти, но имеют издержки фиксации. Если отладчик моментального снимка обнаруживает, что сервер находится под нагрузкой большого объема памяти, они не имеют моментальные снимки. Можно удалить уже записанных моментальные снимки, остановите сеанс отладчика моментальный снимок и повторите попытку.

## <a name="known-issues"></a>Известные проблемы

- Отладка моментального снимка с несколькими клиентами Visual Studio к той же службы приложения в настоящее время не поддерживается.
- В проектах ASP.NET Core Roslyn IL оптимизации поддерживаются не полностью. Для некоторых проектов ASP.NET Core может не быть видеть некоторые переменные или использовать некоторые переменные в условных операторах. 
- Специальные переменные, такие как *$FUNCTION* или *$CALLER*, не могут выполняться в условных инструкциях или logpoints для проектов ASP.NET Core.
- Моментальный снимок не удается выполнить отладку на службы приложений, имеющих [локальное кэширование](/azure/app-service/app-service-local-cache) включен.
- Отладка приложения API моментальных снимков в настоящее время не поддерживается.

## <a name="site-extension-upgrade"></a>Обновление расширения сайта

Отладка моментальных снимков и Application Insights, зависят от ICorProfiler, который загружается в процесс сайта и вызывает проблемы блокировки файлов во время обновления. Мы рекомендуем эту процедуру, чтобы убедиться, что без простоя, на рабочем сайте.

- Создание [слот развертывания](/azure/app-service/web-sites-staged-publishing) в службе приложений и развертывания сайта в слоте.
- Переключить слот с производства из Cloud Explorer в Visual Studio или на портале Azure.
- Остановите узел слота. Это займет несколько секунд для завершения процесса w3wp.exe узел от всех экземпляров.
- Обновление расширения слот сайта с сайта Kudu или портала Azure (*колонка службы приложения > средства разработки > расширения > обновление*).
- Запустите веб-сайт слота. Мы рекомендуем, посетив этот сайт для прогрева еще раз.
- Переключить слот с производства.

## <a name="see-also"></a>См. также

[Отладка в Visual Studio](../debugger/index.md)  
[Отладка динамической приложений ASP.NET с помощью отладчика моментальных снимков](../debugger/debug-live-azure-applications.md)  
[Ответы на часто задаваемые вопросы по отладке моментальных снимков](../debugger/debug-live-azure-apps-faq.md)  
