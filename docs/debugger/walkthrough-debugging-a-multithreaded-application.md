---
title: "Просматривать потоки в отладчике | Документы Microsoft"
ms.custom: 
ms.date: 04/25/2017
ms.reviewer: 
ms.suite: 
ms.technology: vs-ide-debug
ms.tgt_pltfrm: 
ms.topic: article
f1_keywords: vs.debug.threads
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords:
- threading [Visual Studio], debugging
- Thread.Name property
- debugger, Threads window
- SetThreadName function
- Threads window
- '@TIB'
- debugging [Visual Studio], threads
ms.assetid: 590ffd57-0556-43d8-8962-ee27e5b2b7d7
caps.latest.revision: "44"
author: mikejo5000
ms.author: mikejo
manager: ghogen
ms.openlocfilehash: 64d9eccdf57388428bfcd7ba5e43f75087bcf0bf
ms.sourcegitcommit: f40311056ea0b4677efcca74a285dbb0ce0e7974
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2017
---
# <a name="view-threads-in-the-debugger-in-visual-studio-using-the-threads-window"></a>Представление потоков в отладчике в Visual Studio, используя окно "Потоки"
В **потоков** окна, можно проверить и работа с потоками в приложении, в котором производится отладка. Пошаговое руководство по использованию **потоков** окна, в разделе [Пошаговое руководство: отлаживать, используя окно "Потоки"](../debugger/how-to-use-the-threads-window.md).
  
 **Потоков** окне имеется таблица, каждая строка которой представляет поток в приложении. По умолчанию в таблице перечисляются все потоки приложения, но можно фильтровать этот список, чтобы в нем показывались только нужные потоки. В каждом столбце содержится свой тип сведений. Можно также скрывать некоторые столбцы. Если отображаются все столбцы, то в них имеются следующие сведения (слева направо):  
  
-   Столбец флагов, где можно пометить поток, которому планируется уделить особое внимание. Сведения о том, как пометить поток см. в разделе [как: по](../debugger/how-to-flag-and-unflag-threads.md).  
  
-   Текущий поток столбец, в котором желтая стрелка указывает текущий поток (контур стрелки указывает на текущий контекст отладчика для потока не является текущей).
  
-   **Идентификатор** столбец, который содержит идентификационный номер для каждого потока.  
  
-   **Управляемый ИД** столбец, в котором содержатся управляемые идентификационные номера управляемых потоков.  
  
-   **Категории** столбец, который распределяет потоки, потоки пользовательского интерфейса, обработчики вызова удаленной процедуры и рабочие потоки. Особая категория идентифицирует главный поток приложения.  
  
-   **Имя** столбец, в котором каждый поток по имени, если оно имеется, или \<без имени >.  
  
-   **Расположение** столбец, в котором показывается, где поток выполняется. Можно развернуть это расположение, чтобы отобразить полный стек вызова для потока.  
  
-   **Приоритет** столбец, в котором содержится приоритет, назначенный системой каждому потоку.  
  
-   **Affinity Mask** столбец, который является дополнительным столбцом (обычно скрыт). В этом столбце показывается маска сходства процессора для каждого потока. В многопроцессорной системе маска сходства определяет, какой процессор в каком потоке может работать.  
  
-   **Счетчик приостановок** столбец (обычно скрыт), в котором содержится счетчик приостановок и обычно скрыт. Этот счетчик определяет, может ли поток выполняться. Описание счетчика приостановок см. в разделе "Замораживание и размораживание потоков" далее в этой теме.  
  
-   **Имя процесса** столбец (обычно скрыт), содержащий процесс, к которому принадлежит каждый поток. Этот столбец может быть полезно при отладке нескольких процессов.  
  
### <a name="to-display-the-threads-window-in-break-mode-or-run-mode"></a>Открытие окна потоков в режиме приостановки или в режиме выполнения  
  
-   Во время отладки, выберите **отладки** последовательно выберите пункты **Windows**, а затем нажмите кнопку **потоков**.  
  
### <a name="to-display-or-hide-a-column"></a>Отображение или скрытие столбца  
  
-   На панели инструментов в верхней части **потоков** окно, нажмите кнопку **столбцы**, а затем выберите или очистите имя столбца, который требуется отобразить или скрыть.    

## <a name="display-flagged-threads"></a>Отображать отмеченные потоки  
 Можно пометить поток, который требуется уделить особое внимание, поставив рядом с ним значок в **потоков** окна. Дополнительные сведения см. в разделе [как: по](../debugger/how-to-flag-and-unflag-threads.md). В **потоков** окна, можно выбрать для отображения всех потоков или только помеченных потоков.  
  
#### <a name="to-display-only-flagged-threads"></a>Отображение только помеченных потоков  
  
-   Выберите **Показать потоки только помеченные** кнопку в верхней части **потоков** окна. (Если он недоступен, необходимо сначала пометить некоторые потоки.) 

## <a name="freeze-and-thaw-threads"></a>Замораживание и размораживание потоков  
 Если поток заморожен, то система не начнет его выполнение, даже если будут доступны все ресурсы.  
  
 В машинном коде, можно приостановить или возобновить потоков путем вызова функций Windows `SuspendThread` и `ResumeThread` или функции MFC [CWinThread::SuspendThread](/cpp/mfc/reference/CWinThread-class.md#cwinthread__suspendthread) и [CWinThread::ResumeThread](/cpp/mfc/reference/CWinThread-class.md#cwinthread__resumethread). При вызове метода `SuspendThread` или `ResumeThread`, изменении *счетчик приостановок*, которое отображается в **потоков** окна. Однако замораживание или размораживание собственного потока не приводит к изменению счетчика приостановок. В машинном коде поток не может выполняться, если он является размороженным и имеет счетчик приостановок, равный нулю.  
  
 В управляемом коде замораживание или размораживание потока приводит к изменению счетчика приостановок. В управляемом коде замороженный поток имеет счетчик приостановок со значением 1. В машинном коде замороженный поток имеет счетчик приостановок со значением 0 до тех пор, пока этот поток не будет приостановлен путем вызова `SuspendThread`.  
  
> [!NOTE]
>  При отладке вызова управляемого кода из машинного кода управляемый код выполняется в том же физическом потоке, что и вызывающий его машинный код. Приостановка выполнения или замораживание присущего данному объекту кода приводит также к замораживанию управляемого кода.  
  
#### <a name="to-freeze-or-thaw-execution-of-a-thread"></a>Заморозка и разморозка выполнения потока  
  
-   На панели инструментов в верхней части **потоков** окно, нажмите кнопку **Заморозить потоки** или **Разморозить потоки**.  
  
     Это действие влияет только на потоки, выбранные в **потоков** окна. 

### <a name="switch-to-another-thread"></a>Переключение на другой поток 

Желтая стрелка указывает текущий поток (и расположение указатель выполнения). Зеленая стрелка с фигурным концом указывает, что поток не является текущей имеет текущий контекст отладчика.

#### <a name="to-switch-to-another-thread"></a>Для переключения на другой поток  
  
-   Выполните одно из следующих действий.  
  
    -   Дважды щелкните любой поток.  
  
    -   Щелкните правой кнопкой мыши поток и выберите **переключиться на поток**.

## <a name="group-and-sort-threads"></a>Группы и Сортировка потоков  
 При группировании потоков в таблице появляется заголовок для каждой группы. В заголовке содержится описание группы, например "Рабочие потоки" или "Непомеченные потоки", и элемент управления "Дерево". Потоки-элементы каждой группы отображаются под заголовком группы. Если требуется скрыть потоки-элементы в какой-либо группе, можно свернуть эту группу с помощью элемента управления "Дерево".  
  
 Поскольку группирование имеет приоритет перед сортировкой, можно, например, группировать потоки по категориям, а затем по идентификаторам внутри каждой категории.  
  
#### <a name="to-sort-threads"></a>Сортировка потоков  
  
1.  На панели инструментов в верхней части **потоков** окно, нажмите кнопку в верхней части любого столбца.  
  
     Теперь потоки отсортированы по значениям в этом столбце.  
  
2.  Если требуется изменить порядок сортировки, нажмите кнопку же еще раз.  
  
     Потоки, которые отображались вверху списка, теперь отображаются внизу.  
  
#### <a name="to-group-threads"></a>Группирование потоков  
  
-   В **потоков** окна инструментов, нажмите кнопку **Group by** , а затем выберите условия, которые требуется группировать потоки.  
  
#### <a name="to-sort-threads-within-groups"></a>Сортировка потоков в группах  
  
1.  На панели инструментов в верхней части **потоков** окно, нажмите кнопку **Group by** , а затем выберите условия, которые требуется группировать потоки.  
  
2.  В **потоков** окно, нажмите кнопку в верхней части любого столбца.  
  
     Теперь потоки отсортированы по значениям в этом столбце.  
  
#### <a name="to-expand-or-collapse-all-groups"></a>Сворачивание и разворачивание всех групп  
  
-   На панели инструментов в верхней части **потоков** окно, нажмите кнопку **развернуть группы** или **свернуть группы**.  
  
## <a name="search-for-specific-threads"></a>Поиск конкретных потоков  
 В [!INCLUDE[vs_dev11_long](../data-tools/includes/vs_dev11_long_md.md)] можно искать потоки, соответствующие указанной строке. При поиске потоков в **потоков** окна, отображаются все потоки, соответствующие строке поиска в любом столбце. Эти сведения включают расположение потока, которое отображается в верхней части стека вызовов в **расположение** столбца. По умолчанию Однако полный стек вызова не производится поиск.  
  
#### <a name="to-search-for-specific-threads"></a>Поиск конкретных потоков  
  
-   На панели инструментов в верхней части **потоков** окна, последовательно выберите пункты **поиска** поле и либо:  
  
    -   введите строку поиска и нажмите клавишу ВВОД;  
  
         \- или -  
  
    -   Нажмите кнопку раскрывающегося списка рядом с **поиска** и выберите строку поиска из предыдущего поиска.  
  
-   (Необязательно) Чтобы включить полный стек вызовов для поиска, установите **поиск в стеке вызова**.   
  
## <a name="display-thread-call-stacks-and-switching-between-frames"></a>Отображение стека вызовов потоков и переключение между фреймами  
В многопотоковых программах каждый поток имеет свой собственный стек вызовов. **Потоков** предоставляет удобный способ просмотра этих стеков.

> [!TIP]
> Визуальное представление стека вызовов для каждого потока, используйте [Параллельные стеки](../debugger/get-started-debugging-multithreaded-apps.md) окна.
  
#### <a name="to-view-the-call-stack-of-a-thread"></a>Просмотр стека вызовов потока  
  
-   В **расположение** столбец, нажмите перевернутый треугольник рядом с расположением потока.  
  
     Расположение будет развернуто, и будет отображен стек вызова для потока.  
  
#### <a name="to-view-or-collapse-the-call-stacks-of-all-threads"></a>Просмотр и сворачивание стеков вызовов всех потоков  
  
-   На панели инструментов в верхней части **потоков** окно, нажмите кнопку **развернуть стеки вызовов** или **свернуть стеки вызовов**.  
  
## <a name="see-also"></a>См. также  
 [Отладка многопоточных приложений](../debugger/debug-multithreaded-applications-in-visual-studio.md)   
 [Начало отладки многопоточных приложений](../debugger/get-started-debugging-multithreaded-apps.md)