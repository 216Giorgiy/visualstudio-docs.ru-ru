---
title: Сведения об отладке с помощью отладчика Visual Studio
ms.description: Learn how to start the Visual Studio debugger, step through code, and inspect data.
ms.custom: mvc
ms.date: 06/15/2018
ms.technology: vs-ide-debug
ms.topic: tutorial
helpviewer_keywords:
- debugger
ms.assetid: 62734c0d-a75a-4576-8f73-0e97c19280e1
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: 1144e7e33709510cb03ed02cb62020f81e8e8b62
ms.sourcegitcommit: 498e39e89a89ad7bf9dcb0617424fff999b1c3b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/21/2018
ms.locfileid: "36303150"
---
# <a name="tutorial-learn-to-debug-using-visual-studio"></a>Учебник: Сведения об отладке, с помощью Visual Studio

В этом разделе представлены возможности отладчика Visual Studio в пошаговое руководство. Если требуется полное представление о возможности отладчика, см. в разделе [обзором возможностей отладчика](../debugger/debugger-feature-tour.md). Когда вы *отладка приложения*, это обычно означает, что приложение выполняется с подключенным отладчиком. При этом отладчик предоставляет множество способов, чтобы увидеть, что делает код во время его выполнения. Можно пошагово выполнять код и просматривать значения, хранящиеся в переменных, можно задать Контрольные значения для переменных, чтобы увидеть при изменении значений, можно просмотреть путь выполнения кода, и т.п. Если это в первый раз, которое вы пытались пройти отлаживать код, вы можете прочитать [отладки для начинающих](../debugger/debugging-absolute-beginners.md) прежде чем приступить к этой статье.

Либо вы найдете вдоль Чтобы просмотреть функции отладчика или можно загрузить полный образец, используемый в обзор возможностей и выполните действия, самостоятельно. Чтобы скачать пример и выполнения этой процедуры, перейдите к [демонстрационная версия средства просмотра фотографий](https://code.msdn.microsoft.com/windowsdesktop/WPF-Photo-Viewer-Demo-be75662a).

|         |         |
|---------|---------|
|  ![значок кинокамеры для видео](../install/media/video-icon.png "Просмотреть видео")  |    [Ознакомьтесь с видео](https://mva.microsoft.com/en-US/training-courses-embed/getting-started-with-visual-studio-2017-17798/Debugger-Feature-tour-of-Visual-studio-2017-sqwiwLD6D_1111787171) по отладке, показаны аналогичные действия. |

Несмотря на то что демонстрационное приложение C#, средства применимы к C++, Visual Basic, JavaScript и других языков, поддерживаемых Visual Studio (за исключением оговоренных случаев).

В этом руководстве рассмотрены следующие задачи:

> [!div class="checklist"]
> * Запустите отладчик и задавать точки останова.
> * Дополнительные команды для пошаговой проверки кода в отладчике
> * Проверить значения переменных в подсказках по данным и окон отладчика
> * Проверить стек вызовов
> * Использование помощника по исправлению ошибок

## <a name="prerequisites"></a>Предварительные требования

* Необходимо установить Visual Studio 2017 и. **NET разработки настольных приложений** рабочей нагрузки.

    Установите Visual Studio бесплатно со страницы [скачиваемых материалов Visual Studio](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017), если еще не сделали этого.

    Если вам нужно установить рабочую нагрузку, но среда Visual Studio уже имеется, щелкните ссылку **Открыть установщик Visual Studio** в левой области диалогового окна **Новый проект** (выберите пункты **Файл** > **Создать** > **Проект**). Запускается Visual Studio Installer. Выберите. **NET разработки настольных приложений** рабочей нагрузки, затем выберите **изменить**.

## <a name="start-the-debugger"></a>Запустите отладчик!

1. Для выполнения описанных действий в Visual Studio, загрузите пример [на этой странице](https://code.msdn.microsoft.com/windowsdesktop/WPF-Photo-Viewer-Demo-be75662a).

    > [!IMPORTANT]
    > Необходимо установить Visual Studio с рабочей нагрузкой разработки классических приложений .NET для запуска приложения, которые мы используем в демонстрационной версии.

2. Распакуйте проекта.

3. Откройте Visual Studio и выберите **файл > Открыть** меню команды, а затем выберите **решение или проект**и откройте папку, куда был загружен проект.

     ![Откройте пример проекта](../debugger/media/dbg-tour-open-project.png "Открытие проекта")

3. Откройте пример средства просмотра фотографий WPF > C# папку, выберите *photoapp.sln* файла и выберите **откройте**.

     Проект откроется в Visual Studio. В обозревателе решений в области справа отображаются все файлы проекта.

    ![Файлы обозревателя решений](../debugger/media/dbg-tour-solution-explorer.png "обозревателе решений")

4. Нажмите клавишу **F5** (**Отладка > Начать отладку**) или **начать отладку** кнопку ![начать отладку](../debugger/media/dbg-tour-start-debugging.png "начать отладку ") на панели инструментов отладки.

     ![Приложение для просмотра фотографий](../debugger/media/dbg-tour-wpf-app.png "приложение для просмотра фотографий")

     F5 запускает приложение с подключенным к процессу приложения, но справа, теперь мы еще не добавлены все точки останова или сделать ничего особенного, чтобы проанализировать код отладчиком. Поэтому просто загружается приложение, и вы увидите фотографии.

     В этом учебнике мы рассмотрим это более подробно в это приложение, с помощью отладчика и получить краткий обзор отладчик компоненты.

5. Остановите отладчик, нажав клавишу red stop ![остановить отладку](../debugger/media/dbg-tour-stop-debugging.png "остановить отладку") кнопки.

## <a name="set-a-breakpoint-and-start-the-debugger"></a>Установите точку останова и запустите отладчик

Для отладки, необходимо запустить приложение с отладчик присоединен к процессу приложения.

1. В `MainWindow` конструктор MainWindow.xaml.cs, установите точку останова, щелкнув область слева от первой строки кода.

     ![Установите точку останова](../debugger/media/dbg-tour-set-a-breakpoint.gif "SetABreakPoint")

    Точки останова — это один из самых простых и важных компонентов надежной отладки. Точка останова указывает, где Visual Studio следует приостановить выполнение кода, чтобы вы могли проверить значения переменных или поведение памяти либо выполнение ветви кода. 

6. Нажмите клавишу **F5** или **начать отладку** кнопку, запускается приложение, и отладчик переходит к строке кода, где вы задали точку останова.

    Желтая стрелка представляет инструкцию, на котором отладчик приостановил, который также приостанавливает выполнение приложения в той же точке (Эта инструкция еще не выполнена).

    F5 продолжает выполнение приложения до следующей точки останова. (Если приложение еще не запущена, F5 запускает отладчик и останавливается на первой точке останова.)

    Точки останова имеют полезная функция, если известно, что строки кода или в разделе кода, который вы хотите подробно рассмотреть.

## <a name="optional-restart-your-app-quickly"></a>(Необязательно) Перезапустите приложение быстро

Нажмите кнопку **перезапустите** ![перезапустить приложение](../debugger/media/dbg-tour-restart.png "RestartApp") кнопку на панели инструментов отладки (**Ctrl** + **Shift**   +  **F5**).

При нажатии клавиши **перезапустите**, позволяет сэкономить время и остановите приложение и перезапуска отладчика. Отладчик останавливается на первой точке останова, достигается при выполнении кода.

Отладчик останавливается в точке останова, заданной, в `MainWindow` конструктор.

## <a name="navigate-code-in-the-debugger-using-step-commands"></a>Навигация по коду в отладчике с помощью команды пошаговой отладки

Главным образом, здесь мы использовать сочетания клавиш, так как это хороший способ получения быстро, при выполнении приложения в отладчике (эквивалентные команды например меню команды отображаются в круглых скобках).

1. Нажмите клавишу **F11** (**Отладка > шаг с заходом**) дважды, чтобы продолжить выполнение приложения, которое `InitializeComponent()` функции.

     ![Используйте клавишу F11 для кода, шаг с заходом](../debugger/media/dbg-tour-f11.png "пошагово F11")

     F11 является **шаг с заходом** команды и перемещает приложение выполнения одной инструкции одновременно. F11 — это хороший способ проверить поток выполнения в наиболее полные сведения. (Чтобы переместиться код быстрее, мы покажем некоторые другие параметры также.) По умолчанию, отладчик пропускает непользовательский код (если для получения дополнительных сведений см. в разделе [Just My Code](../debugger/just-my-code.md)).

     >[!NOTE]
     > В управляемом коде вы увидите диалоговое окно с запросом, если вы хотите получать уведомления при автоматически обход свойств и операторов (поведение по умолчанию). Если вы хотите изменить параметр позже, отключите **обход свойств и операторов** в **Сервис > Параметры** меню в разделе **Отладка**.

2. Нажмите клавишу **F10** (**Отладка > шаг с обходом**) несколько раз, пока отладчик останавливается на первой строке кода в `OnApplicationStartup` обработчик событий.

     ![Нажмите клавишу F10 для кода, шаг с обходом](../debugger/media/dbg-tour-f10-step-over.png "шагам F10")

     F10 отладчик без шаг с заходом в функции или методы в коде приложения (код по-прежнему выполняется). Нажав клавишу F10 `InitializeComponent` вызова метода (вместо F11), мы просто пропущен код реализации `InitializeComponent` (какие. Возможно, мы не интересны прямо сейчас).

## <a name="step-into-a-property"></a>Шаг с заходом в свойства

1. С помощью отладчика приостановлено на следующую строку кода:

    ````c#
    mainWindow.Photos.Path = Environment.CurrentDirectory + "\\images";
    ````

    Щелкните правой кнопкой мыши на строку кода и выберите **шаг с заходом в конкретное**, затем **SDKSamples.ImageSample.PhotoCollection.Path.set**

     ![Используйте шаг в определенной функции](../debugger/media/dbg-tour-step-into-specific.png "шаг с заходом в конкретное")

    Как упоминалось ранее, по умолчанию, отладчик пропускает управляемые свойства и поля, но **шаг с заходом в конкретное** команда позволяет переопределить это поведение. Сейчас мы хотим просмотреть, что происходит при `Path.set` выполняется метод задания свойства. **Шаг с заходом в конкретное** возвращает нам `Path.set` код.

     ![результат шага с заходом в конкретное](../debugger/media/dbg-tour-step-into-specific-2.png "шаг с заходом в конкретное")

     `Update` В этом коде метод выглядит, как это может быть интересно, поэтому позволяет использовать отладчик для проверки этого кода поближе.

5. Наведите указатель мыши `Update` метод до зеленую **выполнение до щелкнутого** кнопку ![выполнение до щелкнутого](../debugger/media/dbg-tour-run-to-click.png "RunToClick") отображается слева.

     ![Использовать выполнение до щелкнутого функция](../debugger/media/dbg-tour-run-to-click-2.png "выполнение до щелкнутого")

    >  [!NOTE]
    > **Выполнение до щелкнутого** кнопку впервые появился в [!include[vs_dev15](../misc/includes/vs_dev15_md.md)]. Если вы не видите кнопку с зеленой стрелкой, используйте клавишу F11, в этом примере вместо этого для развития отладчика.

6. Нажмите кнопку **выполнение до щелкнутого** кнопку ![выполнение до щелкнутого](../debugger/media/dbg-tour-run-to-click.png "RunToClick").

    С помощью этой кнопки аналогично установке временной точки останова. **Выполнение до щелкнутого** удобна для решения проблем со быстро в видимой области кода приложения (можно щелкнуть в любом открытом файле).

    Отладчик перемещается на `Update` реализацию метода.

7. Нажмите клавишу **F11** на шаг с заходом `Update` метод.

     ![Шаг с заходом в метод Update результат](../debugger/media/dbg-tour-update-method.png "шаг в метод обновления")

    Здесь мы найти код интересную; приложение получает все. *jpg* файлы, находящиеся в конкретном каталоге, а затем создать объект фотографии для каждого файла. Этот код дает нам это хорошая возможность запустить проверку состояние приложения (переменные) с помощью отладчика. Для этого мы в следующих разделах данного руководства.

    Функции, позволяющие проверять значения переменных являются одним из наиболее полезных функций отладчика, и существуют разные способы сделать это. Часто при попытке выполнить отладку проблемы, вы пытаетесь определить ли переменные хранятся значения, которые они должны иметь определенное время.

## <a name="examine-the-call-stack"></a>Проверить стек вызовов

Во время паузы в `Update` метод, нажмите кнопку **стек вызовов** окно, в котором по умолчанию в нижней правой области.

![Проверить стек вызовов](../debugger/media/dbg-tour-call-stack.png "ExamineCallStack")

**Стек вызовов** окна показан порядок, в котором находятся получение называется методов и функций. Верхняя строка показывает текущую функцию ( `Update` метод в приложении Обзор). Во второй строке показано, что `Update` был вызван с `Path.set` свойства и т. д.

>  [!NOTE]
> **Стек вызовов** окно аналогична точки зрения отладки в некоторых IDE, например Eclipse.

Стек вызовов — хороший способ проверять и анализировать ход выполнения приложения.

Можно дважды щелкнуть строку кода, чтобы рассмотреть исходного кода и также изменяет область текущего, проверяемое отладчиком. Это действие не перемещает отладчик.

Можно также использовать контекстные меню из **стек вызовов** окно для выполнения других задач. Например, можно вставлять точки останова в указанных функций, перейдите с помощью отладчика **выполнить до текущей позиции**и изучите исходный код. Дополнительные сведения см. в разделе [как: Проверьте стек вызовов](../debugger/how-to-use-the-call-stack-window.md).

## <a name="step-out"></a>Шаг с выходом

Предположим, что вы закончите изучение `Update` метод в файле Data.cs и вы хотите получить выходом из функции, но оставить в отладчике. Это можно сделать с помощью **шаг с выходом** команды.

1. Нажмите клавишу **Shift** + **F11** (или **Отладка > шаг с выходом**).

     Эта команда возобновляет выполнение приложения (и отладчик) до возврата текущей функции.

     Должен находиться в `Update` вызов метода в файле Data.cs.

2. Нажмите клавишу **Shift** + **F11** еще раз, и отладчик переходит вверх по стеку вызовов к `OnApplicationStartup` обработчик событий.

## <a name="run-to-cursor"></a>Выполнить до текущей позиции

1. Выберите **остановить отладку** красную кнопку ![остановить отладку](../debugger/media/dbg-tour-stop-debugging.png "остановить отладку") или **Shift** + **F5** .

2. В `Update` метод в *файле Data.cs*, щелкните правой кнопкой мыши `Add` метод вызова и выберите **выполнить до текущей позиции**. Эта команда запускает отладку и задает временную точку останова в текущей строке кода.

     ![Использовать выполнение до курсора функция](../debugger/media/dbg-tour-run-to-cursor.png "выполнить до курсора")

    Вы должен быть приостановлен в точке останова в `MainWindow` (так как это первая точка останова задать).

3. Нажмите клавишу **F5** для перехода к `Add` метод, если вы выбрали **выполнить до текущей позиции**.

    Эта команда полезна в тех случаях, когда вы редактируете код и хотите быстро настраивать временной точки останова и запустите отладчик.

## <a name="change-the-execution-flow"></a>Изменить поток выполнения

1. С помощью отладчика приостановлен `Add` вызов метода, с помощью мыши, чтобы скопировать желтая стрелка (указатель выполнения) в левой части и переместить желтая стрелка вверх на одну строку для `foreach` цикла.

     ![Переместите указатель выполнения](../debugger/media/dbg-tour-move-the-execution-pointer.gif "переместить указатель выполнения")

    Можно изменить поток выполнения, можно, например протестировать различные кодовые пути выполнения, или повторно выполнить код без перезапуска отладчика.

2. Теперь нажмите клавишу **F5**.

    Вы увидите образы, добавленные в окно приложения. Так как вы повторяете кода в `foreach` цикл, в некоторых образах были добавлены два раза!

    > [!WARNING]
    > Часто необходимо соблюдать осторожность, с помощью этой функции, и вы увидите предупреждение во всплывающей подсказке. Может появиться другие предупреждения, слишком. Перемещение указателя невозможно вернуть приложение в предыдущее состояние приложения.

## <a name="inspect-variables-with-data-tips"></a>Проверить значения переменных в подсказках по данным

1. Откройте *файле Data.cs* в приложении демонстрационная версия средства просмотра фотографий, щелкните правой кнопкой мыши `private void Update` объявление функции и выберите **выполнить до текущей позиции** (остановить приложение во-первых, если она уже запущена).

    Это приостанавливает приложение с подключенным отладчиком. Это позволяет изучать ее состояние.

2. Наведите указатель мыши `Add` вызова метода и нажмите кнопку **выполнение до щелкнутого** кнопку ![выполнение до щелкнутого](../debugger/media/dbg-tour-run-to-click.png "RunToClick").

3. Теперь, наведите указатель мыши на объект файла (`f`) и вы увидите значения свойства по умолчанию и имя файла *рынок 031. jpg*.

     ![Просмотреть подсказке](../debugger/media/dbg-tour-data-tips.gif "просмотреть подсказке по данным")

4. Разверните объект, чтобы просмотреть все свойства, такие как `FullPath` свойство.

    Часто при отладке, требуется быстрый способ проверить значения свойств для объектов, и советы по данным — отличный способ сделать это.

    > [!TIP]
    > В наиболее поддерживаемых языков можно изменить код во время сеанса отладчика, если вы нашли то, что вы хотите изменить. Дополнительные сведения см. в разделе [изменить и продолжить](../debugger/edit-and-continue.md). Для использования этой функции в этом приложении, тем не менее, сначала необходимо обновить версию приложения платформы .NET Framework.

## <a name="inspect-variables-with-the-autos-and-locals-windows"></a>Проверить значения переменных с помощью окна "Видимые" и "Локальные"

1. Рассмотрим **"Видимые"** окно в нижней части редактора кода.

     ![Проверить значения переменных в окне "Видимые"](../debugger/media/dbg-tour-autos-window.png "окно \"Видимые\"")

    В **"Видимые"** окно, вы видите, переменные и их текущие значения. **"Видимые"** окне отображаются все переменные, используемые в текущей строке или Предыдущая строка (в C++, в окне отображаются переменные в предыдущем три строки кода. См. в документации для поведения конкретного языка).

    > [!NOTE]
    > В JavaScript **"Локальные"** окна, но не поддерживается **"Видимые"** окна.

2. Далее, рассмотрим **"Локальные"** окна.

    **"Локальные"** окна показаны переменные, которые находятся в текущей области.

    ![Проверить значения переменных в окне "Локальные"](../debugger/media/dbg-tour-locals-window.png "окно \"Локальные\"")

    В настоящее время `this` объект и объект файла (`f`) в текущей области. Дополнительные сведения см. в разделе [проверки переменных в "Видимые" и "Локальные" Windows](../debugger/autos-and-locals-windows.md).

## <a name="set-a-watch"></a>Установка контрольных значений

1. В главном окне редактора кода, щелкните правой кнопкой мыши объект файла (`f`) и выберите **Добавить контрольное значение**.

    Можно использовать **Watch** окно, чтобы указать переменную или выражение, необходимо следить за на.

    Теперь у вас есть Контрольное значение на `File` объект и можно увидеть его значение изменить по мере продвижения по отладчика. В отличие от других окна переменных **Watch** окне всегда отображаются переменные, просмотре (они отображаются как отключенные, когда за пределы области действия).

2. На `Add` метод, нажмите зеленую кнопку ![выполнение до щелкнутого](../debugger/media/dbg-tour-run-to-click.png "RunToClick") еще раз (или несколько раз нажмите клавишу F11) перемещаться по `foreach` цикла.

    ![Установка контрольных значений для переменной](../debugger/media/dbg-tour-watch-window.png "окно контрольных значений")

    Может появиться первый рисунок адреса добавляются в главном окне выполнение примера приложения, но это происходит в потоке разные приложения, поэтому образы могут не отображаться еще.

    Дополнительные сведения см. в разделе [Установка контрольных значений с помощью контрольных значений и "Быстрая проверка" Windows](../debugger/watch-and-quickwatch-windows.md)

## <a name="examine-an-exception"></a>Изучите исключение

1. В открытом окне приложения, удалите текст в **путь** поле ввода и выберите **изменение** кнопки.

     ![Вызвать исключение, исключение](../debugger/media/dbg-tour-cause-an-exception.png "вызвать исключение")

     Приложение создает исключение, и отладчик, можно перейти к строке кода, вызвавшего исключение.

     ![Помощник по исправлению ошибок](../debugger/media/dbg-tour-exception-helper.png "помощника по исправлению ошибок")

     Здесь **помощника по исправлению ошибок** показано `System.ArgumentException` и сообщение об ошибке, которое говорит, что путь не недопустимую форму. Таким образом мы знаем, что ошибка произошла в аргумент метода или функции.

     В этом примере `DirectoryInfo` вызов присваивает ошибку в пустой строки, хранящейся в `value` переменной. (При наведении указателя мыши над `value` чтобы увидеть пустую строку.)

     Помощник по исправлению ошибок — это отличная возможность, которая помогает отлаживать ошибки. Также можно выполнять следующие действия представления, сведения об ошибке и Добавить контрольное значение из по исправлению. Или, при необходимости можно изменить условия для возникновения конкретного исключения.

    >  [!NOTE]
    > Помощник по исправлению ошибок заменяет помощник по исключениям в [!include[vs_dev15](../misc/includes/vs_dev15_md.md)].

2. Разверните **параметры исключений** узел, чтобы просмотреть дополнительные параметры для обработки исключения этого типа, но нет необходимости изменять что-либо для данного учебника!

3. Чтобы продолжить выполнение приложения, нажмите клавишу **F5**.

Дополнительные сведения о функции отладчика, см. в разделе [отладчик советы и рекомендации](../debugger/debugger-tips-and-tricks.md).

## <a name="next-steps"></a>Следующие шаги

В этом руководстве вы узнали, как запустить отладчик, пошаговое выполнение кода и проверять значения переменных. Вы можете получить подробный обзор функций отладчика, а также ссылки на дополнительные сведения.

> [!div class="nextstepaction"]
> [Обзор функций отладчика](../debugger/debugger-feature-tour.md)
