---
title: "Отладка потоков и процессов в Visual Studio | Microsoft Docs"
ms.custom: ""
ms.date: "12/15/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "FSharp"
  - "VB"
  - "CSharp"
  - "C++"
helpviewer_keywords: 
  - "отладка [Visual Studio], потоки"
  - "потоки отладки"
  - "отладка нескольких процессов"
  - "процессы, отладка"
  - "работа с потоками [Visual Studio], отладка"
ms.assetid: 9f0c8505-b6b2-452b-adfd-076db14d8115
caps.latest.revision: 15
caps.handback.revision: 14
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
---
# Отладка потоков и процессов в Visual Studio
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

*Потоки* и *процессы* — это связанные понятия в вычислительной технике.  Оба представляют из себя последовательность инструкций, которые должны выполняться в определенном порядке.  Инструкции в отдельных потоках или процессах, однако, могут выполняться параллельно.  
  
 Процессы существуют в операционной системе и соответствуют тому, что пользователи видят как программы или приложения.  Поток, с другой стороны, существует внутри процесса.  По этой причине потоки иногда называются "*облегченные процессы*".  Каждый процесс состоит из одного или более потоков.  
  
 Существование нескольких процессов позволяет компьютеру "одновременно" выполнять несколько задач.  Существование нескольких потоков позволяет процессу разделять работу для параллельного выполнения.  На многопроцессорном компьютере процессы или потоки могут работать на разных процессорах.  Это позволяет выполнять реально параллельную работу.  
  
 Абсолютно параллельная обработка не всегда возможна.  Потоки иногда должны синхронизироваться.  Один поток может ожидать результата другого потока, или одному потоку может понадобиться монопольный доступ к ресурсу, который используется другим потоком.  Проблемы синхронизации являются распространенной причиной ошибок в многопоточных приложениях.  Иногда поток может закончиться, ожидая ресурс, который никогда не будет доступен.  Это кончается состоянием, которое называется *взаимоблокировка*.  
  
 Отладчик [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] предоставляет мощные, но простые в использовании средства отладки потоков и процессов.  
  
## Средства отладки потоков и процессов в Visual Studio  
 Основные средства для работы с процессами в [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] — это диалоговое окно **Присоединение к процессу**, окно **Процессы** и панель инструментов **Место отладки**.  Основные средства для отладки потоков — это окно **Потоки**, маркеры потоков в окнах исходного кода и панель инструментов **Место отладки**.  
  
 Основными средствами для отладки многопоточных приложений являются окна **Параллельные стеки** и **Параллельные задачи**, **Контроль параллельных данных** и **Потоки GPU**.  
  
 В следующей таблице показаны доступные данные и действия, которые можно выполнять в каждом из этих мест:  
  
|Пользовательский интерфейс|Доступные сведения|Действия, которые можно выполнять|  
|--------------------------------|------------------------|---------------------------------------|  
|Диалоговое окно **Присоединение к процессу**|Доступные процессы для присоединения:<br /><br /> -   Имя процесса \(EXE\)<br />-   Идентификатор процесса<br />-   Название строки меню<br />-   Тип \(Управляемый код \(версия 4\); Управляемый код \(версии 2.0, 1.1, 1.0\); x86; x64; IA64\)<br />-   Имя пользователя \(имя учетной записи\)<br />-   Номер сеанса|Выберите процесс для присоединения<br /><br /> Выберите удаленный компьютер<br /><br /> Измените тип транспортного протокола для подключения к удаленным компьютерам|  
|Окно **Процессы**|Присоединенные процессы:<br /><br /> -   Имя процесса<br />-   Идентификатор процесса<br />-   Путь к процессу EXE<br />-   Название строки меню<br />-   Состояние \(Прерывание.  Работа\)<br />-   Отладка \(машинный код, управляемый код и т.д.\)<br />-   Тип транспортного протокола \(по умолчанию используется машинный без проверки подлинности\)<br />-   Квалификатор транспортного протокола \(удаленный компьютер\)|Средства:<br /><br /> -   Attach<br />-   Отсоединить<br />-   Завершить<br /><br /> Контекстное меню:<br /><br /> -   Присоединиться<br />-   Отсоединить<br />-   Отсоединить, когда отладка остановлена<br />-   Завершить|  
|Окно **Потоки**|Потоки текущего процесса:<br /><br /> -   Идентификатор потока<br />-   Управляемый ИД<br />-   Категория \(основной поток, поток интерфейса, обработчик вызова удаленной процедуры или рабочий поток\)<br />-   Имя потока<br />-   Место, где создан поток<br />-   Приоритет<br />-   Маска сходства<br />-   Приостановленный счетчик<br />-   Имя процесса<br />-   Индикатор флага<br />-   Приостановленный индикатор|Средства:<br /><br /> -   Поиск<br />-   Поиск в стеке вызовов<br />-   Отметить только мой код<br />-   Пометить выбранные пользовательские модули<br />-   Группировать по<br />-   Столбцы<br />-   Развернуть\/Свернуть стеки вызовов<br />-   Развернуть\/Свернуть группы<br />-   Заморозить\/Разморозить потоки<br /><br /> Контекстное меню:<br /><br /> -   Показать потоки в исходном коде<br />-   Переключиться в поток<br />-   Заморозить выполняющийся поток<br />-   Разморозить замороженный поток<br />-   Пометить поток для дополнительного изучения<br />-   Снять отметку потока<br />-   Переименовать поток<br />-   Отобразить и скрыть потоки<br /><br /> Другие действия:<br /><br /> -   Просмотреть стек вызовов потока в совете|  
|Окна исходного кода.|Индикаторы потока в левом поле указывают один или несколько потоков \(по умолчанию отключено, включается с помощью контекстного меню в окне **Потоки**\)|Контекстное меню:<br /><br /> -   Переключиться в поток<br />-   Пометить поток для дополнительного изучения<br />-   Снять отметку потока|  
|Панель инструментов **Место отладки**|-   Текущий процесс<br />-   Показать эскиз приложения<br />-   Приостановить приложение<br />-   Возобновить приложение<br />-   Приостановить и завершить работу приложения<br />-   Текущий поток<br />-   Переключить состояние флага текущего потока<br />-   Показывать только отмеченные потоки<br />-   Показать только текущий процесс<br />-   Текущий кадр стека|-   Переключиться в другой процесс<br />-   Приостановить, возобновить или завершить работу приложения<br />-   Переключиться в другой поток в текущем процессе<br />-   Переключиться в другой кадр стека в текущем потоке<br />-   Пометить текущие потоки или снять с них отметку<br />-   Показывать только отмеченные потоки<br />-   Показать только текущий процесс|  
|Окно **Параллельные стеки**|-   Стеки вызовов для нескольких потоков в одном окне<br />-   Активный кадр стека для каждого потока<br />-   Вызывающие и вызываемые функции и процедуры для любого метода|-   Отфильтровать указанные потоки<br />-   Переключиться в представление "Параллельные задачи"<br />-   Пометить поток или снять с него отметку<br />-   Масштаб|  
|Окно **Параллельные задачи**|-   Просмотр сведений об объектах <xref:System.Threading.Tasks.Task>, включая идентификатор задачи, состояние задачи \(запланирована, запущена, находится в ожидании, заблокирована\), а также сведений о потоке, назначенном задаче<br />-   Текущее расположение в стеке вызовов<br />-   Делегат, переданный задаче во время создания|-   Переключиться на текущую задачу<br />-   Пометить задачу или снять с нее отметку<br />-   Заморозить или разморозить задачу|  
|Окно **Контроль параллельных данных**|-   Столбец пометок, в котором можно пометить поток, которому требуется уделить особое внимание.<br />-   Столбец кадров, в котором символ стрелки указывает на текущий выбранный кадр.<br />-   Настраиваемый столбец, который может отображать компьютер, процесс, блок потоков, задачу и поток.|-   Пометить поток или снять с него отметку<br />-   Отобразить только отмеченные потоки<br />-   Переключить кадры<br />-   Сортировать столбец<br />-   Группировать потоки<br />-   Заморозить или разморозить потоки<br />-   Экспортировать данные в окно "Контроль параллельных данных"|  
|Окно **Потоки GPU**|-   Столбец пометок, в котором можно пометить поток, которому требуется уделить особое внимание.<br />-   Столбец активных потоков, в котором желтая стрелка указывает активный поток.  Стрелка указывает поток, где выполнение было передано в отладчик.<br />-   Столбец **Число потоков**, в котором отображается количество потоков в одном месте.<br />-   Столбец **Строка**, в котором отображается строка кода, где расположена каждая группа потоков.<br />-   Столбец **Адрес**, в котором отображается адрес инструкции, где расположена каждая группа потоков.<br />-   Столбец **Расположение**, который представляет расположение адреса в коде.<br />-   Столбец **Состояние**, который показывает, является ли поток активным или блокированным.<br />-   Столбец **Блок потоков**, в котором отображается индекс блока потоков \(tile\) для потоков в строке.|-   Изменить на другой активный поток<br />-   Отобразить определенный блок потоков \(tile\) и поток<br />-   Отобразить или скрыть столбец<br />-   Сортировать по столбцу<br />-   Группировать потоки<br />-   Заморозить или разморозить потоки<br />-   Пометить поток или снять с него отметку<br />-   Отобразить только отмеченные потоки|  
  
## См. также  
 [Присоединение к выполняемым процессам](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md)   
 [Отладка многопоточных приложений](../debugger/debug-multithreaded-applications-in-visual-studio.md)   
 [Отладка кода GPU](../debugger/debugging-gpu-code.md)