---
title: Использование файлов дампа | Документы Microsoft
ms.custom: H1HackMay2017
ms.date: 03/08/2017
ms.technology: vs-ide-debug
ms.topic: conceptual
f1_keywords:
- vs.debug.crashdump
dev_langs:
- CSharp
- VB
- FSharp
- C++
- JScript
helpviewer_keywords:
- dumps, about dumps
- crash dumps
- dump files
- dumps
ms.assetid: b71be6dc-57e0-4730-99d2-b540a0863e49
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: b06f88433f8b744a9bea7dfcce95b0a095cf7890
ms.sourcegitcommit: 3d10b93eb5b326639f3e5c19b9e6a8d1ba078de1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2018
ms.locfileid: "31481831"
---
# <a name="use-dump-files-with-visual-studio"></a>Использование файлов дампа с помощью Visual Studio
Файлы дампа с кучами или без куч; Создание файла дампа; Открытие файла дампа; Поиск двоичных файлов, в PDB-файл и исходного файла для файла дампа.
  
##  <a name="BKMK_What_is_a_dump_file_"></a> Что такое файл дампа?  
 Объект *файл дампа* является моментальным снимком приложения на момент времени копии дампа. Он показывает, какой процесс исполнялся и какие модули были загружены в момент создания дампа. Если дамп был сохранен с данными кучи, файл дампа содержит снимок того, что находилось в памяти приложения в тот момент времени. Открытие файла дампа с кучей в Visual Studio похоже на остановку в точке останова в сеансе отладки. Хотя выполнение продолжить невозможно, можно просмотреть стеки, потоки и значения переменных приложения, соответствующие моменту времени создания дампа.  
  
 Дампы в основном используются для отладки проблем, возникающих на компьютерах, которые разработчик не имеет доступа к. Например можно использовать файл дампа с компьютера клиента, если не удается воспроизвести сбоя клиента или зависания компьютера. Дампы также создаются тест-инженерами с целью сохранения данных сбоя или зависания, чтобы можно было продолжить использовать тестовый компьютер для других операций тестирования. Отладчик Visual Studio может сохранять файлы дампа для управляемого и машинного кода. Отладчик может загружать файлы дампа, созданные Visual Studio или другими программами, способными сохранять файлы в *минидампа* формат.  
  
##  <a name="BKMK_Dump_files__with_or_without_heaps"></a> Файлы дампа с кучами или без куч  
 Можно создавать файлы дампа со сведениями кучи или без них.  
  
-   **Файлы дампа с кучами** содержится моментальный снимок памяти приложения. Сюда входят значения переменных в момент создания дампа. После загрузки файла дампа, сохраненного с кучей, Visual Studio может загружать символы, даже если двоичный файл приложения не найден. Visual Studio также сохраняет в файле дампа двоичные файлы загруженных модулей машинного кода, что может значительно упростить отладку.  
  
-   **Файлы дампа без куч** намного меньше, чем дампы со сведениями кучи. Однако в этом случае для поиска сведений о символах отладчик должен загружать двоичные файлы приложения. Двоичные файлы должны в точности соответствовать двоичным файлам, которые использовались при создании дампа. В файлах дампа без данных кучи хранятся только значения переменных стека.  
  
##  <a name="BKMK_Requirements_and_limitations"></a> Требования и ограничения  
  
-   Отладка с использованием файлов дампа оптимизированного кода может сопровождаться ложной информацией. К примеру, встраивание компилятором функций может приводить к непредвиденным стекам вызовов, а другие виды оптимизации могут изменять время существования переменных.  
  
-   Отладка с использованием файла дампа, созданного на 64-разрядном компьютере, должна производиться в экземпляре Visual Studio, работающем на 64-разрядном компьютере.  
  
-   В версиях Visual Studio до VS 2013 невозможно открыть дампы 32-разрядных приложений, выполняющихся на 64-разрядных компьютерах, которые были собраны определенными средствами (например, диспетчером задач и 64-разрядной версией WinDbg). В VS 2013 это ограничение снято.  
  
-   Visual Studio поддерживает отладку файлов дампа, создаваемых приложениями в машинных кодах на устройствах ARM. Visual Studio также поддерживает отладку файлов дампа, создаваемых управляемыми приложениями на устройствах ARM, но только в отладчике машинного кода.  
  
-   Для отладки [режима ядра](http://msdn.microsoft.com/library/windows/hardware/ff551880.aspx) файлы дампа, загрузите средства отладки для Windows, которая является частью [набор драйверов Windows (WDK)](/windows/hardware/windows-driver-kit). 
  
-   Visual Studio не удается выполнить отладку файлов дампа, сохраненных в старом формате, известном как [дампа пользовательского режима полного](http://msdn.microsoft.com/library/windows/hardware/ff545506.aspx). Обратите внимание, что "полный дамп в режиме пользователя" и "дамп с кучей" — это не одно и то же.  
  
-   Чтобы отлаживать, используя [SOS.dll (расширение отладки SOS)](/dotnet/framework/tools/sos-dll-sos-debugging-extension) в Visual Studio необходимо установить средства отладки для Windows, которая является частью [набор драйверов Windows (WDK)](/windows/hardware/windows-driver-kit) 
  
##  <a name="BKMK_Create_a_dump_file"></a> Создание файла дампа  
 Создание файла дампа с использованием Visual Studio:  
  
-   При отладке процесса в Visual Studio можно сохранить файл дампа, когда отладчик останавливает выполнение в точке останова или при возникновении исключения. Выберите **отладки**, затем **Сохранение дампа**, затем **отладки**. В **Сохранение дампа** диалогового **тип** список, можно выбрать **минидампа** или **минидамп с кучей** (по умолчанию).  
  
-   С [JIT-отладка](../debugger/just-in-time-debugging-in-visual-studio.md) включен, можно присоединить отладчик к аварийному процессу, который выполняется вне отладчика и затем сохранить файл дампа памяти. В разделе [присоединение к выполняемым процессам](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md)  
  
 Файлы дампа также можно создавать с помощью любой программы, которая поддерживает формат минидампов Windows. Например **Procdump** программы командной строки из [Windows Sysinternals](http://technet.microsoft.com/sysinternals/default) можно создавать файлы аварийного дампа процесса на основе триггеров или по требованию. В разделе [требования и ограничения](../debugger/using-dump-files.md#BKMK_Requirements_and_limitations) в этом разделе, Дополнительные сведения об использовании других средств для создания файлов дампа. 
  
##  <a name="BKMK_Open_a_dump_file"></a> Открытие файла дампа  
  
1.  В Visual Studio выберите **файл**, **откройте**, **файл**.  
  
2.  В **открыть файл** диалогового окна найдите и выберите файл дампа. Обычно они имеют расширение DMP. Выберите **ОК**.  
  
3.  **Сводка файла дампа** появится окно. В этом окне можно просмотреть сведения об отладке для файла дампа, установить путь символов, запустить отладку и скопировать сводку в буфер.  
  
     ![Страница сводки минидампа](../debugger/media/dbg_dump_summarypage.png "DBG_DUMP_SummaryPage")  
  
4.  Чтобы начать отладку, перейдите к **действия** и выберите либо **отлаживать, используя только управляемый код**, **только машинный код** или **Отладка в смешанном**.  
  
##  <a name="BKMK_Find_binaries__symbol___pdb__files__and_source_files"></a> Поиск двоичных файлов, файлов символов (.pdb) и исходных файлов  
 Чтобы можно было использовать все возможности Visual Studio для отладки файла дампа, необходимо иметь доступ к следующим файлам:  
  
-   EXE-файл, для которого был получен дамп, и другие двоичные файлы (DLL и т. п.), которые использовались в процессе, для которого был создан дамп.  
  
     Если для отладки используется дамп с данными кучи, Visual Studio может справиться с отсутствием двоичных файлов для некоторых модулей, но должен иметь двоичные файлы для достаточного количества модулей, чтобы создавать допустимые стеки вызовов. Visual Studio включает модули машинного кода в файл дампа с кучей.  
  
-   Файлы символов (.pdb) для EXE-файлов и других двоичных файлов.  
  
-   Исходные файлы для нужных модулей.  
  
     Исполняемый файл и PDB-файлы должны точно соответствовать версии и сборке файлов, которые использовались при создании дампа.  
  
     Для отладки можно использовать Дизассемблированный код модулей, если не удается найти исходные файлы  
  
 **Пути поиска по умолчанию для исполняемых файлов**  
  
 Visual Studio автоматически ищет исполняемые файлы, которые не включены в файл дампа в следующих расположениях:  
  
1.  Каталог, содержащий файл дампа.  
  
2.  Путь к модулю, указанный в файле дампа. Это путь к модулю на компьютере, на котором был создан дамп.  
  
3.  В расположениях символов, указанное в **Отладка**, **параметры**, **символы** странице Visual Studio **средства**, **параметры**  диалоговое окно. При необходимости на этой странице можно добавить другие расположения для поиска.  
  
 **С помощью двоичного нет > символ > исходной страницы**  
  
 Если Visual Studio не удается найти файлы, необходимые для отладки модуля в дампе, отображается соответствующая страница (**нет двоичного найден**, **символы не найдены**, или **исходный код не найден**). Эти страницы предоставляют подробные сведения о причине проблемы, а также ссылки на действия, которые могут помочь определить правильное расположение файлов. В разделе [укажите символов (.pdb) и файлов исходного кода](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md).  
  
## <a name="see-also"></a>См. также  
 [В время отладки](../debugger/just-in-time-debugging-in-visual-studio.md)   
 [Укажите символов (.pdb) и исходных файлов](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)   
 [IntelliTrace](../debugger/intellitrace.md)