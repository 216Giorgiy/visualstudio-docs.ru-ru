---
title: "Оптимизация загрузки решений в Visual Studio | Документы Майкрософт"
ms.custom: 
ms.date: 08/31/2017
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- startup time [Visual Studio]
- optimizing startup time [Visual Studio]
- speed up start time [Visual Studio]
ms.assetid: 84989983-84bc-4f81-97a8-2131e3a25138
caps.latest.revision: "4"
author: gewarren
ms.author: gewarren
manager: ghogen
f1_keywords: vs.performancecenter
ms.technology: vs-ide-general
ms.openlocfilehash: 2102fc026b566c89108f0d74dcf604020653e358
ms.sourcegitcommit: f40311056ea0b4677efcca74a285dbb0ce0e7974
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2017
---
# <a name="optimize-solution-loading-in-visual-studio"></a>Оптимизация загрузки решений в Visual Studio
Многие решения содержат большое число проектов, что негативно влияет на время загрузки таких решений. Однако в командных средах разработчики обычно работают с разными подмножествами этих проектов, и им не требуется загружать сразу все отдельные проекты.

Visual Studio 2017 поддерживает **загрузку упрощенного решения**. Когда включен режим загрузки упрощенного решения (LSL), Visual Studio 2017 загружает небольшое подмножество проектов вместо загрузки всех проектов в крупном решении. Большинство часто используемых функций IDE работают и в режиме LSL, кроме того, он позволяет производить сборку, поиск и отладку для всего решения. (Основной не поддерживаемой в режиме LSL функцией является "Изменить и продолжить".)

> [!NOTE]
> Этот материал относится к обновлению 3 Visual Studio 2017.

Для больших решений с более чем 30 проектами режим LSL позволяет ускорить загрузку примерно в два раза (в среднем). Хотя большинство функций IDE работают в режиме LSL, для некоторых из них может потребоваться загрузка всех проектов. В этих случаях Visual Studio автоматически загружает все решение, чтобы вы могли воспользоваться соответствующей функцией. В худшем случае вам потребуется загрузить все проекты в упрощенном режиме. 

Если вы используете функцию IDE в проекте, который еще не загружен, Visual Studio загружает соответствующие проекты. Например, если вы пытаетесь создать или открыть диаграмму классов для еще не открытого проекта, Visual Studio автоматически загружает соответствующие проекты. Подробный список компонентов приведен р разделах ниже.

Следующие разделы описывают, как включить загрузку упрощенного решения, а также помогут вам решить, нужно ли использовать эту функцию.

## <a name="enable-or-disable-lightweight-solution-load"></a>Включение и отключение загрузки упрощенного решения

Щелкните правой кнопкой мыши имя решения в обозревателе решений и выберите **Включить загрузку упрощенного решения**. Выбрав этот параметр, закройте и снова откройте решение, чтобы активировать загрузку упрощенного решения.

> [!NOTE]
> Аналогичные шаги применяются и для отключения режима LSL. Чтобы отключить загрузку упрощенного решения, выберите **Отключить загрузку упрощенного решения**, а затем закройте и снова откройте решение. 

![обозреватель решений](../ide/media/VSIDE_LSL_Solution_Setting.png)

## <a name="global_solution_load_settings"></a>Настройка глобальных параметров для загрузки упрощенного решения

Вы можете отключить или настроить режим LSL для всех решений на глобальном уровне, выбрав **Сервис > Параметры > Проекты и решения**.

![Сервис, Параметры](../ide/media/VSIDE_LightweightSolutionLoad.png)

## <a name="how-does-lightweight-solution-load-work-behind-the-scenes"></a>Как работает загрузка упрощенного решения?

Когда вы загружаете решение, Visual Studio запоминает, какие проекты вы открывали ранее, и загружает только их. Все остальные проекты отображаются в обозревателе решений, но не загружаются. Когда вы разворачиваете проект или щелкаете его правой кнопкой мыши, Visual Studio автоматически загружает его. Автоматическая загрузка проектов обычно занимает менее секунды, однако для некоторых проектов может потребоваться больше времени.
При этом Visual Studio предоставляет функции IDE, такие как поиск, отладка, сборка и управление версиями, действующие в рамках всего решения. Например, вы можете выполнить поиск по всему решению, хотя в упрощенном режиме загружены лишь некоторые проекты. 

При развертывании дополнительных проектов Visual Studio запоминает их перечень. При повторном открытии решения Visual Studio автоматически загружает ранее развернутые проекты.

## <a name="visual-studio-prompts-developers-likely-to-see-significant-performance-gains"></a>Значительные преимущества с точки зрения производительности для разработчиков Visual Studio

По данным телеметрии Visual Studio, режим LSL значительно улучшает работу с крупными решениями, содержащими более 30 проектов. Поэтому мы предлагаем разработчикам, работающим с крупными решениями, оценить режим LSL. Большинство разработчиков, попробовавших этот режим, продолжают пользоваться им на регулярной основе. 

Мы постоянно отслеживаем телеметрические данные об использовании Visual Studio, чтобы улучшить эвристическую модель и предлагать режим LSL именно тем разработчикам, которым он принесет максимальную пользу. 

## <a name="visual-studio-makes-recommendations-to-turn-on-lightweight-solution-load-based-on-heuristics"></a>Рекомендации Visual Studio по включению загрузки упрощенного решения на основе эвристики

По умолчанию Visual Studio включает режим LSL для пользователей, которым он принесет максимальную пользу. Если вы работаете с несколькими решениями, Visual Studio предлагает режим LSL для решений, для которых значительный прирост производительности наиболее вероятен. Если выбрать для упрощенного режима параметр **Let Visual Studio decide** (На усмотрение Visual Studio) (используется по умолчанию), Visual Studio может открыть решение в упрощенном режиме, основываясь на эвристике. То, находится ли решение в упрощенном режиме, указано на панели сообщений. Когда панель сообщений отображается, вы можете получить дополнительные сведения или изменить параметры.

![Всплывающее окно](../ide/media/VSIDE_LSL_Popup.png)

## <a name="ide-features-fully-supported-in-lightweight-mode"></a>Функции IDE, полностью поддерживаемые в упрощенном режиме

|Функция|Поддерживается в упрощенном режиме?|
|-|-|-|
|IntelliSense|Да|
|Поиск|Да|
|Отладка|Да|
|Построить|Да|
|Навигация по коду (Перейти к определению > Найти все ссылки)|Да|
|Code Lens|Да|
|Статический анализ кода|Да|
|Развертывание и публикация|Да|
|Добавление и удаление ссылок|Да|
|Настройка для различных версий|Да|
|IntelliTrace|Да|
|Live Unit Testing|Да|
|IntelliTest|Да|
|Microsoft Fakes|Да|
|Изменить и продолжить|Не поддерживается|
|Модульное тестирование|Требуется загрузка тестовых проектов после сборки решения|

## <a name="scenarios-in-which-lightweight-solution-loads-the-appropriate-projects-to-complete-the-operation"></a>Сценарии, в которых упрощенный режим загружает соответствующие проекты для завершения операции

Если вы не работаете с проектом в решении, этот проект не загружается в упрощенном режиме. Для некоторых функций автоматически загружаются дополнительные проекты, которые нужны для работы с функцией. (Мы стремимся свести этот список сценариев к минимуму. ) В этих случаях Visual Studio загружает нужные проекты самостоятельно либо предлагает вам делать это по мере необходимости.

|Категория|Проблеми|
|-|-|-|
|Модульный тест|Еще не загруженные проекты не отображаются в списке тестовых проектов для мастеров создания IntelliTest и создания модульного теста. </br>Вам нужно загрузить проекты, для которых требуется создать тесты (для загрузки проекта можно развернуть его узел).|
|Диаграммы классов|Когда вы создаете или открываете диаграмму классов для проекта, Visual Studio автоматически загружает проекты, напрямую зависящие от этого проекта. </br>Если решение не загружено целиком, мы отключаем проверку устаревших артефактов, на которые ссылается схема проверки зависимостей.|

## <a name="scenarios-in-which-lightweight-solution-loads-the-entire-solution"></a>Сценарии, в которых упрощенный режим загружает все решение 

Для некоторых функций Visual Studio автоматически загружает все решение, чтобы обеспечить правильную их работу. Благодаря этому вам всегда доступен полный набор функциональных возможностей. Например, для некоторых операций TFS может потребоваться загрузка всего решения. Для обеспечения полной функциональности Visual Studio загружает все решение.

|Категория|Сценарий|
|-|-|-|
|Команда TFS SCC на узле решения|Если на узле решения (в обозревателе решений) активируется команда SCC, перед ее выполнением Visual Studio автоматически загружает все решение.|
|Загрузка проекта|Если решение содержит проекты .NET Core и общие проекты, Visual Studio всегда автоматически загружает эти проекты во время начальной загрузки решения. Сейчас упрощенный режим для таких проектов не поддерживается.|
|Диспетчер конфигурации решения|При использовании диспетчера конфигурации решения или пакетной сборки Visual Studio автоматически загружает решение целиком для обеспечения полной функциональности.|
|Диспетчер пакетов NuGet|Когда вы открываете пользовательский интерфейс или консоль диспетчера пакетов NuGet, Visual Studio автоматически загружает решение целиком для обеспечения полной функциональности.|

## <a name="known-issues"></a>Известные проблемы

Существуют некоторые сценарии, которые могут не работать в режиме LSL и требуют загрузки дополнительных проектов или всего решения. Мы активно работаем над устранением этой проблемы. 

|Категория|Проблеми|Обходной путь|
|-|-|-|-|
|IntelliSense|Технология IntelliSense может не обновляться после изменения конфигурации (например, со сборки выпуска на отладку и наоборот). Влияние зависит от различий в коде, связанных с изменением конфигурации.|Перезагрузите решение после изменения конфигурации.|
|Ограничения рефакторинга для проектов C# и Visual Basic|Исправления кода, изменяющие файлы проекта, могут в первый раз завершиться с ошибкой без каких-либо уведомлений.|Если вам нужно внести исправления кода в файлы проектов, загрузите эти проекты. Упрощенный режим не позволяет внести исправления в незагруженные проекты.|
|Обнаружение модульных тестов|Тесты, обнаруженные для отложенных проектов, не выполняются при загрузке проекта вручную.|Повторите сборку проекта, чтобы заново обнаружить тесты и перезапустить нужные из них.|
|Функция Live Unit Testing (LUT)|Вы можете заметить, что в режиме LSL функция LUT не активирована. Это вызвано тем, что для загрузки функции LUT нужен один из тестовых проектов.|Чтобы активировать Live Unit Testing для решения, загрузите любой тестовый проект.|
|Искать в обозревателе решений|1.    В режиме LSL из обозревателя решений невозможно выполнить поиск по содержимому файлов, а также отсутствуют результаты продвижения (то есть в дереве поиска отображаются только файлы, но не классы, методы и т. д.).</br>2.    Все файлы, входящие в проект, отображаются в виде плоского списка, а не в представлении в виде дерева. Для файлов, находящихся в папке проекта, в представлении поиска вместо имени файла отображается относительный путь.</br>В представлении файлов в результатах поиска отсутствуют контекстные меню.|Чтобы использовать обычный поиск в обозревателе решений, загрузите все решение, не используя упрощенный режим.</br>Можно также использовать поиск в Visual Studio IDE.|
|Обозреватель объектов для проектов C++|Обозреватель объектов показывает ссылки на сборки и WinMD только для загруженных проектов.|Загрузите проекты, для которых хотите просмотреть сведения в обозревателе объектов.|

> [!Note]
> Благодаря усилиям наших партнеров загрузку упрощенных решений также поддерживают популярные расширения, например Resharper.

Мы уделяем большое внимание инновациям, оптимизирующим время загрузки для разработчиков. Так как это новая возможность, мы активно анализируем отзывы клиентов и устраняем известные проблемы. Мы ждем ваших отзывов и пожеланий. Вы можете написать команде по оптимизации загрузки решений Visual Studio по адресу lslsupport@microsoft.com

## <a name="see-also"></a>См. также
[Советы и рекомендации по улучшению работы Visual Studio](../ide/visual-studio-performance-tips-and-tricks.md)
