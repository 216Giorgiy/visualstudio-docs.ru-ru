---
title: Краткое руководство. Создание веб-приложения Python с помощью Visual Studio
description: В рамках этого краткого руководства вы создадите простое веб-приложение на Python с использованием Visual Studio и платформы Flask.
ms.date: 06/27/2018
ms.prod: visual-studio-dev15
ms.technology: vs-python
ms.topic: quickstart
author: kraigb
ms.author: kraigb
manager: douge
ms.workload:
- python
- data-science
ms.openlocfilehash: b8668bbdb686b3c8c60380dd5592a2897a43b45b
ms.sourcegitcommit: e9d1018a01af62c3dc5aeb6b325faba7e20bd496
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/28/2018
ms.locfileid: "37089429"
---
# <a name="quickstart-create-your-first-python-web-app-using-visual-studio"></a>Краткое руководство. Создание первого веб-приложения Python с помощью Visual Studio

В рамках этого краткого (на 5–10 минут) знакомства с Visual Studio в качестве IDE для Python создается простое веб-приложение Python на платформе Flask. Вы создадите проект при помощи дискретных действий, которые помогут ознакомиться с базовыми функциями Visual Studio.

Установите Visual Studio бесплатно со страницы [скачиваемых материалов Visual Studio](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017), если еще не сделали этого. В установщике выберите рабочую нагрузку **Разработка на Python**.

## <a name="create-the-project"></a>Создание проекта

Ниже приведены инструкции по созданию пустого проекта, который служит контейнером для приложения:

1. Откройте Visual Studio 2017.

1. В верхней строке меню последовательно выберите **Файл > Создать > Проект**.

1. В диалоговом окне **Новый проект** введите в поле поиска в правом верхнем углу "Веб-проект Python", в списке по центру выберите **Веб-проект**, присвойте проекту имя, например HelloPython, и нажмите кнопку **ОК**.

    ![Диалоговое окно создания проекта с выбранным веб-проектом Python](media/quickstart-python-00-web-project.png)

    Если шаблон проекта Python не отображается, закройте диалоговое окно **Новый проект** и в верхней строке меню последовательно выберите **Сервис > Получить средства и компоненты**. Затем откройте **Visual Studio Installer**. Выберите рабочую нагрузку **Разработка на Python**, а затем элемент **Изменить**.

    ![Рабочая нагрузка разработки Python в установщике Visual Studio](../python/media/installation-python-workload.png)

1. Новый проект откроется в **обозревателе решений** в правой области. Проект пока пуст, так как он не содержит других файлов.

    ![Созданный пустой проект в обозревателе решений](media/quickstart-python-01-empty-project.png)

**Вопрос. В чем преимущество создания проекта в Visual Studio для приложений Python?**

**Ответ.** Приложения Python обычно определяются только с помощью файлов и папок, но такая простая структура может стать громоздкой, так как приложения увеличиваются в размере и могут содержать автоматически сгенерированные файлы, JavaScript для веб-приложений и т. д. Проект Visual Studio помогает управлять этими сложными моментами. Проект (файл *.pyproj*) определяет все исходные файлы и файлы содержимого, связанные с проектом, содержит сведения о сборке каждого файла, хранит информацию для интеграции с системами управления версиями и помогает упорядочить приложение в виде логических компонентов.

**Вопрос. Что представляет собой "решение", которое отображается в обозревателе решений?**

**Ответ.** Решение Visual Studio является контейнером, который помогает управлять одним или несколькими связанными проектами как группой. В решении хранятся общие параметры конфигурации, которые не предназначены специально для отдельных проектов. В проектах решения также могут использоваться взаимные ссылки, то есть, когда при запуске одного проекта (приложения Python) автоматически создается другой (например, расширение C++, используемое в приложении Python).

## <a name="install-the-flask-library"></a>Установка библиотеки Flask

Веб-приложения на Python почти всегда используют одну из множества доступных библиотек Python для обработки низкоуровневых процессов, таких как маршрутизация веб-запросов и формирование ответов. С этой целью Visual Studio предоставляет множество шаблонов для веб-приложений, один из которых вы будете использовать позднее при выполнении задач этого руководства.

А сейчас выполните следующие инструкции по установке библиотеки Flask в глобальном окружении по умолчанию, которое используется для этого проекта в Visual Studio.

1. Разверните в проекте узел **Окружения Python**, чтобы увидеть среду по умолчанию для проекта.

    ![Среда по умолчанию в обозревателе решений](media/quickstart-python-02-default-environment.png)

1. Щелкните окружение правой кнопкой мыши и выберите команду **Установить пакет Python**. Эта команда открывает вкладку **Пакеты** в окне **Окружения Python**.

1. В поле поиска введите flask и выберите результат **pip install flask from PyPI**. Подтвердите запросы на права администратора и наблюдайте за ходом выполнения в окне **Вывод** в Visual Studio. (Запрос на повышение прав выводится в том случае, если папка пакетов для глобальной среды находится в защищенной области, такой как *C:\Program Files*.)

    ![Установка библиотеки Flask](media/quickstart-python-03-install-package.png)

1. После установки библиотека появится в среде в **обозревателе решений**. Это означает, что ее можно использовать в коде Python.

    ![Установленная библиотека Flask](media/quickstart-python-04-package-installed.png)

> [!Note]
> Вместо установки библиотек в глобальном окружении разработчики обычно создают "виртуальное окружение", в котором устанавливаются библиотеки для определенного проекта. Шаблоны Visual Studio обычно обеспечивают такую возможность, как описано в [кратком руководстве по созданию проекта Python с помощью шаблона](../python/quickstart-02-python-in-visual-studio-project-from-template.md).

**Вопрос. Где можно подробнее узнать о других доступных пакетах Python?**

**Ответ.** Перейдите к странице [индекса пакетов Python](https://pypi.org/).

## <a name="add-a-code-file"></a>Добавление файла кода

Теперь можно добавить немного кода на Python, чтобы реализовать простейшее веб-приложение.

1. В **обозревателе решений** щелкните правой кнопкой мыши проект и последовательно выберите **Добавить > Новый элемент**.

1. В открывшемся диалоговом окне выберите элемент **Пустой файл Python**, присвойте файлу имя *app.py* и нажмите кнопку **Добавить**. Файл автоматически откроется в редакторе кода Visual Studio.

1. Скопируйте следующий код и вставьте его в *app.py*:

    ```python
    from flask import Flask

    # Create an instance of the Flask class that is the WSGI application.
    # The first argument is the name of the application module or package,
    # typically __name__ when using a single module.
    app = Flask(__name__)

    # Flask route decorators map / and /hello to the hello function.
    # To add other resources, create functions that generate the page contents
    # and add decorators to define the appropriate resource locators for them.

    @app.route('/')
    @app.route('/hello')
    def hello():
        # Render the page
        return "Hello Python!"

    if __name__ == '__main__':
        # Run the app server on localhost:4449
        app.run('localhost', 4449)
    ```

1. Возможно, вы заметили, что в диалоговом окне **Добавить > Новый элемент** отображается много других типов файлов, которые можно добавить в проект Python, включая класс Python, пакет Python, модульный тест Python, файлы *web.config* и многое другое. Как правило, эти так называемые шаблоны элементов прекрасно подходят для быстрого создания файлов при помощи полезного стандартного кода.

**Вопрос. Где можно подробнее узнать о Flask?**

**Ответ.** Ознакомьтесь с документацией по Flask. Начать можно с [краткого руководства по Flask](http://flask.pocoo.org/docs/0.12/quickstart/#quickstart).

## <a name="run-the-application"></a>Запуск приложения

1. В **обозревателе решений** щелкните правой кнопкой мыши файл *app.py* и выберите пункт **Set as startup file** (Задать как файл запуска). С помощью этой команды файл кода задается как запускаемый в Python при запуске приложения.

    ![Задание файла запуска для проекта в обозревателе решений](media/quickstart-python-05-set-as-startup-file.png)

1. В **обозревателе решений** щелкните проект правой кнопкой мыши и выберите пункт **Свойства**. Затем перейдите на вкладку **Отладка** и присвойте свойству **Номер порта** значение `4449`. Благодаря этому в Visual Studio будет запускаться браузер, используя `localhost:4449`, чтобы обеспечить соответствие аргументам `app.run` в коде.

1. Выберите команду **Отладка > Запуск без отладки** (**CTRL**+**F5**), позволяющую сохранить изменения в файлах и запустить приложение.

1. Появится командное окно с сообщением о выполнении по адресу https://localhost:4449/, а затем в окне браузера откроется узел `localhost:4449` и вы увидите сообщение "Hello, Python!" В командном окне также отобразится запрос GET с состоянием 200.

    Если браузер не открывается автоматически, запустите выбранный вами браузер и перейдите к `localhost:4449`.

    Если в командном окне отображается только интерактивная оболочка Python или если это окно появляется на экране и сразу исчезает, убедитесь в том, что файл *app.py* был задан в качестве запускаемого на шаге 1 выше.

1. Перейдите к `localhost:4449/hello`, чтобы проверить, работает ли декоратор для ресурса `/hello`. В командном окне снова отобразится запрос GET с состоянием 200. Вы можете попробовать и несколько других URL-адресов. Вы увидите, что в командном окне для них отображается код состояния 404.

1. Закройте командное окно, чтобы остановить приложение, а затем закройте окно браузера.

**Вопрос. В чем разница между командами "Запуск без отладки" и "Начать отладку"?**

**Ответ.** Команда **Начать отладку** используется, чтобы запустить приложение в контексте [отладчика Visual Studio](../python/debugging-python-in-visual-studio.md), что позволяет задавать точки останова, просматривать переменные и осуществлять построчное выполнение кода. С отладчиком приложения могут работать медленнее, так как для отладки используются различные обработчики. С помощью команды **Запуск без отладки**, напротив, приложение запускается напрямую, как если бы использовалась командная строка. При этом отсутствует контекст отладки. Браузер запускается автоматически, и выполняется переход к URL-адресу, указанному на вкладке свойств проекта **Отладка**.

## <a name="next-steps"></a>Следующие шаги

Поздравляем с запуском вашего первого приложения Python из Visual Studio, в процессе которого вы немного ознакомились с особенностями использования Visual Studio в качестве среды IDE для Python!

> [!div class="nextstepaction"]
> [Развертывание приложения в Службе приложений Azure](../python/publishing-python-web-applications-to-azure-from-visual-studio.md)

Так как приведенные в этом руководстве инструкции довольно общие, вы, вероятно, догадались, что их можно и нужно автоматизировать. Такая автоматизация выполняется при помощи шаблонов проектов Visual Studio. Изучите [Краткое руководство. Создание проекта Python на основе шаблона](../python/quickstart-02-python-in-visual-studio-project-from-template.md), чтобы узнать, как создается веб-приложение, похожее на созданное вами в рамках этой статьи, но с меньшим количеством шагов.

Чтобы перейти к более полному учебнику по работе с Python в Visual Studio, включая использование интерактивного окна, отладку, визуализацию данных и работу с Git, изучите [Руководство. Начало работы с Python в Visual Studio](../python/tutorial-working-with-python-in-visual-studio-step-01-create-project.md).

Более подробно ознакомиться с возможностями Visual Studio можно по приведенным ниже ссылкам.

- Сведения о [шаблонах веб-приложений Python в Visual Studio](../python/python-web-application-project-templates.md).
- Сведения об [отладке Python](../python/debugging-python-in-visual-studio.md)
- Общие сведения об [интегрированной среде разработки Visual Studio](../ide/visual-studio-ide.md).
