---
title: Начало работы с отладкой в Visual Studio
ms.date: 12/14/2017
ms.prod: visual-studio-dev15
ms.technology: vs-ide-general
ms.topic: conceptual
ms.assetid: c3a14d28-d811-4ff3-bd09-21dce14025ca
author: gewarren
ms.author: gewarren
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: 47035b94f211927864d4d715c12908a38e564291
ms.sourcegitcommit: e13e61ddea6032a8282abe16131d9e136a927984
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
---
# <a name="get-started-with-debugging-in-visual-studio"></a>Начало работы с отладкой в Visual Studio

Visual Studio включает эффективный интегрированный набор средств сборки и отладки проектов. В этом разделе рассматривается начало работы с основным набором возможностей пользовательского интерфейса отладки.

Установите Visual Studio бесплатно со страницы [скачиваемых материалов Visual Studio](https://aka.ms/vsdownload?utm_source=mscom&utm_campaign=msdocs), если еще не сделали это.

## <a name="my-code-doesnt-work-help-me-visual-studio"></a>Код не работает. Как Visual Studio может помочь?

Итак, вы разобрались, как работать с редактором, и написали код. Теперь нужно выполнить отладку этого кода. Отладка в Visual Studio, как и в большинстве интегрированных сред разработки (IDE), осуществляется в два этапа: построение кода для обнаружения и устранения ошибок проекта и компилятора и выполнение этого кода в среде для обнаружения и устранения ошибок времени выполнения и динамических ошибок.

### <a name="build-your-code"></a>Сборка кода

Существует два основных типа конфигурации сборки: **отладка** и **выпуск**. При использовании первой конфигурации создается более крупный и медленный исполняемый файл, обеспечивающий более широкие интерактивные возможности отладки во время выполнения, однако отправлять этот файл не следует. Вторая конфигурация позволяет создать более быстрый оптимизированный исполняемый файл, подходящий для отправки (по крайней мере с точки зрения компилятора). По умолчанию используется конфигурация **Отладка**.

Самый просто способ выполнить сборку проекта — нажать клавишу **F7**, однако вы также можете начать сборку, выбрав в главном меню пункты **Сборка > Собрать решение**.

 ![Выбор пункта меню "Собрать проект" в Visual Studio](../ide/media/vs_ide_gs_debug_build_menu_item.png "Vs_ide_gs_debug_build_menu_item")

 Процесс сборки можно наблюдать в окне состояния **Вывод** в нижней части пользовательского интерфейса Visual Studio. Здесь отображаются ошибки, предупреждения и операции сборки. При наличии ошибок (или предупреждений выше заданного уровня) сборка завершится ошибкой. Можно щелкнуть ошибку и предупреждение, чтобы перейти к строке, где они возникли. Для перестроения проекта можно нажать клавишу **F7** (чтобы перекомпилировать только файлы с ошибками) или **CTRL+ALT+F7** (для чистого полного перестроения).

 В окне результатов содержатся два окна сборки с вкладками под областью редактора: окно **Вывод**, в котором содержатся необработанные выходные данные компилятора (включая сообщения об ошибках), и окно **Список ошибок**, содержащее список всех ошибок и предупреждений, к которому можно применить сортировку и фильтры.

 В случае успешного выполнения вы увидите примерно следующие результаты в окне **Вывод**.

 ![Выходные данные при успешной сборке в Visual Studio](../ide/media/vs_ide_gs_debug_success_build.PNG "vs_ide_gs_debug_success_build")

### <a name="review-the-error-list"></a>Просмотр списка ошибок

Если вы внесли какие-либо изменения в код, который был ранее и успешно скомпилирован, возможно, возникнет ошибка. Если вы новичок в написании кода, возможно, их будет много. Ошибки иногда очевидны, например простая синтаксическая ошибка или неправильное имя переменной, а иногда их причину трудно выяснить, имея в распоряжении только зашифрованный код. Чтобы получить более четкое представление о проблеме, перейдите вниз окна **Вывод** сборки и щелкните вкладку **Список ошибок**. При этом вы перейдете к более организованному представлению ошибок и предупреждений для проекта и получите доступ к некоторым дополнительным параметрам.

 ![Выходные данные и список ошибок в Visual Studio](../ide/media/vs_ide_gs_debug_bad_build_error_list.PNG "Vs_ide_gs_debug_bad_build_error_list")

 Щелкните строку ошибки в окне **Список ошибок** и перейдите в строку кода, в которой возникла ошибка. (Номера строк также можно включить, щелкнув панель **быстрого запуска** в верхнем правом углу: введите "номера строк" в поле и нажмите клавишу **ВВОД**.) Это самый быстрый способ перехода в окно **Параметры**, где можно включить номера строк. Узнайте, как использовать панель **быстрого запуска** и избежать лишних действий в пользовательском интерфейсе.

 ![Редактор Visual Studio с номерами строк](../ide/media/vs_ide_gs_debug_line_numbers.png "Vs_ide_gs_debug_line_numbers")

 ![Параметр "Номера строк" в Visual Studio](../ide/media/vs_ide_gs_debug_options_line_numbers.png "Vs_ide_gs_debug_options_line_numbers")

 Нажмите клавиши **CTRL+G** для быстрого перехода к номеру строки, в которой возникла ошибка.

 Ошибку можно узнать по подчеркиванию красной волнистой линией Чтобы получить дополнительные сведения, наведите на нее указатель мыши. Внесите исправления, и подчеркивание исчезнет, хотя в результате исправления может возникнуть новая ошибка (это называется "регрессия").

 ![Ошибка при наведении курсора мыши в Visual Studio](../ide/media/vs_ide_gs_debug_error_hover1.png "Vs_ide_gs_debug_error_hover1")

 Пройдите список ошибок и устраните все ошибки в коде.

 ![Окно ошибок отладчика в Visual Studio](../ide/media/vs_ide_gs_debug_error_list.PNG "Vs_ide_gs_debug_error_list")

### <a name="review-errors-in-detail"></a>Просмотр подробных сведений об ошибках

Многие ошибки трудны для восприятия, будучи представленными в терминах компилятора. В этом случае могут потребоваться дополнительные сведения. В окне **Список ошибок** можно выполнить автоматический поиск Bing, чтобы получить дополнительные сведения об ошибке (или предупреждении): щелкните правой кнопкой мыши в соответствующей строке записи и выберите в меню **Показать справочные сведения об ошибке**.

 ![Bing-поиск списка ошибок в Visual Studio](../ide/media/vs_ide_gs_debug_error_list_error_help.png "Vs_ide_gs_debug_error_list_error_help")

 Внутри Visual Studio откроется вкладка, на которой будут отображаться результаты поиска Bing для кода ошибки и текста. Представленные результаты — из различных источников в Интернете, и, возможно, не все они будут полезными.

 Кроме того, можно щелкнуть значение кода ошибки с гиперссылкой в столбце **Код** **списка ошибок**. Это приведет к запуску поиска Bing только по коду ошибки.

### <a name="use-light-bulbs-to-fix-or-refactor-code"></a>Использование значка лампочки для исправления или рефакторинга кода

Лампочки — это новая возможность Visual Studio, позволяющая выполнить рефакторинг кода в окне решения. Это простой способ быстрого и эффективного устранения распространенных предупреждений. Для доступа к ним щелкните правой кнопкой мыши волнистую линию предупреждения или нажмите клавиши **CTRL+**. (указатель мыши должен быть наведен на волнистую линию), а затем выберите пункт меню **Быстрые действия**.

 ![Лампочка в Visual Studio](../ide/media/vs_ide_gs_debug_light_bulb1.png "Vs_ide_gs_debug_light_bulb1")

 Вы увидите список возможных исправлений или операций рефакторинга, которые можно применить к соответствующей строке кода.

 ![Предварительный просмотр лампочки в Visual Studio](../ide/media/vs_ide_gs_debug_light_bulb_preview_changes.PNG "Vs_ide_gs_debug_light_bulb_preview_changes")

 Лампочки можно использовать в любом случае, когда средство анализа кода определяет возможность исправления, рефакторинга или улучшения кода. Щелкните любую строку кода, откройте контекстное меню и выберите пункт **Быстрые действия** (или, если вы предпочитаете эффективность, нажмите клавиши **CTRL+**). Если есть доступные параметры рефакторинга или улучшения, они будут выведены на экран; в противном случае на панели в левом нижнем углу окна IDE будет выведено сообщение `No quick options available here`.

 ![Текст "Параметры недоступны" при использовании лампочки в Visual Studio](../ide/media/vs_ide_gs_debug_light_bulb_no_options.PNG "Vs_ide_gs_debug_light_bulb_no_options")

 Если вы привыкли работать с клавиатурой, вы можете использовать клавиши со стрелками и клавиши **CTRL+**. для проверки возможностей оптимизации с помощью быстрых параметров и очистки кода.

 Дополнительные сведения о лампочках см. в статье [Выполнение быстрых действий с лампочками](../ide/perform-quick-actions-with-light-bulbs.md).

### <a name="debug-your-running-code"></a>Отладка выполняемого кода

Успешно завершив сборку кода и его очистку, запустите код, нажав клавишу **F5** или выбрав команду **Отладка > Начать отладку**. Приложение будет запущено в среде отладки, и вы сможете пронаблюдать его поведение. Интегрированная среда разработки Visual Studio изменяется во время выполнения приложения: окно **Вывод** заменяется двумя новыми окнами (в конфигурации окон по умолчанию): окном с вкладками **Видимые/Локальные/Контрольные значения** и окном с вкладками **Стек вызовов/Точки останова/Параметры исключений/Вывод**. Эти окна имеют несколько вкладок, которые позволяют просмотреть и проверить переменные, потоки, стеки вызовов приложения и другие характеристики поведения во время выполнения приложения.

 ![Окна "Видимые" и "Стеки вызовов" в Visual Studio](../ide/media/vs_ide_gs_debug_autos_and_call_stack.PNG "Vs_ide_gs_debug_autos_and_call_stack")

 Остановить приложение можно, нажав клавиши **SHIFT+F5** или кнопку **Остановить**. Кроме того, можно просто закрыть главное окно приложения (или диалоговое окно командной строки).

 Если код выполняется полностью и точно так, как ожидалось, вас можно поздравить. Но в случае зависания, сбоя или непредвиденных результатов может потребоваться найти источник проблем и исправить ошибки.

### <a name="set-simple-breakpoints"></a>Задание простых точек останова

Точки останова — это один из самых простых и важных компонентов надежной отладки. Точка останова указывает, где Visual Studio следует приостановить выполнение кода, чтобы вы могли проверить значения переменных или поведение памяти либо выполнение ветви кода. После установки или удаления точек останова перестраивать проект НЕ НУЖНО.

 Установите точку останова, щелкнув дальнее поле строки, в которой требуется приостановить выполнение, или нажмите клавишу **F9**, чтобы установить точку останова в текущей строке кода. Выполнение кода прерывается (*останавливается*) перед инструкциями для этой строки кода.

 ![Точка останова в Visual Studio](../ide/media/vs_ide_gs_debug_breakpoint1.png "Vs_ide_gs_debug_breakpoint1")

 Чаще всего точки останова используются для решения следующих задач.

1.  Для сужения области поиска источника сбоя или зависания, когда точки останова устанавливаются в разных местах участка кода вызова метода, который, возможно, является источником проблемы, и за его пределами. При выполнении кода в отладчике удаляйте, а затем снова устанавливайте точки останова ближе друг к другу, пока не найдете строку кода, вызывающую ошибку.  Выполнение кода в отладчике описывается в следующем разделе.

2.  При добавлении нового кода установите точку останова в его начале и выполните код, чтобы убедиться в том, что он работает правильно.

3.  При реализации сложного поведения задайте точки останова для алгоритмического кода, чтобы можно было проверить значения переменных и данные при прерывании программы.

4.  При написании кода C или C++ используйте точки останова для остановки кода, чтобы можно было проверить значения адреса (ищите значение NULL) и просмотреть значения счетчиков при отладке ошибок, связанных с памятью.

 Дополнительные сведения о точках останова см. в статье [Использование точек останова](../debugger/using-breakpoints.md).

### <a name="inspect-your-code-at-run-time"></a>Проверка кода во время выполнения

Когда выполнение кода приостанавливается из-за достижения точки останова, строка кода, помеченная желтым цветом (текущий оператор), еще не выполнена. Вы можете выполнить текущий оператор и проверить, как изменились значения. Для выполнения кода в отладчике можно использовать ряд команд *пошагового выполнения*. Если отмеченный код является вызовом метода, вы можете выполнить шаг с заходом, нажав клавишу **F11**. Кроме того, можно выполнить *шаг с обходом* строки кода, нажав клавишу **F10**. Дополнительные команды и подробные сведения о пошаговом выполнении кода см. в статье [Навигация по коду с помощью отладчика](../debugger/navigating-through-code-with-the-debugger.md).

 ![Проверка значения времени выполнения в Visual Studio](../ide/media/vs_ide_gs_debug_hit_breakpoint.PNG "vs_ide_gs_debug_inspect_value")

 Код, представленный на предыдущей иллюстрации, может выполняться отладчиком по одному оператору. Для этого можно нажимать клавишу **F10** или **F11** (так как здесь нет вызова метода, результат выполнения обеих команд будет одинаковым).

 Когда отладчик приостанавливает выполнение, можно проверить переменные и стеки вызовов, чтобы разобраться в происходящем. Находятся ли значения в тех диапазонах, которые вы ожидали увидеть? Выполняются ли вызовы в правильном порядке?

 ![Проверка значения времени выполнения в Visual Studio](../ide/media/vs_ide_gs_debug_inspect_value.PNG "vs_ide_gs_debug_inspect_value")

 Наведите указатель мыши на переменную, чтобы просмотреть значения и ссылки, которые она содержит в данный момент. Если отображается значение, которое вы не ожидали увидеть, возможно, в предыдущей или вызывающей строке кода имеется ошибка.  Вы можете получить более подробные сведения об [использовании отладчика](../debugger/getting-started-with-the-debugger.md).

 Кроме того, Visual Studio выводит на экран окно **средств диагностики**, где можно наблюдать за загрузкой ЦП и использованием памяти приложением в динамике по времени. В дальнейшем в процессе разработки приложения эти средства можно применять для выявления случаев непредвиденно высокой загрузки ЦП или чрезмерного выделения памяти. Это окно можно использовать в сочетании с окном **Контрольные значения** и точками останова, чтобы определить причину непредвиденно интенсивного использования или неосвобожденных ресурсов.  Дополнительные сведения см. в статье [Обзор возможностей профилирования](../profiling/profiling-feature-tour.md).

### <a name="run-unit-tests"></a>Запуск модульных тестов

Модульные тесты — это первая линия защиты от ошибок в коде, так как при правильном проведении они позволяют проверять отдельные "модули" кода (как правило, это отдельные функции), которые обычно гораздо проще отлаживать, чем всю программу. Visual Studio устанавливает платформу модульного тестирования Майкрософт для управляемого и машинного кода. Платформа модульного тестирования используется для создания модульных тестов, их запуска и передачи результатов таких тестов. Завершив внесение изменений, запустите модульные тесты повторно, чтобы убедиться, что код по-прежнему работает правильно. При использовании выпуска Visual Studio Enterprise можно настроить автоматический запуск тестов после каждой сборки.

 Чтобы приступить к работе с модульными тестами, ознакомьтесь со статьей [Создание модульных тестов для кода с помощью IntelliTest](../test/generate-unit-tests-for-your-code-with-intellitest.md).

 Дополнительные сведения о модульных тестах в Visual Studio, а также о том, как они могут помочь в создании более качественного кода, см. в статье [Основные сведения о модульных тестах](../test/unit-test-basics.md).

### <a name="perform-static-code-analysis"></a>Выполнение статического анализа кода

Под статическим анализом кода мы, как правило, понимаем автоматическую проверку кода на наличие распространенных проблем, которые могут привести к ошибкам во время выполнения или проблемам управления кодом. Запустить этот компонент после устранения всех очевидных ошибок, препятствующих сборке, и потратить некоторое время, чтобы устранить создаваемые им предупреждения, — очень полезная привычка. Вы сможете избавиться от определенных будущих проблем, а также научиться некоторым полезным приемам написания кода.

 Нажмите клавиши **ALT+F11** (или выберите в верхнем меню команду **Анализ > Выполнить анализ кода в решении**) для запуска статического анализа кода. При наличии большого объема кода это может занять некоторое время.

 ![Пункт меню "Анализ кода" в Visual Studio](../ide/media/vs_ide_gs_debug_run_code_analysis.png "Vs_ide_gs_debug_run_code_analysis")

 Все новые или обновленные предупреждения будут отображаться на вкладке **Список ошибок** в нижней части интегрированной среды разработки. Для перехода к предупреждению щелкните его.

 ![Список ошибок с предупреждениями в Visual Studio](../ide/media/vs_ide_gs_debug_code_analysis_warning_error_list.PNG "vs_ide_gs_debug_code_analysis_warning_error_list")

 Предупреждения выделяются яркой желто-зеленой волнистой линией вместо красной. Наведите указатель мыши на предупреждение, чтобы получить дополнительные сведения. При щелчке правой мыши выводится контекстное меню, в котором можно выбрать пункты для исправления или рефакторинга.

 ![Предупреждение анализа кода в Visual Studio при наведении указателя мыши](../ide/media/vs_ide_gs_debug_code_analysis_warning_hover.png "vs_ide_gs_debug_code_analysis_warning_hover")

## <a name="see-also"></a>См. также

- [Обзор функций отладчика](../debugger/debugger-feature-tour.md)
- [Дополнительные сведения об использовании отладчика](../debugger/getting-started-with-the-debugger.md)