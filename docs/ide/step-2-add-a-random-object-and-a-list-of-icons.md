---
title: "Шаг 2. Добавление случайного объекта и списка значков | Документы Майкрософт"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: vs-acquisition
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 95faea28-eddc-4cfa-95fb-3b34b5a976d7
caps.latest.revision: "22"
author: TerryGLee
ms.author: tglee
manager: ghogen
ms.openlocfilehash: d61602ce6c1542e746f54ecebc8576326e5e6889
ms.sourcegitcommit: f40311056ea0b4677efcca74a285dbb0ce0e7974
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2017
---
# <a name="step-2-add-a-random-object-and-a-list-of-icons"></a>Шаг 2. Добавление случайного объекта и списка значков
На этом шаге будет создан набор парных символов для игры. Каждый символ добавляется в две случайные ячейки в TableLayoutPanel в форме. Для этого используются два оператора `new`, создающие два объекта. Первый является объектом `Random`. Такой же объект использовался в игре "Математическая головоломка". Он используется в этом коде для случайного выбора ячейки в TableLayoutPanel. Второй объект, который может показаться вам новым, это объект `List`, используемый для хранения случайно выбранных символов.  
  
### <a name="to-add-a-random-object-and-a-list-of-icons"></a>Добавление случайного объекта и списка значков  
  
1.  В **обозревателе решений** выберите **Form1.cs**, если используется Visual C#, или **Form1.vb**, если используется Visual Basic, а затем в строке меню выберите **Вид**, **Код**. В качестве альтернативы можно нажать клавишу **F7** или дважды щелкнуть **Form1** в **обозревателе решений**.  
  
     Будет показан модуль кода формы Form1.  
  
2.  В имеющийся код добавьте следующий фрагмент.  
  
     [!code-csharp[VbExpressTutorial4Step2_3_4#1](../ide/codesnippet/CSharp/step-2-add-a-random-object-and-a-list-of-icons_1.cs)]
     [!code-vb[VbExpressTutorial4Step2_3_4#1](../ide/codesnippet/VisualBasic/step-2-add-a-random-object-and-a-list-of-icons_1.vb)]  
  
     При написании кода на языке Visual C# убедитесь, что вы помещаете код после открывающей фигурной скобки и сразу после объявления класса (`public partial class Form1 : Form`). При написании кода на языке Visual Basic поместите код сразу после объявления класса (`Public Class Form1`).  
  
3.  При добавлении объекта `List` обратите внимание на открывшееся окно **IntelliSense**. Ниже приведен пример на языке Visual C#, но аналогичный текст отобразится и при добавлении списка в Visual Basic.  
  
     ![Окно свойств, отображающее событие Click](../ide/media/express_listintellisense.png "Express_ListIntellisense")  
Окно IntelliSense  
  
    > [!NOTE]
    >  Окно Intellisense отображается только при вводе кода вручную. При копировании и вставке кода оно не отображается.  
  
     Код проще понять, если рассматривать его (и примечания) небольшими частями. Объекты `List` можно использовать для отслеживания элементов множества различных типов. Список может содержать числа, значения true или false, текст и другие объекты. Также объект `List` может содержать другие объекты `List`. Список состоит из *элементов*, и каждый список содержит только один тип элементов. Поэтому список чисел может содержать только числа. В него нельзя добавить текст. Аналогично нельзя добавлять числа в список значений true или false.  
  
     При создании объекта `List` с помощью оператора `new` необходимо указать ему, данные какого типа будут храниться в этом объекте. Вот почему подсказка в верхней части окна **IntelliSense** указывает на тип элементов списка. Вот что значит код `List<string>` (в Visual C#) и `List(Of String)` (в Visual Basic) — это объект `List`, содержащий элементы типа `string`. Строка используется программой для хранения текста, о чем и сообщается в подсказке справа от окна **IntelliSense**.  
  
4.  Рассмотрим, почему в Visual Basic сначала необходимо создать временный массив, а в Visual C# можно создавать список с помощью одного оператора. Это происходит потому, что язык Visual C# имеет *инициализаторы коллекций*, которые подготавливают список к приему значений. В Visual Basic можно использовать инициализатор коллекции. Однако для обеспечения совместимости с предыдущей версией Visual Basic рекомендуется использовать предыдущий код.  
  
     При использовании инициализатора коллекции с оператором `new` после создания нового объекта `List` программа заполняет его данными, которые указаны внутри фигурных скобок. В этом случае будет инициализирован список строк с именем **icons**, содержащий шестнадцать строк. Каждая из этих строк представляет одну букву, которая соответствует значку, отображаемому в метке. Таким образом, игра будет иметь пару восклицательных знаков, пару прописных букв N, пару запятых и т. д. (Если эти символы заданы шрифтом Webdings, они отображаются как символы, такие как автобус, велосипед, паук и т. д.) Объект `List` будет содержать шестнадцать строковых значений, по одному для каждой ячейки в TableLayoutPanel.  
  
    > [!NOTE]
    >  В Visual Basic получится такой же результат, но сначала строки помещаются во временный массив, который затем преобразуется в объект `List`. Массив похож на список, за исключением того, например, что массивы создаются фиксированного размера. Списки можно уменьшать и увеличивать по мере необходимости, что важно для этой программы.  
  
### <a name="to-continue-or-review"></a>Продолжить или повторить пройденный материал  
  
-   Следующий шаг руководства см. в разделе [Шаг 3. Назначение каждой метке случайного значка](../ide/step-3-assign-a-random-icon-to-each-label.md).  
  
-   Предыдущий шаг руководства см. в разделе [Шаг 1. Создание проекта и добавление таблицы в форму](../ide/step-1-create-a-project-and-add-a-table-to-your-form.md).