---
title: "Шаг 4. Добавление к каждой метке обработчика событий щелчка мышью | Документы Майкрософт"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- vs-ide-general
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 16bdbc7c-4129-411d-bace-f4a3e5375975
caps.latest.revision: 20
author: kempb
ms.author: kempb
manager: ghogen
translation.priority.ht:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
ms.translationtype: Human Translation
ms.sourcegitcommit: 5db97d19b1b823388a465bba15d057b30ff0b3ce
ms.openlocfilehash: 0e5b7a1c40e53fa70fe3f6931e1e2a871defe183
ms.contentlocale: ru-ru
ms.lasthandoff: 05/19/2017

---
# <a name="step-4-add-a-click-event-handler-to-each-label"></a>Шаг 4. Добавление к каждой метке обработчика событий щелчка мышью
Игра "Подбери пару!" работает следующим образом.  
  
1.  Когда игрок выбирает один из квадратов со скрытым значком, программа показывает значок игроку, изменяя цвет значка на черный.  
  
2.  После этого игрок выбирает другой скрытый значок.  
  
3.  Если значки совпадают, они остаются видимыми. Если нет, оба значка снова скрываются.  
  
 Чтобы программа работала именно так, добавьте обработчик событий Click, изменяющий цвет выбираемой метки.  
  
### <a name="to-add-a-click-event-handler-to-each-label"></a>Добавление обработчика событий Click к каждой метке  
  
1.  Откройте форму в конструкторе Windows Forms. В обозревателе решений выберите Form1.cs или Form1.vb. В строке меню выберите **Вид**, **Конструктор**.  
  
2.  Выберите первый элемент Label, чтобы выделить его. Затем, удерживая нажатой клавишу CTRL, выберите каждую из оставшихся меток, чтобы выбрать и их. Убедитесь, что выбраны все метки.  
  
3.  Нажмите кнопку **События** на панели инструментов в окне **Свойства**, чтобы открыть страницу **События** в окне **Свойства**. Прокрутите вниз до события **Click** и введите **label_Click** в поле, как показано на следующем рисунке.  
  
     ![Окно свойств, отображающее событие Click](~/ide/media/express_labelclick.png "Express_labelClick")  
Окно свойств, отображающее событие Click  
  
4.  Нажмите клавишу ВВОД. Интегрированная среда разработки добавит обработчик событий Click, который называется `label_Click()`, в код и подключит его к каждой метке в форме.  
  
5.  Добавьте остальную часть кода следующим образом:  
  
     [!code-cs[VbExpressTutorial4Step2_3_4#4](../ide/codesnippet/CSharp/step-4-add-a-click-event-handler-to-each-label_1.cs)] [!code-vb[VbExpressTutorial4Step2_3_4#4](../ide/codesnippet/VisualBasic/step-4-add-a-click-event-handler-to-each-label_1.vb)]  
  
    > [!NOTE]
    >  При копировании и вставке блока кода `label_Click()` вместо его ввода вручную проследите за тем, что заменить существующий код `label_Click()`. В противном случае в коде появится дублирующий блок.  
  
    > [!NOTE]
    >  Возможно, вы узнали `object sender` в верхней части обработчика событий; он совпадает с кодом в руководстве [Учебное руководство 2. Создание ограниченной по времени математической головоломки](../ide/tutorial-2-create-a-timed-math-quiz.md). Поскольку вы подключили различные события Click элемента управления Label к одному методу обработчика событий, один и тот же метод вызывается независимо от того, какую метку щелкнет пользователь. Методу обработчика событий необходимо знать, какую метку выбрал игрок, поэтому для определения элемента управления Label используется имя **sender**. Первая строка метода сообщает программе, что это не просто универсальный объект, а элемент управления Label, для обращения к свойствам и методам которого используется имя **clickedLabel**.  
  
     Этот метод сначала проверяет, было ли успешно выполнено преобразование (приведение) **clickedLabel** из объекта в элемент управления Label. Если операция завершилась неудачно, его значение будет `null` (C#) или `Nothing` (Visual Basic) и оставшаяся часть кода метода не будет выполнена. Затем метод с помощью свойства **ForeColor** элемента управления Label проверяет цвет текста выбранной метки. Если цвет текста метки черный, это это означает, что значок уже был выбран, а метод выполнен. (Для этого и нужен оператор `return`. Он сообщает программе, что необходимо остановить выполнение метода.) В противном случае значок не был выбран, поэтому программа изменяет цвет текста метки на черный.  
  
6.  В строке меню выберите **Файл**, **Сохранить все**, чтобы сохранить ход выполнения, а затем в строке меню выберите **Отладка**, **Начать отладку**, чтобы запустить программу. Вы должны увидеть пустую форму с синим фоном. Выберите любую ячейку в форме, и один из значков станет видимым. Продолжайте выбирать различные ячейки формы. Значки будут отображаться при их выборе.  
  
### <a name="to-continue-or-review"></a>Продолжить или повторить пройденный материал  
  
-   Следующий шаг руководства см. в разделе [Шаг 5. Добавление ссылок на метки](../ide/step-5-add-label-references.md).  
  
-   Предыдущий шаг руководства см. в разделе [Шаг 3. Назначение каждой метке случайного значка](../ide/step-3-assign-a-random-icon-to-each-label.md).
