---
title: "Практическое руководство. Подписание манифестов приложения и развертывания | Microsoft Docs"
ms.custom: ""
ms.date: "12/15/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-general"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "манифесты приложения [Visual Studio]"
  - "сборки [Visual Studio], подписывание"
  - "ClickOnce - развертывание [Visual Studio], подписывание сборок"
  - "подписывание кода [Visual Studio], Authenticode"
  - "манифесты развертывания [Visual Studio]"
  - "ключевые файлы [Visual Studio]"
  - "манифесты [Visual Studio]"
  - "манифесты подписывания [Visual Studio]"
ms.assetid: 64173505-8bfb-41cf-a0de-b9075173f3a2
caps.latest.revision: 58
caps.handback.revision: 58
author: "kempb"
ms.author: "kempb"
manager: "ghogen"
---
# Практическое руководство. Подписание манифестов приложения и развертывания
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

Чтобы опубликовать приложение с помощью ClickOnce\-развертывания, манифесты приложений и развертывания должны быть подписаны парой открытого и закрытого ключей и подписаны с помощью технологии Authenticode.  Манифест можно подписать с помощью сертификата из хранилища сертификатов Windows или файла ключа.  
  
 Дополнительные сведения о развертывании ClickOnce см. в разделе [Развертывание и безопасность технологии ClickOnce](../deployment/clickonce-security-and-deployment.md).  
  
 Подписывание манифестов ClickOnce является необязательным для приложений на базе EXE\-файла.  Дополнительные сведения см. в разделе "Создание неподписанных манифестов" данного документа.  
  
 Сведения о создании файлов ключей содержатся в разделе [Практическое руководство. Создание пары открытого и закрытого ключей](../Topic/How%20to:%20Create%20a%20Public-Private%20Key%20Pair.md).  
  
> [!NOTE]
>  [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] поддерживает только файлы ключей Personal Information Exchange \(PFX\) с расширением .pfx.  Однако можно выбрать другие типы сертификатов в хранилище сертификатов Windows текущего пользователя, нажав кнопку **Выбрать из хранилища** на странице **Подписывание** свойств проекта.  
  
### Для подписывания манифестов приложений и развертывания с использованием сертификата  
  
1.  Перейдите к окну свойств проекта \(щелкните узел проектов правой кнопкой мыши в **Обозреватель решений** и выберите **Свойства** или введите свойства проекта в окне **Быстрый запуск** или нажмите сочетание клавиш ALT\+ВВОД внутри окна **Обозреватель решений**\).  На странице **Подписи** установите флажок **Подписать ClickOnce\-манифест**.  
  
2.  Нажмите кнопку **Выбрать из хранилища**.  
  
     Откроется диалоговое окно **Выберите сертификат**. В нем отобразится содержимое магазина сертификатов Windows.  
  
    > [!TIP]
    >  Если нажать **Щелкните здесь, чтобы просмотреть свойства сертификата**, откроется диалоговое окно **Сведения сертификата**.  Это диалоговое окно содержит подробные сведения о сертификате, включает дополнительные параметры.  Можно нажать кнопку **сертификаты**, чтобы просмотреть дополнительные сведения.  
  
3.  Выберите сертификат, который требуется использовать для подписывания манифеста.  
  
4.  Кроме того, можно указать адрес сервера отметки времени в текстовом поле **URL\-адрес сервера штампа времени**.  Это сервер, обеспечивающий указание штампа времени, когда был подписан манифест.  
  
### Для подписывания манифестов приложений и развертывания с помощью существующего файла ключа  
  
1.  На странице **Подписи** установите флажок **Подписать ClickOnce\-манифест**.  
  
2.  Нажмите кнопку **Выбрать из файла**.  
  
     Появится диалоговое окно **Выберите файл**.  
  
3.  В диалоговом окне **Выберите файл**, перейдите к расположению файла ключа \(PFX\), который требуется использовать, и нажмите **Открыть**.  
  
    > [!NOTE]
    >  Можно выбрать только файлы с расширением PFX.  Если имеется файл ключа или сертификат в другом формате, сохраните его в хранилище сертификатов Windows и выберите сертификат, как описано в предыдущей процедуре.  Назначение выбранного сертификата должно включать подписывание кода.  
  
     Отображается диалоговое окно **Введите пароль, чтобы открыть файл**. \(Если файл PFX уже хранится в хранилище сертификатов Windows, или он не защищен паролем, то предложение ввести пароль не появится.\)  
  
4.  Введите пароль для доступа к файлу ключа и нажмите клавишу Ввод.  
  
### Для подписывания манифестов приложений и развертывания с использованием пробного сертификата  
  
1.  На странице **Подписи** установите флажок **Подписать ClickOnce\-манифест**.  
  
2.  Чтобы создать новый сертификат для тестирования, нажмите кнопку **Создать тестовый сертификат**.  
  
3.  В поле **Создание тестового сертификата** введите пароль для защиты тестового сертификата.  
  
## Создание неподписанных манифестов  
 Подписывание манифестов ClickOnce является необязательным для приложений на базе EXE\-файла.  Процедура, приведенная ниже, описывает создание неподписанных манифестов ClickOnce\-приложений.  
  
> [!IMPORTANT]
>  Неподписанные манифесты могут упростить разработку и проверку приложения.  Однако неподписанные манифесты представляют собой большую угрозу безопасности в производственной среде.  Использование неподписанных манифестов следует учитывать, только если приложение ClickOnce выполняется на компьютерах, подключенных к интрасети и полностью изолированных от Интернета или других источников вредоносного кода.  
  
 По умолчанию ClickOnce\-приложение автоматически создает подписанные манифесты, если специальным образом не исключить определенные файлы из создаваемого хэша.  Другими словами, публикация приложения приведет к созданию подписанных манифестов, если все файлы включены в хэш, даже когда флажок **Подписать манифесты ClickOnce\-приложений** снят.  
  
#### Создание неподписанных манифестов и включение всех файлов в создаваемый хэш  
  
1.  Для создания неподписанных манифестов, которые включают все файлы в хэш, необходимо сначала опубликовать приложение вместе с подписанными манифестами.  Следовательно, сначала необходимо подписать манифесты ClickOnce\-приложения согласно любой из вышеприведенных процедур и затем опубликовать приложение.  
  
2.  На странице **Подписи** снимите флажок **Подписать манифесты ClickOnce\-приложений**.  
  
3.  Выполните сброс версии публикации так, чтобы доступной осталась только одна версия приложения.  По умолчанию Visual Studio автоматически увеличивает номер редакции версии публикации при каждой публикации приложения.  Дополнительные сведения см. в разделе [Практическое руководство. Установка версии публикации приложения ClickOnce](../Topic/How%20to:%20Set%20the%20ClickOnce%20Publish%20Version.md).  
  
4.  Опубликуйте приложение.  
  
#### Создание неподписанных манифестов и исключение определенных файлов из создаваемого хэша  
  
1.  На странице **Подписи** снимите флажок **Подписать манифесты ClickOnce\-приложений**.  
  
2.  Откройте диалоговое окно **Файлы приложения** и установите для параметра **Хэш** значение **Исключить**, чтобы исключить требуемые файлы из создаваемого хэша.  
  
    > [!NOTE]
    >  При исключении файла из хэша ClickOnce отключает автоматическое создание сигнатур манифестов, следовательно, нет необходимости сначала публиковать приложение с подписанными манифестами, как описывалось в предыдущей процедуре.  
  
3.  Опубликуйте приложение.  
  
## См. также  
 [Сборки со строгими именами](../Topic/Strong-Named%20Assemblies.md)   
 [Практическое руководство. Создание пары открытого и закрытого ключей](../Topic/How%20to:%20Create%20a%20Public-Private%20Key%20Pair.md)   
 [Страница "Подписывание" в конструкторе проектов](../ide/reference/signing-page-project-designer.md)   
 [Развертывание и безопасность технологии ClickOnce](../deployment/clickonce-security-and-deployment.md)