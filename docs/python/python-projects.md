---
title: "Проекты Python в Visual Studio | Документы Майкрософт"
ms.custom: 
ms.date: 4/10/2017
ms.prod: visual-studio-dev15
ms.reviewer: 
ms.suite: 
ms.technology:
- devlang-python
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c9c53f76-d0ef-4095-8b39-b7eb9bb33aba
caps.latest.revision: 11
author: kraigb
ms.author: kraigb
manager: ghogen
translation.priority.ht:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
ms.translationtype: Human Translation
ms.sourcegitcommit: 85576806818a6ed289c2f660f87b5c419016c600
ms.openlocfilehash: 3190be68fbba464a84a7a25b2d829979944bdb1f
ms.contentlocale: ru-ru
ms.lasthandoff: 05/09/2017

---

# <a name="python-projects"></a>Проекты Python

Приложения Python обычно определяются только с помощью файлов и папок, но это может усложнить работу, так как приложения увеличиваются в размере и могут содержать автоматически сгенерированные файлы, JavaScript для веб-приложений и т. д. Чтобы упростить управление, можно создать проекты Visual Studio для приложений Python. Проект Python (файл `.pyproj`) определяет все исходные файлы и файлы содержимого, связанные с проектом, содержит сведения о сборке каждого файла, хранит информацию для интеграции с системами управления версиями и помогает упорядочить приложение в виде логических компонентов.

Кроме того, проекты всегда управляются в *решении* Visual Studio, которое может содержать любое число проектов с возможностью ссылаться друг на друга. Например, проект Python может ссылаться на проект C++ для модуля расширения, благодаря чему Visual Studio автоматически создаст проект C++ (при необходимости) при запуске отладки проекта Python. (Общие сведения см. в статье [Решения и проекты в Visual Studio](../ide/solutions-and-projects-in-visual-studio.md).)

![Проект Python в обозревателе решений](~/docs/python/media/projects-solution-explorer.png)

Visual Studio предоставляет множество шаблонов проектов Python, позволяющих быстро настроить несколько структур приложений, а также шаблон для создания проекта из существующего дерева папок и шаблон для создания пустого проекта. Описание шаблонов приведено ниже в разделе [шаблоны проектов](#project-templates).

Содержание раздела

- [Добавление файлов, назначение файла запуска и настройка сред](#adding-files-assigning-a-startup-file-and-setting-environments)
- [Шаблоны проектов](#project-templates)
- [Связанные файлы](#linked-files)
- [Ссылки](#references)

<a name="lightweight-usage-project-free"</a>
> [!Tip]
> Visual Studio работает с кодом Python даже без проекта, так как можно открыть сам файл Python и оценить автозавершение, IntellSense и отладку (щелкнув правой кнопкой мыши в редакторе и выбрав **Start [with | without] Debugging** (Запуск [с | без отладки])). Такой код всегда использует глобальную среду по умолчанию, однако при работе могут возникать неверные завершения или ошибки, если код предназначен для другой среды. Кроме того, Visual Studio анализирует все файлы и пакеты в папке, из которой открыт один файл, что может значительно расходовать время ЦП.
>
> Создать проект Visual Studio можно из существующего кода, как описано ниже в разделе [Создание проекта из существующих файлов](#creating-a-project-from-existing-files).

Введение в проекты Python в Visual Studio представлено в видео [Getting Started with Python Tools Part 2: Projects](https://youtu.be/KHPoVpL7zHg?list=PLReL099Y5nRdLgGAdrb_YeTdEnd23s6Ff) (Приступая к работе с инструментами Python. Часть 2. Проекты) длительностью 3 мин 18 с, размещенном на сайте youtube.com.

> [!VIDEO https://www.youtube.com/embed/KHPoVpL7zHg]

Также см. видео [Deep Dive: Using source control with Python projects](https://youtu.be/Aq8eqApnugM) (Подробный обзор. Использование системы управления версиями в проектах Python) длительностью 8 мин 55 с, размещенном на сайте youtube.com.

> [!VIDEO https://www.youtube.com/embed/Aq8eqApnugM]


## <a name="adding-files-assigning-a-startup-file-and-setting-environments"></a>Добавление файлов, назначение файла запуска и настройка сред

При разработке приложения обычно требуется добавить в проект новые файлы различных типов. Это легко сделать, щелкнув правой кнопкой мыши проект, выбрав **Добавить > Существующий элемент...** и перейдя к нужному файлу. Можно также выбрать **Добавить > Новый элемент...**, в результате чего появится диалоговое окно с различными шаблонами элементов, включая пустые файлы Python, класс Python, модульный тест и различные файлы, связанные с веб-приложениями. Мы рекомендуем испробовать эти варианты с помощью тестового проекта, чтобы узнать о возможностях вашей версии Visual Studio.

Каждый проект Python имеет один назначенный файл запуска, выделенный полужирным шрифтом в обозревателе решений. Это файл, который запускается, когда вы запускаете отладку (F5 или **Отладка > Начать отладку**) или выполняете проект в интерактивном окне (SHIFT+ALT+F5 или **Отладка > Выполнить проект в интерактивном окне Python**). Чтобы изменить его, щелкните правой кнопкой мыши файл и выберите **Set as Startup File** (Назначить файлом запуска).

> [!Tip]
> Если вы удаляете выбранный файл запуска из проекта и не выбираете новый, при попытке запустить проект окно вывода Python отображается и практически сразу же исчезает. Если у вас возникла подобная ситуация, убедитесь, что назначен файл запуска. Кроме того, чтобы окно вывода оставалось открытым, щелкните правой кнопкой мыши проект, выберите **Свойства**, откройте вкладку **Отладка**, а затем добавьте `-i` в поле **Аргументы интерпретатора**. В этом случае интерпретатор переходит в интерактивный режим после завершения программы, оставляя окно открытым, пока вы не нажмете клавиши CTRL+Z и ВВОД для выхода.

Новый проект всегда по умолчанию связан с глобальной средой Python. Чтобы связать проект с другой средой (включая виртуальные среды), в проекте щелкните правой кнопкой мыши узел **Python Environments** (Среды Python) и выберите необходимую команду в **диалоговом окне добавления и удаления сред Python**. Чтобы изменить активную среду, щелкните правой кнопкой мыши необходимую среду и выберите **Activate Environment** (Активировать среду). Дополнительные сведения см. в статье [Среды Python](python-environments.md#project-specific-environments).

![Активация среды для проектов Python](~/docs/python/media/projects-activate-environment.png)

<a name="project-types"</a>
## <a name="project-templates"></a>Шаблоны проектов

Visual Studio предоставляет несколько способов настройки проекта Python — с нуля или из существующего кода. Чтобы использовать шаблон, выберите команду меню **Файл > Создать > Проект...** или щелкните правой кнопкой мыши решение в обозревателе решений и выберите **Добавить > Новый проект...**. В любом случае отобразится диалоговое окно **Новый проект**. Чтобы просмотреть шаблоны конкретно для Python, выполните поиск по запросу "Python" или выберите узел **Шаблоны > Другие языки > Python**.

![Диалоговое окно создания проекта с шаблонами Python](~/docs/python/media/projects-new-project-dialog.png)

В следующей таблице перечислены шаблоны, доступные в Visual Studio 2017 (не все шаблоны доступны в предыдущих версиях).

| Шаблон | Описание | 
| --- | --- |
| [From Existing Python Code](#creating-a-project-from-existing-files) (Из существующего кода Python) | Создает проект Visual Studio из существующего кода Python в структуре папок.  |
| Python Application (Приложение Python) | Структура базового проекта для нового приложения Python с одним пустым исходным файлом. По умолчанию проект выполняется в консоли интерпретатора глобальной среды по умолчанию, которую можно изменить, [назначив другую среду](python-environments.md#project-specific-environments). |
| [Облачная служба Azure](template-azure-cloud-service.md) | Проект для облачной службы Azure, написанный на Python. |
| [Веб-проекты](template-web.md) | Проекты для веб-серверов на базе различных платформ, включая Bottle, Django, Flask и Flask и Jade. |
| IronPython Application (Приложение с IronPython) | Аналогичен шаблону приложения Python, но по умолчанию использует интерпретатор IronPython, поддерживающий взаимодействие .NET и смешанный режим отладки с использованием языков .NET. |
| IronPython WPF Application (Приложение WPF с IronPython) | Структура проекта, использующая IronPython с XAML-файлами Windows Presentation Foundation для пользовательского интерфейса приложения. Visual Studio предоставляет конструктор пользовательского интерфейса XAML, возможность написания кода программной части на Python, а также возможность запуска приложения без отображения консоли. |
| IronPython Silverlight Web Page (Веб-страница с IronPython и Silverlight) | Это проект IronPython, который выполняется в браузере с подключаемым модулем Silverlight. Код приложения Python добавляется на веб-страницу в виде скрипта. Стандартный тег скрипта получает часть кода JavaScript, который инициализирует IronPython, выполняющийся в Silverlight, из которого код Python может взаимодействовать с моделью DOM. |
| IronPython Windows Forms Application (Приложение Windows Forms с IronPython) | Структура проекта, использующая IronPython с пользовательским интерфейсом, созданным с помощью кода и Windows Forms. Приложение запускается без вывода консоли. |
| Background Application (IoT) (Фоновое приложение (Интернет вещей)) | Поддерживает развертывание проектов Python для работы в качестве фоновых служб на устройствах. Дополнительные сведения см. на странице [центра разработчиков Интернета вещей Windows](https://dev.windows.com/en-us/iot). |
| Модуль расширения Python | Этот шаблон отображается в разделе Visual C++, если вы уже установили в Visual Studio 2017 **Собственные средства разработки Python** с рабочей нагрузкой Python (см. раздел [Установка](installation.md)). Он предоставляет базовую структуру для библиотеки DLL расширения C++, как описано в разделе [Создание расширения C++ для Python](cpp-and-python.md). |

<a name="create-project-from-existing-files"</a>
### <a name="creating-a-project-from-existing-files"></a>Создание проекта из существующих файлов

1. Выберите меню **Файл > Создать > Проект...**, а затем выберите шаблон **From Existing Python Code** (Из существующего кода Python).
1. В следующем диалоговом окне задайте путь к существующему коду, фильтр для типов файлов и любые пути поиска, необходимые для проекта, а затем нажмите кнопку **Далее**.

    ![Создание нового проекта из существующего кода, шаг 1](~/docs/python/media/projects-from-existing-1.png)

1. Выберите среду для проекта и файла запуска, а затем нажмите кнопку **Далее**. (Обратите внимание, что в диалоговом окне отображаются только файлы в корне дерева папок. Если нужный файл находится во вложенной папке, не указывайте файл запуска и укажите его позже в обозревателе решений).

    ![Создание нового проекта из существующего кода, шаг 2](~/docs/python/media/projects-from-existing-2.png)

1. Выберите папку для сохранения файла проекта (это не переместит и не скопирует исходные файлы, поэтому если вы хотите сделать копию, ее необходимо создать перед использованием шаблона). В этом диалоговом окне можно также включить автоматическое обнаружение виртуальных сред и настроить проект для разных веб-платформ.

    ![Создание нового проекта из существующего кода, шаг 3](~/docs/python/media/projects-from-existing-3.png)

1.  Нажмите кнопку **Готово**, и Visual Studio создаст проект и откроет его в обозревателе решений. Если вы хотите переместить PYPROJ-файл в другое место, выберите его в обозревателе решений и щелкните **Файл > Сохранить как**. В результате обновятся ссылки на файлы в проекте, но не переместятся файлы с кодом.

## <a name="linked-files"></a>Связанные файлы

Связанные файлы — это файлы, которые добавлены в проект, но при этом находятся вне папки проекта приложения. Они отображаются в обозревателе решений как обычные файлы с перекрывающимся значком ярлыка: ![Значок связанного файла](~/docs/python/media/projects-linked-file-icon.png)

Связанные файлы указаны в файле `.pyproj` с помощью обычного элемента `<Compile Include="...">`. Они могут быть неявно связанными файлами, если они используют относительный путь вне структуры каталогов, или явно связанными, если пути к ним указаны в обозревателе решений:

```xml
<Compile Include="..\test2.py">
    <Link>MyProject\test2.py</Link>
</Compile>
```

Связанные файлы будут игнорироваться при выполнении любого из следующих условий:

- Связанный файл содержит метаданные связи, и путь, указанный в атрибуте Include, находится в пределах каталога проекта.
- Связанный файл дублирует файл, который существует в иерархии проекта.
- Связанный файл содержит метаданные связи, и путь является относительным путем вне иерархии проекта.
- Путь связи является корневым.

### <a name="working-with-linked-files"></a>Работа со связанными файлами

Чтобы добавить существующий элемент в качестве связи, щелкните правой кнопкой мыши папку проекта, в которую вы хотите добавить файл, а затем выберите **Добавить > Exiting Item...** (Выход из элемента...). В открывшемся диалоговом окне выберите файл и щелкните **Добавить как связь** из раскрывающегося списка кнопки **Добавить**. При условии отсутствия конфликтующих файлов в выбранной папке будет создана связь. Связь не добавится, если файл с таким именем уже существует или связь с этим файлом уже существует в проекте.

При попытке создать связь с файлом, который уже существует в папке проекта, он будет добавлен как обычный файл, а не как связанный. Чтобы преобразовать файл в связь, выберите **Файл > Сохранить как** и сохраните файл в расположение вне иерархии проекта. Visual Studio автоматически преобразует его в связь. Аналогичным образом можно преобразовать связь обратно с помощью команды **Файл > Сохранить как** и сохранить файл в иерархии проекта. 

При перемещении связанного файла в обозревателе решений связь также будет перемещена, но не фактический файл. Аналогичным образом удаление связи приведет к удалению только связи, не затрагивая сам файл.

Связанные файлы нельзя переименовать.

## <a name="references"></a>Ссылки

Проекты Visual Studio поддерживают добавление ссылок на проекты и расширения, которые отображаются в узле **Ссылки** в обозревателе решений.

![Ссылки на расширения в проектах Python](~/docs/python/media/projects-extension-references.png)

Ссылки на расширения обычно указывают зависимости между проектами и используются для обеспечения IntelliSense во время разработки или связывания во время компиляции. Проекты Python используют ссылки подобным образом, но из-за динамической природы Python они в основном используются во время разработки для предоставления усовершенствованной функции IntelliSense. Они также могут использоваться для развертывания в Microsoft Azure с целью установки дополнительных зависимостей.

### <a name="extension-modules"></a>Модули расширений

Ссылка на файл `.pyd` позволяет использовать IntelliSense для созданного модуля. Visual Studio загружает файл `.pyd` в интерпретатор Python и анализирует его типы и функции. Программа также пытается выполнить синтаксический анализ строк функций в документе, чтобы предоставить справку по сигнатурам.

Если в любой момент модуль расширения обновляется на диске, Visual Studio повторно анализирует модуль в фоновом режиме. Это не влияет на поведение во время выполнения, но некоторые варианты завершения будут недоступны до завершения анализа.

Необходимо добавить [путь поиска](python-environments.md#search-paths) к папке, содержащей модуль.

### <a name="net-projects"></a>Проекты .NET

При работе с IronPython можно добавить ссылки на сборки .NET, чтобы активировать использование IntelliSense. Для проектов .NET в решении щелкните правой кнопкой мыши узел **Ссылки** в проекте Python, выберите **Добавить ссылку**, щелкните вкладку **Проекты** и найдите нужный проект. Для библиотек DLL, которые вы скачали отдельно, выберите вкладку **Обзор** и перейдите к требуемой библиотеке DLL.

Так как ссылки в IronPython недоступны, пока не будет выполнен вызов `clr.AddReference('AssemblyName')`, к сборке необходимо добавить вызов `clr.AddReference`.

### <a name="webpi-projects"></a>Проекты WebPI

Можно добавить ссылки на записи продукта WebPI для развертывания в облачной службе Microsoft Azure, где можно установить дополнительные компоненты с помощью веб-канала WebPI. По умолчанию отображаемый веб-канал предназначен только для Python и содержит Django, CPython и другие основные компоненты. Также можно выбрать собственный веб-канал, как показано ниже. При публикации в Microsoft Azure задача установки устанавливает все продукты, на которые имеются ссылки.

![Ссылки на WebPI](~/docs/python/media/projects-webPI-components.png)
