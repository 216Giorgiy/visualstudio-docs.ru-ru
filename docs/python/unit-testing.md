---
title: "Модульное тестирование для Python в Visual Studio | Документация Майкрософт"
ms.custom: 
ms.date: 5/8/2017
ms.prod: visual-studio-dev15
ms.reviewer: 
ms.suite: 
ms.technology:
- devlang-python
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f3ad6523-5a4e-4209-8977-adc2da305df2
caps.latest.revision: 1
author: kraigb
ms.author: kraigb
manager: ghogen
translation.priority.ht:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
ms.translationtype: Human Translation
ms.sourcegitcommit: 85576806818a6ed289c2f660f87b5c419016c600
ms.openlocfilehash: 2597583912c7694495617c53839f41aa13cda871
ms.contentlocale: ru-ru
ms.lasthandoff: 05/09/2017

---

# <a name="setting-up-unit-testing-for-python-code"></a>Настройка модульного тестирования для кода Python

Модульные тесты — это сегменты кода, которые проверяют работу других частей кода в приложении, например изолированных функций, классов и т. д. Если приложение успешно проходит все модульные тесты, то вы по меньшей мере уверены, что все низкоуровневые функции работают правильно.

В Python модульное тестирование широко используется для проверки скриптов в процессе разработки. Поддержка Python в Visual Studio включает обнаружение, выполнение и отладку модульных тестов непосредственно в контексте процесса разработки, а значит вам не потребуется выполнять эти операции отдельно.

Эта статья содержит краткий обзор модульного тестирования в Visual Studio для Python. Общие сведения о модульном тестировании см. в статье о [модульном тестировании кода](../test/unit-test-your-code.md).

## <a name="discovering-and-viewing-tests"></a>Обнаружение и просмотр тестов

По соглашению Visual Studio считает тестами все методы, имена которых начинаются со слова test. Это можно продемонстрировать на следующем примере.

1. Откройте [Проект Python](python-projects.md), загруженный в Visual Studio, щелкните его правой кнопкой мыши, выберите **Добавить > Новый элемент...**, а затем выберите **Модульный тест Python** и нажмите **Добавить**.

1. Этот процесс создает файл test1.py с кодом, который импортирует стандартный модуль `unittest`, производный от тестового класса `unittest.TestCase`, и вызывает метод `unittest.main()` при запуске скрипта напрямую:

  ```python
  import unittest

  class Test_test1(unittest.TestCase):
      def test_A(self):
          self.fail("Not implemented")

  if __name__ == '__main__':
      unittest.main()
  ```

1. Если нужно, сохраните этот файл, а затем откройте обозреватель тестов, последовательно выбрав **Тест > Окна > Обозреватель тестов**.

1. Обозреватель тестов выполнит в проекте поиск тестов и отобразит результаты, как показано ниже. Дважды щелкните тест, чтобы открыть его исходный файл.

    ![Обозреватель тестов со стандартным тестом test_A](~/docs/python/media/unit-test-A.png)

1. Когда тестов в проекте будет больше, их можно упорядочить в обозревателе тестов, используя команду "группировать" на панели инструментов:

    ![Группировка на панели инструментов в меню обозревателя тестов](~/docs/python/media/unit-test-group-menu.png)

1. Также вы можете ввести текст в поле поиска, чтобы отфильтровать тесты по именам.

Дополнительные сведения о модуле `unittest` и создании тестов можно получить в [документации по Python 2.7](https://docs.python.org/2/library/unittest.html) или в [документации по Python 3.4](https://docs.python.org/3/library/unittest.html) (python.org).

## <a name="running-tests"></a>Выполнение тестов

В обозревателе тестов можно запустить тесты несколькими способами.

- Команда **Запустить все** явно выполняет все тесты из списка (с учетом фильтров).
- Команда меню **Запуск...**  позволяет одновременно выполнить все тесты, которые завершились успешно, завершились неудачно или еще не выполнялись.
- Также можно выбрать один или несколько тестов, щелкнуть их правой кнопкой мыши и выбрать команду **Запустить выбранные тесты**.

Тесты выполняются в фоновом режиме, а обозреватель тестов обновляет их состояние по мере завершения.

- Успешно выполненные тесты обозначаются зеленым флажком, и для них указывается затраченное время:

    ![Состояние успешного выполнения для теста test_A](~/docs/python/media/unit-test-A-pass.png)

- Неудачные тесты обозначаются красным крестом и дополняются ссылкой **Output** (Вывод), которая позволяет изучить выходные данные на консоли и выходные данные `unittest`, полученные по результатам этого теста:

    ![Состояние неудачного выполнения для теста test_A](~/docs/python/media/unit-test-A-fail.png)

    ![Описание причин неудачи для теста test_A](~/docs/python/media/unit-test-A-fail-reason.png)

## <a name="debugging-tests"></a>Отладка тестов

Модульные тесты являются частью кода проекта, и в них могут встречаться ошибки, как и в любом другом коде. Возможно, вы захотите запустить тест в отладчике, где можно установить точки останова, просмотреть переменные или выполнить код пошагово. Также Visual Studio предоставляет средства диагностики

Чтобы начать отладку, установите в коде начальную точку останова, а затем щелкните в обозревателе тестов правой кнопкой мыши этот тест (или выделенный набор тестов) и выберите **Отладить выбранные тесты**. Visual Studio запустит отладчик Python, как для обычного кода приложения.

![Отладка теста](~/docs/python/media/unit-test-debugging.png)

Вы также можете использовать команды **Анализ покрытия кода для выбранных тестов** и **Профилировать тест**, если их поддерживает используемая версия Visual Studio (см. раздел [Матрица возможностей](python-in-visual-studio.md#features-matrix)).

### <a name="known-issues"></a>Известные проблемы

- Когда вы запускаете отладку, Visual Studio как будто бы запускает выполнение, затем останавливает и запускает снова. Подобный результат является ожидаемым.
- При отладке нескольких тестов они выполняются независимо друг от друга, и сеанс отладки прерывается.
- Visual Studio время от времени не удается запустить тест в режиме отладки. Обычно повторная попытка выполняется успешно.
- Во время отладки есть вероятность при выполнении шага перейти из теста в реализацию класса `unittest`. Обычно в таком случае на следующим шаге программа выполняется до конца и отладка завершается.
