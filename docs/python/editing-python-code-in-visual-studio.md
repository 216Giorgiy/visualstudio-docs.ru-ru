---
title: "Редактирование кода Python в Visual Studio | Документы Майкрософт"
description: "Редактор кода Python в Visual Studio предоставляет возможности IntelliSense, работы с фрагментами кода и навигации, а также функции форматирования, анализа кода и рефакторинга."
ms.custom: 
ms.date: 03/05/2018
ms.reviewer: 
ms.suite: 
ms.technology:
- devlang-python
dev_langs:
- python
ms.tgt_pltfrm: 
ms.topic: article
author: kraigb
ms.author: kraigb
manager: ghogen
ms.workload:
- python
- data-science
ms.openlocfilehash: aae28ff5634dc59f2481140918b7ee19c29c4e1e
ms.sourcegitcommit: 39c525ec200c6c4ea94815567b3fad7ab14fb7b3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/08/2018
---
# <a name="editing-python-code"></a>Редактирование кода Python

Разработчики много времени работают с редактором кода. Чтобы повысить эффективность этой работы, [поддержка Python в Visual Studio](installing-python-support-in-visual-studio.md) предоставляет соответствующие функции. К ним относится выделение синтаксиса IntelliSense, автозавершение, справка по сигнатурам, переопределения методов, а также поиск и навигация.

Редактор также интегрируется с интерактивным окном в Visual Studio, упрощая обмен кодом между ними. Подробные сведения см. в разделах [Учебник, шаг 3. Использование интерактивного окна REPL](tutorial-working-with-python-in-visual-studio-step-03-interactive-repl.md) и [Использование интерактивного окна. Команда Send code to interactive (Отправить код в интерактивное окно)](python-interactive-repl-in-visual-studio.md#send-code-to-interactive-command).

|   |   |
|---|---|
| ![значок кинокамеры для видео](../install/media/video-icon.png "Просмотреть видео") | [Просмотрите видео (Microsoft Virtual Academy)](https://mva.microsoft.com/en-US/training-courses-embed/python-tools-for-visual-studio-2017-18121/Video-Editing-Python-Code-r2iQH5LWE_4605918567) с примером редактирования кода Python (2 мин 30 с).|

Общие сведения о редактировании кода в Visual Studio см. в статье [Создание кода в редакторе кода и текста](../ide/writing-code-in-the-code-and-text-editor.md). Ознакомьтесь также со статьей [Структура](../ide/outlining.md), чтобы узнать, как сконцентрироваться на определенных разделах кода.

Кроме того, с помощью обозревателя объектов Visual Studio вы можете проверять классы Python, определенные в каждом модуле, и функции, определенные в этих классах (**Просмотр > Другие окна > Обозреватель объектов** или клавиши CTRL+W, J).

## <a name="intellisense"></a>IntelliSense

Технология IntelliSense предоставляет следующие возможности: [автозавершения](#completions), [справка по сигнатурам](#signature-help), [вывод кратких сведений](#quick-info) и [цветовая маркировка синтаксиса](#code-coloring).

Для улучшения производительности функция IntelliSense в **Visual Studio 2017 версии 15.5** и более ранних версиях учитывает базу данных завершения, которая создается для каждого окружения Python в проекте. После добавления, удаления или обновления пакетов может потребоваться обновить базы данных. Их состояние отображается в окне **Окружения Python** (элемент того же уровня, что и обозреватель решений) на вкладке **IntelliSense** (см. дополнительные сведения об [окне "Окружения"](python-environments-window-tab-reference.md#intellisense-tab)).

**Visual Studio 2017 версии 15.6** и более поздних версий разными способами предоставляет функцию завершения IntelliSense, которая не зависит от базы данных.

### <a name="completions"></a>Автозавершения

Автозавершения отображаются как операторы, идентификаторы и другие атрибуты, которые можно ввести в текущее расположение в редакторе. Автозавершения, отображаемые в списке, основываются на контексте, а также фильтруются для пропуска неправильных или ненужных параметров. Они часто инициируются при вводе различных инструкций (например, `import`) и операторов (включая точку). Но их также можно отобразить в любое время, нажав клавиши CTRL+J, ПРОБЕЛ.

![Автозавершение элементов](media/code-editing-completions-simple.png)

В открытом списке автозавершений можно выполнить поиск необходимого автозавершения с помощью клавиш со стрелками, мыши или путем ввода. Чем больше букв вы вводите, чем точнее фильтруется список для отображения возможных автозавершений. Кроме того, можно использовать следующие ярлыки:

- ввод букв, которые находятся не в начале имени, например parse для поиска argparse;
- ввод букв, которые находятся только в начале слов, например abc для поиска AbstractBaseClass или air для поиска as_integer_ratio;
- пропуск букв, например b64 для поиска base64.

Ниже представлено несколько примеров.

![Автозавершение элементов с использованием фильтрации](media/code-editing-completion-filtering.png)

Завершения элементов автоматически отображаются при вводе точки после переменной или значения. Вместе с ними отображаются методы и атрибуты потенциальных типов. Если переменная может быть нескольких типов, в списке содержатся все возможные варианты для всех типов с дополнительными сведениями для указания типов, поддерживающих каждое автозавершение. Если автозавершение поддерживается всеми возможными типами, оно отображается без заметки.

![Автозавершение элементов при наличии нескольких типов](media/code-editing-completion-types.png)

Элементы, которые начинаются и заканчиваются двумя символами подчеркивания, не отображаются по умолчанию. В общем случае к таким элементам не следует обращаться напрямую. Если же элемент нужен, введя два начальных символа подчеркивания, можно добавить эти завершения в список:

![Автозавершение закрытых элементов](media/code-editing-completion-dunder.png)

Операторы `import` и `from ... import` отображают список модулей, которые можно импортировать. При использовании `from ... import` список содержит элементы, которые можно импортировать из указанного модуля.

![Автозавершение импорта](media/code-editing-completion-import.png)

При использовании операторов `raise` и `except` отображаются списки классов, которые могут быть типами ошибок. При этом необязательно выводятся все определяемые пользователем исключения, но с их помощью можно быстро найти подходящие встроенные исключения.

![Автозавершение исключений](media/code-editing-completion-exception.png)

При вводе символа @ запускается декоратор и отображаются потенциальные декораторы. Многие из этих элементов невозможно использовать в качестве декораторов. Чтобы определить, какие именно из них следует использовать, обратитесь к документации по библиотеке.

![Автозавершение декораторов](media/code-editing-completion-decorator.png)

> [!Tip]
> Вы можете настроить поведение автозавершений, выбрав **Инструменты > Параметры > Текстовый редактор > Python > Дополнительно**. Параметр **Filter list based on search string** (Отфильтровать список по строке поиска) позволяет применить фильтрацию предложений автозавершения при вводе (флажок установлен по умолчанию), а **Member completion displays intersection of members** (Автозавершение элементов отображает пересечение элементов) отображает только те автозавершения, которые поддерживают все возможные типы (флажок снят по умолчанию). См. раздел [Параметры. Результаты завершения](python-support-options-and-settings-in-visual-studio.md#completion-results).

### <a name="signature-help"></a>Справка по сигнатурам

Во время написания кода, вызывающего функцию, при вводе открывающейся скобки `(` отображается справка по сигнатурам, а также доступные сведения о параметрах и документации. Ее также можно отобразить внутри вызова функции, нажав клавиши CTRL+SHIFT+ПРОБЕЛ. Хотя отображаемые сведения определяются строками документации в исходном коде функции, они содержат любые значения по умолчанию.

![Справка по сигнатурам](media/code-editing-signature-help.png)

> [!Tip]
> Чтобы отключить справку по сигнатурам, выберите **Инструменты > Параметры > Текстовый редактор > Python > Общие** и снимите флажок **Завершение операторов > Cведения о параметрах**.

### <a name="quick-info"></a>Вывод кратких сведений

При наведении указателя мыши на идентификатор отображается подсказка. В зависимости от идентификатора в кратких сведениях могут отображаться потенциальные значения или типы, доступная документация, возвращаемые типы и расположения определений:

![Краткие сведения](media/code-editing-quick-info.png)

### <a name="code-coloring"></a>Цветовая маркировка синтаксиса

Цветовая маркировка синтаксиса — это функция, которая использует сведения, основанные на анализе кода, для выделения цветом переменных, операторов и других частей кода. Например, переменные, которые относятся к модулям или классам, могут выделяться другим цветом, нежели функции и остальные значения, а имена параметров могут отличаться цветом от локальных или глобальных переменных. (По умолчанию функции не выделяются полужирным шрифтом.)

![Цветовая маркировка синтаксиса](media/code-editing-code-coloring.png)

Чтобы настроить цвета, выберите **Инструменты > Параметры > Среда > Шрифты и цвета** и измените записи Python в списке **Отображение элементов**.

![Параметр "Шрифты и цвета"](media/code-editing-customize-colors.png)

> [!Tip]
> Чтобы отключить цветовую маркировку синтаксиса, выберите **Инструменты > Параметры > Текстовый редактор > Python > Дополнительно** и снимите флажок **Miscellaneous Options (Другие параметры) > Color names based on type (Названия цветов на основе типа)**. См. раздел [Параметры. Прочие параметры](python-support-options-and-settings-in-visual-studio.md#miscellaneous-options).

## <a name="code-snippets"></a>Фрагменты кода

Фрагменты кода — это блоки, которые можно вставлять в файлы. Для этого введите сочетание клавиш и нажмите клавишу TAB или выберите команду **Изменить > IntelliSense > Вставить фрагмент кода** и **Разместить во фрагменте**, выберите **Python**, а затем выберите нужный фрагмент кода.

Например, `class` является ярлыком для фрагмента кода, который вставляет определение класса. Вот фрагмент кода, который отображается в списке автоматического завершения при вводе `class`:

![Фрагмент кода для ярлыка класса](media/code-editing-code-snippet-class.png)

Если нажать клавишу TAB, будет создана остальная часть класса. Можно ввести имя и список базовых классов, перемещаясь между выделенными полями с помощью клавиши TAB, а затем нажав клавишу ВВОД, чтобы начать ввод текста.

![Выделенные области фрагмента кода, которые будут завершены](media/code-editing-code-snippets.png)

### <a name="menu-commands"></a>Команды меню

При использовании команды меню **Правка > IntelliSense > Вставить фрагмент кода** сначала выберите Python, а затем — фрагмент кода:

![Выбор фрагмента кода с помощью команды "Вставить фрагмент кода"](media/code-editing-code-snippet-insert.png)

Команда **Правка > IntelliSense > Разместить во фрагменте** точно так же помещает текущий выделенный фрагмент в текстовый редактор внутри выбранного структурного элемента. Предположим, у вас есть небольшой фрагмент кода:

```python
sum = 0
for x in range(1, 100):
    sum = sum + x
```

Если выбрать этот код и команду **Разместить во фрагменте**, откроется список доступных фрагментов. Если выбрать `def` в списке, выбранный код будет помещен в определение функции. Вы сможете переходить между выделенным именем функции имя и аргументами с помощью клавиши TAB:

![Использование команды "Разместить во фрагменте" для фрагментов кода](media/code-editing-code-snippet-surround-with.png)

### <a name="examine-available-snippets"></a>Просмотр доступных фрагментов кода

Доступные фрагменты кода можно просмотреть в диспетчере фрагментов кода. Откройте команду меню **Инструменты > Диспетчер фрагментов кода** и выберите **Python** в качестве языка:

![Диспетчер фрагментов кода](media/code-editing-code-snippets-manager.png)

Сведения о том, как создать собственные фрагменты кода, см. в статье [Пошаговое руководство. Создание фрагмента кода](../ide/walkthrough-creating-a-code-snippet.md).

Если вы написали качественный фрагмент кода, к которому вы хотите предоставить общий доступ, разместите его в репозитории и [сообщите нам](https://github.com/Microsoft/PTVS/issues). Возможно, мы сможем включить его в следующий выпуск Visual Studio.

## <a name="navigating-your-code"></a>Навигация по коду

Поддержка Python предоставляет несколько вариантов для быстрой навигации по коду, а также по библиотекам, которым доступен исходный код: [Панель навигации](#navigation-bar), [Перейти к определению](#go-to-definition), [Перейти к](#navigate-to) и [Найти все ссылки](#find-all-references). Можно также использовать [обозреватель объектов](../ide/viewing-the-structure-of-code.md#BKMK_ObjectBrowser) Visual Studio.

### <a name="navigation-bar"></a>Панель навигации

Панель навигации отображается в верхней части каждого окна редактора и содержит двухуровневый список определений. Раскрывающийся список слева содержит определения классов и функций верхнего уровня в текущем файле. Раскрывающийся список справа отображает список определений в области, расположенной слева. При перемещении курсора в редакторе эти списки обновляются для отображения текущего контекста, при этом из них можно напрямую перейти к нужной записи.

![Панель переходов](media/code-editing-navigation-bar.png)

> [!Tip]
> Чтобы скрыть панель навигации, выберите **Инструменты > Параметры > Текстовый редактор > Python > Общие** и снимите флажок **Параметры > Панель навигации**.

### <a name="go-to-definition"></a>Перейти к определению

Команда **Перейти к определению** позволяет быстро перейти от использования идентификатора (например, имени функции, класса или переменной) к определению в исходном коде. Ее можно вызвать, щелкнув правой кнопкой мыши идентификатор и выбрав **Перейти к определению** или поместив курсор внутрь этого идентификатора и нажав клавишу F12. Эта команда работает в коде и внешних библиотеках, если исходный код доступен. Если исходный код библиотеки недоступен, команда **Перейти к определению** переходит к соответствующему оператору `import` для ссылки на модуль или отображает ошибку.

![Перейти к определению](media/code-editing-go-to-definition.png)

### <a name="navigate-to"></a>Функция "Перейти к"

Команда **Изменить > Перейти к** (CTRL+, (запятая)) позволяет отобразить поле поиска в редакторе, где можно ввести любую строку и увидеть возможные совпадения в коде, определяющем функцию, класс или переменную. Она обеспечивает те же возможности, что и команда **Перейти к определению**, но без необходимости искать, где используется идентификатор.

Чтобы перейти к определению этого идентификатора, дважды щелкните любое имя или выберите его с помощью клавиш со стрелками и клавиши ВВОД.

![Функция "Перейти к"](media/code-editing-navigate-to.png)

### <a name="find-all-references"></a>Найти все ссылки

**Найти все ссылки** — это удобная команда для обнаружения, где используется и определен нужный идентификатор, включая операции импорта и назначения. Ее можно вызвать, щелкнув правой кнопкой мыши идентификатор и выбрав **Найти все ссылки** или поместив курсор внутри этого идентификатора и нажав клавиши SHIFT+F12. Чтобы перейти к расположению элемента, нужно дважды щелкнуть его в списке.

![Результаты выполнения команды "Найти все ссылки"](media/code-editing-find-all-references.png)

## <a name="see-also"></a>См. также

- [Форматирование](formatting-python-code.md)
- [Рефакторинг](refactoring-python-code.md)
- [Выделение](linting-python-code.md)