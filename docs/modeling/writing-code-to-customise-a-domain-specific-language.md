---
title: Настройка доменного языка
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- Domain-Specific Language, programming
author: gewarren
ms.author: gewarren
manager: douge
ms.workload:
- multiple
ms.prod: visual-studio-dev15
ms.technology: vs-ide-modeling
ms.openlocfilehash: f7fd63546f7d85ddbcc7661ac600a56bd340e6ec
ms.sourcegitcommit: e13e61ddea6032a8282abe16131d9e136a927984
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
ms.locfileid: "31965230"
---
# <a name="write-code-to-customize-a-domain-specific-language"></a>Написание кода для настройки доменного языка

В этом разделе показано, как использовать пользовательский код для доступа к, изменения или создания модели для доменного языка.

Существует несколько контекстов, в которых можно написать код, который работает с DSL.

-   **Пользовательские команды.** Можно создавать команды, что пользователи смогут вызвать щелчком правой кнопкой мыши на диаграмме и которой можно изменить модель. Дополнительные сведения см. в разделе [как: Добавление команды в контекстное меню](../modeling/how-to-add-a-command-to-the-shortcut-menu.md).

-   **Проверка.** Можно написать код, который проверяет, является ли модель в правильном состоянии. Дополнительные сведения см. в разделе [проверка доменного языка](../modeling/validation-in-a-domain-specific-language.md).

-   **Переопределение поведения по умолчанию.** Можно изменить код, созданный из DslDefinition.dsl многие аспекты. Дополнительные сведения см. в разделе [переопределение и расширение созданных классов](../modeling/overriding-and-extending-the-generated-classes.md).

-   **Преобразование текста.** Можно написать текстовых шаблонов, которые содержат код, который обращается к модели и создает текстовый файл, например для создания программного кода. Дополнительные сведения см. в разделе [формирование кода из доменного языка](../modeling/generating-code-from-a-domain-specific-language.md).

-   **Другие расширения Visual Studio.** Можно написать отдельный расширения VSIX, которые выполняют чтение и изменения моделей. Дополнительные сведения см. в разделе [как: открытие модели из файла в программном коде](../modeling/how-to-open-a-model-from-file-in-program-code.md)

Экземпляры классов, которые указываются в DslDefinition.dsl хранятся в структуре данных называется *хранения в памяти* (IMS) или *хранилище*. Классы, определенные DSL всегда принимают хранилище в качестве аргумента в конструктор. Например, если DSL определяется класс с именем пример:

`Example element = new Example (theStore);`

Сохранение объектов в хранилище (а не просто как обычные объекты) предоставляет несколько преимуществ.

-   **Транзакции**. Можно группировать связанные изменения в транзакцию:

     `using (Transaction t = store.TransactionManager.BeginTransaction("updates"))`

     `{`

     `// make several changes to Store elements here`

     `t.Commit();`

     `}`

     При возникновении исключения во время изменения, так, что последний Commit() не выполняются, хранилище сбрасываются в предыдущее состояние. Это помогает убедиться, что ошибок не оставляйте модель в несогласованном состоянии. Дополнительные сведения см. в разделе [перехода и обновления модели в программном коде](../modeling/navigating-and-updating-a-model-in-program-code.md).

-   **Двоичный связи**. Если определить связь между двумя классами, экземпляры на обоих концах имеют свойство, которое осуществляется переход к другой стороне. Две конечные точки всегда синхронизируются. Например если определить связь parenthood с ролями, с именем родительских и дочерних элементов, можно написать:

     `John.Children.Add(Mary)`

     Следующие выражения выполняются оба теперь:

     `John.Children.Contains(Mary)`

     `Mary.Parents.Contains(John)`

     Для достижения такого же эффекта можно также путем написания:

     `Mary.Parents.Add(John)`

     Дополнительные сведения см. в разделе [перехода и обновления модели в программном коде](../modeling/navigating-and-updating-a-model-in-program-code.md).

-   **Правила и события**. Можно определить правила, которые срабатывают при выполнении указанные изменения. Правила используются, например, чтобы поддерживать актуальность с элементами модели, которые представляют фигуры на схеме. Дополнительные сведения см. в разделе [распространение изменений и реагирование на](../modeling/responding-to-and-propagating-changes.md).

-   **Сериализация**. Хранилище предоставляет стандартный способ сериализации объектов, содержащихся в файле. Можно настроить правила для сериализации и десериализации. Дополнительные сведения см. в разделе [Настройка хранения файлов и XML-сериализация](../modeling/customizing-file-storage-and-xml-serialization.md).

## <a name="see-also"></a>См. также

- [Настройка и расширение доменного языка](../modeling/customizing-and-extending-a-domain-specific-language.md)