---
title: "Процесс преобразования текстового шаблона | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: text templates, transformation process
author: gewarren
ms.author: gewarren
manager: ghogen
ms.workload: multiple
ms.openlocfilehash: 469d2460bab93c73c227b08aeb763e6bfe18261e
ms.sourcegitcommit: f89ed5fc2e5078213e30a6ade4604e34df48181f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/13/2018
---
# <a name="the-text-template-transformation-process"></a>Процесс преобразования текстового шаблона
Процесс преобразования текстового шаблона принимает файл текстового шаблона на входе и создает новый текстовый файл. Например текстовые шаблоны можно использовать для создания кода Visual Basic или C#, или можно создать отчет в формате HTML.  
  
 Три компонента принимают участие в этом процессе: ядро, узел и процессоры директив. Эта подсистема управляет процесса; он взаимодействует с основным приложением и процессора директив для создания выходного файла. Узел предоставляет все взаимодействие со средой, например нахождение файлы и сборки. Процессор директив добавляет функциональные возможности, например чтение данных из XML-файла или базы данных.  
  
 Процесс преобразования текстового шаблона выполняется в два этапа. Во-первых обработчик создает временный класс, который называется в сгенерированный класс преобразования. Этот класс содержит код, созданный на основе директив и управляющих блоков. После этого подсистема компилирует и выполняет сгенерированный класс преобразования для создания выходного файла.  
  
## <a name="components"></a>Компоненты  
  
|Компонент|Описание:|Настраиваемый (Да/Нет)|  
|---------------|-----------------|------------------------------|  
|Модуль|Компонент ядра контролирует процесс преобразования текстового шаблона|Нет.|  
|Ведущее приложение|Узел — это интерфейс между системой и среды пользователя. [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]представляет собой узел процесса преобразования текста.|Да. Можно написать пользовательское основное приложение.|  
|Процессоры директив|Процессоры директив являются классами, которые обрабатывают директивы в текстовых шаблонах. Директивы можно использовать для предоставления данных в текстовый шаблон из источника входных данных.|Да. Можно написать пользовательские процессоры директив|  
  
## <a name="the-engine"></a>Подсистема  
 Обработчик получает шаблон в качестве строку из узла, который обрабатывает все файлы, которые используются в процессе преобразования. Затем обработчик запрашивает основное приложение найти пользовательские процессоры директив и другие аспекты среды. Ядро компилирует и выполняет сгенерированный класс преобразования. Обработчик возвращается созданный текст узла, который обычно сохраняет этот текст в файл.  
  
## <a name="the-host"></a>Основное приложение  
 Основное приложение отвечает за все, что связано со средой процесса преобразования, включая следующие:  
  
-   Поиск текста и двоичные файлы, запрашиваемые или процессор директив. Основное приложение может просматривать каталоги и глобальный кэш сборок для обнаружения сборок. Основное приложение может найти код пользовательского процессора директив для подсистемы. Узел также можно найти и чтение текстовых файлов и возвращают их содержимое в виде строки.  
  
-   Предоставление списка стандартных сборок и пространств имен, используемых обработчиком для создания в сгенерированный класс преобразования.  
  
-   Предоставление домен приложения, который используется, когда модуль компилирует и выполняет сгенерированный класс преобразования. Отдельного домена приложения используются для защиты основного приложения от ошибок в коде шаблона.  
  
-   Написание созданный выходной файл.  
  
-   Установка расширения по умолчанию для созданного выходного файла.  
  
-   Обработка ошибок преобразования текстового шаблона. Например узел, отображение ошибок в пользовательском интерфейсе или записывать их в файл. (В [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)], ошибки отображаются в окне сообщений об ошибках.)  
  
-   Предоставление требуемое значение параметра, если пользователь вызвал директиву, не задав значение. Процессор директив можно указать имя директивы и параметр и узла для предоставлять значение по умолчанию, если оно имеется.  
  
## <a name="directives-and-directive-processors"></a>Директивы и процессоры директив  
 Директивы — это команда, в текстовый шаблон. Она предоставляет параметры для процесса создания. Обычно директивы определяют источник и тип модели или другой тип ввода и расширение выходного файла.  
  
 Процессор директив может обработать один или несколько директив. При преобразовании шаблона, необходимо установить процессор директив, который может обрабатывать директивы в шаблоне.  
  
 Действие директив, добавив код в сгенерированный класс преобразования. Директивы вызываются из текстового шаблона, а механизм преобразует все вызовы директив, при создании в сгенерированный класс преобразования. После успешного вызова директивы остальной код, записанный в текстовый шаблон можно использовать предоставленную директивой функциональность. Например, можно сделать следующий вызов `import` директивы в шаблоне:  
  
 `<#@ import namespace="System.Text" #>`  
  
 Стандартный процессор директив преобразует его `using` инструкции в сгенерированный класс преобразования. Затем можно использовать `StringBuilder` класса в остальной части кода шаблона без указания его как `System.Text.StringBuilder`.