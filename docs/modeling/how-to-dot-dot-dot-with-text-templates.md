---
title: "Практическое руководство по текстовым шаблонам | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: d1ac2509-0479-47eb-809c-1f171245d0b6
caps.latest.revision: 11
author: alancameronwills
ms.author: awills
manager: douge
translation.priority.ht:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
translationtype: Machine Translation
ms.sourcegitcommit: fd26c504273cae739ccbeef5e406891def732985
ms.openlocfilehash: b874c9c259664f7f07e3266781909f74ece6e60a
ms.lasthandoff: 02/22/2017

---
# <a name="how-to--with-text-templates"></a>Практическое руководство по текстовым шаблонам
Текстовые шаблоны в [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] — это удобное средство создания текста любого типа. Текстовые шаблоны можно использовать для создания текста во время выполнения как часть приложения, а также во время разработки создавать часть кода проекта. В этом разделе перечислены наиболее часто задаваемые «Практические советы...» вопросы.  
  
 В этом разделе несколько ответов, которым предшествует маркеры являются альтернативными предложениями.  
  
 Общие сведения о текстовых шаблонах см. в статье [создание кода и текстовые шаблоны T4](../modeling/code-generation-and-t4-text-templates.md).  
  
## <a name="how-to-"></a>Инструкции...  
  
### <a name="generate-part-of-my-application-code"></a>Создание части код моего приложения  
 Настроен или *модель* в файле или базе данных. Один или несколько частей кода зависят от этой модели.  
  
-   Создайте несколько файлов кода из текстовых шаблонов. Дополнительные сведения см. в разделе [создание кода во время разработки с помощью текстовых шаблонов T4](../modeling/design-time-code-generation-by-using-t4-text-templates.md) и [возможности лучший способ приступить к написанию шаблон?](#starting).  
  
### <a name="generate-files-at-run-time-passing-data-into-the-template"></a>Создание файлов во время выполнения, передача данных в шаблон  
 Во время выполнения приложение создает текстовые файлы, например отчеты, которые представляют собой сочетание стандартного текста и данных. Желательно избежать необходимости создавать сотни `write` инструкции.  
  
-   Добавление текстового шаблона времени выполнения в проект. Этот шаблон создает класс в коде, который можно создать и использовать для создания текста. В него могут передавать данные в параметрах конструктора. Дополнительные сведения см. в разделе [Создание текста во время выполнения с помощью текстовых шаблонов T4](../modeling/run-time-text-generation-with-t4-text-templates.md).  
  
-   Если вы хотите создавать из шаблонов, доступных только во время выполнения, можно использовать стандартные текстовые шаблоны. При создании [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] расширения, можно вызвать службы текстовых шаблонов. Дополнительные сведения см. в разделе [вызов преобразования текста в расширении VS](../modeling/invoking-text-transformation-in-a-vs-extension.md). В других контекстах можно использовать модуль создания текстовых шаблонов. Дополнительные сведения см. в разделе <xref:Microsoft.VisualStudio.TextTemplating.Engine?displayProperty=fullName>.</xref:Microsoft.VisualStudio.TextTemplating.Engine?displayProperty=fullName>  
  
     Используйте \<#@parameter# настроек директива для передачи параметров в эти шаблоны. Дополнительные сведения см. в разделе [директива Parameter T4](../modeling/t4-parameter-directive.md).  
  
### <a name="read-another-project-file-from-a-template"></a>Чтение другого файла проекта из шаблона  
 Для чтения из того же файла [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] проекта в качестве шаблона:  
  
-   Вставьте строку `hostSpecific="true"` в директиву `<#@template#>`.  
  
     В коде, используйте `this.Host.ResolvePath(filename)` получить полный путь к файлу.  
  
### <a name="invoke-methods-from-a-template"></a>Вызов методов из шаблона  
 Если методы уже существуют, например, в стандартной [!INCLUDE[dnprdnshort](../code-quality/includes/dnprdnshort_md.md)] классы:  
  
-   Используйте \<#@assembly# настроек директива загрузки сборки и использовать \<#@import# настроек для задания контекста пространства имен. Дополнительные сведения см. в разделе [директива Import T4](../modeling/t4-import-directive.md).  
  
     Если часто используют один набор сборок и импортировать директивы, рекомендуется написать процессора директив. В каждом шаблоне можно вызвать процессор директив может загружать сборки и файлы модели и задания контекста пространства имен. Дополнительные сведения см. в разделе [Создание пользовательских обработчиков текстовых шаблонов T4 директива](../modeling/creating-custom-t4-text-template-directive-processors.md).  
  
 При создании методов сами:  
  
-   При создании текстового шаблона времени выполнения записи в определение разделяемого класса, который имеет то же имя, как текстовый шаблон времени выполнения. Добавьте дополнительные методы в этот класс.  
  
-   Написать блок управления возможностями класса `<#+ ... #>` , в котором можно объявлять, методы, свойства и закрытых классов. При компиляции текстового шаблона он преобразуется в класс. Стандартные управляющие блоки `<#...#>` и текст преобразуются в один метод, а блоки элементов класса вставляются как отдельные члены. Дополнительные сведения см. в разделе [управляющие блоки текстовых шаблонов](../modeling/text-template-control-blocks.md).  
  
     Методы, определенные как компоненты класса может также включать встроенные блоки текста.  
  
     Рекомендуется поместить компоненты класса в отдельный файл, который можно `<#@include#>` в один или несколько файлов шаблона.  
  
-   Создайте методы в отдельной сборке (библиотека классов) и вызывать их из шаблона. Используйте `<#@assembly#>` директива для загрузки сборки, и `<#@import#>` для задания контекста пространства имен. Обратите внимание, что для перестроения сборки во время его отладка выполняется, может потребоваться остановить и перезапустить [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]. Дополнительные сведения см. в разделе [директивы текстовых шаблонов T4](../modeling/t4-text-template-directives.md).  
  
### <a name="generate-many-files-from-one-model-schema"></a>Создание нескольких файлов из одной схемы модели  
 Если часто создаются файлы из моделей, которые имеют одинаковую схему XML или базы данных:  
  
-   Рекомендуется написать процессора директив. Это дает возможность заменять несколько инструкций сборки и импортировать инструкции в каждый шаблон с использованием одной общей директивы. Процессор директив можно также загрузить и проанализировать файл модели. Дополнительные сведения см. в разделе [Создание пользовательских обработчиков текстовых шаблонов T4 директива](../modeling/creating-custom-t4-text-template-directive-processors.md).  
  
### <a name="generate-files-from-a-complex-model"></a>Создание файлов из сложной модели  
  
-   Рассмотрите возможность создания доменного языка (DSL) для представления модели. Это делает его значительно упростит создание шаблонов, поскольку можно использовать типы и свойства, отражающие имена элементов в модели. Не нужно анализировать файл или перемещения по узлам XML. Пример:  
  
     `foreach (Book book in this.Library) { ... }`  
  
     Дополнительные сведения см. в разделе [Приступая к работе с доменными языками](../modeling/getting-started-with-domain-specific-languages.md) и [создание кода из доменного языка](../modeling/generating-code-from-a-domain-specific-language.md).  
  
### <a name="get-data-from-includevsprvscode-qualityincludesvsprvsmdmd"></a>Получение данных из[!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]  
 Для использования служб, предоставляемых в [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)], набором `hostSpecific` атрибут и нагрузки `EnvDTE` сборки. Например:  
  
```c#  
<#@ template hostspecific="true" language="C#" #>  
<#@ output extension=".txt" #>  
<#@ assembly name="EnvDTE" #>  
<#  
  IServiceProvider serviceProvider = (IServiceProvider)this.Host;  
  EnvDTE.DTE dte = (EnvDTE.DTE) serviceProvider.GetService(typeof(EnvDTE.DTE));  
#>  
  
Number of projects in this VS solution:  <#= dte.Solution.Projects.Count #>  
  
```  
  
### <a name="execute-text-templates-in-the-build-process"></a>Выполнение текстовых шаблонов в процессе построения  
  
-   Дополнительные сведения см. в разделе [создание кода в процессе построения](../modeling/code-generation-in-a-build-process.md).  
  
## <a name="more-general-questions"></a>Более общие вопросы  
  
###  <a name="a-namestartinga-what-is-the-best-way-to-start-writing-a-text-template"></a><a name="starting"></a>Что такое лучший способ начать создание текстового шаблона  
  
1.  Создайте конкретный пример созданного файла.  
  
2.  Преобразуйте его в текстовый шаблон, вставив `<#@template #>` директивы и директивы и код, необходимые для загрузки входного файла или модели.  
  
3.  Последовательно замените части файла блоками выражений и кода.  
  
### <a name="what-is-a-model"></a>Что такое «модели»  
  
-   Входные данные, считываемые шаблон. Это может быть в файле или в базе данных. Он может быть XML-код, чертеж Visio, или доменного языка (DSL) или модели UML, или это может быть обычный текст. Данные могут храниться в нескольких файлах. Обычно более чем один шаблон считывает одну модель.  
  
     Термин «модель» имеет представляет некоторые аспекты деятельности более непосредственно, чем сгенерированного программного кода или других файлов. Например она может представлять план сети обмена данными, будет наблюдать за созданной программы.  
  
### <a name="what-is-the-benefit-of-using-text-templates"></a>Что такое преимущество использования текстовых шаблонов  
 Как правило создается несколько кода или других файлов из одной модели. Модель представляет требования более непосредственно, чем сформированный код. Он пропускает реализации и предназначена для описания требований, а не код. При изменении требований — как обычно – можно обновить модель проще и надежнее, чем разные части программного кода.  
  
 Создание кода таким образом является ценным средством с точки зрения методов гибкой разработки.  
  
### <a name="what-best-practices-are-there-for-text-templates"></a>Для текстовых шаблонов существуют какие «рекомендации»?  
  
-   Дополнительные сведения см. в разделе [рекомендации по текстовым шаблонам T4 записи](../modeling/guidelines-for-writing-t4-text-templates.md).  
  
### <a name="what-is-t4"></a>Что такое «T4»?  
  
-   Другое имя для [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] описанных здесь возможностей текстовых шаблонов. Предыдущая версия, который не был опубликован, был сокращенное обозначение «Преобразования текстового шаблона».

