---
title: "Реагирование на изменения и их распространение | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: Domain-Specific Language, events
author: gewarren
ms.author: gewarren
manager: ghogen
ms.workload: multiple
ms.openlocfilehash: a3923579e180439c3d08680f6e67149901214245
ms.sourcegitcommit: f89ed5fc2e5078213e30a6ade4604e34df48181f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/13/2018
---
# <a name="responding-to-and-propagating-changes"></a>Реагирование на изменения и их распространение
Если элемент создан, удаления или обновления, можно написать код, распространяет изменения на другие части модели, или на внешние ресурсы, такие как файлы, базы данных или другие компоненты.  
  
## <a name="in-this-section"></a>В этом разделе  
 Как правило рассмотрите следующие варианты в следующем порядке:  
  
|Метод|Сценарии|Дополнительные сведения|  
|---------------|---------------|--------------------------|  
|Определите вычисляемое свойство домена.|Свойства домена, значение которого вычисляется из других свойств в модели. Например цена которых сумма цен связанных элементов.|[Вычисляемые и пользовательские свойства хранилища](../modeling/calculated-and-custom-storage-properties.md)|  
|Определите свойство домена пользовательского хранилища.|Свойства домена, хранимых в других частях модели или внешне. Например может проанализировать строку выражения в виде дерева в модели.|[Вычисляемые и пользовательские свойства хранилища](../modeling/calculated-and-custom-storage-properties.md)|  
|Переопределения обработчиков изменения, такие как OnValueChanging и OnDeleting|Синхронизировать различные элементы и синхронизировать внешних значений с моделью.<br /><br /> Ограничения значений для определенных диапазонов.<br /><br /> Вызывается непосредственно перед и после значения свойства и другие изменения. Это изменение может быть прекращено путем создания исключения.|[Обработчики изменений значений свойств доменов](../modeling/domain-property-value-change-handlers.md)|  
|Правила|Можно определить правила, которые находятся в очереди на выполнение только до окончания транзакции, в котором произошло изменение. Они не выполняются на отмены или повтора. Их следует используйте для синхронизации одной части хранилище с другим.|[Правила распространяют изменения в пределах модели](../modeling/rules-propagate-changes-within-the-model.md)|  
|События хранилища|Хранилище моделирования предоставляет уведомления о событиях, таких как добавление или удаление элемента или связи или изменение значения свойства. Это событие также выполняются на отмены и повтора. События хранилища можно используйте для обновления значений, которые не находятся в хранилище.|[Обработчики событий распространяют изменения за пределы модели](../modeling/event-handlers-propagate-changes-outside-the-model.md)|  
|События .NET|Фигуры имеют обработчиков событий, которые отвечают на щелчки мышью и других жестов. Необходимо зарегистрировать для этих событий для каждого объекта. Регистрация обычно выполняется в переопределении InitializeInstanceResources и необходимо сделать для каждого элемента.<br /><br /> Как правило, эти события происходят вне транзакции.|[Практическое руководство. Перехват щелчка фигуры или декоратора](../modeling/how-to-intercept-a-click-on-a-shape-or-decorator.md)|  
|Правила границы|Правило границы, используемый для ограничения границы фигуры.|[Класс BoundsRules ограничивает расположение и размеры фигур](../modeling/boundsrules-constrain-shape-location-and-size.md)|  
|Правила выбора|В частности, правила выбора ограничивают пользователь может выбрать.|[Практическое руководство. Предоставление и ограничение доступа к текущему выделению](../modeling/how-to-access-and-constrain-the-current-selection.md)|  
|OnAssocatedPropertyChanged|Показывают состояния с элементами модели, с помощью функций фигуры и соединители теневого, стрелки, цвет и толщина линии и стиль.|[Обновление фигур и соединителей в соответствии с моделью](../modeling/updating-shapes-and-connectors-to-reflect-the-model.md)|  
  
## <a name="comparing-rules-and-store-events"></a>**Сравнение правила и событий хранилища**  
 Изменение notifiers, правила и события, выполняются при внесении изменений в модели.  
  
 Правила обычно применяются на конец транзакции, в котором было изменено, а события будут применяться после фиксации изменений в транзакции.  
  
 События хранилища можно используйте для синхронизации модели с объектами за пределами магазина и правила для поддержания согласованности в хранилище.  
  
-   **Создание настраиваемых правил** создания настраиваемого правила, как класс, производный от абстрактного правила. Также необходимо уведомить framework о настраиваемое правило. Дополнительные сведения см. в разделе [распространение изменений в модели правил](../modeling/rules-propagate-changes-within-the-model.md).  
  
-   **Подписка на события** перед подпиской на событие, создайте обработчик события и делегата. Затем с помощью <xref:Microsoft.VisualStudio.Modeling.Store.EventManagerDirectory%2A>свойства для подписки на событие. Дополнительные сведения см. в разделе [обработчики распространение изменений за пределами модели событий](../modeling/event-handlers-propagate-changes-outside-the-model.md).  
  
-   **Отмена изменений** после отмены транзакции, событий, но правила не применяются. Если правило изменяет значение и отменить это изменение, значение сбрасывается на исходное значение во время действия отмены. Когда происходит событие, необходимо вручную изменить значения обратно в исходное значение. Дополнительные сведения о transactons и отмены см. в разделе [как: использование транзакций для обновления модели](../modeling/how-to-use-transactions-to-update-the-model.md).  
  
-   **Передача аргументов событий для правила и события** обоих событий и передаются правила `EventArgs` изменить параметр, который содержит сведения о модели.  
  
## <a name="see-also"></a>См. также  
 [Как: перехватывать нажатие фигуры или Decorator](../modeling/how-to-intercept-a-click-on-a-shape-or-decorator.md)   
 [Написание кода для настройки доменного языка](../modeling/writing-code-to-customise-a-domain-specific-language.md)