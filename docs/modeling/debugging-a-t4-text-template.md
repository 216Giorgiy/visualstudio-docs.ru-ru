---
title: "Отладка текстового шаблона T4 | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- text templates, troubleshooting
- text templates, debugging
ms.assetid: 0877fdf2-20bf-42da-b3cc-4c5856b80821
caps.latest.revision: 28
author: alancameronwills
ms.author: awills
manager: douge
translation.priority.ht:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
translationtype: Machine Translation
ms.sourcegitcommit: 5db97d19b1b823388a465bba15d057b30ff0b3ce
ms.openlocfilehash: 5b6cb4a83e6aa06f6b29987893232d8b6e203c56
ms.lasthandoff: 02/22/2017

---
# <a name="debugging-a-t4-text-template"></a>Отладка текстового шаблона T4
Можно установить точки останова в текстовых шаблонах. Для отладки во время разработки текстового шаблона, сохраните файл текстового шаблона и нажмите кнопку **отладить шаблон T4** контекстного меню файл в обозревателе решений. Отладка во время выполнения текстового шаблона, просто для отладки приложения, к которой он принадлежит.  
  
 Для отладки текстового шаблона, необходимо понимать этапы процесса преобразования шаблона. Различных видов ошибок может возникать в пределах каждого шага. Ниже приведены действия.  
  
|Шаг|Шаблон разработки: когда он происходит.|Шаблон времени выполнения: когда он происходит.|  
|----------|--------------------------------------------|-----------------------------------------|  
|Код создается из текстового шаблона.<br /><br /> Ошибки в директивы, или несовпадение или disordered `<#…#>` тегов.|При сохранении шаблона или вызывать преобразование текста.|При сохранении шаблона или вызывать преобразование текста.|  
|Созданный код компилируется.<br /><br /> Ошибки компиляции в код шаблона.|Сразу после предыдущего шага.|А также код вашего приложения.|  
|Код выполняется.<br /><br /> Ошибки во время выполнения в коде шаблона.|Сразу после предыдущего шага.|Если приложение выполняется, а также вызывает код шаблона.|  
  
 В большинстве случаев номера строк в коде шаблона приведены в отчет об ошибках. Если отчет об ошибках ссылается на временное имя файла, частой причиной является непарная скобка в коде текстового шаблона.  
  
 Можно установить точки останова в текстовых шаблонах и отладку обычным образом.  
  
## <a name="common-errors-and-fixes"></a>Распространенные ошибки и исправлений  
 В следующей таблице перечислены наиболее распространенные ошибки и способы их устранения.  
  
|Сообщение об ошибке|Описание|Решение|  
|-------------------|-----------------|--------------|  
|Не удалось загрузить базовый класс "{0}", от которого наследует класс преобразования.|Возникает, если не удается найти базовый класс, указанный в `inherits` параметр в директиве шаблона. Сообщение предоставляет номер строки директивы шаблона.|Убедитесь в том, что указанный класс существует и что сборки, которой он указан в директиве сборки.|  
|Не удалось определить включенный текст в файл:{0}|Происходит, когда не удается найти включенный шаблон. Сообщение предоставляет имя запрошенного файла включения.|Убедитесь, что путь к файлу задается относительно исходного пути шаблона, или что файл находится в расположении, зарегистрированном с узлом или наличии полный путь к файлу.|  
|Ошибка были сгенерированы при инициализации объекта преобразования. Преобразование не будет выполняться.|Происходит, когда «Initialize()» класса преобразования сбоем или возвращает значение false.|Код в функцию Initialize() поступает из базового класса преобразования указанного в \<#@template# настроек директивы и процессоры директив. Ошибка, вызвавшая неудачное завершение возможно, инициализации находится в списке ошибок. Исследуйте причину сбоя. Можно взглянуть на фактическое созданный код метода Initialize(), выполнив процедуры для отладки шаблона.|  
|Сборка «{0}» для процессора директив «{1}» не был предоставлен набор разрешений FullTrust. Только доверенным сборкам позволяется поставлять процессоры директив. Этот процессор директив не будет загружен.|Происходит, когда система не предоставляет разрешения FullTrust сборке, содержащей процессор директив. Сообщение предоставляет имя сборки и имя процессора директив.|Убедитесь, что используются только доверенных сборок на локальном компьютере.|  
|Путь «{0}» должен быть либо локальным для этого компьютера или частично доверенной зоны.|Происходит, когда директивы и директивы сборки ссылается на файл, который находится не на локальном компьютере или в вашей сети зоны надежных узлов.|Убедитесь, что каталог, где расположены директивы и директивы сборки в доверенной зоны. Сетевой каталог можно добавить в зону доверенных через обозреватель Internet Explorer.|  
|Несколько синтаксических ошибок, таких как «Недопустимый токен «catch»» или «пространство имен не может непосредственно содержать элементы»|Слишком много закрывающие фигурные скобки. в коде шаблона. Компилятор находится Сбивающие с толку его со стандартным кодом создания.|Проверьте номер закрывающих фигурных скобок и квадратные скобки внутри разделители кода.|  
|Циклы и условные выражения не компилируются и не выполняются правильно. Например, `<#if (i>10)#> Number is: <#= i #>`.<br /><br /> Этот код всегда выводит значение i. Только «номер: «условно.|В C# всегда используйте фигурные скобки вокруг текстовые блоки, которые внедряются в инструкциях управления.|Добавьте фигурные скобки: `<#if (i>10) { #>    Number is: <#= i #><# } #>`.|  
|«Слишком сложное выражение» при обработке шаблона времени разработки или компиляции шаблоне времени выполнения (предварительно обработанном).<br /><br /> [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]прекращает работать при попытке проверить код, сгенерированный шаблонов среды выполнения.|Блок текста слишком велика. Строковое выражение объединения с одного строкового литерала для каждой строки шаблона T4 преобразует текстовые блоки. Очень длинные текстовые блоки могут превысить ограничения на размер компилятора.|Разбейте длинные текстовый блок с блоком выражения, такие как:<br /><br /> `<#= "" #>`|  
  
## <a name="warning-descriptions-and-fixes"></a>Описания и исправления предупреждений  
 В следующей таблице перечислены наиболее распространенные предупреждения и способы их устранения, если он доступен.  
  
|Предупреждающее сообщение|Описание|Решение|  
|---------------------|-----------------|--------------|  
|Загрузке включенного файла «{0}» вернул значение null или пустую строку.|Возникает, если пусто включаемого текстового файла шаблона. Сообщение предоставляет имя файла, включенного файла.|Удалите директиву include или убедитесь, что файл содержит часть содержимого.|  
|Компиляция преобразования:|Добавляет эту строку для всех ошибок или предупреждений, приходящих от компилятора при компиляции преобразования. Эта строка означает, что компилятор выдал ошибку или предупреждение.|Если имеется проблема при поиске библиотеки DLL, может потребоваться предоставить либо полный путь, либо полное строгое имя, если библиотеки DLL в глобальном кэше СБОРОК.|  
|Параметр «{0}» уже существует в директиве. Повторяющийся параметр будет игнорироваться.|Происходит, когда параметр указан в директиве несколько раз. Сообщение предоставляет имя параметра и номер строки директивы.|Удалите повторяющуюся спецификацию параметра.|  
|Ошибка при загрузке включенного файла «{0}». Директива включения будет игнорироваться.|Возникает, когда не удается найти файл, указанный в `include` директивы. Сообщение предоставляет имя файла и номер строки директивы.|Убедитесь, что включаемый файл существует в том же каталоге, что исходный файл текстового шаблона или в одном из каталогов включения, зарегистрированных с узлом.|  
|Указан недопустимый базовый класс для класса преобразования. Базовый класс должен наследоваться от Microsoft.VisualStudio.TextTemplating.TextTransformation.|Происходит при `inherits` параметр в директиве шаблона определяет класс, который не является производным от `TextTransformation`. Сообщение предоставляет номер строки директивы шаблона.|Укажите класс, производный от `TextTransformation`.|  
|В директиве «шаблон» указан недопустимый язык и региональные параметры. Язык и региональные параметры должны быть в формате «xx-XX». Будет использоваться инвариантный язык и региональные параметры.|Происходит, когда параметр языка и региональных параметров в директиве шаблона указан неправильно. Сообщение предоставляет номер строки директивы шаблона.|Измените параметр языка и региональных параметров на допустимый язык и региональные параметры в формате «xx-XX».|  
|Недопустимое значение отладки «{0}» указано в директиве template. Значение отладки должно быть «true» или «false». Будет использоваться значение по умолчанию для «false».|Происходит при `debug` параметр в директиве шаблона указан неправильно. Сообщение предоставляет номер строки директивы шаблона.|Параметра отладки значение «true» или «false».|  
|Было указано недопустимое значение HostSpecific «{0}» в директиве template. Значение HostSpecific должно быть «true» или «false». Будет использоваться значение по умолчанию для «false».|Происходит, когда параметр конкретного узла в `template` неправильно указана директива. Сообщение предоставляет номер строки директивы шаблона.|Присвойте параметру конкретного узла «true» или «false».|  
|В директиве «шаблон» указан недопустимый язык «{0}». Язык должен быть «C#» или «VB». Будет использоваться значение по умолчанию «C#».|Происходит, когда в указан неподдерживаемый язык `template` директивы. (Без учета регистра) допускаются только «C#» или «VB». Сообщение предоставляет номер строки директивы шаблона.|Задайте `language` параметр в директиве шаблона «C#» или «VB».|  
|В шаблоне было найдено несколько директив выходные данные. Все, кроме первого будут игнорироваться.|Происходит, когда несколько `output` директивы указываются в файле шаблона. Сообщение предоставляет номер строки повторяющейся директивы выходных данных.|Удалить повторяющиеся `output` директивы.|  
|В шаблоне было найдено несколько директив шаблона. Все, кроме первого будут игнорироваться. Несколько параметров директивы шаблона должны быть указаны внутри одной директивы шаблона.|Возникает, если указать несколько `template` директивы в файле шаблона текста (с учетом включенных файлов). Сообщение предоставляет номер строки повторяющейся директивы шаблона.|Объединить разные `template` директивы в один `template` директивы.|  
|Не указан процессор для директивы с именем «{0}». Директива будет пропущена.|Возникает, если задать `custom` директивы, но не предоставляют `processor` атрибута. Сообщение предоставляет имя директивы и номер строки.|Укажите `processor` атрибут с именем `directive` процессора директивы.|  
|Процессор с именем «{0}» не найден для директивы с именем «{1}». Директива будет пропущена.|Возникает, когда системе не удается найти `directive` процессора, указанного в `custom` директивы. Сообщение предоставляет имя директивы, имя процессора и номер строки директивы.|Задать `processor` атрибут в директиве имя процессора директив.|  
|Не найден обязательный параметр «{0}» для директивы «{1}». Директива будет пропущена.|Происходит, когда система не предоставляет обязательный параметр директивы. Сообщение предоставляет имя отсутствующего параметра имя директивы и номер строки.|Укажите отсутствующий параметр.|  
|Процессор с именем «{0}» не поддерживает директиву с именем «{1}». Директива будет пропущена.|Возникает, когда процессор директив не поддерживает директиву. Сообщение предоставляет имя и номер строки вызвавшей ошибку директивы, а также имя процессора директив.|Исправьте имя директивы.|  
|Директива включения для файла «{0}» приводит к бесконечному циклу.|Отображается, если циклические директивы включения указаны (например, файл А включает файл Б, который включает файл А).|Не следует указывать циклические директивы #include.|  
|Выполнение преобразования:|Добавляет эту строку для всех ошибок или предупреждений, которые создаются при выполнении преобразования.|Неприменимо.|  
|В блоке найден непредвиденный начальный или конечный тег. Убедитесь, что вы не был пропущен начальный или конечный тег и что в шаблоне нет любые вложенные блоки.|Отображается при наличии непредвиденного \<# "или" # настроек. То есть при наличии \<# после другой откройте тег, который не был закрыт, или иметь # настроек при тег отсутствует незакрытые открыть перед ним. Сообщение предоставляет номер строки пропущенного тега.|Удалите несоответствующие начальный или конечный тег или использовать escape-символ.|  
|Директива была указана в неверном формате. Директива будет пропущена. Пожалуйста, укажите директиву в формате`<#@ name [parametername="parametervalue"]*  #>`|Отображается синтаксическим анализатором, если директива не указана в правильном формате. Сообщение содержит директиву неверный номер строки.|Убедитесь, что все директивы заданы в формате `<#@ name [parametername="parametervalue"]*  #>`. Дополнительные сведения см. в разделе [директивы текстовых шаблонов T4](../modeling/t4-text-template-directives.md).|  
|Не удалось загрузить сборку «{0}» для зарегистрированного процессора директив «{1}»<br /><br /> {2}|Возникает, когда процессор директив не может быть загружен узлом. Сообщение идентифицирует сборку, предоставленную для процессора директив и имя процессора директив.|Убедитесь в том, что процессор директив зарегистрирован правильно и что сборка существует.|  
|Не удалось найти тип «{0}» в сборке «{1}» для зарегистрированного процессора директив «{2}»<br /><br /> {3}|Возникает, когда тип процессора директив не может быть загружен из его сборки. Сообщение предоставляет имя типа, сборки и процессора директив.|Vshost находит сведения о процессоре директив (имя, сборка и тип) в реестре. Убедитесь в том, что процессор директив зарегистрирован правильно и что данный тип существует в сборке.|  
|Возникла проблема при загрузке сборки "{0}"|Происходит при проблемах с загрузкой сборки. Сообщение предоставляет имя сборки.|Можно указать сборок должна быть загружена в \<@# assembly # настроек директив и с помощью процессоров директив. Сообщение об ошибке, который следует за этой строкой следует предоставлять дополнительные данные о почему закончилась неудачей загрузка сборки.|  
|Ошибка при создании и инициализации процессора для директивы с именем «{1}». Тип процессора: {0}. Директива будет пропущена.|Происходит, когда системе не удается создать или инициализировать процессор директив. Сообщение предоставляет имя и номер строки директивы и тип процессора.|Убедитесь в том, что используется правильный процессор директив и что он имеет открытый конструктор по умолчанию. В противном случае — используйте параметры отладки, чтобы узнать причину сбоя метода Initialize() процессора директив. Дополнительные сведения см. в разделе [Устранение неполадок текстовых шаблонов](../modeling/debugging-a-t4-text-template.md).|  
|Исключение при обработке директивы с именем «{0}».|Возникает, когда процессор директив вызывает исключение при обработке директивы.|Убедитесь, что правильность параметров процессора директив.|  
|Узел вызвал исключение при попытке разрешить ссылку на сборку «{0}».|Происходит, когда узел вызывает исключение при попытке разрешить ссылку на сборку. В сообщении содержатся сборки строку ссылки.|Сборки ссылки берутся из \<@# assembly # настроек директивы и процессоры директив. Убедитесь, что параметр «имя», указанные в параметре сборки правильно.|  
|Попытка задать значение {1} не поддерживается «{0}» для директивы {2}|Происходит по RequiresProvidesDirectiveProcessor (все созданные процессоры директив производные от него) при указании неподдерживаемого требует или предоставляет аргумент.|Убедитесь, что имена в name = 'value' в пары требует и обеспечивает правильность параметров.|
