---
title: "Отладка текстового шаблона T4 | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- text templates, troubleshooting
- text templates, debugging
ms.assetid: 0877fdf2-20bf-42da-b3cc-4c5856b80821
caps.latest.revision: "28"
author: alancameronwills
ms.author: awills
manager: douge
ms.openlocfilehash: d60acd7d0d992ced0235d5d1e1c768f146bf4acd
ms.sourcegitcommit: aadb9588877418b8b55a5612c1d3842d4520ca4c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/27/2017
---
# <a name="debugging-a-t4-text-template"></a>Отладка текстового шаблона T4
Можно установить точки останова в текстовых шаблонах. Чтобы отладить текстовом шаблоне времени проектирования, сохраните файл текстового шаблона и нажмите кнопку **отладить шаблон T4** в контекстном меню файла в обозревателе решений. Чтобы отладить текстовом шаблоне времени выполнения, просто отладки приложения, к которой он принадлежит.  
  
 Чтобы выполнить отладку текстового шаблона, необходимо понимать этапы процесса преобразования шаблона. Различных видов ошибок могут произойти в каждом шаге. Действия, как показано ниже.  
  
|Шаг|Шаблон разработки: когда он происходит.|Шаблон времени выполнения: когда он происходит.|  
|----------|--------------------------------------------|-----------------------------------------|  
|Код создан из текстового шаблона.<br /><br /> Ошибки в директивах, или несовпадение или disordered `<#...#>` тегов.|При сохранении шаблона или вызов преобразования текста.|При сохранении шаблона или вызов преобразования текста.|  
|Созданный код компилируется.<br /><br /> Ошибки компиляции в код шаблона.|Сразу после выполнения предыдущего шага.|А также код вашего приложения.|  
|Код выполняется.<br /><br /> Ошибки во время выполнения в коде шаблона.|Сразу после выполнения предыдущего шага.|Если приложение работает и вызывает код шаблона.|  
  
 В большинстве случаев номера строк в коде шаблона приведены в отчет об ошибке. Если отчет об ошибке ссылается на временное имя файла, частой причиной является непарная скобка в коде текстового шаблона.  
  
 Можно установить точки останова в текстовых шаблонах и отладку обычным образом.  
  
## <a name="common-errors-and-fixes"></a>Распространенные ошибки и исправления  
 В следующей таблице перечислены наиболее распространенные ошибки и способы их устранения.  
  
|Сообщение об ошибке|Описание|Решение|  
|-------------------|-----------------|--------------|  
|Не удалось загрузить базовый класс «{0}», от которого наследуется класс Transformation.|Возникает, если не удается найти базовый класс, указанный в `inherits` параметр в директиве шаблона. Сообщение предоставляет номер строки директивы шаблона.|Убедитесь в том, что указанный класс существует и что сборки, в которой он определен в директиву сборки.|  
|Не удалось определить включаемый текст для file:{0}|Происходит, когда не удается найти включенный шаблон. Сообщение предоставляет имя запрошенного файла включения.|Убедитесь, что путь к файлу относительно исходного пути шаблона, или что файл находится в расположении, зарегистрированном с узлом или это полный путь к файлу.|  
|Ошибок при инициализации объекта преобразования. Преобразование не будет выполнено.|Происходит, когда «Initialize()» класса преобразования сбоем или возвращает значение false.|Код в функции Initialize() поступает из базового класса преобразования указанного в \<#@template#> директив и из процессоров директив. Ошибка, вызвавшая возможно неудачное завершение инициализации находится в списке ошибок. Исследуйте причину сбоя. Можно взглянуть на фактическое созданный код метода Initialize(), выполнив процедуры для отладки шаблона.|  
|Сборка «{0}» для процессора директив «{1}» не был предоставлен набор разрешений FullTrust. Только доверенным сборкам разрешается поставлять процессоры директив. Этот процессор директив не будет загружен.|Происходит, когда система не предоставляет разрешения FullTrust к сборке, содержащей процессор директив. Сообщение предоставляет имя сборки и имя процессора директив.|Убедитесь, что используются только доверенным сборкам на локальном компьютере.|  
|Путь «{0}» должен быть либо локальным для этого компьютера или частично доверенной зоны.|Происходит, когда директивы или директива assembly ссылается на файл, который находится не на локальном компьютере или в доверенную зону вашей сети.|Убедитесь, что каталог, где расположены директивы и директивы сборки находится в доверенной зоны. В сетевую папку можно добавить в зону надежных через Internet Explorer.|  
|Несколько синтаксических ошибок, таких как «Недопустимый токен «catch»» или «пространство имен не может содержать непосредственно элементы»|Слишком много закрывающие фигурные скобки. в коде шаблона. Компилятор находится путать его со стандартным кодом создания.|Проверьте номер закрывающих фигурных скобок и квадратные скобки в разделители кода.|  
|Содержит циклы или условные выражения будет скомпилирован или выполнен правильно. Например, `<#if (i>10)#> Number is: <#= i #>`.<br /><br /> Этот код всегда выдает значение i. Только «номер: «условно.|В C# всегда используйте фигурные скобки вокруг текстовые блоки, которые внедрены в инструкциях управления.|Добавить фигурные скобки: `<#if (i>10) { #>    Number is: <#= i #><# } #>`.|  
|«Слишком сложное выражение» при обработке шаблона времени разработки или компиляции шаблон времени выполнения (предварительно обработанном).<br /><br /> [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]прекращает работать при попытке проверить код, сгенерированный шаблонов среды выполнения.|Блок текста слишком велика. T4 преобразует текстовые блоки объединения строкового выражения, в один строковый литерал для каждой строки шаблона. Очень длинные текстовые блоки можно превысить ограничения на размер компилятора.|Разбиение длинных текстовых блока с блок выражения, такие как:<br /><br /> `<#= "" #>`|  
  
## <a name="warning-descriptions-and-fixes"></a>Описания и исправления предупреждений  
 Ниже перечислены наиболее распространенные предупреждения и способы их устранения, если он доступен.  
  
|Сообщение с предупреждением|Описание|Решение|  
|---------------------|-----------------|--------------|  
|Загрузке включаемого файла «{0}» вернул значение null или является пустой строкой.|Возникает, если в файле шаблона включенного текста является пустым. Сообщение предоставляет имя файла, включенного файла.|Удалите директиву include или убедитесь, что файл содержит часть содержимого.|  
|Компиляция преобразования:|Добавляет эту строку для всех ошибок или предупреждений, приходящих от компилятора при компиляции преобразования. Эта строка означает, что компилятор выдал ошибку или предупреждение.|Если имеется проблема при поиске библиотеки DLL, может потребоваться предоставить либо полный путь, либо полное строгое имя, если DLL — в глобальном кэше СБОРОК.|  
|Параметр «{0}» уже существует в директиве. Повторяющийся параметр будет игнорироваться.|Происходит, когда параметр указан несколько раз в директиве. Сообщение предоставляет имя параметра и номер строки директивы.|Удалите повторяющуюся спецификацию параметра.|  
|Произошла ошибка при загрузке включаемого файла «{0}». Директива включения будет игнорироваться.|Происходит, когда не удается найти файл, указанный в `include` директивы. Сообщение предоставляет имя файла и номер строки директивы.|Убедитесь, что включаемый файл существует в том же каталоге, что исходный файл текстового шаблона или в одном из каталогов включения, зарегистрированных с узлом.|  
|Недопустимый базовый класс был указан для класса преобразования. Базовый класс должен наследоваться от Microsoft.VisualStudio.TextTemplating.TextTransformation.|Происходит, когда `inherits` в директиве шаблона указывается класс, который не является производным от `TextTransformation`. Сообщение предоставляет номер строки директивы шаблона.|Укажите класс, производный от `TextTransformation`.|  
|В директиве «шаблон» указан недопустимый язык и региональные параметры. Язык и региональные параметры должны иметь формат «xx-XX». Будет использоваться инвариантный язык и региональные параметры.|Происходит, когда параметр языка и региональных параметров в директиве шаблона указан неправильно. Сообщение предоставляет номер строки директивы шаблона.|Измените параметр языка и региональных параметров на допустимый язык и региональные параметры в формате «xx-XX».|  
|В директиве template указано недопустимое значение отладки «{0}». Значение отладки должно быть «true» или «false». Будет использоваться значение по умолчанию «false».|Происходит при `debug` параметр в директиве шаблона указан неправильно. Сообщение предоставляет номер строки директивы шаблона.|Параметру отладки используется значение «true» или «false».|  
|В директиве template указано недопустимое значение HostSpecific «{0}». Значение HostSpecific должно быть «true» или «false». Будет использоваться значение по умолчанию «false».|Происходит, когда параметр конкретного узла в `template` неправильно указана директива. Сообщение предоставляет номер строки директивы шаблона.|Параметру конкретного узла используется значение «true» или «false».|  
|В директиве «шаблон» указан недопустимый язык «{0}». Язык должен быть «C#» или «VB». Будет использоваться значение по умолчанию «C#».|Происходит, когда в указан неподдерживаемый язык `template` директивы. (Без учета регистра) разрешены только «C#» или «VB». Сообщение предоставляет номер строки директивы шаблона.|Задать `language` параметр в директиве шаблона значение «C#» или «VB».|  
|В шаблоне было найдено несколько директив выходных данных. Все, кроме первого будут игнорироваться.|Происходит, когда несколько `output` директивы указываются в файле шаблона. Сообщение предоставляет номер строки повторяющейся директивы выходных данных.|Удалите повторяющиеся `output` директивы.|  
|В шаблоне было найдено несколько директив шаблона. Все, кроме первого будут игнорироваться. Внутри одной директивы шаблона следует указать несколько параметров каталога шаблонов.|Возникает, если указать несколько `template` директивы внутри файла шаблона (включая включаемых файлов). Сообщение предоставляет номер строки повторяющейся директивы шаблона.|Статистическая обработка различных `template` директивы в одну `template` директивы.|  
|Не указан процессор для директивы с именем «{0}». Директива игнорируется.|Возникает, если задать `custom` директивы, но не предоставляют `processor` атрибута. Сообщение предоставляет имя директивы и номер строки.|Укажите `processor` атрибут с именем `directive` процессора для директивы.|  
|Не удалось найти процессор с именем «{0}» для директивы с именем «{1}». Директива игнорируется.|Возникает, когда системе не удается найти `directive` обработчика, указанного в `custom` директивы. Сообщение предоставляет имя директивы, имя процессора и номер строки директивы.|Задать `processor` атрибут в директиве имя процессора директив.|  
|Не найден обязательный параметр «{0}» для директивы «{1}». Директива игнорируется.|Происходит, когда система не предоставляет обязательный параметр директивы. Сообщение предоставляет имя отсутствующего параметра имя директивы и номер строки.|Укажите отсутствующий параметр.|  
|Процессор с именем «{0}» не поддерживает директиву с именем «{1}». Директива игнорируется.|Происходит, когда процессор директив не поддерживает директиву. Сообщение предоставляет имя и номер строки вызвавшей ошибку директивы, вместе с именем процессора директив.|Исправьте имя директивы.|  
|Директива включения для файла «{0}» приводит к бесконечному циклу.|Отображается, если циклические директивы включения указаны (например, файл А включает файл Б, который включает файл А).|Не следует указывать циклические директивы #include.|  
|Выполнение преобразования:|Добавляет эту строку для всех ошибок или предупреждений, которые создаются при выполнении преобразования.|Неприменимо.|  
|В блоке найден непредвиденный открывающий или закрывающий тег. Убедитесь, что вы не был пропущен начальный или конечный тег, а что нет любые вложенные блоки в шаблоне.|Отображается при наличии непредвиденного \<# или #>. То есть при наличии \<# после другой откройте тег, который не был закрыт, или иметь #> при отсутствии незакрытые откройте тег перед ним отсутствует. Сообщение предоставляет номер строки пропущенного тега.|Удалите несоответствующие открывающий или закрывающий тег, или использовать escape-символ.|  
|Директива была указана в неправильном формате. Директива игнорируется. Пожалуйста, укажите директиву в формате`<#@ name [parametername="parametervalue"]*  #>`|Если директива не указана в неправильном формате отображается средством синтаксического анализа. Сообщение содержит директиву неверный номер строки.|Убедитесь, что все директивы хранятся в виде `<#@ name [parametername="parametervalue"]*  #>`. Дополнительные сведения см. в разделе [директивы текстовых шаблонов T4](../modeling/t4-text-template-directives.md).|  
|Не удалось загрузить сборку «{0}» для зарегистрированного процессора директив «{1}»<br /><br /> {2}|Происходит, когда процессор директив не может быть загружен средой размещения. Сообщение идентифицирует сборку, предоставленную для процессора директив и имя процессора директив.|Убедитесь в том, что процессор директив зарегистрирован правильно и что сборка существует.|  
|Не удалось найти тип «{0}» в сборке «{1}» для зарегистрированного процессора директив «{2}»<br /><br /> {3}|Происходит, когда тип процессора директив не может быть загружен из его сборки. Сообщение предоставляет имя типа, сборки и процессора директив.|Vshost находит сведения о процессоре директив (имя, сборка и тип) в реестре. Убедитесь в том, что процессор директив зарегистрирован правильно и что тип существует в сборке.|  
|Ошибка при загрузке сборки «{0}»|Возникает при проблемах с загрузкой сборки. Сообщение предоставляет имя сборки.|Можно указать сборок для загрузки в \<@# assembly #> директив и с помощью процессоров директив. Сообщение об ошибке, которое следует за этой строкой следует предоставлять дополнительные данные о том, почему загрузка сборки не выполнена.|  
|Возникла проблема в создании и инициализации процессора для директивы с именем «{1}». Тип процессора: {0}. Директива игнорируется.|Происходит, когда системе не удалось создать или инициализировать процессор директив. Сообщение предоставляет имя и номер строки директивы и тип процессора.|Убедитесь в том, что используется правильный процессор директив и что он имеет открытый конструктор по умолчанию. В противном случае используйте параметры отладки, чтобы узнать, почему произошел сбой метода Initialize() процессора директив. Дополнительные сведения см. в разделе [Устранение неполадок текстовых шаблонов](../modeling/debugging-a-t4-text-template.md).|  
|Возникло исключение при обработке директивы с именем «{0}».|Происходит, когда процессор директив вызовет исключение при обработке директивы.|Убедитесь в правильности параметров для процессора директив.|  
|На узле возникло исключение при попытке разрешить ссылку на сборку «{0}».|Происходит, когда основное приложение вызывает исключение при попытке разрешить ссылку на сборку. Сообщение предоставляет сборки строку ссылки.|Сборки ссылки берутся из \<@# assembly #> директивы и из процессоров директив. Убедитесь, что параметр «name», заданного в параметре сборки указано правильно.|  
|Попытка задать значение неподдерживаемый {1} «{0}» для директивы {2}|Происходит по RequiresProvidesDirectiveProcessor (все созданные процессоры директив производных от него), при указании неподдерживаемого требует или предоставляет аргумент.|Убедитесь, что имена в name = 'value' в пары требуется и приведены параметры указаны правильно.|