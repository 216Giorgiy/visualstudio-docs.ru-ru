---
title: Использование диаграммы активности виртуальных пользователей для нагрузочных тестов в Visual Studio | Документы Майкрософт
ms.date: 10/19/2016
ms.topic: conceptual
helpviewer_keywords:
- load tests, virtual user activity chart
- virtual user activity chart, isolating performance issues
ms.assetid: d1c10fb9-cfeb-4e7f-9991-2d1e1103699e
author: gewarren
ms.author: gewarren
manager: douge
ms.technology: vs-ide-test
ms.openlocfilehash: 7cf4d2d31bb037aba8af95caf5ffab1d7be2c132
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
---
# <a name="walkthrough-using-the-virtual-user-activity-chart-to-isolate-issues"></a>Пошаговое руководство. Изоляция неисправностей с помощью диаграммы активности виртуальных пользователей

В данном пошаговом руководстве демонстрируется использование диаграммы активности виртуальных пользователей для обнаружения ошибок, возникающих для отдельных виртуальных пользователей, которые выполняют нагрузочный тест.

 Диаграмма активности виртуальных пользователей позволяет визуализировать действия виртуальных пользователей, относящиеся к нагрузочному тесту. Каждая строка диаграммы представляет отдельного виртуального пользователя. Диаграмма активности виртуальных пользователей показывает, что именно делал каждый виртуальный пользователь во время теста. Благодаря этому можно выявить проблемы производительности путем просмотра шаблонов действий пользователя, шаблонов нагрузки, корреляции сбойных или медленных тестов, а также путем просмотра запросов с действиями другого виртуального пользователя. Диаграмма активности виртуальных пользователей доступна только после завершения нагрузочного теста.

 В этом пошаговом руководстве выполняются следующие задачи.

-   Изучение работы с перечисленными ниже средствами, связанными с диаграммой активности виртуальных пользователей.

    -   Использование средства **Масштабировать на период времени** для указания на диаграмме конкретного периода времени, который требуется проанализировать.

    -   Использование панелей **Условные обозначения сведений** и **Фильтрация результатов** с целью применения фильтрации к диаграмме для упрощения процесса обнаружения проблем.

-   Использование диаграммы активности виртуальных пользователей для анализа ошибки, которая произошла для определенного виртуального пользователя, и просмотра сведений о типе возникшей ошибки.

 Дополнительные сведения см. в статье [Анализ действий виртуальных пользователей в представлении сведений](../test/analyze-load-test-virtual-user-activity-in-the-details-view.md).

## <a name="prerequisites"></a>Предварительные требования

-   Visual Studio Enterprise

-   Выполните следующие процедуры:

    -   [Запись и выполнение веб-теста производительности](http://msdn.microsoft.com/en-us/bd0a82fd-cec0-4861-bc09-e1b0b2d258ef)

    -   [Создание и запуск нагрузочного теста](http://msdn.microsoft.com/en-us/7041cbcf-9ab1-4579-98ff-8f296aeaded4)

## <a name="open-the-colorwebapp-solution-created-in-the-previous-walkthroughs"></a>Открытие решения ColorWebApp, созданного в предыдущем пошаговом руководстве

### <a name="open-the-solution"></a>Открытие решения

1.  Запустите Visual Studio.

2.  Откройте решение ColorWebApp, содержащее файл LoadTest1.loadtest. Это результаты нагрузочного теста, полученные в результате выполнения шагов трех пошаговых руководств, которые перечислены в начале данного раздела в подразделе "Обязательные компоненты".

     В остальных шагах данного пошагового руководства используется веб-приложение ColorWebApp, веб-тест производительности ColorWebAppTest.webtest и нагрузочный тест LoadTest1.loadtest.

## <a name="run-the-load-test"></a>Запуск нагрузочного теста
 Запустите нагрузочный тест для сбора данных о действиях виртуальных пользователей.

### <a name="run-the-load-test-to-collect-virtual-user-activity-data"></a>Запуск нагрузочного теста для сбора данных о действиях виртуальных пользователей

-   Нажмите кнопку **Выполнить** на панели инструментов редактора тестовой нагрузки. Начнется выполнение теста LoadTest1.

## <a name="isolate-issues-in-the-virtual-user-activity-chart"></a>Выявление проблем на диаграмме активности виртуальных пользователей

После завершения нагрузочного теста и сбора данных о действиях виртуальных пользователей можно просмотреть эти данные в результатах нагрузочного теста с помощью представления "Сведения" анализатора тестовой нагрузки на диаграмме активности виртуальных пользователей. Кроме того, диаграмма активности виртуальных пользователей может помочь выявить проблемы производительности в нагрузочном тесте.

### <a name="to-use-the-virtual-user-activity-chart-in-your-load-test-results"></a>Использование диаграммы активности виртуальных пользователей в результатах нагрузочного теста

1.  По завершении нагрузочного теста в анализаторе тестовой нагрузки открывается страница "Сводка" для результатов нагрузочного теста. Нажмите кнопку **Диаграммы** на панели инструментов.

     Откроется представление "Диаграммы".

2.  На диаграмме **Время ответа страницы** щелкните правой кнопкой мыши рядом с одним из значков нарушения пороговых значений и выберите команду **Перейти к сведениям о пользователе**.

    > [!NOTE]
    > Для отображения диаграммы активности пользователей можно также использовать кнопку **Сведения** на панели инструментов в редакторе тестовой нагрузки. Однако при использовании команды **Перейти к сведениям о пользователе** диаграмма активности виртуальных пользователей автоматически масштабируется для отображения той части теста, которую вы щелкнули правой кнопкой мыши.

     Откроется представление "Сведения" с **диаграммой активности виртуальных пользователей**, на которой отображается период времени, когда произошли нарушения пороговых значений.

     На оси y горизонтальные линии представляют отдельных виртуальных пользователей. На оси x отображается шкала времени для запуска нагрузочного теста.

3.  С помощью инструмента **Масштабировать на период времени** под **диаграммой активности виртуальных пользователей** переместите левый и правый ползунки так, чтобы они оказались рядом со значком нарушения порогового значения. При этом изменится шкала времени на **диаграмме активности виртуальных пользователей**.

4.  На панели **Условные обозначения сведений** установите флажок **(Выделите ошибки)**. Обратите внимание, что выделен виртуальный пользователь, ставший причиной нарушения порогового значения.

5.  На панели **Фильтрация результатов** снимите флажки **Показать результаты без ошибок** и **HttpError**, но оставьте флажок **ValidationRuleError**.

     На **диаграмме активности виртуальных пользователей** будут показаны только виртуальные пользователи, которые потратили более 3 секунд на страницу Red.aspx, как определено нарушением порогового значения, настроенным в предыдущем пошаговом руководстве.

6.  Наведите указатель мыши на горизонтальную линию, которая представляет виртуального пользователя с ошибкой правила проверки для нарушения порогового значения.

7.  Отобразится подсказка со следующими сведениями:

    -   **ИД пользователя**

    -   **Сценарий**

    -   **Тест**

    -   **Результат**

    -   **Network**

    -   **Время начала**

    -   **Длительность**

    -   **Агент**

    -   **Журнал теста**

8.  Обратите внимание на то, что **Журнал теста** является ссылкой. Выберите ссылку **Журнал теста**.

9. В средстве просмотра результатов веб-тестов производительности откроется веб-тест производительности ColorWebTest, связанный с данным журналом. Здесь можно определить место возникновения нарушения порогового значения.

     На панелях **Условные обозначения сведений** и **Фильтрация результатов** предусмотрены различные параметры, которые помогут при выявлении проблем производительности и ошибок в нагрузочных тестах. Поэкспериментируйте с этими параметрами и средством **Масштабировать на период времени**, чтобы увидеть, как изменяется представление данных по виртуальным пользователям на **диаграмме активности виртуальных пользователей**.

## <a name="see-also"></a>См. также

- [Анализ действий виртуальных пользователей в представлении сведений](../test/analyze-load-test-virtual-user-activity-in-the-details-view.md)
- [Контроллеры и агенты тестирования](configure-test-agents-and-controllers-for-load-tests.md)
- [Практическое руководство. Создание параметра тестирования для распределенного нагрузочного теста](../test/how-to-create-a-test-setting-for-a-distributed-load-test.md)
- [Установка и настройка агентов тестирования](../test/lab-management/install-configure-test-agents.md)
- [Сбор диагностических данных с помощью параметров тестирования](../test/collect-diagnostic-information-using-test-settings.md)