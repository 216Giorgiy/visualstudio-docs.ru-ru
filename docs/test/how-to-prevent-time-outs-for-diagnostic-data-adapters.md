---
title: Тайм-ауты для адаптеров диагностических данных в Visual Studio
ms.date: 10/19/2016
ms.topic: conceptual
helpviewer_keywords:
- Diagnostic Data Adapter, increasing time-outs
ms.assetid: 39fff4fc-9233-4f67-96ac-e81bbaf7ca82
author: gewarren
ms.author: gewarren
manager: douge
ms.prod: visual-studio-dev15
ms.technology: vs-ide-test
ms.openlocfilehash: fca48c45af5ec93519e1688ec54677c233d2fe17
ms.sourcegitcommit: 5b767247b3d819a99deb0dbce729a0562b9654ba
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/20/2018
ms.locfileid: "39178323"
---
# <a name="how-to-prevent-time-outs-for-diagnostic-data-adapters"></a>Практическое руководство. Предотвращение тайм-аутов для адаптеров диагностических данных

Если в параметрах тестирования используется адаптер диагностических данных, при запуске теста может быть превышено время ожидания. Это может быть вызвано одной из следующих причин:

-   служба контроллера тестирования не запущена на компьютере контроллера тестирования. Возможно, потребуется перезапустить эту службу. Дополнительные сведения об определении контроллера тестирования см. в разделе [Управление контроллерами и агентами тестирования с помощью Visual Studio](../test/manage-test-controllers-and-test-agents.md).

-   Если ведется сбор данных на удаленном компьютере, брандмауэр может заблокировать Microsoft Test Manager. Компьютер, на котором работает Microsoft Test Manager, должен принимать входящие подключения от контроллера тестирования. Превышение времени ожидания возникает, если Microsoft Test Manager не получает сообщения от контроллера, поскольку оно блокируется брандмауэром. Необходимо проверить параметры брандмауэра на компьютере с Microsoft Test Manager.

-   Контроллеру тестирования не удается разрешить имя компьютера, на котором работает диспетчер Microsoft Test Manager. Такая ситуация может возникнуть, если служба DNS предоставляет неправильный адрес компьютера. Для решения этой проблемы может потребоваться связаться с администратором сети.

При запуске продолжительных тестов, собирающих большой объем данных, время ожидания сбора данных может истечь. Чтобы устранить эту проблему, воспользуйтесь следующей процедурой.

Изменить время ожидания можно путем обновления файла конфигурации Microsoft Test Manager агента тестирования, который прекращает работу.

Файл конфигурации для Microsoft Test Manager называется **mtm.exe.config**. Он расположен в следующем каталоге: *%ProgramFiles(x86)%\Microsoft Visual Studio\2017\Enterprise\Common7\IDE*.

Чтобы обновить агент тестирования, необходимо обновить следующий файл конфигурации на компьютере агента. Все эти файлы расположены на компьютере агента тестирования в той же папке: *%ProgramFiles(x86)%\Microsoft Visual Studio\2017\Enterprise\Common7\IDE*.

-   QTAgent.exe.config

-   QTAgent32.exe.config

-   QTDCAgent.exe.config

-   QTDCAgent32.exe.config

Если запускаются ручные тесты, а сбор данных осуществляется при создании ошибки или завершении тестового случая, все данные, собранные адаптерами диагностических данных, передаются на компьютер, на котором выполняются ручные тесты. Если собран большой объем данных или используется медленное сетевое подключение, передача данных может занять больше 60 секунд (значение по умолчанию). Например, если адаптер IntelliTrace настроен на сбор событий IntelliTrace и информации о вызовах для большого числа процессов, передача этих данных может продолжаться дольше времени ожидания по умолчанию. Для увеличения этого значения можно обновить файл **mtm.exe.config**, воспользовавшись описанной ниже процедурой.

Сообщение об ошибке отображается при прекращении работы средства выполнения тестов или агента тестирования вследствие истечения времени ожидания. В сообщении об ошибке, касающемся агента тестирования, содержатся данные о том, компьютер какого агента прекратил работу. Следующая процедура используется для обновления файла конфигурации в соответствии с данными сообщения об ошибке.

## <a name="to-increase-the-time-outs-for-your-diagnostic-data-adapters"></a>Увеличение времени тайм-аута для адаптеров диагностических данных

1.  Откройте окно проводника Windows (или проводника).

     Для этого щелкните правой кнопкой мыши кнопку **Пуск** и выберите **Проводник**.

    > [!NOTE]
    > Для обновления файла могут потребоваться права администратора.

2.  Перейдите в папку *%ProgramFiles(x86)%\Microsoft Visual Studio\2017\Enterprise\Common7\IDE* на вашем компьютере, в которой находится необходимый файл.

3.  Щелкните правой кнопкой мыши файл и выберите пункт **Открыть с помощью**. Выберите редактор.

     Файл откроется в редакторе. В файле хранится множество параметров. Большинство из этих параметров можно изменить в Microsoft Test Manager. Однако параметры таймера ожидания необходимо изменять вручную, как описано ниже.

4.  Чтобы увеличить время ожидания, необходимо изменить раздел параметров выполнения тестов. Раздел имеет следующий формат:

    ```text
    <!-- Begin: Test execution settings -->

        <!-- How long test runner will wait for an event raised to all local data collectors to complete.  Default is 300. -->
        <add key="DataCollectorEventTimeoutInSeconds" value="300"/>

        <!-- How long test runner will wait for test run operations, such as starting or stopping a test run, to complete.  Default is 60. -->
        <add key="RunOperationTimeoutInSeconds" value="60"/>

        <!-- End: Test execution settings -->
    ```

5.  Чтобы увеличить время ожидания завершения событий адаптерами диагностических данных, увеличьте значение ключа **DataCollectorEventTimeoutInSeconds**.

6.  Если сообщение о тайм-ауте касается работы средства выполнения тестов, необходимо увеличить значение ключа **RunOperationTimeoutInSeconds**.

7.  Чтобы увеличить время ожидания для передачи всех собранных данных при ошибке или завершении теста на компьютер, с которого запускаются тесты, необходимо добавить следующее время ожидания в раздел appSettings файла **mtm.exe.config**:

    ```text
    <!-- How long test runner waits for data collected by diagnostic data adapters to be transferred to the computer. Default is 60 seconds. -->
    <add key="GetCollectorDataTimeout" value="300"/>
    ```

    > [!NOTE]
    > Время ожидания в секундах.

8.  Сохраните изменения и выполните заново тесты, которые ранее прекращались по причине стечении я времени ожидания.

## <a name="see-also"></a>См. также

- [Сбор диагностических данных с помощью параметров тестирования](../test/collect-diagnostic-information-using-test-settings.md)