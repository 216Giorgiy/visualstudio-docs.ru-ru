---
title: "Использование управления сборками и выпусками для автоматического тестирования | Документы Майкрософт"
ms.custom: 
ms.date: 05/02/2017
ms.reviewer: 
ms.suite: 
ms.technology: vs-devops-test
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: automated testing, lab management, test lab
ms.author: gewarren
manager: ghogen
ms.workload: multiple
author: gewarren
ms.openlocfilehash: 4dae17012ecf66258d65ff3c200a0dbe8e4c9429
ms.sourcegitcommit: 7ae502c5767a34dc35e760ff02032f4902c7c02b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/09/2018
---
# <a name="use-build-and-release-management-instead-of-lab-management-for-automated-testing"></a>Использование управления сборками и выпусками вместо Lab Management для автоматического тестирования

Если вы используете Microsoft Test Manager (MTM) и Lab Management для автоматического тестирования или для автоматизации процесса сборки, развертывания и тестирования, в этом разделе вы узнаете, как достичь тех же целей с помощью функций [сборок &amp; и выпусков](https://www.visualstudio.com/team-services/continuous-integration/) в Team Foundation Server (TFS) и Visual Studio Team Services:

* [Автоматизация процесса сборки, развертывания и тестирования](#bdtautomation)

* [Самостоятельное управление окружениями SCVMM](#managescvmm)

Управление сборками и выпусками не поддерживает самостоятельное создание изолированных окружений SCVMM, а реализация подобной поддержки в будущем не планируется. Однако есть несколько [возможных альтернатив](#isolatedenvir).

<a name="bdtautomation"></a>
## <a name="build-deploy-test-automation"></a>Автоматизация процесса сборки, развертывания и тестирования

MTM и Lab Management используют определение сборки XAML, чтобы автоматизировать сборку, развертывание и тестирование приложений.
Для достижения этой цели сборка XAML полагается на различные конструкции, созданные в MTM, такие как лабораторная среда, наборы тестов и параметры тестирования, а также на различные компоненты инфраструктуры, такие как контроллер сборки, агенты сборки, контроллер тестирования и агенты тестирования. Вы можете добиться аналогичных результатов меньшими усилиями с помощью управления сборками или выпусками в TFS и Team Services.

| Шаги | С использованием сборки XAML | С использованием управления сборками и выпусками |
|-------|----------------------|-----------------|
| Определите компьютеры, где требуется развернуть сборку и выполнить тесты. | Создайте в MTM стандартную лабораторную среду с этими компьютерами. | Н/Д |
| Определите, какие тесты требуется выполнить. | Создайте набор тестов в MTM, тестовые случаи, а также сопоставьте функции автоматизации с каждым тестовым случаем. Создайте параметры тестирования в MTM, определив роль компьютеров в лабораторной среде, где требуется выполнить тесты. | Аналогичным образом создайте набор автоматических тестов в MTM, если планируете управлять тестированием с помощью планов тестирования. Этот этап можно пропустить, если вы хотите выполнять тесты напрямую из двоичных файлов теста, созданных вашими сборками. В любом случае создавать параметры тестирования не требуется. |
| Автоматизируйте развертывание и тестирование. | Создайте определение сборки XAML с помощью LabDefaultTemplate.*.xaml. Укажите сборку, наборы тестов и лабораторную среду в определении сборки. | Создайте [определение сборки или выпуска](https://www.visualstudio.com/team-services/continuous-integration/) в одном окружении. Запустите тот же скрипт развертывания (из определения сборки XAML) с помощью задачи командной строки и выполните автоматические тесты с помощью задач "Развертывание агента тестирования" и "Запуск функциональных тестов". Укажите список компьютеров и их учетных данных в качестве входных данных для таких задач. |

Ниже приведены некоторые преимущества управления сборками и выпусками для этого сценария:

* Вам не требуется контроллер сборки или контроллер тестирования.
* Агент тестирования устанавливается с помощью задачи в рамках сборки или выпуска.
* Можно легко настроить этапы развертывания. Вы больше не ограничены одним скриптом. Кроме того, можно использовать множество задач, доступных как в продукте, так и в Visual Studio Marketplace.
* Не требуется обслуживать наборы тестов. Вы можете выполнять тесты напрямую из двоичных файлов.
* Вам доступен расширенный интерфейс отчетов для тестов, выполнявшихся в рамках каждой сборки или каждого выпуска.
* Вы можете отслеживать, какие активы (выпуск, сборка, рабочие элементы, фиксации) сейчас развернуты и протестированы в каждом окружении.
* Вы можете настроить и расширить автоматизацию, чтобы упростить развертывание в нескольких тестовых окружениях и даже в рабочей среде.
* Вы можете запланировать автоматизацию при совершении возврата или фиксации, а также на определенное время дня.

<a name="managescvmm"></a>
## <a name="self-service-management-of-scvmm-environments"></a>Самостоятельное управление окружениями SCVMM

[Центр лабораторий в Microsoft Test Manager](https://msdn.microsoft.com/library/dd997438.aspx) позволяет управлять библиотекой шаблонов среды, а также подготавливать окружения по запросу с помощью [сервера SCVMM](https://technet.microsoft.com/system-center-docs/vmm/vmm).

Функции самостоятельной подготовки центра лабораторий преследуют две отдельные цели:

* Предоставление более простого способа для управления инфраструктурой. Управление шаблонами виртуальных машин и сред и автоматическое создание частных сетей для изоляции клонов окружений друг от друга были примерами управления инфраструктурой.

* Предоставление командам более простого способа для использования виртуальных машин в операциях тестирования и развертывания. Создание лабораторных сред, доступных с помощью той же модели безопасности командного проекта, и интеграция этих виртуальных машин в тестовые сценарии были примерами простоты использования.

Однако на фоне развития систем управления общедоступными и частными облаками, такими как [Microsoft Azure](https://azure.microsoft.com/) и [Microsoft Azure Stack](https://azure.microsoft.com/overview/azure-stack/), развитие средств управления инфраструктурой в TFS 2017 и более поздних версий не наблюдается. Вместо этого продолжает упрощаться использование ресурсов, управляемых с помощью таких облачных инфраструктур.

В следующей таблице перечислены типичные действия, к которым вы привыкли в центре лабораторий, и пояснено, как их можно выполнить с помощью SCVMM или Azure (если они касаются управления инфраструктурой) или с помощью TFS и Team Services (если они касаются тестирования или развертывания):

| Шаги | С использованием центра лабораторий | С использованием управления сборками и выпусками |
|-------|----------------------|-----------------|
| Управляйте библиотекой шаблонов среды. | Создайте лабораторную среду. Установите необходимое программное обеспечение на виртуальных машинах. Обработайте окружение с помощью Sysprep и сохраните его как шаблон в библиотеке. | Воспользуйтесь напрямую консолью администрирования SCVMM, чтобы создать шаблоны виртуальных машин или служб и управлять ими. При использовании Azure выберите один из предварительно определенных [шаблонов Azure Resource Manager](https://azure.microsoft.com/documentation/templates/) из [Azure Marketplace](https://azure.microsoft.com/marketplace/) или перечня [шаблонов быстрого запуска Azure](https://azure.microsoft.com/documentation/templates/). |
| Создайте лабораторную среду. | Выберите шаблон среды в библиотеке и разверните его. Укажите нужные параметры, чтобы настроить конфигурации виртуальных машин. | Воспользуйтесь напрямую консолью администрирования SCVMM, чтобы создать экземпляры виртуальных машин или служб из шаблонов. Воспользуйтесь напрямую порталом Azure, чтобы создать ресурсы. Либо создайте определение выпуска с окружением. Используйте задачи Azure или задачи из [расширения интеграции SCVMM](https://marketplace.visualstudio.com/items?itemname=ms-vscs-rm.scvmmapp) для создания новых виртуальных машин. Создание нового выпуска этого определения эквивалентно созданию нового окружения в центре лабораторий. |
| Подключитесь к компьютерам. | Откройте лабораторную среду в средстве просмотра окружения. | Воспользуйтесь напрямую консолью администрирования SCVMM, чтобы подключиться к виртуальным машинам. Кроме того, можно использовать IP-адрес или DNS-имена виртуальных машин, чтобы открыть сеансы удаленного рабочего стола. |
| Создайте контрольную точку окружения или восстановите окружение до чистой контрольной точки. | Откройте лабораторную среду в средстве просмотра окружения. Выберите параметр для создания новой или восстановления предыдущей контрольной точки. | Воспользуйтесь напрямую консолью администрирования SCVMM, чтобы выполнить эти операции на виртуальных машинах. Либо, чтобы выполнить эти действия в рамках более обширной процедуры автоматизации, включите задачи контрольной точки из [расширения интеграции SCVMM](https://marketplace.visualstudio.com/items?itemname=ms-vscs-rm.scvmmapp) в составе окружения в определении выпуска. |

<a name="isolatedenvir"></a>
## <a name="self-service-creation-of-network-isolated-environments"></a>Самостоятельное создание окружений с сетевой изоляцией

Лабораторная среда с сетевой изоляцией — это группа виртуальных машин SCVMM, которые можно безопасно клонировать, не вызывая сетевые конфликты. Это было сделано в MTM с помощью серии инструкций, использовавших один набор сетевых карт для настройки виртуальных машин в частной сети и другой набор — для их настройки в общедоступной сети.

По мере развития систем управления общедоступными и частными облаками, такими как [Microsoft Azure](https://azure.microsoft.com/) и [Microsoft Azure Stack](https://azure.microsoft.com/overview/azure-stack/), выполнение подобных задач можно доверить непосредственно средствам управления облаками. В компоненте управления сборками и выпусками аналогичный способ для выполнения этой задачи отсутствует.

Если вам требуется сетевая изоляция, рекомендуется рассмотреть следующие варианты:

* Одним из преимуществ сетевой изоляции является простота настройки нескольких клонов. Так как каждый клон является точной репликой оригинала, имена компьютеров и параметры конфигурации сохраняются в исходном виде, что и упрощает настройку новых окружений. Однако то же самое преимущество становится источником проблем на более позднем этапе жизненного цикла (например, в рабочей среде), так как отличается способ окончательного развертывания приложений. **Вместо этого** рекомендуется настроить новые окружения аналогично рабочей среде, чтобы не использовать сетевую изоляцию.

* Используйте общедоступную облачную инфраструктуру, например [Microsoft Azure](https://azure.microsoft.com/), для тестирования. Вы можете легко использовать [шаблоны Azure Resource Manager](https://azure.microsoft.com/documentation/templates/) из [Azure Marketplace](https://azure.microsoft.com/marketplace/) или из перечня [шаблонов быстрого запуска Azure](https://azure.microsoft.com/documentation/templates/), чтобы настраивать группы виртуальных машин, которые подключены через частную сеть и имеют доступ к общедоступной сети только через прокси-сервер или сервер переходов.
