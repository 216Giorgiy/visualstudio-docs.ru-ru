---
title: Учебник. Создание приложения Hello World в Windows Presentation Foundation (WPF) на C#
description: Создание простого приложения Windows Desktop .NET на языке C# в Visual Studio с помощью платформы пользовательского интерфейса Windows Presentation Foundation (WPF).
ms.custom: seodec18, get-started
ms.date: 10/03/2017
ms.prod: visual-studio-dev15
ms.technology: vs-ide-general
ms.topic: conceptual
dev_langs:
- CSharp
ms.assetid: f84339c7-d617-4f56-bfcd-af2215c347ba
author: TerryGLee
ms.author: tglee
manager: douge
ms.workload:
- dotnet
ms.openlocfilehash: af7126910971cdf9ce583c57c1f88bb56a87f744
ms.sourcegitcommit: 59c48e1e42b48ad25a4e198af670faa4d8dae370
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/10/2019
ms.locfileid: "54405384"
---
# <a name="tutorial-create-a-simple-application-with-c"></a>Учебник. Создание простого приложения на C#

Выполняя данное пошаговое руководство, вы ознакомитесь со многими инструментами, диалоговыми окнами и конструкторами, которые можно использовать для создания приложений с помощью Visual Studio. Вам предстоит создать простое приложение "Hello, World", разработать пользовательский интерфейс, добавить код и выполнить отладку, одновременно приобретая навыки работы в интегрированной среде разработки ([IDE](visual-studio-ide.md)).

## <a name="configure-the-ide"></a>Настройка интегрированной среды разработки (IDE)

При первом запуске Visual Studio вам будет предложено выполнить вход. Для этого пошагового руководства делать это необязательно. Затем может появиться диалоговое окно, в котором предлагается выбрать параметры разработки и цветовую тему. Оставьте значения по умолчанию и нажмите **Запуск Visual Studio**.

![Диалоговое окно "Выбор параметров"](../media/exploreide-settings.png)

После запуска Visual Studio вы увидите окна инструментов, меню и панели инструментов, а также основную область окна. Окна инструментов закреплены в левой и правой частях окна приложения, а панель **Быстрый запуск**, строка меню и стандартная панель инструментов закреплены в верхней его части. В центре окна приложения находится **Начальная страница**. При загрузке решения или проекта редакторы и конструкторы отображаются в области **Начальной страницы** . При разработке приложения чаще всего используется именно эта область.

![Интегрированная среда разработки, в которой установлены общие параметры](../media/exploreide-idewithgeneralsettings.png)

## <a name="create-the-project"></a>Создание проекта

При создании приложения в Visual Studio необходимо сначала создать проект и решение. Этот пример демонстрирует создание проекта Windows Presentation Foundation (WPF).

1. Создайте новый проект. В строке меню выберите **Файл** > **Создать** > **Проект**.

     ![В строке меню выберите "Файл", "Создать", "Проект"](../media/exploreide-filenewproject.png)

1. В диалоговом окне **Новый проект** выберите категорию **Установленные** > **Visual C#** > **Рабочий стол Windows**, а затем выберите шаблон **Приложения WPF (.NET Framework)**. Назовите проект **HelloWPFApp**.

     ![Шаблон приложения WPF в диалоговом окне нового проекта Visual Studio](media/exploreide-newprojectcsharp.png)

1. Нажмите кнопку **ОК**.

   Visual Studio создает решение и проект HelloWPFApp, а в **обозревателе решений** выводятся различные файлы. **Конструктор WPF** отображает представление кода и представление XAML *MainWindow.xaml* в представлении с разделением. Сдвигая разделитель, можно делать любое из представлений больше или меньше. Можно выбрать для просмотра только визуальное представление или только представление XAML. В **Обозревателе решений**отображаются следующие элементы.

   ![Обозреватель решений с добавленными файлами HelloWPFApp](../media/exploreide-hellowpfappfiles.png)

   > [!NOTE]
   > Дополнительные сведения о XAML (eXtensible Application Markup Language) см. в [обзоре XAML для WPF](/dotnet/framework/wpf/advanced/xaml-overview-wpf).

После создания проекта его можно настраивать. С помощью окна **Свойства** (в меню **Вид** ) можно отображать и изменять параметры элементов проекта, элементов управления и других элементов в приложении.

### <a name="change-the-name-of-mainwindowxaml"></a>Изменение имени MainWindow.xaml

Давайте присвоим файлу MainWindow более конкретное имя.

1. В **Обозревателе решений** выберите файл *MainWindow.xaml*. Должно появиться окно **Свойства**, но если его нет, выберите в меню **Вид** пункт **Окно свойств**.

1. Измените значение свойства **Имя файла** на `Greetings.xaml`.

     ![Окно свойств с выделенным именем файла](../media/exploreide-filenameinpropertieswindow.png)

     В **обозревателе решений** видно, что файл теперь имеет имя *Greetings.xaml*, а имя вложенного файла кода поменялось на *Greetings.xaml.cs*. Этот файл с текстом программы вложен в узел файла *.xaml*, что означает их тесную связь.

## <a name="design-the-user-interface-ui"></a>Конструирование пользовательского интерфейса (ИП)

В приложение будет добавлено три типа элементов управления: элемент управления <xref:System.Windows.Controls.TextBlock>, два элемента управления <xref:System.Windows.Controls.RadioButton> и элемент управления <xref:System.Windows.Controls.Button>.

### <a name="add-a-textblock-control"></a>Добавление элемента управления TextBlock

1. Откройте окно **Панель элементов** , выбрав в меню **Вид** пункт **Панель элементов** .

2. В окне **Панель элементов** разверните узел **Типовые элементы управления WPF**, чтобы увидеть элемент управления TextBlock.

     ![Панель элементов с выделенным элементом управления TextBlock](../media/exploreide-textblocktoolbox.png)

3. Добавьте элемент управления TextBlock в область конструктора, выбрав элемент управления **TextBlock** и перетащив его в окно. Отцентрируйте этот элемент в верхней части окна.

Окно должно выглядеть так, как показано на следующем рисунке:

![Элемент управления TextBlock в форме Greetings](../media/exploreide-greetingswithtextblockonly.png)

Разметка XAML должна выглядеть приблизительно так, как в следующем примере:

```xaml
<TextBlock HorizontalAlignment="Center" TextWrapping="Wrap" VerticalAlignment="Center" RenderTransformOrigin="4.08,2.312" Margin="237,57,221,238"><Run Text="TextBlock"/><InlineUIContainer><TextBlock TextWrapping="Wrap" Text="TextBlock"/>
```

### <a name="customize-the-text-in-the-text-block"></a>Настройка текста в текстовом блоке

1. В представлении XAML найдите разметку для TextBlock и измените атрибут Text:

   ```xaml
   Text="Select a message option and then choose the Display button."
   ```

2. При необходимости разместите элемент TextBlock по центру и сохраните изменения, нажав сочетание клавиш **CTRL**+**S** или выбрав пункт в меню **Файл**.

Следующий шаг — добавить в форму два элемента управления [RadioButton](/dotnet/framework/wpf/controls/radiobutton).

### <a name="add-radio-buttons"></a>Добавление переключателей

1. На **панели элементов** найдите элемент управления **RadioButton**.

     ![Окно панели элементов с выбранным элементом управления RadioButton](../media/exploreide-radiobuttontoolbox.png)

2. Добавьте два элемента управления RadioButton в область конструктора, выбрав элемент **RadioButton** и перетащив его в область конструктора. Переместите кнопки (выбрав их и используя клавиши со стрелками), чтобы кнопки отображались рядом под элементом управления TextBlock.

     Окно должно выглядеть следующим образом:

     ![Форма Greetings с блоком текста и двумя переключателями](../media/exploreide-greetingswithradiobuttons.png)

3. В окне **Свойства** для левого элемента управления RadioButton измените свойство **Имя** (свойство в верхней части окна **Свойства** ), задав ему значение `HelloButton`.

     ![Окно свойств RadioButton](../media/exploreide-buttonproperties.png)

4. В окне **Свойства** правого элемента управления RadioButton измените свойство **Имя**, задав ему значение `GoodbyeButton`, и затем сохраните изменения.

Теперь можно добавить отображаемый текст для каждого элемента управления RadioButton. Следующая процедура обновляет свойство **Content** элемента управления RadioButton.

### <a name="add-display-text-for-each-radio-button"></a>Добавление отображаемого текста для каждого переключателя

1. В области конструктора откройте контекстное меню элемента управления HelloButton, щелкнув его правой кнопкой мыши, выберите команду **Изменить текст** и затем введите `Hello`.

2. Откройте контекстное меню элемента управления GoodbyeButton, щелкнув его правой кнопкой мыши, выберите команду **Изменить текст** и затем введите `Goodbye`.

### <a name="set-a-radio-button-to-be-checked-by-default"></a>Задание переключателя, выбранного по умолчанию

На этом этапе мы настроим элемент HelloButton как выбранный по умолчанию, чтобы всегда был выбран один из переключателей.

В представлении XAML найдите разметку для элемента HelloButton и добавьте атрибут **IsChecked**:

```xaml
IsChecked="True"
```

Последний элемент пользовательского интерфейса, который вам предстоит добавить, — это [Button](/dotnet/framework/wpf/controls/button).

### <a name="add-the-button-control"></a>Добавление элемента управления Button

1. На **панели элементов** найдите элемент управления **Button** и добавьте его в область конструктора под элементами управления RadioButton, перетащив его на форму в представлении конструирования.

2. В представлении XAML измените значение свойства **Содержимое** элемента управления Button с `Content="Button"` на `Content="Display"` и сохраните изменения.

     Разметка должна быть аналогична разметке, приведенной в следующем примере: `<Button Content="Display" HorizontalAlignment="Left" VerticalAlignment="Top" Width="75" Margin="215,204,0,0"/>`

     Окно должно выглядеть так, как показано на следующем рисунке.

     ![Форма Greetings с метками элементов управления](media/exploreide-greetingswithcontrollabels-cs.png)

### <a name="add-code-to-the-display-button"></a>Добавление кода к кнопке Display

После запуска приложения окно сообщения появится только тогда, когда пользователь выберет переключатель, а затем нажмет кнопку **Display**. Одно окно сообщения появится для Hello, и другое — для Goodbye. Чтобы задать такое поведение, добавьте код в событие `Button_Click` в файле *Greetings.xaml.cs*.

1. На поверхности разработки дважды щелкните кнопку **Display** .

     Откроется файл *Greetings.xaml.cs*, а курсор будет установлен на событии `Button_Click`.

    ```csharp
    private void Button_Click_1(object sender, RoutedEventArgs e)
    {

    }
    ```

2. Введите следующий код:

    ```csharp
    if (HelloButton.IsChecked == true)
    {
         MessageBox.Show("Hello.");
    }
    else if (GoodbyeButton.IsChecked == true)
    {
        MessageBox.Show("Goodbye.");
    }
    ```

3. Сохраните приложение.

## <a name="debug-and-test-the-application"></a>Отладка и тестирование приложения

После этого вам предстоит отладить приложение для выявления ошибок и тестирования того, что оба окна сообщений отображаются правильно. Приведенные ниже инструкции описывают, как выполнить сборку и запустить отладчик (дополнительные сведения см. в разделах [Построение приложения WPF](/dotnet/framework/wpf/app-development/building-a-wpf-application-wpf) и [Отладка WPF](../../debugger/debugging-wpf.md)).

### <a name="find-and-fix-errors"></a>Поиск и исправление ошибок

В этом шаге вам предстоит найти ошибку, которую мы намеренно допустили ранее, изменив имя файла *MainWindow.xaml*.

#### <a name="start-debugging-and-find-the-error"></a>Начало отладки и поиск ошибки

1. Запустите отладчик, выбрав **Отладка**, затем **Начать отладку**.

     ![Команда "Начать отладку" в меню "Отладка"](../media/exploreide-startdebugging.png)

     Появится окно **Режим приостановки выполнения**, а в окне **Вывод** будет указано, что произошло исключение IOException: "Не удается найти ресурс mainwindow.xaml".

2. Остановите отладчик, выбрав в меню **Отладка** > **Остановить отладку**.

     ![Команда "Остановить отладку" в меню "Отладка"](../media/exploreide-stopdebugging.png)

Файл *MainWindow.xaml* был переименован в *Greetings.xaml* в начале этого пошагового руководства, но код по-прежнему ссылается на файл *mainwindow.xaml* как на начальный универсальный код ресурса (URI) для приложения, поэтому проект не может быть запущен.

#### <a name="specify-greetingsxaml-as-the-startup-uri"></a>Задание Greetings.xaml в качестве начального универсального кода ресурса (URI)

1. В **обозревателе решений** откройте файл *App.xaml*.

2. Измените `StartupUri="MainWindow.xaml"` на `StartupUri="Greetings.xaml"` и сохраните изменения.

Запустите отладчик снова (клавишей **F5**). Должно появиться окно **Greetings** приложения. Теперь закройте окно приложения, чтобы остановить отладку.

### <a name="debug-with-breakpoints"></a>Отладка с точками останова

Добавив точки останова, можно тестировать код во время отладки. Точки останова можно добавлять, выбирая в меню **Отладка** > **Точка останова**, щелкая в левом поле редактора рядом со строкой кода, в которой требуется приостановить выполнение, или нажимая клавишу **F9**.

#### <a name="add-breakpoints"></a>Добавление точек останова

1. Откройте файл *Greetings.xaml.cs* и выделите строку `MessageBox.Show("Hello.")`.

2. Добавьте точку останова, выбрав меню **Отладка**, затем — **Точка останова**.

     ![Команда "Точка останова" в меню "Отладка"](../media/exploreide-togglebreakpoint.png)

     Рядом со строкой кода в крайнем левом поле окна редактора появится красный кружок.

3. Выделите следующую строку: `MessageBox.Show("Goodbye.")`.

4. Нажмите клавишу **F9**, чтобы добавить точку останова, а затем нажмите клавишу **F5**, чтобы начать отладку.

5. В окне **Greetings** выберите переключатель **Hello** и нажмите кнопку **Display** .

     Строка `MessageBox.Show("Hello.")` выделяется желтым цветом. В нижней части интегрированной среды разработки окна «Видимые», «Локальные» и «Контрольные значения» закреплены вместе на левой стороне, а окна «Стек вызовов», «Точки останова», «Команда», «Интерпретация» и окно вывода закреплены вместе на правой стороне.

6. В строке меню выберите **Отладка** > **Шаг с выходом**.

     Приложение возобновит выполнение, и появится окно сообщения со словом "Hello".

7. Нажмите кнопку **ОК** в окне сообщения, чтобы закрыть его.

8. В окне **Greetings** выберите переключатель **Goodbye** и нажмите кнопку **Display** .

     Строка `MessageBox.Show("Goodbye.")` выделяется желтым цветом.

9. Нажмите клавишу **F5**, чтобы продолжить отладку. Когда появится окно сообщения, нажмите в нем кнопку **ОК** , чтобы закрыть его.

10. Закройте окно приложения, чтобы остановить отладку.

11. В строке меню выберите **Отладка** > **Выключить все точки останова**.

### <a name="build-a-release-version-of-the-application"></a>Сборка окончательной версии приложения

Теперь, когда вы проверили, что все работает, можно подготовить окончательную сборку приложения.

1. Выберите в главном меню **Сборка** > **Очистить решение** для удаления промежуточных файлов и выходных файлов, которые были созданы в ходе предыдущих сборок. Это не является обязательным, но очищает результаты отладочной сборки.

     ![Команда "Очистить решение" в меню "Построение"](../media/exploreide-cleansolution.png)

2. Измените конфигурацию сборки для HelloWPFApp с **Отладка** на **Выпуск** с помощью раскрывающегося списка на панели инструментов (сейчас это "Отладка").

     ![Панель инструментов "Стандартная" с выбранной конфигурацией "Выпуск"](../media/exploreide-releaseversion.png)

3. Выполните сборку решения, выбрав **Сборка** > **Собрать решение**.

     ![Команда "Построить решение" в меню "Построение"](../media/exploreide-buildsolution.png)

Поздравляем с завершением этого учебника! Построенный файл *.exe* находится в каталоге решения и проекта (*...\HelloWPFApp\HelloWPFApp\bin\Release*).

## <a name="see-also"></a>См. также

- [Новые возможности Visual Studio 2017](../../ide/whats-new-in-visual-studio.md)
- [Советы по повышению производительности](../../ide/productivity-tips-for-visual-studio.md)