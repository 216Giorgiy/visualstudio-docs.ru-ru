---
title: "Создание решений рабочих процессов SharePoint"
ms.custom: ""
ms.date: "02/02/2017"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "office-development"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "VSTO.NewSharePointWorkflowWizard.Page3"
  - "VS.SharePointTools.Workflow.WorkflowName"
  - "VSTO.NewSharePointWorkflowWizard.Page2"
  - "VSTO.NewSharePointWorkflowWizard.Page1"
dev_langs: 
  - "VB"
  - "CSharp"
  - "VB"
  - "CSharp"
helpviewer_keywords: 
  - "разработка приложений SharePoint в Visual Studio, рабочие процессы"
  - "рабочие процессы [разработка приложений SharePoint в Visual Studio]"
ms.assetid: fe79b99a-cb7c-4a14-8d9f-bce0c0805ba0
caps.latest.revision: 23
author: "kempb"
ms.author: "kempb"
manager: "ghogen"
caps.handback.revision: 22
---
# Создание решений рабочих процессов SharePoint
  [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] обеспечивает вспомогательные инструменты для создания настраиваемых рабочих процессов, с помощью которых можно управлять жизненным циклом документов и просматривать элементы на веб\-сайте SharePoint.  Предоставляется конструктор, набор элементов управления действием и ссылки на нужные сборки.  В состав [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] также входит **Мастер настройки SharePoint**, с помощью которого можно создавать и настраивать рабочие процессы.  
  
 Список обязательных требований для создания проектов SharePoint в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] см. в разделе [Требования по разработке решений SharePoint](../sharepoint/requirements-for-developing-sharepoint-solutions.md).  Дополнительные сведения о SharePoint см. в разделе [Продукты и технологии Microsoft SharePoint](http://go.microsoft.com/fwlink/?LinkId=178470).  
  
## Рабочие процессы SharePoint  
 При добавлении рабочего процесса в библиотеку SharePoint или список, бизнес\-процесс принудительно применяется для всех элементов библиотеки или списка.  Рабочий процесс описывает действия, которые система или пользователь должны выполнять для каждого элемента, например посылка элементов на редактирование и последующее их получение.  Из этих операций, называемых *действиями*, составляются рабочие процессы.  
  
 В [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] можно создавать рабочие процессы SharePoint и развертывать их на сайтах SharePoint.  После развертывания процесса в SharePoint необходимо связать его с библиотекой или списком.  Рабочий процесс может запускаться автоматически, по команде другого процесса, вручную или по команде пользователя.  Дополнительные сведения о принципах действия рабочих процессов см. в разделе [Использование рабочих процессов для управления процессами](http://go.microsoft.com/fwlink/?LinkId=79757).  
  
## Создание настраиваемых рабочих потоков SharePoint  
 В [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] встроены два проекта рабочих процессов: **Последовательный рабочий процесс** и **Рабочий процесс конечного автомата**.  
  
 *Последовательный рабочий процесс* представляет собой последовательность действий.  Это действия выполняются поочередно до завершения последнего из них.  Последовательные рабочие процессы всегда выполняются со строгим порядком действий.  Поскольку такие процессы могут принимать внешние события и использовать параллельную логику потоков, точный порядок их выполнения может изменяться.  На следующем рисунке показан пример последовательного рабочего потока:  
  
 ![Последовательный рабочий процесс](../sharepoint/media/sp-sequential.png "Последовательный рабочий процесс")  
  
 *Рабочий поток конечного компьютера* представляет собой набор состояний, переходов и действий.  Действия в рабочем процессе конечного автомата выполняются асинхронно.  Это означает, что они не обязательно выполняются в строгой последовательности, и вместо этого могут активироваться другими действиями и состояниями.  Одно состояние задается как начальное, затем \(при возникновении определенного события\) происходит переход к другому состоянию.  Конечному автомату можно задать конечное состояние, определяющее окончание рабочего процесса.  На следующей диаграмме показан пример рабочего потока конечного компьютера:  
  
 ![Поток работ конечного компьютера](../sharepoint/media/sp-state.png "Поток работ конечного компьютера")  
  
 Подробнее о типах рабочих процессов см. в разделе [Типы рабочих процессов](http://go.microsoft.com/fwlink/?LinkId=178995).  
  
### Использование мастера  
 При создании проекта рабочего процесса SharePoint в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] сначала необходимо указать его параметры в **Мастере настройки SharePoint**.  Мастер использует эти параметры для создания проекта в **обозревателе решений**.  Этот проект содержит файл кода, некоторые файлы, используемые для развертывания рабочего процесса, и ссылки на сборки, необходимые для создания настраиваемого рабочего процесса SharePoint.  
  
 После создания рабочего процесса можно изменять его свойства в окне "Свойства".  Многие свойства можно изменять непосредственно в этом окне, но в некоторых случаях для изменения значений этих свойств требуется нажать кнопку с многоточием \(![Эллипс конструктора ASP.NET для мобильных устройств](~/sharepoint/media/mwellipsis.gif "Эллипс конструктора ASP.NET для мобильных устройств")\).  Эта кнопка перезапускает **Мастер настройки SharePoint**.  Изменив значения свойств, нажмите кнопку **Готово**, чтобы подтвердить их.  
  
> [!NOTE]  
>  Свойство **Тип рабочего процесса** доступно только для чтения, изменять его нельзя.  Если требуется изменить тип рабочего процесса, необходимо создать новый рабочий процесс.  
  
## Разработка рабочего процесса SharePoint  
 Определив все действия бизнес\-процесса, создайте рабочий процесс SharePoint с помощью конструктора рабочих процессов [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)].  Чтобы открыть конструктор, дважды щелкните Workflow1.cs или Workflow1.vb в **Обозревателе решения** или откройте контекстное меню для любого из этих файлов и выберите пункт **Открыть**.  
  
### Действия  
 Чтобы сконструировать рабочий поток, добавьте действия из **панели элементов** в *расписание рабочего потока* в конструкторе.  Расписание рабочих потоков содержит последовательность действий в том порядке, в каком их следует выполнять.  
  
 Существует два вида действий:  
  
-   *Простые действия* выполняют простые единицы работы, такие как "задержка на 1 день" или "запуск веб\-службы".  
  
-   *Сложные действия* содержат другие действия, например, условное действие может содержать две ветви.  
  
 Проекту доступны оба типа действий в **панели элементов**.  
  
 Действия могу иметь свойства, методы и события.  Используйте окно **Свойства**, чтобы установить свойства действий.  
  
 Возможно также создание пользовательских действий.  Для получения дополнительной информации см. [Пошаговое руководство. Создание пользовательского действия рабочего процесса сайта](../sharepoint/walkthrough-create-a-custom-site-workflow-activity.md).  
  
 Действия расположены на следующих вкладках **панели элементов**.  
  
-   **Рабочий процесс SharePoint**  
  
-   **Рабочий процесс Windows версии 3.0**  
  
-   **Рабочий процесс Windows версии 3.5**  
  
 SharePoint поддерживает не все базовые операции рабочего процесса.  Дополнительные сведения см. в [Общие сведения о действиях рабочих процессов для Windows SharePoint Services](http://go.microsoft.com/fwlink/?LinkID=156094).  
  
#### Действия рабочих процессов SharePoint  
 На вкладке **Рабочий процесс SharePoint** содержатся специальные действия, применяемые в [!INCLUDE[wss_14_long](../sharepoint/includes/wss-14-long-md.md)].  Эти действия упрощают и оптимизируют разработку рабочих процессов жизненного цикла документов.  Дополнительные сведения о действиях, перечисленных на вкладке **Рабочие процессы SharePoint** см. в разделе [Общие сведения о действиях рабочих процессов для Windows SharePoint Services](http://go.microsoft.com/fwlink/?LinkID=156094).  
  
#### Действия Windows Workflow  
 На вкладке **Рабочий процесс Windows** содержатся действия, предоставляемые средствами [!INCLUDE[TLA#tla_workflow](../sharepoint/includes/tlasharptla-workflow-md.md)].  Можно использовать эти действия для создания расписаний рабочих потоков для всех типов приложений рабочих потоков Windows.  
  
 Дополнительные сведения о перечисленных на вкладках **Windows Workflow** действиях см. в разделе [Действия Windows Workflow Foundation](http://go.microsoft.com/fwlink/?LinkID=156096).  Дополнительные сведения о Windows Workflow Foundation см. в разделе [Общие сведения о Windows Workflow Foundation](http://go.microsoft.com/fwlink/?LinkID=128632).  
  
### Работа с действиями в конструкторе  
 Расписание рабочих потоков может содержать комбинации из действий Windows Workflow и SharePoint Workflow.  
  
 Конструктор показывает визуальные подсказки, помогающие правильно расположить и настроить действия.  При перетаскивании или копировании действия из расписания рабочего потока конструктор показывает зеленые значки плюс \(\+\), которые показывают верное расположение для этого действия в рабочем потоке.  Нельзя расположить действие в месте, где его быть не должно.  Например, нельзя расположить действие Send как первое действие в ветке действий Listen.  Дополнительные сведения см. в [Центр разработки конструктора SharePoint](http://go.microsoft.com/fwlink/?LinkId=178476).  
  
## Коллекция информации, проходящей через рабочий поток  
 Можно собирать информацию от пользователей за предопределенное время в рабочем потоке.  Эти сведения можно также собрать с помощью форм или свойств элементов.  
  
### Формы  
 Формы — это диалоговые окна, в которых отображаются вопросы для пользователя и предоставляется возможность на них ответить.  
  
 Существуют четыре типа форм, которые можно использовать в рабочих процессах:  
  
-   Ассоциация  
  
-   форма запуска;  
  
-   Изменение  
  
-   Задача  
  
 В [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] имеются шаблоны элементов для форм связи и запуска.  Пример использования *формы связи*: администратор, устанавливающий рабочий процесс, может ввести в ней параметры этого рабочего процесса, например лимит затрат для рабочего процесса отчетов по затратам.  Пример *формы запуска* — это функция, которая позволяет пользователю рабочего процесса отчета по затратам вводить сумму затрат рабочего процесса.  Дополнительные сведения об этих типах форм см. в разделе [Шаблоны проектов и элементов проектов SharePoint](../sharepoint/sharepoint-project-and-project-item-templates.md).  
  
### Свойства элементов  
 Также можно собирать пользовательскую информацию при помощи свойств элемента в библиотеке SharePoint или списке.  Главный файл кода \(Workflow1.cs или Workflow1.vb\) объявляет экземпляры класса Microsoft.SharePoint.Workflow.SPWorkflowActivationProperties.WorkflowProperties с именем `workflowProperties`.  Используйте объект `workflowProperties` для получения доступа к свойствам библиотеки или списка в коде.  Пример см. в разделе [Пошаговое руководство. Создание и отладка решения рабочих процессов SharePoint](../sharepoint/walkthrough-creating-and-debugging-a-sharepoint-workflow-solution.md).  
  
## Отладка шаблона рабочего процесса SharePoint  
 Отладка проектов рабочих процессов SharePoint выполняется аналогично отладке других проектов [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)], основанных на веб\-технологиях.  При запуске отладчика [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] система [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] открывает соответствующий веб\-сайт SharePoint, используя параметры, заданные в **Мастере настройки SharePoint**, и автоматически связывает шаблон рабочего процесса с соответствующей библиотекой или списком.  Кроме того, [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] присоединяет отладчик [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] к процессу [!INCLUDE[wss_14_long](../sharepoint/includes/wss-14-long-md.md)] с именем w3wp.exe.  
  
 Для тестирования рабочего потока следует запустить его вручную.  Дополнительные сведения см. в подразделе "Отладка рабочих процессов" в разделе [Отладка решений SharePoint](../sharepoint/debugging-sharepoint-solutions.md).  Дополнительные сведения об отладке веб\-приложений [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] см. в разделе [Отладка веб-приложений и скриптов](../debugger/debugging-web-applications-and-script.md).  
  
## Развертывание шаблона рабочего процесса SharePoint  
 Развертывание проектов рабочих процессов SharePoint в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] осуществляется так же, как и развертывание других проектов SharePoint в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)].  Для получения дополнительной информации см. [Упаковка и развертывание решений SharePoint](../sharepoint/packaging-and-deploying-sharepoint-solutions.md).  
  
## Импорт глобальных рабочих процессов с возможностью повторного использования  
 Кроме создания специфичных для сайта рабочих процессов с возможностью повторного использования, SharePoint Designer позволяет создавать *глобальные рабочие процессы с возможностью повторного использования*, которые могут быть использованы на любом сайте SharePoint.  Импорт проекта рабочего процесса с возможностью повторного использования в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] в данный момент не поддерживает импорт глобальных рабочих процессов с возможностью повторного использования.  Однако можно использовать SharePoint Designer для преобразования глобального рабочего процесса с возможностью повторного использования в рабочий процесс с возможностью повторного использования или импортировать рабочий процесс в качестве неконвертированного декларативного рабочего процесса.  Для получения дополнительной информации см. [Импорт элементов из существующего сайта SharePoint](../sharepoint/importing-items-from-an-existing-sharepoint-site.md).  
  
## Связанные разделы  
  
|Название|Описание|  
|--------------|--------------|  
|[Пошаговое руководство. Создание и отладка решения рабочих процессов SharePoint](../sharepoint/walkthrough-creating-and-debugging-a-sharepoint-workflow-solution.md)|Пошаговые инструкции по созданию и отладке простого рабочего процесса [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)].|  
|[Пошаговое руководство. Создание рабочего процесса с формами связывания и запуска](../sharepoint/walkthrough-creating-a-workflow-with-association-and-initiation-forms.md)|Пошаговые инструкции по созданию и отладке рабочего процесса [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] с более широкими функциональными возможностями и с использованием форм связывания и запуска.|  
|[Пошаговое руководство. Добавление страницы приложения в рабочий процесс](../sharepoint/walkthrough-add-an-application-page-to-a-workflow.md)|Дополнение к разделу [Пошаговое руководство. Создание рабочего процесса с формами связывания и запуска](../sharepoint/walkthrough-creating-a-workflow-with-association-and-initiation-forms.md), в котором добавляется дополнительная ASPX\-страница приложения, отображающая данные, указанные в рабочем процессе.|  
|[Пошаговое руководство. Создание пользовательского действия рабочего процесса сайта](../sharepoint/walkthrough-create-a-custom-site-workflow-activity.md)|Руководство по выполнению двух ключевых задач: создание рабочего процесса на уровне сайта и создание настраиваемого действия рабочего процесса.|  
|[Пошаговое руководство. Импорт рабочего процесса SharePoint Designer с возможностью повторного использования в Visual Studio](../sharepoint/walkthrough-import-a-sharepoint-designer-reusable-workflow-into-visual-studio.md)|Руководство по импорту декларативного рабочего процесса с возможностью повторного использования, созданного в SharePoint Designer 2010, в проект [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] SharePoint.|  
  
## См. также  
 [Разработка решений SharePoint](../sharepoint/developing-sharepoint-solutions.md)   
 [Построение и отладка решений SharePoint](../sharepoint/building-and-debugging-sharepoint-solutions.md)   
 [Создание страниц приложений для SharePoint](../sharepoint/creating-application-pages-for-sharepoint.md)  
  
  