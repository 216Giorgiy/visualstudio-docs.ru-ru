---
caps.handback.revision: 41
---
# Устранение неполадок решений SharePoint
  При отладке шаблона рабочего процесса SharePoint с помощью отладчика [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] могут возникнуть следующие проблемы или предупреждения.  Для получения дополнительной информации см. [NIB: Debugging SharePoint 2007 Workflow Solutions](http://msdn.microsoft.com/ru-ru/3a5392f3-66f3-48be-956e-02de23fa6247).  
  
 [!INCLUDE[autoOutline](../Token/autoOutline_md.md)]  
  
## Ограничения токенов в изолированных визуальных веб\-частях  
 Визуальные веб\-части в изолированных решениях не могут обрабатывать стандартные токены, например $SPUrl, которые поддерживает среда выполнения SharePoint.  В результате URL\-адрес не может быть разрешен, и нельзя просмотреть содержимое в представлении конструирования в конструкторе визуальной веб\-части при ссылке на него непосредственно в элементе скрипта, как в следующем примере:  
  
```  
<script src=”<% $SPUrl:~site/SiteAssets/ListOperations.js %>"></script>  
```  
  
 Для обхода этого ограничения и разрешения токенов на него ссылаются с помощью литералов:  
  
```  
<asp:literal ID="Literal1" runat="server" Text="<script src='" />  
<asp:literal ID="Literal2" runat="server" Text="<% $SPUrl:~site/SiteAssets/ListOperations.js %>" />  
<asp:literal ID="Literal3" runat="server" Text="' type='text/javascript' ></script>" />  
```  
  
## Ограничения на символы в именах проектов и элементов проектов  
 Название проекта и элементов проекта могут содержать только символы, допустимые для пути развертывания в SharePoint 2010.  Другие символы не допускаются.  
  
### Сообщение об ошибке  
 Сообщение об ошибке "Недопустимые символы".  
  
### Решение  
 Для названий проектов SharePoint и элементов проектов используйте только следующие знаки:  
  
-   буквенно\-цифровые символы ASCII;  
  
-   пробел;  
  
-   точка \(.\);  
  
-   запятая \(,\)  
  
-   символ подчеркивания \(\_\);  
  
-   тире \(–\)  
  
-   обратная косая черта \(\\\).  
  
 Во время упаковки проекта правило проверки проверяет, что свойство "Путь развертывания" каждого разворачиваемого файла содержит только допустимые знаки.  
  
## Ошибки при создании настраиваемых полей  
 Настраиваемые поля в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] определяются в XML.  Может возникнуть ошибка, если поле не определено или на него не существует ссылка в определенном формате.  
  
### Сообщение об ошибке  
 Сообщение об ошибке "Недопустимые символы" во время упаковки.  
  
### Решение  
 Идентификатор для определения поля должен представлять собой GUID, заключенный в фигурные скобки, как показано в следующем примере:  
  
```  
<Field ID="{5744d18c-305e-4632-8bd1-09d134f4830d}"   
    Type="Note"   
    Name="PatientName"   
    DisplayName="Patient Name"   
    Group="A Custom Group">  
</Field>.  
```  
  
 Как показано в этом примере, ссылка поля в типе контента должна быть определена с помощью формата пустого элемента \(\<FieldRef \/\>\), а не элементов начало\/конец \(\<FieldRef\>\<\/FieldRef\>\).  
  
```  
<FieldRef ID="{5744d18c-305e-4632-8bd1-09d134f4830d}"   
    Name="PatientName"   
    DisplayName="Patient Name"   
    Required="TRUE"/>  
```  
  
 Если для поля существует проблема с исходным XML\-файлом, например, неверный формат или недопустимый XML\-файл, возникает ошибка "Невозможно обработать файл".  
  
## Новое не английское определение сайта не отображается на странице создания сайта после развертывания  
 После создания и развертывания нового определения сайта в не английской версии [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] \(версия с локальным [!INCLUDE[TLA2#tla_id](../sharepoint/includes/tla2sharptla-id-md.md)], отличным от 1033\), вкладка **Настройки SharePoint** не отображается в поле **Выбор шаблона**, и новый шаблон сайта не отображается на странице **Новый сайт SharePoint**.  
  
### Сообщение об ошибке  
 Нет.  
  
### Решение  
 Эта проблема возникает из\-за введения неправильного значения свойства **Путь** для определения файла конфигурации сайта webtemp, например, webtemp\_SiteDefinitionProject1.xml.  В свойстве **Путь** для файла webtemp, расположенного в **Местоположении развертывания**, замените 1033 соответствующим локальным [!INCLUDE[TLA2#tla_id](../sharepoint/includes/tla2sharptla-id-md.md)].  Например, чтобы использовать японский языковой стандарт, измените значение на 1041.  Дополнительные сведения см. в [Коды языков, назначенные Microsoft](http://go.microsoft.com/fwlink/?LinkID=165561) на веб\-сайте MSDN.  
  
## Ошибка возникает при развертывании проекта рабочего процесса в чистой системе  
 Эта проблема возникает при развертывании проекта рабочего процесса в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] в чистой системе.  Чистая система является компьютером, с недавно установленными [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] и SharePoint, но на котором не развернуты проекты рабочего процесса.  
  
### Сообщение об ошибке  
 Не удается найти список SharePoint: "Журнал рабочего процесса".  
  
### Решение  
 Эта ошибка возникает из\-за отсутствия "Списка журнала рабочего процесса".  Так как среда разработки представляет собой чистую систему, рабочие процессы в ней не развернуты, и, следовательно, "Список журналов рабочего процесса" не существует.  Чтобы решить эту проблему, повторно откройте мастер рабочего процесса, в результате чего будет создан "Список журнала рабочего процесса".  
  
##### Повторный вход в мастер рабочего процесса  
  
1.  В области **Обозреватель решений** выберите узел рабочего процесса.  
  
2.  В окне **Свойства** нажмите кнопку с многоточием для любого свойства, у которого есть такая кнопка.  
  
## Пользователь должен обновить страницу приложения в браузере во время отладки для просмотра обновленного изображения  
 При отладке решения SharePoint, содержащего страницу приложения с элементом управления, который отображает изображение, например, элемента управления Image [!INCLUDE[TLA2#tla_html](../sharepoint/includes/tla2sharptla-html-md.md)], необходимо обновить страницу в браузере, чтобы отобразить любые изменения, внесенные в изображение.  
  
## Ошибка: недопустимое расположение сайта SharePoint.  
 Эта проблема может возникнуть, если не установлен мастер [!INCLUDE[moss_14_short](../sharepoint/includes/moss-14-short-md.md)].  Она также может быть вызвана отсутствием доступа с правами администратора к веб\-сайту SharePoint, указанному в **Мастере настройки SharePoint**.  
  
### Сообщение об ошибке  
  
-   Недопустимое расположение узла SharePoint.  
  
### Решение  
  
-   Установите [!INCLUDE[moss_14_short](../sharepoint/includes/moss-14-short-md.md)].  
  
-   Убедитесь, что вы можете получить доступ к веб\-узлу SharePoint с правами администратора.  Дополнительные сведения см. в статье [!INCLUDE[TLA2#tla_office](../sharepoint/includes/tla2sharptla-office-md.md)] Online [Предоставить доступ на сайт портала](http://go.microsoft.com/fwlink/?LinkId=98310).  
  
## Веб\-событие удаления сайта не происходит в проекте приемника событий  
 При создании проекта приемника событий и выборе некоторых событий, например "Удаляется сайт", событие не происходит.  
  
### Сообщение об ошибке  
 Нет.  
  
### Решение  
 Эта проблема возникает, поскольку областью компонента для обработчика события уровня сайта должна быть область "Сайт", в то время как областью по умолчанию для проекта приемника событий является "Веб".  К веб событиям относятся следующие:  
  
-   сайт удаляется \(WebDeleting\);  
  
-   сайт удален \(WebDeleted\);  
  
-   сайт перемещается \(WebMoving\);  
  
-   сайт перемещен \(WebMoved\).  
  
 Для устранения проблемы следует изменить область компонента приемника событий, как показано ниже.  
  
##### Изменение области компонента приемника событий  
  
1.  В **Обозревателе решений** откройте файл .feature приемника событий в **Конструкторе компонентов** с помощью двойного щелка по файлу или открыв его контекстное меню и затем выбрав **Открыть**.  
  
2.  Нажмите стрелку рядом с кнопкой **Область**, а затем выберите в появившемся списке **Сайт**.  
  
## После изменения имени идентификатора в проекте "Модель подключения к бизнес\-данным" возникает ошибка развертывания  
 Эта ошибка возникает при изменении имени идентификатора сущности в модели подключения к бизнес\-данным и попытке затем развернуть решение.  
  
### Сообщения об ошибках  
  
-   \<*model name*\> содержит следующие ошибки активации внешнего типа контента ...  
  
-   Значение поля 'name' объекта IMetadataObject с именем '\<*model name*\>' дублируется...  
  
### Решение  
 Для устранения этой проблемы следует удалить объект вручную, а затем выполнить развертывание решения заново.  Модель можно удалить с помощью следующих инструментов.  
  
-   SharePoint 2010 Central Administration.  Дополнительные сведения см. в следующей статье на веб\-сайте Microsoft TechNet: [Управление моделью BDC](http://go.microsoft.com/fwlink/?LinkID=181472).  
  
-   Windows PowerShell.  Можно удалить модель, введя эту команду в командной строке: **Remove\-SPBusinessDataCatalogModel**.  Дополнительные сведения в разделе [Основные командлеты \(SharePoint Server 2010\)](http://go.microsoft.com/fwlink/?LinkID=182375) на веб\-сайте Microsoft TechNet.  
  
## Ошибка возникает при просмотре визуальной веб\-части в SharePoint  
 Эта ошибка возникает, когда свойство **Путь** пользовательского элемента управления не начинается со строки "CONTROLTEMPLATES\\".  
  
### Сообщения об ошибках  
  
-   Файл «\/\_CONTROLTEMPLATES\/*\<project name\>*\/*\<Web Part name\>*\/*\<user control name\>*.ascx» не существует.  
  
-   Ошибка сервера в приложении "\/".  
  
### Решение  
  
##### Решение проблемы  
  
1.  В **Обозревателе решений** выберите файл пользовательского элемента управления с расширением имени файла .ascx.  
  
2.  В меню **Вид** выберите **Окно свойств**.  
  
3.  В окне **Свойства** разверните узел **Расположение развертывания**.  
  
4.  Убедитесь, что значение свойства **Путь** начинается со сроки "CONTROLTEMPLATES\\".  
  
## Ошибка возникает при запуске импортируемого рабочего процесса с возможностью повторного использования, который содержит поле формы задач.  
 Проблема возникает, если импортируется рабочий процесс, содержащий форму задачи с полем, а затем запускается новый рабочий процесс на той же системе, из которой он импортировался.  
  
### Сообщение об ошибке  
 Ошибка возникает на этапе развертывания "Активация компонентов": поле с ИД \[*Guid*\], определенное в компоненте \[*Guid*\] обнаружено в текущем семействе веб\-сайтов или в дочернем сайте.  
  
### Решение  
 Эта ошибка является результатом конфликтов ИД полей и возникает из\-за того, что проект импорта рабочего процесса с возможностью повторного использования в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] не изменяет ИД поля формы задачи.  Конфликты ИД полей возникают при развертывании импортируемого рабочего процесса на сервере, который содержит исходный рабочий процесс.  
  
 Для решения этой проблемы воспользуйтесь функцией "Найти и заменить", чтобы изменить значение атрибута "ИД поля" во всех файлах импортируемого рабочего процесса.  
  
## Ошибка возникает при запуске переименованного экземпляра импортированного списка  
 Эта проблема возникает при переименовании импортируемого экземпляра списка и его последующем запуске в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)].  
  
### Сообщение об ошибке  
 Ошибка построения. Ошибка возникла на этапе развертывания "Активация компонентов": файл Template\\Features\\\[*import project* *feature* *name*\]\\Files\\Lists\\\[*old* *list name*\]\\Schema.xml не существует.  
  
### Решение  
 При импорте экземпляра списка в файл Elements.xml добавляется атрибут с названием CustomSchema.  В файле Elements.xml содержится путь пользовательского файла schema.xml для экземпляра списка.  При переименовании экземпляра списка в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] меняется путь развертывания пользовательского файла schema.xml, но значение пути атрибута CustomSchema не обновляется.  В результате экземпляр списка не может найти файл schema.xml по предыдущему пути, который указан в атрибуте CustomSchema при активации компонента.  
  
 Для решения этой проблемы следует обновить путь развертывания файла schema.xml в атрибуте CustomSchema.  
  
## IIS завершает сеанс отладки SharePoint  
 Эта проблема возникает при задании точки останова в решении [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)] SharePoint, нажатии клавиши F5 для его запуска и последующей остановке в точке останова на более чем 90 секунд.  
  
### Сообщение об ошибке  
 Отлаживаемый процесс веб\-сервера был завершен службами IIS.  Этого можно избежать, настроив параметры тестового опроса для пула приложений в IIS.  Дополнительные сведения см. в справке.  
  
### Решение  
 По умолчанию пул приложений IIS ждет ответа от приложения в течение 90 секунд, а затем его закрывает.  Этот процесс называется тестовым опросом приложения.  Для решения проблемы можно увеличить время ожидания или отключить тестовый опрос приложения.  
  
##### Доступ к параметрам пула приложений IIS  
  
1.  Откройте диспетчер IIS.  
  
2.  В области **Подключения** разверните узел сервера SharePoint и выберите узел **Пулы приложений**.  
  
3.  На странице **Пулы приложений** выберите пул приложения SharePoint \(как правило "SharePoint \- 80"\) и в области **Действия** выберите ссылку **Дополнительные параметры**.  
  
4.  Чтобы увеличить время ожидания IIS, установите значение **Максимальная задержка отклика при проверке связи \(в секундах\)** больше 90 секунд.  
  
5.  Чтобы отключить тестовый опрос ISS, установите для параметра **Проверка связи включена** значение **False**.  
  
## Автоматический отзыв оставляет потерянные экземпляры списка в SharePoint  
 Проблема возникает на следующих этапах.  
  
1.  Создание определения списка, содержащего экземпляр списка в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)].  
  
2.  Нажмите клавишу F5, чтобы запустить решение.  
  
3.  Остановка отладки или закрытие сайта SharePoint.  
  
4.  Повторное открытие сайта SharePoint и открытие экземпляра списка.  
  
### Сообщение об ошибке  
 Ошибка сервера в приложении "\/".  
  
### Решение  
 Это происходит, поскольку после закрытия сеанса отладки решения SharePoint, функция автоматического отзыва отзывает решение.  Отзыв удаляет определение списка из SharePoint, но не удаляет экземпляр списка.  Экземпляру списка необходимо базовое определение списка.  
  
 Для решения этой проблемы в меню **Построение** щелкните **Развернуть**, чтобы развернуть решение. \(Не выполняйте отладку решения нажатием клавиши F5\). Затем удалите экземпляр списка из SharePoint.  
  
## Экспортируемая версия заменяет исходное решение SharePoint  
 Если выполняется экспорт решения SharePoint и его последующий импорт в [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)], а затем решение разворачивается на том же сайте, из которого оно было экспортировано, исходное решение SharePoint заменяется.  Проблема не возникнет, если развернуть решение на сервере, на котором нет активированного исходного решения.  
  
### Сообщение об ошибке  
 Нет.  
  
### Решение  
 Чтобы избежать перезаписи решения на сайте, из которого оно экспортировалось, измените GUID для ИД решения и ИД компонента у всех компонентов, импортируемых в проект [!INCLUDE[vsprvs](../sharepoint/includes/vsprvs-md.md)].  
  
## Ошибка возникает при запуске отладки  
 При запуске отладки решения SharePoint в Visual Studio ошибка сигнализирует о том, что Visual Studio не удалось загрузить файл конфигурации Web.config, поскольку данный ключ отсутствует в словаре.  
  
### Сообщение об ошибке  
 Не удалось загрузить файл конфигурации web.config.  Следует проверить файл на наличие неверных XML\-элементов и попытаться снова.  Возникает следующая ошибка: данный ключ не представлен в словаре.  
  
### Решение  
 Для решения проблемы следует убедиться, что значение свойства URL\-адреса сайта проекта SharePoint в Visual Studio соответствует URL\-адресу, назначенному зоне по умолчанию для сопоставлений альтернативного доступа веб\-приложения.  Использование для URL\-адреса другой зоны, например интрасети, не решит проблему.  URL\-адрес сайта проекта и URL\-адрес зоны по умолчанию должны совпадать.  Для доступа к альтернативным сопоставлениям доступа щелкните **Управление приложениями** в программе "Центр администрирования SharePoint 2010 а затем щелкните ссылку **Настройка сопоставлений альтернативного доступа** в разделе **Веб\-приложения**.  Дополнительные сведения см. в разделе [Создание зон для веб\-приложений](http://go.microsoft.com/fwlink/?LinkId=192274).  
  
## См. также  
 [Устранение неполадок, связанных с упаковкой и развертыванием решений SharePoint](../sharepoint/troubleshooting-sharepoint-packaging-and-deployment.md)   
 [Построение и отладка решений SharePoint](../sharepoint/building-and-debugging-sharepoint-solutions.md)   
 [Отладка в Visual Studio](../debugger/debugging-in-visual-studio.md)  
  
  