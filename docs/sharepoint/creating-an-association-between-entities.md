---
title: "Создание ассоциации между сущностями | Microsoft Docs"
ms.custom: ""
ms.date: "02/02/2017"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "office-development"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "VS.SharePointTools.BDC.Association_Dialog"
dev_langs: 
  - "VB"
  - "CSharp"
helpviewer_keywords: 
  - "подключение к бизнес-данным [разработка приложений SharePoint в Visual Studio], связывание внешних типов контента"
  - "подключение к бизнес-данным [разработка приложений SharePoint в Visual Studio], связи между сущностями"
  - "подключение к бизнес-данным [разработка приложений SharePoint в Visual Studio], создание связи"
  - "подключение к бизнес-данным [разработка приложений SharePoint в Visual Studio], связывание сущностей"
  - "служба подключения к бизнес-данным [разработка приложений SharePoint в Visual Studio], связывание внешних типов контента"
  - "служба подключения к бизнес-данным [разработка приложений SharePoint в Visual Studio], связи между сущностями"
  - "служба подключения к бизнес-данным [разработка приложений SharePoint в Visual Studio], создание связи"
  - "служба подключения к бизнес-данным [разработка приложений SharePoint в Visual Studio], связывание сущностей"
ms.assetid: c908448c-13d3-4d2f-89ad-8d709b2958fb
caps.latest.revision: 15
author: "kempb"
ms.author: "kempb"
manager: "ghogen"
caps.handback.revision: 14
---
# Создание ассоциации между сущностями
  Чтобы определить отношения между сущностями в модели BDC, можно создать ассоциации.  Visual Studio создает методы, предоставляющие потребителям модели сведения о каждой ассоциации.  Эти методы могут использоваться веб\-частями SharePoint, списками или пользовательскими приложениями для отображения отношений данных в пользовательском интерфейсе.  
  
## Создание ассоциации  
 Чтобы создать ассоциацию, выберите пункт **Ассоциация** на **панели элементов** Visual Studio, затем последовательно щелкните первую сущность \(исходная сущность\) и вторую сущность \(конечная сущность\).  В **Редакторе ассоциаций** можно определять подробности ассоциации.  Для получения дополнительной информации см. [Практическое руководство. Создание ассоциации между сущностями](../sharepoint/how-to-create-an-association-between-entities.md).  
  
## Методы связи  
 Приложения, такие как веб\-части бизнес\-данных SharePoint используют ассоциации, вызывая методы в классе службы сущности.  Чтобы добавить методы в класс службы сущности, нужно выбрать их в **Редакторе ассоциаций**.  
  
 По умолчанию **Редактор ассоциаций** добавляет метод навигации ассоциаций в исходную и конечную сущности.  Метод навигации ассоциаций в исходной сущности позволяет потребителям извлекать список конечных сущностей.  Метод навигации ассоциаций в конечной сущности позволяет потребителям извлекать исходную сущность, которая соотносится с конечной сущностью.  
  
 Чтобы возвратить необходимую информацию, необходимо добавить код в каждый из этих методов.  Кроме того, можно добавить другие типы методов, чтобы обеспечить поддержку более сложных сценариев.  Дополнительные сведения о каждом из этих методов см. в разделе [Поддерживаемые операции](http://go.microsoft.com/fwlink/?LinkId=169286).  
  
## Типы ассоциаций  
 В конструкторе BDC можно создать два типа ассоциаций: ассоциации на основе внешнего ключа и ассоциации без внешнего ключа.  
  
### Ассоциация на основе внешнего ключа  
 Чтобы создать ассоциацию на основе внешнего ключа, можно связать идентификатор в исходной сущности с дескрипторами типа, определенными в конечной сущности.  Это отношение позволяет потребителям модели предоставлять своим пользователям интерфейс с расширенными возможностями.  Например, форма в приложении Outlook, позволяющая пользователю создавать заказ, в котором клиенты отображаются в раскрывающемся списке; либо список заказов в SharePoint, позволяющий пользователям открывать страницу профиля клиента.  
  
 Чтобы создать ассоциацию на основе внешнего ключа, необходимо связать идентификаторы и дескрипторы типа, имеющие одни и те же имена и типы.  Например, можно создать ассоциацию на основе внешнего ключа между сущностями `Contact` и `SalesOrder`.  Сущность `SalesOrder` возвращает дескриптор типа `ContactID` как часть возвращаемого параметра метода поиска и конкретного метода поиска.  Оба дескриптора типа отображаются в **Редакторе ассоциаций**.  Чтобы создать отношение на основе внешнего ключа между сущностями `Contact` и `SalesOrder`, нужно выбрать идентификатор `ContactID` рядом с каждым из этих полей.  
  
 Добавьте код, возвращающий коллекцию конечных сущностей, в метод навигации ассоциаций исходной сущности.  В следующем примере показано возвращение заказа для контакта.  
  
 [!code-csharp[SP_BDC#7](../snippets/csharp/VS_Snippets_OfficeSP/sp_bdc/CS/bdcmodel1/contactservice.cs#7)]
 [!code-vb[SP_BDC#7](../snippets/visualbasic/VS_Snippets_OfficeSP/sp_bdc/VB/bdcmodel1/contactservice.vb#7)]  
  
 Добавьте код, возвращающий исходную сущность, в метод навигации ассоциаций конечной сущности.  В следующем примере показано возвращение контакта, связанного с заказом.  
  
 [!code-csharp[SP_BDC#8](../snippets/csharp/VS_Snippets_OfficeSP/sp_bdc/CS/bdcmodel1/salesorderservice.cs#8)]
 [!code-vb[SP_BDC#8](../snippets/visualbasic/VS_Snippets_OfficeSP/sp_bdc/VB/bdcmodel1/salesorderservice.vb#8)]  
  
### Ассоциация без внешнего ключа  
 Можно создать ассоциацию, не сопоставляя идентификаторы дескрипторам типа поля.  Этот вид ассоциации создается, если исходная сущность не связана прямыми отношениями с конечной сущностью.  Например, таблица `SalesOrderDetail` не имеет внешнего ключа, сопоставляемого первичному ключу в таблице `Contact`.  
  
 Если требуется отобразить сведения в таблице `SalesOrderDetail`, связанные с таблицей `Contact`, можно создать ассоциацию без внешнего ключа между сущностями `Contact` и `SalesOrderDetail`.  
  
 В методе навигации ассоциаций сущности `Contact` необходимо возвратить сущности `SalesOrderDetail`, объединив таблицы или вызвав хранимую процедуру.  
  
 В следующем примере показано возвращение сведений обо всех заказах путем объединения таблиц.  
  
 [!code-csharp[SP_BDC#9](../snippets/csharp/VS_Snippets_OfficeSP/sp_bdc/CS/bdcmodel1/contactservice.cs#9)]
 [!code-vb[SP_BDC#9](../snippets/visualbasic/VS_Snippets_OfficeSP/sp_bdc/VB/bdcmodel1/contactservice.vb#9)]  
  
 В методе навигации ассоциаций сущности `SalesOrderDetail` необходимо возвратить связанную сущность `Contact`.  Это показано в приведенном ниже примере.  
  
 [!code-csharp[SP_BDC#10](../snippets/csharp/VS_Snippets_OfficeSP/sp_bdc/CS/bdcmodel1/salesorderdetailservice.cs#10)]
 [!code-vb[SP_BDC#10](../snippets/visualbasic/VS_Snippets_OfficeSP/sp_bdc/VB/bdcmodel1/salesorderdetailservice.vb#10)]  
  
## См. также  
 [Проектирование модели подключения к бизнес-данным](../sharepoint/designing-a-business-data-connectivity-model.md)   
 [Практическое руководство. Создание ассоциации между сущностями](../sharepoint/how-to-create-an-association-between-entities.md)  
  
  