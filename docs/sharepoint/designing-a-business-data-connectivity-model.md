---
title: "Проектирование модели подключения к бизнес-данным | Документы Microsoft"
ms.custom: 
ms.date: 02/02/2017
ms.reviewer: 
ms.suite: 
ms.technology: office-development
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- VB
- CSharp
- VB
- CSharp
helpviewer_keywords:
- BDC [SharePoint development in Visual Studio], designing a model
- Business Data Connectivity service [SharePoint development in Visual Studio], designing a model
author: TerryGLee
ms.author: tglee
manager: ghogen
ms.workload: office
ms.openlocfilehash: fe3de196219091478a30ff07d6c2f5916d423f15
ms.sourcegitcommit: f9fbf1f55f9ac14e4e5c6ae58c30dc1800ca6cda
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/10/2018
---
# <a name="designing-a-business-data-connectivity-model"></a>Проектирование модели подключения к бизнес-данным
  Можно разрабатывать модель службы бизнес-данным (BDC) путем добавления файла модели сущностей и методов. Сущность описывает коллекцию полей данных. Например сущность может представлять таблицу в базе данных. Метод выполняет задачи, такие как добавление, удаление или обновление данных, представленных сущностями. Дополнительные сведения см. в разделе [интеграции бизнес-данных в SharePoint](../sharepoint/integrating-business-data-into-sharepoint.md).  
  
## <a name="adding-entities"></a>Добавление сущностей  
 Сущность можно добавить, перетащив или скопировав **сущности** из Visual Studio **элементов** в конструктор BDC. Дополнительные сведения см. в разделе [как: Добавление сущности в модель](../sharepoint/how-to-add-an-entity-to-a-model.md).  
  
 Определите поля сущности в классе. Например, можно добавить поле с именем `Address` для `Customer` класса. Можно добавить новый класс в проект или использовать существующий класс, созданный с помощью других средств, таких как реляционный конструктор объектов (O/R-конструктор). Имя сущности и имя класса, представляющего сущность не должны совпадать. Класс относятся к сущности, при определении методы в модели.  
  
## <a name="adding-methods"></a>Добавление методов  
 Служба BDC вызывает методы в модели, когда просмотра, добавления, изменения или удаления данных в списке или веб-части, который основан на модели. Необходимо добавить метод в модель для каждой задачи, которые может выполнить пользователь. Создайте методы, выбрав любой из пяти основных типов методов из **Подробности метода BDC** окна. В следующей таблице описаны пять основных методов модели BDC.  
  
|Метод|Описание:|  
|------------|-----------------|  
|Finder|Возвращает коллекцию экземпляров сущности. Вызывается, когда пользователь открывает список или веб-части. Дополнительные сведения см. в разделе [как: Добавление метода Finder](../sharepoint/how-to-add-a-finder-method.md).|  
|Конкретный поиск|Возвращает конкретный экземпляр сущности. Вызывается, когда пользователь просматривает сведения конкретного элемента в списке. Дополнительные сведения см. в разделе [как: добавить конкретный метод поиска](../sharepoint/how-to-add-a-specific-finder-method.md).|  
|Создание|Добавляет новые данные в источник данных сущности. Вызывается при нажатии пользователем **новый элемент** кнопки на ленте списка, который основан на модели. Дополнительные сведения см. в разделе [как: Добавление метода Creator](../sharepoint/how-to-add-a-creator-method.md).|  
|Обновление|Изменяет данные в списке. Вызывается при обновлении пользователем информации в списке. Дополнительные сведения см. в разделе [как: Добавление метода Updater](../sharepoint/how-to-add-an-updater-method.md).|  
|Удаление|Удаляет данные. Вызывается, когда пользователь удаляет элемент из списка. Дополнительные сведения см. в разделе [как: Добавление метода Deleter](../sharepoint/how-to-add-a-deleter-method.md).|  
  
## <a name="defining-method-parameters"></a>Определение параметров метода  
 При создании метода, Visual Studio добавляет входные и выходные параметры, подходящие для типа метода. Эти параметры являются всего лишь заполнители. В большинстве случаев необходимо изменить параметры, чтобы они передавали или возвращали правильный тип данных. Например метод поиска по умолчанию возвращает строку. В большинстве случаев вы хотите изменить возвращаемый параметр метода поиска таким образом, чтобы он возвращает коллекцию сущностей. Можно решить, изменив дескриптор типа параметра. Дескриптор типа является коллекция атрибутов, описывающий тип данных параметра. Дополнительные сведения см. в разделе [как: определение дескриптора типа параметра](../sharepoint/how-to-define-the-type-descriptor-of-a-parameter.md).  
  
 Visual Studio позволяет копировать дескрипторы типов между параметрами в модели. Например, можно определить дескриптор типа с именем `CustomerTD` для возвращаемого параметра `GetCustomer` метод. Можно скопировать `CustomerTD` дескриптор в типа **Обозреватель BDC**и вставьте этот дескриптор типа во входной параметр `CreateCustomer` метода. Это позволяет избежать для определения тот же дескриптор типа более одного раза.  
  
##  <a name="MethodInstances"></a>Метод экземпляров  
 При создании метода, Visual Studio добавляет метод экземпляра по умолчанию. Экземпляр метода имеет ссылку на метод, а также значения по умолчанию для параметров. Один метод может иметь несколько экземпляров метода. Каждый экземпляр является сочетание сигнатуру метода и набор значений по умолчанию. Дополнительные сведения см. в разделе [как: определение дескриптора типа параметра](../sharepoint/how-to-define-the-type-descriptor-of-a-parameter.md).  
  
 При запуске проекта, экземпляры метода появляются в раскрывающемся списке над списком SharePoint. Пользователи могут выбирать экземпляры метода для просмотра данных.  
  
 Чтобы добавить значения по умолчанию для экземпляра метода, необходимо непосредственно изменить XML модели. Дополнительные сведения см. в разделе [DefaultValue](http://go.microsoft.com/fwlink/?LinkID=169279).  
  
## <a name="adding-filter-descriptors"></a>Добавление дескрипторы фильтров  
 Потребителям модели может потребоваться получить экземпляры сущности, соответствующих некоторым условиям. Чтобы включить эту функцию, можно добавить дескриптор фильтра к методу. Дескрипторы фильтра позволяют пользователям модели фильтровать результирующий набор элементов метода путем передачи значения методу перед их выполнением. Дополнительные сведения см. в разделе [как: Добавление параметров фильтра операции с экземплярами ограничение из внешней системы](http://go.microsoft.com/fwlink/?LinkID=169267).  
  
 SharePoint предоставляет несколько функций, позволяющих пользователям вводить значения фильтра. Например веб-части бизнес-данных предоставляют текстовое поле фильтра. Пользователи могут ограничить данные в списке путем ввода значения в это текстовое поле. Дополнительные сведения о том, как добавить в метод дескриптор фильтра см. в разделе [как: Добавление дескриптора фильтра в метод Finder](../sharepoint/how-to-add-a-filter-descriptor-to-a-finder-method.md).  
  
### <a name="filter-descriptor-properties"></a>Свойства дескриптора фильтра  
 Необходимо задать значение **связанный дескриптор типа**, **имя**, и **тип** свойства дескриптора фильтра. Все остальные свойства являются необязательными.  
  
 **Связанный дескриптор типа** свойство связывает дескриптор фильтра для входного параметра. Когда пользователь вводит значение фильтра, служба BDC передает это значение в метод с помощью входного параметра.  
  
 **Тип** свойство описывает шаблон фильтрации, который вы хотите использовать. В SharePoint, выбранный шаблон фильтрации влияет на текст, отображаемый в интерфейсе пользователя (ИП). Например, для шаблона фильтрации алгоритм сравнения, текст **равен** отображается как элемент управления выше веб-часть данных предприятия. Дополнительные сведения о каждом шаблоне фильтрации см. в разделе [типы из фильтров, поддерживаемые BDC](http://go.microsoft.com/fwlink/?LinkId=169287).  
  
 Дополнительные сведения о свойствах дескриптора фильтра см. в разделе [дескриптора фильтра](http://go.microsoft.com/fwlink/?LinkID=169280).  
  
### <a name="providing-default-values"></a>Использование значений по умолчанию  
 В некоторых случаях пользователь может не обеспечивать значение фильтра. Можно предоставлять значение по умолчанию путем добавления значения по умолчанию для экземпляра метода, или установив значение по умолчанию в коде метода. Дополнительные сведения о том, как добавить значение по умолчанию для экземпляра метода см. в разделе [MethodInstance](http://go.microsoft.com/fwlink/?LinkID=169282). Пример того, как задать значение по умолчанию для входного параметра в коде метода см. в разделе [как: Добавление дескриптора фильтра в метод Finder](../sharepoint/how-to-add-a-filter-descriptor-to-a-finder-method.md).  
  
## <a name="validating-the-model"></a>Проверка модели  
 Модель можно проверить во время разработки. Visual Studio выявляет проблемы, которые могут помешать модель работает должным образом. Эти ошибки отображаться в Visual Studio **список ошибок**.  
  
 Модель можно проверить, открыв контекстное меню для конструктора BDC и выбрав **проверки**. Если модель содержит ошибки, они отображаются в **список ошибок**. Можно быстро переместить курсор в код, который содержит ошибку, дважды щелкнув на нее в списке. В качестве альтернативы можно использовать клавиши F8 или Shift+F8, чтобы перемещаться вперед и назад по списку ошибок.  
  
 При нарушении правила модели иным образом, могут происходить ошибки проверки. Например если **IsCollection** дескриптора типа свойству **true**, но дочерний дескриптор типа не существует, отображается ошибка проверки. Возможно, потребуется обратиться к правилам модели BDC, чтобы понять некоторые ошибки, которые отображаются в Visual Studio **список ошибок**. Дополнительные сведения о правилах модели BDC см. в разделе [BDCMetadata схемы](http://go.microsoft.com/fwlink/?LinkID=169275).  
  
## <a name="debugging-the-solution-that-contains-the-model"></a>Отладка решения, содержащего модель  
 Можно отлаживать код при отладке любого кода в Visual Studio. Для отладки кода, устанавливать точки останова в любом месте в коде и запустите отладчик. Visual Studio откроется сайт SharePoint. В SharePoint создайте список или веб-части, который использует бизнес-данных. После этого можно пошагово проходить кода. Дополнительные сведения об отладке проектов SharePoint см. в разделе [Устранение неполадок решений SharePoint](../sharepoint/troubleshooting-sharepoint-solutions.md).  
  
 Также можно отлаживать код в пользовательские сборки, добавьте в проект. Однако для отладки кода в пользовательской сборке необходимо добавить сборку в пакет решения. Дополнительные сведения см. в разделе [как: Добавление и удаление дополнительных сборок](../sharepoint/how-to-add-and-remove-additional-assemblies.md).  
  
 Дополнительные сведения о добавлении пользовательской сборки в проект см. в разделе [как: Добавление пользовательской сборки в функцию BDC](../sharepoint/how-to-include-a-custom-assembly-in-a-bdc-feature.md).  
  
### <a name="configuring-bdc-security"></a>Настройка системы безопасности BDC  
 Может потребоваться изменить параметры безопасности в SharePoint для отладки решения. Чтобы изменить эти параметры, откройте приложение службы подключения к данным бизнеса в SharePoint 2010 центральный веб-сайт администрирования. В **задание разрешений хранилища метаданных** диалоговое окно, добавьте учетной записи пользователя и выберите любой из следующих параметров:  
  
|Задача|Параметр|  
|----------|------------|  
|Развертывание моделей в службе BDC.|Правка|  
|Для создания списков и веб-частей с помощью внешних типов контента (сущностей) в модели.|Выбирается в клиентах|  
|Создание, чтение, обновление и удаление данных сущности.|Выполнение|  
  
 Дополнительные сведения об этих параметрах см. в разделе [управления службы Business Data Connectivity](http://go.microsoft.com/fwlink/?LinkID=178883).  
  
 Можно также задать разрешения безопасности для отдельных моделей или внешних типов контента. Дополнительные сведения о настройке разрешений безопасности модели см. в разделе [управление модели BDC](http://go.microsoft.com/fwlink/?LinkID=178884). Дополнительные сведения о настройке разрешений безопасности для внешнего типа содержимого см. в разделе [управления внешнего типа контента](http://go.microsoft.com/fwlink/?LinkID=178885).  
  
> [!NOTE]  
>  Эти параметры можно используйте для отладки решения на локальном сервере SharePoint. Дополнительные сведения о том, как настроить параметры безопасности каталога бизнес-данных на рабочем сервере SharePoint см. в разделе [Общие сведения о безопасности бизнес-данных подключения службы](http://go.microsoft.com/fwlink/?LinkID=178886).  
  
### <a name="retracting-models-that-become-corrupt"></a>Отзыв поврежденных моделей  
 При первом запуске отладчика Visual Studio развертывает всю модель в SharePoint. После этого каждый раз Visual Studio обновляет модель в SharePoint с любыми изменениями, внесенными между развертываниями.  
  
 Может возникнуть ситуация, где требуется Visual Studio полностью отозвать модель из SharePoint. Например модель может быть повреждена.  Чтобы повторно развернуть модель в SharePoint, задайте **добавочное обновление** свойство модели и **False**, и запустите отладчик. **Добавочное обновление** свойство появляется в **свойства** окно при выборе узла, представляющего модель в **Обозреватель BDC**. По умолчанию является имя модели **BdcModel1**.  
  
### <a name="changing-identifier-names-of-entities-in-the-model"></a>Изменение имен идентификаторов сущностей в модели  
 При изменении имени идентификатора после развертывания модели, может появиться ошибка развертывания. Не удается устранить эту ошибку, задав **добавочное обновление** свойство модели и **False**. Необходимо вручную отозвать модель и затем повторно развернуть решение. Дополнительные сведения см. в разделе [Устранение неполадок решений SharePoint](../sharepoint/troubleshooting-sharepoint-solutions.md). Этой ошибки можно избежать, установив **добавочное обновление** свойства **False** до первого развертывания модели.  
  
## <a name="locating-documentation-for-bdc-model-elements"></a>Поиск документации для элементов модели BDC  
 Visual Studio добавляет XML-элемента модели, для каждой сущности, метода или другой элемент, который вы создаете. Атрибуты элемента отображаются как свойства в **свойства** окна. Сведения о элементы и атрибуты, создаваемые в Visual Studio при разработке модели см. в разделе [BDCMetadata схемы](http://go.microsoft.com/fwlink/?LinkID=169275).  
  
## <a name="related-topics"></a>См. также  
  
|Заголовок|Описание:|  
|-----------|-----------------|  
|[Общие сведения о средствах разработки моделей подключения к бизнес-данным](../sharepoint/bdc-model-design-tools-overview.md)|Описание средств, которые можно использовать для визуального проектирования модели для BDC.|  
|[Практическое руководство. Добавление сущности в модель](../sharepoint/how-to-add-an-entity-to-a-model.md)|Показано, как добавить в модель внешних типов контента или сущностей.|  
|[Практическое руководство. Добавление метода Finder](../sharepoint/how-to-add-a-finder-method.md)|Показано, как добавить метод, который позволяет пользователям просматривать список сущностей в списке или веб-части.|  
|[Практическое руководство. Добавление определенного метода Finder](../sharepoint/how-to-add-a-specific-finder-method.md)|Показано, как добавить метод, который позволяет пользователям просматривать сведения об определенной сущности.|  
|[Практическое руководство. Добавление метода Creator](../sharepoint/how-to-add-a-creator-method.md)|Показано, как добавить метод, который позволяет пользователям добавлять записи с источником данных непосредственно из списка или веб-части.|  
|[Практическое руководство. Добавление метода Deleter](../sharepoint/how-to-add-a-deleter-method.md)|Показано, как добавить метод, который позволяет пользователям удалять данные из источника данных с помощью параметров пользовательского интерфейса списка или веб-части.|  
|[Практическое руководство. Добавление метода Updater](../sharepoint/how-to-add-an-updater-method.md)|Показано, как добавить метод, который позволяет пользователям изменять данные в источнике данных непосредственно из списка или веб-части.|  
|[Практическое руководство. Добавление параметра в метод](../sharepoint/how-to-add-a-parameter-to-a-method.md)|Показано, как использовать окно сведений метод в Visual Studio для добавления параметров ввода и возвращаемые в метод.|  
|[Практическое руководство. Определение дескриптора типа параметра](../sharepoint/how-to-define-the-type-descriptor-of-a-parameter.md)|Показано, как определить типы данных параметров в модели.|  
|[Практическое руководство. Определение экземпляра метода](../sharepoint/how-to-define-a-method-instance.md)|Демонстрируется создание экземпляра метода, выполняющего BDC.|  
|[Практическое руководство. Добавление дескриптора фильтра в метод Finder](../sharepoint/how-to-add-a-filter-descriptor-to-a-finder-method.md)|Показано, как предоставить пользователям возможность ограничить число возвращаемых методом поиска экземпляров.|  
|[Создание ассоциации между сущностями](../sharepoint/creating-an-association-between-entities.md)|Описывает, как можно определить отношения между сущностями в модели. Веб-части бизнес-данных, внешних списков и пользовательских приложений могут отображать эти отношения данных в пользовательском интерфейсе (UI).|  
|[Как: Создание ассоциации между сущностями](../sharepoint/how-to-create-an-association-between-entities.md)|Показано, как определить связи между сущностями в модели.|  
|[Пошаговое руководство. Создание внешнего списка в SharePoint с помощью бизнес-данных](../sharepoint/walkthrough-creating-an-external-list-in-sharepoint-by-using-business-data.md)|Содержит пошаговые инструкции, в которых описывается создание и тестирование модели, отображающей Контакты во внешнем списке SharePoint.|  
|[Интеграция бизнес-данных в SharePoint](../sharepoint/integrating-business-data-into-sharepoint.md)|Обзор создания и проектирования моделей для службы BDC.|  
  
  