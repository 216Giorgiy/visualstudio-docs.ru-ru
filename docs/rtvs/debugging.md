---
title: "Отладка с помощью средств R для Visual Studio | Документация Майкрософт"
ms.custom: 
ms.date: 5/1/2017
ms.prod: visual-studio-dev15
ms.reviewer: 
ms.suite: 
ms.technology:
- devlang-r
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: cb5fe5f8-03bc-42bf-8346-c845036a9c6c
caps.latest.revision: 1
author: kraigb
ms.author: kraigb
manager: ghogen
translation.priority.ht:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
ms.translationtype: Human Translation
ms.sourcegitcommit: 7a873df77756e5a957d327049566c8e0db1f3a8a
ms.openlocfilehash: 01bc916eb656cb8e24279498b7b0236fb8eb0e80
ms.contentlocale: ru-ru
ms.lasthandoff: 05/12/2017

---


# <a name="debugging-r-in-visual-studio"></a>Отладка с помощью средств R в Visual Studio

Средства R для Visual Studio (RTVS) интегрируются с полным набором функций отладки Visual Studio (см. раздел [Отладка в Visual Studio](../debugger/debugging-in-visual-studio.md)), включая точки останова, присоединение к выполняемым процессам, проверку и контроль значений переменных, проверку стека вызовов и т. д. В этом разделе рассматриваются эти аспекты отладки, уникальные для R и RTVS.

Запуск отладчика для запуска R в проекте R осуществляется так же, как и для проектов других типов: выберите **Отладка > Начать отладку**, нажмите клавишу F5 или выберите **Исходный файла запуска** на панели инструментов отладки, как показано ниже. Чтобы изменить файл запуска, щелкните правой кнопкой мыши файл в обозревателе решений и выберите **Назначить запускаемым скриптом R**.

![Кнопка запуска отладчика для R](media/debugger-start-button.png)

Во всех случаях при запуске отладчика в интерактивном окне отображается "источник" файла — файл загружается и запускается в этом окне. По сути при запуске отладки в интерактивном окне отображаются выходные данные, аналогичные указанному ниже.

```output
> rtvs::debug_source("c:/proj/rproject1/rproject1/script.R")
Sourcing: c:\proj\rproject1\rproject1\script.R
Sourcing: c:\proj\rproject1\rproject1\Settings.R
```

Как можно заметить, для использования скрипта в качестве источника мы используем функцию `rtvs::debug_source`. Это необходимо, поскольку RTVS требуется изменить код в процессе его подготовки к отладке. При использовании команды RTVS (например, щелкнув правой кнопкой мыши файл в обозревателе решений и выбрав команду **Использовать выбранные файлы в качестве источника**) мы автоматически перенаправим вызов в `rtvs::debug_source`, если подключен отладчик.

Можно также вручную подключить отладчик из интерактивного окна, выбрав команду **Инструменты R > Сеанс > Подключить отладчик**, команду **Отладка > Подключить к интерактивному окну R** или команду **Подключить отладчик** на панели инструментов в интерактивном окне. После этого необходимо использовать файлы, подлежащие отладке, в качестве источника. Если это необходимо сделать вручную, воспользуйтесь `rtvs::debug_source` вместо обычной команды `source` в R. Можно обнаружить, что в _некоторых_ случаях это работает, однако мы не гарантируем, что отладка будет работать во всех случаях, когда не используется команда `rtvs::debug_source`.

Такое подключение между отладчиком и интерактивным окном упрощает такие операции, как вызов (и отладка) функции с различными значениями параметров. Например, предположим, что в файле источника имеется следующая функция (что означает, что она загружается в сеанс).

```R
add <- function(x, y) {
    return(x + y)
}
```

Затем необходимо задать точку останова в операторе `return`. Теперь в интерактивном окне можно увидеть, что при вводе `add(4,5)` отладчик останавливается в точке останова.


## <a name="environment-browser-in-the-interactive-window"></a>Обозреватель среды в интерактивном окне

При остановке в отладчике также выполняется остановка на запросе обозревателя среды в [интерактивном окне](interactive-repl.md). Запрос отображается как `Browse[n]>`, где n является числом.

Обозреватель среды поддерживает ряд специальных команд.

| Команда | Описание | 
| --- | --- |
| n | Далее: выполняется следующий оператор в файле кода (то же, что и шаг с обходом). |
| s | Шаг с заходом: выполняются следующий оператор в файле кода и заход в область функции, если следующий оператор является вызовом функции. | 
| f | Готово: выполняется остальная часть текущей области функции, а управление возвращается вызывающему (то же, что и шаг с выходом). |
| c, cont | Продолжение: запуск программы до следующей точки останова. | 
| Q | Выход: завершение сеанса отладки. |
| где | Отображение стека: отображение стека вызовов в интерактивном окне. |
| help | Отображение справки: отображение списка доступных команд в интерактивном окне. |
| &lt;expr&gt; | Вычисление выражения в *expr*. |

![Обозреватель среды в интерактивном окне](media/debugger-environment-browser.png)

