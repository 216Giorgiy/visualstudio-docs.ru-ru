---
title: "Начало работы с инструментами R для Visual Studio | Документы Майкрософт"
ms.custom: 
ms.date: 4/26/2017
ms.prod: visual-studio-dev15
ms.reviewer: 
ms.suite: 
ms.technology:
- devlang-r
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 39228cf0-8d21-43bb-a2ce-5e5fdc81ec41
caps.latest.revision: 1
author: kraigb
ms.author: kraigb
manager: ghogen
translation.priority.ht:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
ms.translationtype: Human Translation
ms.sourcegitcommit: 7a873df77756e5a957d327049566c8e0db1f3a8a
ms.openlocfilehash: 27c16d7315acaa0efd4aa8b866b44784ffe056a4
ms.contentlocale: ru-ru
ms.lasthandoff: 05/12/2017

---

# <a name="getting-started-with-r-tools-for-visual-studio"></a>Начало работы с инструментами R для Visual Studio

После установки инструментов R для Visual Studio (RTVS) (см. раздел [Установка](installation.md)) можно сразу же приступить к работе с этими инструментами. В разделах ниже представлен краткий обзор возможностей RTVS.

- [Создание проекта R](#create-an-r-project)
- [Изучение интерактивного окна и IntelliSense](#explore-the-interactive-window-and-intellisense)
- [Изучение функций редактирования кода](#experience-code-editing-features)
- [Отладка кода](#debugging-your-code)
- [Дальнейшие действия](#next-steps)

## <a name="create-an-r-project"></a>Создание проекта R

1. Запустите Visual Studio.
1. Выберите **Файл > Создать > Проект...** (CTRL+SHIFT+N)
1. В разделе **Шаблоны > R** выберите "Проект R" и присвойте имя проекту, укажите его расположение, а затем нажмите **ОК**.

   ![Диалоговое окно создания проекта R в Visual Studio (RTVS в VS2017)](media/getting-started-01-new-project.png)

1. После создания проекта вы увидите следующее.

    - Справа находится обозреватель решений Visual Studio, где ваш проект отображается внутри *решения*. (Решения могут содержать несколько проектов различных типов; подробнее см. в разделе [Проекты](projects.md).)
    - В левом верхнем углу находится новый R-файл (`script.R`), в котором можно редактировать исходный код, используя все доступные средства редактирования Visual Studio.
    - В левом нижнем углу находится **интерактивное окно R**, в котором можно в интерактивном режиме разрабатывать и тестировать код.

> [!Note]
> **Интерактивное окно R** можно использовать даже в том случае, если не открыт ни один проект, и даже тогда, когда загружен проект другого типа. Для этого достаточно в любое время выбрать **Инструменты R > Окна > Интерактивное окно R**.

## <a name="explore-the-interactive-window-and-intellisense"></a>Изучение интерактивного окна и IntelliSense

1. Проверьте, что интерактивное окно работает. Для этого введите `3 + 4` и нажмите клавишу ВВОД, чтобы просмотреть результат.

    ![Интерактивное окно R в Visual Studio 2017 (VS2017)](media/getting-started-02-interactive1.png)

1. Введите нечто более сложное, `ds <- c(1.5, 6.7, 8.9) * 1:12`, а затем введите `ds` для просмотра результата.

    ![Дополнительный интерактивный пример для R в Visual Studio](media/getting-started-03-interactive2.png)

1. Введите `mean(ds)`, однако обратите внимание, что по мере ввода `m` или `me`, Visual Studio IntelliSense предложит варианты автоматического завершения, как показано ниже. Выбрав в списке требуемый вариант завершения, нажмите клавишу TAB для вставки. Выбор можно изменить с помощью мыши или клавиш со стрелками.

    ![Отображение IntelliSense при вводе кода](media/getting-started-04-intellisense1.png)

1. Завершив ввод `mean`, введите открывающую скобку `(` и обратите внимание на то, как IntelliSense предлагает встроенную справку по функции.

    ![IntelliSense — отображение справки для функции](media/getting-started-05-intellisense2.png)

1. Завершите строку `mean(ds)` и нажмите клавишу ВВОД, чтобы просмотреть результат (`[1] 39.51667`).

1. Интерактивное окно интегрировано со справкой, поэтому введите, например, `?mean`, чтобы отобразить справку по этой функции в окне **Справка R** в Visual Studio. Дополнительные сведения об этой функции см. в разделе [Справка в инструментах R для Visual Studio](getting-started-help.md).

    ![Окно справки R в Visual Studio](media/getting-started-06-help.png)

1. Некоторые команды, такие как `plot(1:100)`, приводят к открытию нового окна в Visual Studio, если выходные данные невозможно отобразить непосредственно в интерактивном окне.

    ![Отображение графика в Visual Studio](media/getting-started-07-plot-window.png)

В интерактивном окне также можно просмотреть журнал, загрузить и сохранить рабочие области, присоединить отладчик, а также взаимодействовать с файлами исходного кода для выполнения операций копирования и вставки с помощью сочетаний клавиш. Подробные сведения см. в разделе [Работа с интерактивным окном R](interactive-repl.md).

## <a name="experience-code-editing-features"></a>Изучение функций редактирования кода

Помимо основных возможностей редактирования, таких как IntelliSense, в интерактивном окне можно использовать те же средства, что и в редакторе кода. Если ввести тот же код, что и раньше, появятся та же функция автозавершения и запросы IntelliSense, однако без выходных данных, конечно.

Написание кода в файле `.R` позволяет посмотреть сразу весь код, а также упрощает внесение небольших изменений в различных частях кода и последующий просмотр результата путем быстрого запуска кода в интерактивном окне. В проекте может быть любое количество файлов. Если код находится в файле, его также можно по шагам запустить в отладчике (как будет показано позже). Все это очень полезно при разработке вычислительных алгоритмов и написании кода для управления одним или несколькими наборами данных, особенно в том случае, если необходимо проверить все промежуточные результаты.

Например, ниже представлен порядок создания небольшого кода для изучения [теоремы центрального предела](https://en.wikipedia.org/wiki/Central_limit_theorem) (Wikipedia). (Этот пример взят из *руководства по R*, разработанного Полом Титором [Paul Teetor].)

1. В редакторе `script.R` введите следующий код.

    ```R
    mu <- 50
    stddev <- 1
    N <- 10000
    pop <- rnorm(N, mean = mu, sd = stddev)
    plot(density(pop), main = "Population Density", xlab = "X", ylab = "")
    ```

1. Чтобы быстро просмотреть результаты, выделите весь код (CTRL + A), а затем нажмите клавиши CTRL + ВВОД или щелкните правой кнопкой мыши и выберите команду **Выполнение в интерактивном режиме**. После этого весь выделенный код вводится в интерактивное окно, как если бы он был введен напрямую, и отображается результат в окне графиков.

    ![Отображение графика в Visual Studio](media/getting-started-08-plot1.png)

1. Чтобы выполнить строку к интерактивном окне, можно просто в любой момент нажать клавиши CTRL + ВВОД.

> [!Tip]
> Изучите схему внесения изменений и нажатия клавиш CTRL + ВВОД (или выделения всего содержимого с помощью клавиш CTRL + A и нажатия клавиш CTRL + ВВОД) для быстрого выполнения кода. Это намного быстрее, чем использовать мышь для выполнения тех же операций.
> 
> Кроме того, можно перетащить и окно построений за пределы Visual Studio и поместить его в любом месте на экране. Это позволяет с легкостью изменить размер окна построений до желаемых размеров и затем сохранить его в качестве изображения или PDF-файла.

1. Добавьте несколько дополнительных строк кода, чтобы добавить второй график.

    ```R
    n <- 30
    samp.means <- rnorm(N, mean = mu, sd = stddev / sqrt(n))    
    lines(density(samp.means))
    ```

1. Нажмите клавиши CTRL + A и CTRL + ВВОД еще раз для повторного выполнения кода и создания следующего.

    ![Обновленный двойной график в Visual Studio](media/getting-started-09-plot2.png)

1. Проблема в том, что первый график определяет вертикальное масштабирование, поэтому второй график (с `lines`) не помещается. Чтобы устранить эту проблему, необходимо задать параметр `ylim` в вызове `plot`, но для того, чтобы выполнить это правильно, нам необходимо добавить код для вычисления максимального вертикального значения. Выполнять это построчно в интерактивном окне довольно неудобно, так как нам нужно изменить порядок кода, чтобы использовать `samp.means` перед вызовом `plot`. Однако в файле кода мы можем с легкостью внести соответствующие изменения.

    ```R
    mu <- 50
    stddev <- 1
    N <- 10000
    pop <- rnorm(N, mean = mu, sd = stddev)

    n <- 30
    samp.means <- rnorm(N, mean = mu, sd = stddev / sqrt(n))
    max.samp.means <- max(density(samp.means)$y)

    plot(density(pop), main = "Population Density",
        ylim = c(0, max.samp.means),
        xlab = "X", ylab = "")
    lines(density(samp.means))
    ```

1. Нажмите клавиши CTRL + A и CTRL + ВВОД еще раз, чтобы просмотреть результат.

    ![Обновленный двойной график в Visual Studio в правильном масштабе](media/getting-started-10-plot3.png)

Возможности редактора, конечно, гораздо больше. Дополнительные сведения см. в разделах [Редактирование кода](code-editing.md), [IntelliSense](code-intellisense.md) и [Фрагменты кода](code-snippets.md).

## <a name="debugging-your-code"></a>Отладка кода

Одним из ключевых преимуществ Visual Studio является его пользовательский интерфейс отладки. В основе RTVS лежит как раз это ключевое преимущество. Кроме того, пользователям предлагается абсолютно новый интерфейс, например [Обозреватель переменных и средство просмотра данных таблицы](variable-explorer.md). Нас интересует отладка.

1. Для начала необходимо сбросить текущую рабочую область, чтобы очистить все, что было сделано до настоящего момента. Для этого выберите команду **Инструменты R > Сеанс > Сбросить**. По умолчанию все, что делается в интерактивном окне, относится к текущему сеансу, который затем также используется в отладчике. Сброс сеанса позволяет гарантировать, что сеанс отладки будет запущен без ранее существовавших данных (если это требуется). Обратите внимание, что это не повлияет на исходный файл `script.R`, поскольку управление им и его сохранение выполняются за пределами рабочей области.

1. В файле `script.R`, созданном в предыдущем разделе, задайте точку останова в строке, которая начинается с `pop <-`, поместив курсор в эту строку и нажав клавишу F9 или выбрав команду **Отладка > Точка останова**. Это можно сделать за один шаг, щелкнув в левом поле (или внутренней области) напротив этой строки, после чего появляется красная точка останова.

    ![Задание точки останова в редакторе](media/getting-started-11-debug1.png)

1. Запустите отладчик с кодом в `script.R` с помощью кнопки **Файл запуска исходного кода** на панели инструментов, команды **Отладка > Файл запуска исходного кода** или с помощью клавиши F5. После этого Visual Studio переходит в режим отладки и запускает выполнение кода. Выполнение будет остановлено на строке, где задана точка останова.

    ![Остановка выполнения в точке останова в отладчике Visual Studio](media/getting-started-12-debug2.png)

1. Во время отладки Visual Studio предоставляет возможность построчно выполнить код, включая возможность пошагового выполнения функций, выполнять шаг с обходом функций или выходом из них в контекст вызова. Все эти, а также другие команды находятся в меню **Отладка**, в контекстном меню в редакторе, а также на панели инструментов отладки.

    ![Панель инструментов отладки в Visual Studio](media/getting-started-13-debug3.png)

1. При остановке в точке останова можно проверить значения переменных. В Visual Studio найдите окно **Видимые** и выберите вкладку **Локальные** внизу окна. В окне **Локальные** показаны локальные переменные в текущей точке программы. При остановке в заданной ранее точке останова можно увидеть, что переменная `pop` еще не определена. Теперь воспользуйтесь командой **Отладка > Шаг с обходом** (F10), чтобы отобразить pop.

    ![Окно "Локальные" в Visual Studio](media/getting-started-14-debug4.png)

1. Для проверки переменных в различных областях, включая глобальную область и области пакета, используется окно [Обозреватель переменных](variable-explorer.md), как показано ниже. В обозревателе переменных можно также переключиться в табличное представление с возможностью сортировки столбцов и экспорта данных в CSV-файл.

    ![Расширенное представление обозревателя переменных](media/variable-explorer-expanded-results.png)

1. Можно продолжить пошаговое выполнение программы по одной строке или выбрать **Продолжить** (F5), чтобы выполнить ее до завершения (или до следующей точки останова).

Дополнительные сведения см. в разделах [Отладка](debugging.md) и [Обозреватель переменных](variable-explorer.md).

## <a name="next-steps"></a>Следующие шаги

В этом пошаговом руководстве вы ознакомились с основами работы с проектами R с помощью интерактивного окна, редактирования кода и отладки в Visual Studio. Чтобы продолжить изучение возможностей RTVS, ознакомьтесь со следующими разделами, а также с теми, которые указаны в оглавлении.

- [Примеры проектов](getting-started-samples.md)
- [Редактирование кода](code-editing.md)
- [Отладка](debugging.md)
- [Рабочие области](workspaces.md)
- [Визуализация данных](visualizing-data.md)

