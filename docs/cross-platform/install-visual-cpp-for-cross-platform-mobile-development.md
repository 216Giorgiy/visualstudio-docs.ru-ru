---
title: Установка Visual C++ для разработки кроссплатформенных мобильных приложений | Документы Майкрософт
ms.custom: ''
ms.date: 05/21/2018
ms.technology: vs-ide-mobile
ms.topic: conceptual
dev_langs:
- C++
ms.assetid: aaea6b8d-55eb-4427-8185-c050f855c257
author: corob-msft
ms.author: corob
manager: jillfra
ms.workload:
- xplat-cplusplus
ms.openlocfilehash: c46644b18188475bd6389a795625209f74a7d9b5
ms.sourcegitcommit: 2193323efc608118e0ce6f6b2ff532f158245d56
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/25/2019
ms.locfileid: "55021992"
---
# <a name="install-cross-platform-mobile-development-with-c"></a>Установка Visual C++ для разработки кроссплатформенных мобильных приложений на языке C++

В Visual Studio можно создавать классические приложения Windows, приложения универсальной платформы Windows (UWP), приложений Linux и теперь приложения iOS и Android на языке C++. Рабочая нагрузка **Разработка мобильных приложений на языке C++** — это набор устанавливаемых компонентов в Visual Studio, который содержит шаблоны кроссплатформенных приложений iOS, Android и UWP. Вместе с ним устанавливаются кроссплатформенные средства и пакеты SDK, что позволяет быстро приступить к работе, не ища, не скачивая и не настраивая их самостоятельно. С помощью этих средств в Visual Studio можно быстро создавать, редактировать, отлаживать и тестировать кроссплатформенные проекты. В этом разделе описывается установка средств и программного обеспечения сторонних разработчиков, необходимых для разработки кроссплатформенных приложений на языке C++ с помощью Visual Studio. Обзор см. на странице [Кроссплатформенная разработка для мобильных устройств на Visual C++](https://go.microsoft.com/fwlink/p/?LinkId=536383).

## <a name="requirements"></a>Требования

- Требования для установки семейства продуктов Visual Studio см. в [этой статье](/visualstudio/productinfo/vs2017-system-requirements-vs).

   > [!IMPORTANT]
   > Если вы используете Windows 7 или Windows Server 2008 R2, вы можете писать код для классических приложений Windows, приложений и библиотек Android Native Activity, а также приложений и библиотек кода для iOS, но не для приложений Windows Phone и UWP.

Применительно к созданию приложений для определенных платформ устройств существует несколько дополнительных требований.

- Эмуляторы Windows Phone и эмулятор Microsoft Visual Studio для Android требуют компьютер, на котором можно запустить Hyper-V. Чтобы установить и запустить эмуляторы, в Windows должен быть включен компонент Hyper-V. Дополнительные сведения см. в разделе [Системные требования эмулятора](system-requirements-for-the-visual-studio-emulator-for-android.md).

- Эмуляторы Android x86, поставляемые с пакетом Android SDK, лучше всего работают на компьютерах, где может выполняться драйвер Intel HAXM. Этот драйвер требует процессора Intel x64 с VT-x и поддержкой Execute Disable Bit. Дополнительные сведения см. в статье [Intel® Hardware Accelerated Execution Manager (Intel® HAXM)](https://go.microsoft.com/fwlink/p/?LinkId=536385).

- Чтобы создать код для iOS, требуется идентификатор Apple ID, учетная запись разработчика iOS и компьютер Mac, на котором может выполняться [Xcode](https://go.microsoft.com/fwlink/p/?LinkId=536387) версии 6 и выше в OS X Mavericks версии 10.9 или более поздних версий. Ссылку на инструкции по установке см. в разделе [Установка инструментов для iOS](#install-tools-for-ios).

## <a name="get-the-tools"></a>Получение инструментов

Рабочая нагрузка "Разработка мобильных приложений на языке C++" доступна в выпусках Visual Studio Community, Professional и Enterprise. Чтобы получить Visual Studio, перейдите на страницу [скачиваемых файлов этого продукта](https://go.microsoft.com/fwlink/p/?linkid=517106). Средства разработки кроссплатформенных мобильных приложений доступны в Visual Studio 2015 с обновлением 2 и более поздних версиях.

## <a name="install-the-tools"></a>Установка инструментов

Установщик Visual Studio Installer для Visual Studio 2017 включает в себя рабочую нагрузку **Разработка мобильных приложений на языке C++**, которая позволяет установить средства языка C++, шаблоны и компоненты, необходимые для разработки приложений Android и iOS в Visual Studio. При этом устанавливаются наборы средств GCC и Clang, необходимые для сборки и отладки решений Android, а также компоненты для взаимодействия с компьютером Mac при разработке для iOS. Также устанавливаются все сторонние средства и комплекты разработки программного обеспечения, необходимые для поддержки разработки приложений iOS и Android. В основном это программное обеспечение с открытым исходным кодом, необходимое для поддержки платформы Android.

- Набор Android Native Development Kit (NDK) требуется для сборки кода C++, предназначенного для платформы Android.

- Для процесса сборки Android требуются наборы Android SDK, Apache Ant и Java SE Development Kit.

- Компоненты Google Android Emulator и Intel Hardware Accelerated Execution Manager устанавливать не обязательно, но рекомендуется. Приложения можно разрабатывать и отлаживать непосредственно на устройстве Android, но часто это проще сделать с помощью эмулятора на компьютере. Корпорация Майкрософт также предоставляет эмулятор Android для Visual Studio, который устанавливается отдельно.

#### <a name="to-install-the-mobile-development-with-c-workload-in-visual-studio-2017"></a>Установка рабочей нагрузки "Разработка мобильных приложений на языке C++" в Visual Studio 2017

1. Запустите **Visual Studio Installer** **Пуск**.

1. Если вы установили Visual Studio, нажмите кнопку **Изменить**, чтобы изменить установленную версию. В противном случае выберите **Установить**, чтобы установить Visual Studio.

1. Выберите вкладку **Рабочие нагрузки**, прокрутите вниз, а затем в установщике Visual Studio Installer выберите рабочую нагрузку **Разработка мобильных приложений на языке C++**. При выборе этой рабочей нагрузки также выбираются другие необходимые компоненты для разработки на языке C++. Ви можете также установить другие рабочие нагрузки и отдельные компоненты. Чтобы создать кроссплатформенный код, который также ориентирован на приложения UWP, выберите рабочую нагрузку **Разработка приложений для универсальной платформы Windows**.

1. В области **Сведения об установке** разверните узел **Разработка мобильных приложений на языке C++**. В разделе **Необязательное** можно выбрать дополнительные версии NDK, эмулятор Google Android Emulator, Intel Hardware Accelerated Execution Manager и средство ускорения сборки IncrediBuild.

1. По умолчанию один или несколько компонентов программы установки пакетов SDK для Android включены в рабочей нагрузке. Доступны также дополнительные версии пакета SDK для Android. Чтобы добавить их к установке, перейдите на вкладку **Отдельные компоненты**, а затем прокрутите вниз до раздела **Пакеты SDK, библиотеки и платформы** и выберите нужные.

1. Нажмите кнопку **Изменить** или **Установить**, чтобы установить рабочую нагрузку **Разработка мобильных приложений на языке C++** и другие выбранные рабочие нагрузки и дополнительные компоненты.

   После завершения установки закройте установщик и перезагрузите компьютер. Некоторые действия установки для компонентов сторонних разработчиков вступают в силу только после перезагрузки компьютера.

   > [!IMPORTANT]
   > Перезагрузка необходима для того, чтобы проверить, все ли установлено правильно.

1. Запустите Visual Studio. Если вы впервые запускаете Visual Studio, настройка и вход могут занять некоторое время. После настройки проверьте наличие обновлений и установите их.

#### <a name="to-install-the-mobile-development-component-and-third-party-tools-in-visual-studio-2015"></a>Установка компонента для разработки мобильных приложений и сторонних средств в Visual Studio 2015

Установщик Visual Studio 2015 включает параметр установки компонента "Visual C++ для разработки кросс-платформенных мобильных приложений", который позволяет установить средства языка C++, шаблоны и компоненты в Visual Studio 2015.

1. Запустите установщик Visual Studio 2015. Чтобы установить дополнительные компоненты, выберите вариант установки **Выборочная** . Нажмите кнопку **Далее** , чтобы выбрать дополнительные компоненты для установки.

1. В разделе **Выбрать компоненты** разверните узел **Кроссплатформенная разработка мобильных приложений** и выберите **Разработка мобильных приложений Visual C++**.

   ![Выбор параметра "Разработка мобильных приложений Visual C&#43;&#43;"](../cross-platform/media/cppmdd_install_vcmdd.png "CPPMDD_Install_VCMDD")

   По умолчанию при выборе пункта **Разработка мобильных приложений Visual C++** в параметре **Языки программирования** выбирается установка **Visual C++**, а в разделе **Общие средства и пакеты средств разработки** выбираются необходимые компоненты сторонних разработчиков для установки. При необходимости можно выбрать дополнительные компоненты. По умолчанию также выбирается **Эмулятор Microsoft Visual Studio для Android**. Компоненты, которые уже установлены, недоступны для выбора в списке.

   Чтобы создавать универсальные приложения для Windows и совместно использовать код между ними и проектами iOS и Android, в разделе **Выбрать компоненты** разверните пункт **Разработка приложений для Windows и веб-приложений** и установите флажок **Средства разработки универсальных приложений Windows**. Если вы не планируете создавать универсальные приложения Windows, можно пропустить этот параметр.

   Чтобы продолжить, нажмите кнопку **Далее** .

1. Компоненты сторонних разработчиков имеют собственные условия лицензии. Чтобы просмотреть условия лицензии, щелкните ссылку **Условия лицензии** рядом с каждым компонентом. Выберите **Установить**, чтобы добавить компоненты и установить Visual Studio и Visual C++ для разработки кроссплатформенных мобильных приложений.

1. После завершения установки закройте установщик и перезагрузите компьютер. Некоторые действия установки для компонентов сторонних разработчиков вступают в силу только после перезагрузки компьютера.

   > [!IMPORTANT]
   > Перезагрузка необходима для того, чтобы проверить, все ли установлено правильно.

   Если не удалось установить компонент "Эмулятор Microsoft Visual Studio для Android", возможно, на вашем компьютере не включен Hyper-V. Используйте приложение панели управления **Включение или отключение компонентов Windows**, чтобы включить Hyper-V, а затем снова запустите установщик Visual Studio.

   > [!NOTE]
   > Если компьютер или версия Windows не поддерживает Hyper-V, компонент "Эмулятор Microsoft Visual Studio для Android" использовать нельзя. Выпуск Home системы Windows не поддерживает Hyper-V.

1. Запустите Visual Studio. Если вы впервые запускаете Visual Studio, настройка и вход могут занять некоторое время. Когда среда Visual Studio будет готова, в меню **Сервис** выберите **Расширения и обновления**, **Обновления**. Если имеются обновления Visual Studio для Visual C++ для разработки кроссплатформенных мобильных приложений или для эмулятора Microsoft Visual Studio для Android, установите их.

## <a name="install-tools-for-ios"></a>Install tools for iOS

Компонент "Visual C++ для разработки кросс-платформенных мобильных приложений" позволяет редактировать, отлаживать и развертывать код iOS в эмуляторе iOS или на устройстве iOS, но из-за ограничений, связанных с лицензированием, выполнять сборку кода необходимо удаленно на компьютере Mac. Для сборки и запуска приложений iOS с помощью Visual Studio необходимо установить и настроить удаленный агент на компьютере Mac. Подробные инструкции по установке, а также сведения о необходимых компонентах и параметрах настройки см. в статье [Установка и настройка средств для разработки с помощью iOS](../cross-platform/install-and-configure-tools-to-build-using-ios.md). Если вы не выполняете сборку для iOS, этот шаг можно пропустить.

## <a name="install-or-update-dependencies-manually"></a>Установка или обновление зависимостей вручную

Если вы решили не устанавливать одну или несколько сторонних зависимостей с помощью установщика Visual Studio при установке рабочей нагрузки **Разработка мобильных приложений на языке C++** (или компонент Visual C++ для разработки мобильных приложений в Visual Studio 2015), вы можете установить их позднее с помощью инструкций в разделе [Установка инструментов](#install-the-tools). Установщик Visual Studio Installer регулярно обновляется, что позволяет устанавливать последние компоненты сторонних разработчиков. С его помощью можно устанавливать обновленные пакеты SDK и NDK. Их также можно установить или обновить отдельно от Visual Studio.

> [!CAUTION]
> Зависимости можно устанавливать в любом порядке, за исключением тех, которые предназначены для Java. JDK необходимо установить и настроить до установки Android SDK.

Прочтите следующую информацию и используйте следующие ссылки для установки зависимостей вручную.

- [Java SE Development Kit](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)

   По умолчанию установщик помещает средства Java в каталог *C:\Program Files (x86)\Java*.

- [Android SDK](https://developer.android.com/sdk/index.html#command-tools)

   Во время установки обновите API-интерфейсы требуемым образом. Убедитесь, что установлен как минимум пакет SDK для Android 5.0 Lollipop (уровень API 21). По умолчанию установщик помещает пакет SDK Android в каталог *C:\Program Files (x86)\Android\android-sdk*.

   Чтобы обновить пакет SDK и установить дополнительные инструменты и уровни API, можно повторно запустить диспетчер пакетов SDK в каталоге SDK Android. Если запустить диспетчер пакетов SDK, не используя команду **Запуск от имени администратора** , обновления могут не установиться. Если при сборке приложений Android возникают проблемы, проверьте наличие обновлений для установленных пакетов SDK в диспетчере пакетов SDK.

   Для использования некоторых эмуляторов Android, входящих в пакет SDK для Android, нужно установить дополнительные драйверы Intel HAXM. Для успешной установки драйверов Intel HAXM может потребоваться удалить компонент Hyper-V из Windows. Для использования эмуляторов Windows Phone и эмулятора Microsoft Visual Studio для Android компонент Hyper-V потребуется восстановить. Дополнительные сведения см. в статье [Аппаратное ускорение эмулятора Android](https://docs.microsoft.com/xamarin/android/get-started/installation/android-emulator/hardware-acceleration?tabs=vswin).

- [Android NDK](https://developer.android.com/tools/sdk/ndk/index.html)

   По умолчанию программа установки помещает пакет Android NDK в каталог *C:\ProgramData\Microsoft\AndroidNDK*. Чтобы обновить установку NDK, можно повторно скачать и установить Android NDK.

- [Apache Ant](https://ant.apache.org/bindownload.cgi)

   По умолчанию установщик помещает Apache Ant в каталог *C:\Program Files (x86)\Microsoft Visual Studio 14.0\Apps*.

- [Эмулятор Microsoft Visual Studio для Android](https://aka.ms/vscomemudownload)

   Android для Microsoft Visual Studio — это необязательный эмулятор, полезный при тестировании и отладке кода. После выпуска эмулятора Android для Microsoft Visual Studio компания Google обновила Android Emulator и добавила в него поддержку аппаратного ускорения Intel HAXM. По возможности советуем использовать этот эмулятор Google, так как он предоставляет доступ к последним образам Android и службам Google Play.

В большинстве случаев Visual Studio обнаруживает конфигурации для установленного стороннего программного обеспечения и прописывает пути установки во внутренних переменных среды. Вы можете переопределить пути по умолчанию для этих средств разработки кроссплатформенных приложений в интегрированной среде разработки Visual Studio.

#### <a name="to-set-the-paths-for-third-party-tools"></a>Задание путей для средств сторонних разработчиков

1. В строке меню Visual Studio выберите **Сервис** > **Параметры**.

1. В диалоговом окне **Параметры** выберите **Кроссплатформенный** > **C++** > **Android**.

   ![Параметры пути к средствам Android](../cross-platform/media/cppmdd_options_android.PNG "CPPMDD_Options_Android")

1. Чтобы изменить путь, используемый средством, установите флажок рядом с ним и измените путь к папке в текстовом поле. Кроме того, можно нажать кнопку обзора (**...**), чтобы открыть диалоговое окно **Выберите местоположение** и выбрать папку.

1. Чтобы сохранить настраиваемое расположение средства, нажмите кнопку **ОК** .

## <a name="see-also"></a>См. также

- [Установка и настройка средств для разработки с помощью iOS](install-and-configure-tools-to-build-using-ios.md)
- [Visual C++ для разработки кросс-платформенных мобильных приложений](https://go.microsoft.com/fwlink/p/?LinkId=536383)
